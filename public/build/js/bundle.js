!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],(function(e){return t(e)})):"object"==typeof exports?module.exports=t(require("jquery")):jQuery&&!jQuery.fn.colorpicker&&t(jQuery)}(0,(function(e){"use strict";var t=function(n,i,o,a,r){this.fallbackValue=o?o&&void 0!==o.h?o:this.value={h:0,s:0,b:0,a:1}:null,this.fallbackFormat=a||"rgba",this.hexNumberSignPrefix=!0===r,this.value=this.fallbackValue,this.origFormat=null,this.predefinedColors=i||{},this.colors=e.extend({},t.webColors,this.predefinedColors),n&&(void 0!==n.h?this.value=n:this.setColor(String(n))),this.value||(this.value={h:0,s:0,b:0,a:1})};t.webColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"transparent"},t.prototype={constructor:t,colors:{},predefinedColors:{},getValue:function(){return this.value},setValue:function(e){this.value=e},_sanitizeNumber:function(e){return"number"==typeof e?e:isNaN(e)||null===e||""===e||void 0===e?1:""===e?0:void 0!==e.toLowerCase?(e.match(/^\./)&&(e="0"+e),Math.ceil(100*parseFloat(e))/100):1},isTransparent:function(e){return!(!e||!("string"==typeof e||e instanceof String))&&("transparent"===(e=e.toLowerCase().trim())||e.match(/#?00000000/)||e.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(e){return 0===e.r&&0===e.g&&0===e.b&&0===e.a},setColor:function(e){if(e=e.toLowerCase().trim()){if(this.isTransparent(e))return this.value={h:0,s:0,b:0,a:0},!0;var t=this.parse(e);t?(this.value=this.value={h:t.h,s:t.s,b:t.b,a:t.a},this.origFormat||(this.origFormat=t.format)):this.fallbackValue&&(this.value=this.fallbackValue)}return!1},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=Math.round(parseInt(100*(1-e),10)/100*100)/100},toRGB:function(e,t,n,i){var o,a,r,s,l;return 0===arguments.length&&(e=this.value.h,t=this.value.s,n=this.value.b,i=this.value.a),e=(e*=360)%360/60,o=a=r=n-(l=n*t),o+=[l,s=l*(1-Math.abs(e%2-1)),0,0,s,l][e=~~e],a+=[s,l,l,s,0,0][e],r+=[0,0,s,l,l,s][e],{r:Math.round(255*o),g:Math.round(255*a),b:Math.round(255*r),a:i}},toHex:function(e,t,n,i){0===arguments.length&&(e=this.value.h,t=this.value.s,n=this.value.b,i=this.value.a);var o=this.toRGB(e,t,n,i);return this.rgbaIsTransparent(o)?"transparent":(this.hexNumberSignPrefix?"#":"")+((1<<24)+(parseInt(o.r)<<16)+(parseInt(o.g)<<8)+parseInt(o.b)).toString(16).slice(1)},toHSL:function(e,t,n,i){0===arguments.length&&(e=this.value.h,t=this.value.s,n=this.value.b,i=this.value.a);var o=e,a=(2-t)*n,r=t*n;return r/=a>0&&a<=1?a:2-a,a/=2,r>1&&(r=1),{h:isNaN(o)?0:o,s:isNaN(r)?0:r,l:isNaN(a)?0:a,a:isNaN(i)?0:i}},toAlias:function(e,t,n,i){var o,a=0===arguments.length?this.toHex():this.toHex(e,t,n,i),r="alias"===this.origFormat?a:this.toString(this.origFormat,!1);for(var s in this.colors)if((o=this.colors[s].toLowerCase().trim())===a||o===r)return s;return!1},RGBtoHSB:function(e,t,n,i){var o,a,r,s;return e/=255,t/=255,n/=255,o=((o=0===(s=(r=Math.max(e,t,n))-Math.min(e,t,n))?null:r===e?(t-n)/s:r===t?(n-e)/s+2:(e-t)/s+4)+360)%6*60/360,a=0===s?0:s/r,{h:this._sanitizeNumber(o),s:a,b:r,a:this._sanitizeNumber(i)}},HueToRGB:function(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n,i){var o;t<0&&(t=0);var a=2*n-(o=n<=.5?n*(1+t):n+t-n*t),r=e+1/3,s=e,l=e-1/3;return[Math.round(255*this.HueToRGB(a,o,r)),Math.round(255*this.HueToRGB(a,o,s)),Math.round(255*this.HueToRGB(a,o,l)),this._sanitizeNumber(i)]},parse:function(t){if(0===arguments.length)return!1;var n,i,o=this,a=!1,r=void 0!==this.colors[t];return r&&(t=this.colors[t].toLowerCase().trim()),e.each(this.stringParsers,(function(e,s){var l=s.re.exec(t);return!(n=l&&s.parse.apply(o,[l]))||(a={},i=r?"alias":s.format?s.format:o.getValidFallbackFormat(),(a=i.match(/hsla?/)?o.RGBtoHSB.apply(o,o.HSLtoRGB.apply(o,n)):o.RGBtoHSB.apply(o,n))instanceof Object&&(a.format=i),!1)})),a},getValidFallbackFormat:function(){var e=["rgba","rgb","hex","hsla","hsl"];return this.origFormat&&-1!==e.indexOf(this.origFormat)?this.origFormat:this.fallbackFormat&&-1!==e.indexOf(this.fallbackFormat)?this.fallbackFormat:"rgba"},toString:function(e,n){n=n||!1;var i=!1;switch(e=e||this.origFormat||this.fallbackFormat){case"rgb":return i=this.toRGB(),this.rgbaIsTransparent(i)?"transparent":"rgb("+i.r+","+i.g+","+i.b+")";case"rgba":return"rgba("+(i=this.toRGB()).r+","+i.g+","+i.b+","+i.a+")";case"hsl":return i=this.toHSL(),"hsl("+Math.round(360*i.h)+","+Math.round(100*i.s)+"%,"+Math.round(100*i.l)+"%)";case"hsla":return i=this.toHSL(),"hsla("+Math.round(360*i.h)+","+Math.round(100*i.s)+"%,"+Math.round(100*i.l)+"%,"+i.a+")";case"hex":return this.toHex();case"alias":return!1===(i=this.toAlias())?this.toString(this.getValidFallbackFormat()):n&&!(i in t.webColors)&&i in this.predefinedColors?this.predefinedColors[i]:i;default:return i}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}],colorNameToHex:function(e){return void 0!==this.colors[e.toLowerCase()]&&this.colors[e.toLowerCase()]}};var n={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",fallbackColor:!1,fallbackFormat:"hex",hexNumberSignPrefix:!0,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},i=function(t,i){this.element=e(t).addClass("colorpicker-element"),this.options=e.extend(!0,{},n,this.element.data(),i),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&e(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=this.createColor(!1!==this.options.color?this.options.color:this.getValue()),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,!1!==this.options.color&&(this.updateInput(this.color),this.updateData(this.color));var o=this.picker=e(this.options.template);if(this.options.customClass&&o.addClass(this.options.customClass),this.options.inline?o.addClass("colorpicker-inline colorpicker-visible"):o.addClass("colorpicker-hidden"),this.options.horizontal&&o.addClass("colorpicker-horizontal"),-1===["rgba","hsla","alias"].indexOf(this.format)&&!1!==this.options.format&&"transparent"!==this.getValue()||o.addClass("colorpicker-with-alpha"),"right"===this.options.align&&o.addClass("colorpicker-right"),!0===this.options.inline&&o.addClass("colorpicker-no-arrow"),this.options.colorSelectors){var a=this,r=a.picker.find(".colorpicker-selectors");r.length>0&&(e.each(this.options.colorSelectors,(function(t,n){var i=e("<i />").addClass("colorpicker-selectors-color").css("background-color",n).data("class",t).data("alias",t);i.on("mousedown.colorpicker touchstart.colorpicker",(function(t){t.preventDefault(),a.setValue("alias"===a.format?e(this).data("alias"):e(this).css("background-color"))})),r.append(i)})),r.show().addClass("colorpicker-visible"))}o.on("mousedown.colorpicker touchstart.colorpicker",e.proxy((function(e){e.target===e.currentTarget&&e.preventDefault()}),this)),o.find(".colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha").on("mousedown.colorpicker touchstart.colorpicker",e.proxy(this.mousedown,this)),o.appendTo(this.container?this.container:e("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":e.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":e.proxy(this.change,this)}),!1===this.component&&this.element.on({"focus.colorpicker":e.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":e.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":e.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":e.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":e.proxy(this.show,this),"focus.colorpicker":e.proxy(this.show,this)}),this.update(),e(e.proxy((function(){this.element.trigger("create")}),this))};i.Color=t,i.prototype={constructor:i,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker","color").off(".colorpicker"),!1!==this.input&&this.input.off(".colorpicker"),!1!==this.component&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(!1!==this.options.inline||this.options.container)return!1;var e=this.container&&this.container[0]!==window.document.body?"position":"offset",t=this.component||this.element,n=t[e]();"right"===this.options.align&&(n.left-=this.picker.outerWidth()-t.outerWidth()),this.picker.css({top:n.top+t.outerHeight(),left:n.left})},show:function(t){this.isDisabled()||(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),e(window).on("resize.colorpicker",e.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!this.component&&this.input||!1!==this.options.inline||e(window.document).on({"mousedown.colorpicker":e.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color}))},hide:function(t){if(void 0!==t&&t.target&&(e(t.currentTarget).parents(".colorpicker").length>0||e(t.target).parents(".colorpicker").length>0))return!1;this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),e(window).off("resize.colorpicker",this.reposition),e(window.document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){return e=e||this.color.toString(this.format,!1),this.element.data("color",e),e},updateInput:function(e){return e=e||this.color.toString(this.format,!1),!1!==this.input&&(this.input.prop("value",e),this.input.trigger("change")),e},updatePicker:function(e){void 0!==e&&(this.color=this.createColor(e));var t=!1===this.options.horizontal?this.options.sliders:this.options.slidersHorz,n=this.picker.find("i");if(0!==n.length)return!1===this.options.horizontal?(t=this.options.sliders,n.eq(1).css("top",t.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",t.alpha.maxTop*(1-this.color.value.a))):(t=this.options.slidersHorz,n.eq(1).css("left",t.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",t.alpha.maxLeft*(1-this.color.value.a))),n.eq(0).css({top:t.saturation.maxTop-this.color.value.b*t.saturation.maxTop,left:this.color.value.s*t.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",(this.options.hexNumberSignPrefix?"":"#")+this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",(this.options.hexNumberSignPrefix?"":"#")+this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format,!0)),e},updateComponent:function(e){var t;if(t=void 0!==e?this.createColor(e):this.color,!1!==this.component){var n=this.component.find("i").eq(0);n.length>0?n.css({backgroundColor:t.toString(this.format,!0)}):this.component.css({backgroundColor:t.toString(this.format,!0)})}return t.toString(this.format,!1)},update:function(e){var t;return!1===this.getValue(!1)&&!0!==e||(t=this.updateComponent(),this.updateInput(t),this.updateData(t),this.updatePicker()),t},setValue:function(e){this.color=this.createColor(e),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:e})},createColor:function(e){return new t(e||null,this.options.colorSelectors,this.options.fallbackColor?this.options.fallbackColor:this.color,this.options.fallbackFormat,this.options.hexNumberSignPrefix)},getValue:function(e){var t;return e=void 0===e?this.options.fallbackColor:e,void 0!==(t=this.hasInput()?this.input.val():this.element.data("color"))&&""!==t&&null!==t||(t=e),t},hasInput:function(){return!1!==this.input},isDisabled:function(){return!!this.hasInput()&&!0===this.input.prop("disabled")},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){!t.pageX&&!t.pageY&&t.originalEvent&&t.originalEvent.touches&&(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("div"),i=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!n.is(".colorpicker")){if(n.is(".colorpicker-saturation"))this.currentSlider=e.extend({},i.saturation);else if(n.is(".colorpicker-hue"))this.currentSlider=e.extend({},i.hue);else{if(!n.is(".colorpicker-alpha"))return!1;this.currentSlider=e.extend({},i.alpha)}var o=n.offset();this.currentSlider.guide=n.find("i")[0].style,this.currentSlider.left=t.pageX-o.left,this.currentSlider.top=t.pageY-o.top,this.mousePointer={left:t.pageX,top:t.pageY},e(window.document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"touchmove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this),"touchend.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){!e.pageX&&!e.pageY&&e.originalEvent&&e.originalEvent.touches&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left))),n=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=n+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,n/this.currentSlider.maxTop),!1!==this.options.format||"setAlpha"!==this.currentSlider.callTop&&"setAlpha"!==this.currentSlider.callLeft||(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(window.document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(e){this.keyup(e)},keyup:function(e){38===e.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===e.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=this.createColor(this.input.val()),this.color.origFormat&&!1===this.options.format&&(this.format=this.color.origFormat),!1!==this.getValue(!1)&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},e.colorpicker=i,e.fn.colorpicker=function(t){var n=Array.prototype.slice.call(arguments,1),o=1===this.length,a=null,r=this.each((function(){var o=e(this),r=o.data("colorpicker");r||(r=new i(this,"object"==typeof t?t:{}),o.data("colorpicker",r)),"string"==typeof t?e.isFunction(r[t])?a=r[t].apply(r,n):(n.length&&(r[t]=n[0]),a=r[t]):a=o}));return o?a:r},e.fn.colorpicker.constructor=i})),function(e,t,n,i){"use strict";var o=function(t,n){this.widget="",this.$element=e(t),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.modalBackdrop=n.modalBackdrop,this.secondStep=n.secondStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.showSeconds=n.showSeconds,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this._init()};o.prototype={constructor:o,_init:function(){var t=this;this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")?(this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":e.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)})):this.template?this.$element.on({"focus.timepicker":e.proxy(this.showWidget,this),"click.timepicker":e.proxy(this.showWidget,this),"blur.timepicker":e.proxy(this.blurElement,this)}):this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)}),!1!==this.template?this.$widget=e(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",e.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each((function(){e(this).on({"click.timepicker":function(){e(this).select()},"keydown.timepicker":e.proxy(t.widgetKeydown,t)})})),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=undefined,this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(e){var t;(t=e?this.minute-e:this.minute-this.minuteStep)<0?(this.decrementHour(),this.minute=t+60):this.minute=t,this.update()},decrementSecond:function(){var e=this.second-this.secondStep;e<0?(this.decrementMinute(!0),this.second=e+60):this.second=e,this.update()},elementKeydown:function(e){switch(e.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case"hour":e.preventDefault(),this.highlightNextUnit();break;case"minute":(this.showMeridian||this.showSeconds)&&(e.preventDefault(),this.highlightNextUnit());break;case"second":this.showMeridian&&(e.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:e.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:e.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(e,t,n,i){return n=n<10?"0"+n:n,(e=e<10?"0"+e:e)+":"+(t=t<10?"0"+t:t)+(this.showSeconds?":"+n:"")+(this.showMeridian?" "+i:"")},getCursorPosition:function(){var e=this.$element.get(0);if("selectionStart"in e)return e.selectionStart;if(n.selection){e.focus();var t=n.selection.createRange(),i=n.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-i}},getTemplate:function(){var e,t,n,i,o,a;switch(this.showInputs?(t='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',n='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',i='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',o='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'):(t='<span class="bootstrap-timepicker-hour"></span>',n='<span class="bootstrap-timepicker-minute"></span>',i='<span class="bootstrap-timepicker-second"></span>',o='<span class="bootstrap-timepicker-meridian"></span>'),a='<table><tr><td><a href="#" data-action="incrementHour"><i class="fa fa-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="fa fa-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="fa fa-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="fa fa-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+t+'</td> <td class="separator">:</td><td>'+n+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+o+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="fa fa-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="fa fa-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="fa fa-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="fa fa-chevron-down"></i></a></td>':"")+"</tr></table>",this.template){case"modal":e='<div class="bootstrap-timepicker-widget modal fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">×</a><h3 class="modal-title">Pick a Time</h3></div><div class="modal-body">'+a+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div></div></div>';break;case"dropdown":e='<div class="bootstrap-timepicker-widget dropdown-menu">'+a+"</div>"}return e},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){!1!==this.isOpen&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),e(n).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var e=this.$element.get(0);this.highlightedUnit="hour",e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(0,2)}),0)},highlightMinute:function(){var e=this.$element.get(0);this.highlightedUnit="minute",e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(3,5)}),0)},highlightSecond:function(){var e=this.$element.get(0);this.highlightedUnit="second",e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(6,8)}),0)},highlightMeridian:function(){var e=this.$element.get(0);this.highlightedUnit="meridian",e.setSelectionRange&&(this.showSeconds?setTimeout((function(){e.setSelectionRange(9,11)}),0):setTimeout((function(){e.setSelectionRange(6,8)}),0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}23!==this.hour?(this.hour++,this.update()):this.hour=0},incrementMinute:function(e){var t;(t=e?this.minute+e:this.minute+this.minuteStep-this.minute%this.minuteStep)>59?(this.incrementHour(),this.minute=t-60):this.minute=t,this.update()},incrementSecond:function(){var e=this.second+this.secondStep-this.second%this.secondStep;e>59?(this.incrementMinute(!0),this.second=e-60):this.second=e,this.update()},remove:function(){e("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(e){if(this.$element.val())this.updateFromElementVal();else if("current"===e){var t=new Date,n=t.getHours(),i=Math.floor(t.getMinutes()/this.minuteStep)*this.minuteStep,o=Math.floor(t.getSeconds()/this.secondStep)*this.secondStep,a="AM";this.showMeridian&&(0===n?n=12:n>=12?(n>12&&(n-=12),a="PM"):a="AM"),this.hour=n,this.minute=i,this.second=o,this.meridian=a,this.update()}else!1===e?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(e)},setTime:function(e){var t,n;this.showMeridian?(n=(t=e.split(" "))[0].split(":"),this.meridian=t[1]):n=e.split(":"),this.hour=parseInt(n[0],10),this.minute=parseInt(n[1],10),this.second=parseInt(n[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?((this.hour>12||this.hour<1)&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":"pm"!==this.meridian&&"p"!==this.meridian||(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)||this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var t=this;e(n).on("mousedown.timepicker",(function(n){0===e(n.target).closest(".bootstrap-timepicker-widget").length&&t.hideWidget()})),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",e.proxy(this.hideWidget,this)):!1===this.isOpen&&this.$widget.addClass("open"),this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement(),this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var e=this.$element.val();e&&this.setTime(e)},updateWidget:function(){if(!1!==this.$widget){var e=this.hour<10?"0"+this.hour:this.hour,t=this.minute<10?"0"+this.minute:this.minute,n=this.second<10?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(e),this.$widget.find("input.bootstrap-timepicker-minute").val(t),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(e),this.$widget.find("span.bootstrap-timepicker-minute").text(t),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var t=e("input.bootstrap-timepicker-hour",this.$widget).val()+":"+e("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+e("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+e("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(t)}},widgetClick:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("a").data("action");n&&this[n]()},widgetKeydown:function(t){var n=e(t.target).closest("input").attr("name");switch(t.keyCode){case 9:if(this.showMeridian){if("meridian"===n)return this.hideWidget()}else if(this.showSeconds){if("second"===n)return this.hideWidget()}else if("minute"===n)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:switch(t.preventDefault(),n){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}break;case 40:switch(t.preventDefault(),n){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}}}},e.fn.timepicker=function(t){var n=Array.apply(null,arguments);return n.shift(),this.each((function(){var i=e(this),a=i.data("timepicker"),r="object"==typeof t&&t;a||i.data("timepicker",a=new o(this,e.extend({},e.fn.timepicker.defaults,r,e(this).data()))),"string"==typeof t&&a[t].apply(a,n)}))},e.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker"},e.fn.timepicker.Constructor=o}(jQuery,window,document),function(e){null==e.fn.inputmask&&(e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,radixPoint:"",skipRadixDance:!1,rightAlignNumerics:!0,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(e,t,n){var i=e.length;return!t&&1<n&&(i+=e.length*(n-1)),i}},val:e.fn.val,escapeRegex:function(e){return e.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")}},e.fn.inputmask=function(t,n){function o(t,n){var i=h.aliases[t];return!!i&&(i.alias&&o(i.alias),e.extend(!0,h,i),e.extend(!0,h,n),!0)}function a(t){var n=!1,i=0,o=h.greedy,a=h.repeat;1==t.length&&0==o&&(h.placeholder="");t=e.map(t.split(""),(function(e){var t=[];if(e==h.escapeChar)n=!0;else if(e!=h.optionalmarker.start&&e!=h.optionalmarker.end||n){var o=h.definitions[e];if(o&&!n)for(e=0;e<o.cardinality;e++)t.push(l(i+e));else t.push(e),n=!1;return i+=t.length,t}}));for(var r=t.slice(),s=1;s<a&&o;s++)r=r.concat(t.slice());return{mask:r,repeat:a,greedy:o}}function r(t){var n=!1,i=!1,o=!1;return e.map(t.split(""),(function(e){var t=[];if(e==h.escapeChar)i=!0;else if(e!=h.optionalmarker.start||i){if(e!=h.optionalmarker.end||i){var a=h.definitions[e];if(a&&!i){for(var r=a.prevalidator,s=r?r.length:0,l=1;l<a.cardinality;l++){var c=(d=s>=l?r[l-1]:[]).validator,d=d.cardinality;t.push({fn:c?"string"==typeof c?RegExp(c):new function(){this.test=c}:/./,cardinality:d||1,optionality:n,newBlockMarker:1==n&&o,offset:0,casing:a.casing,def:a.definitionSymbol|e}),1==n&&(o=!1)}t.push({fn:a.validator?"string"==typeof a.validator?RegExp(a.validator):new function(){this.test=a.validator}:/./,cardinality:a.cardinality,optionality:n,newBlockMarker:o,offset:0,casing:a.casing,def:a.definitionSymbol|e})}else t.push({fn:null,cardinality:0,optionality:n,newBlockMarker:o,offset:0,casing:null,def:e}),i=!1;return o=!1,t}n=!1,o=!0}else o=n=!0}))}function s(){function t(e){var t=e.length;for(i=0;i<t&&e.charAt(i)!=h.optionalmarker.start;i++);var n=[e.substring(0,i)];return i<t&&n.push(e.substring(i+1,t)),n}function n(l,c){var d=0,u=0,p=c.length;for(i=0;i<p&&(c.charAt(i)==h.optionalmarker.start&&d++,c.charAt(i)==h.optionalmarker.end&&u++,!(0<d&&d==u));i++);d=[c.substring(0,i)],i<p&&d.push(c.substring(i+1,p));var f=t(d[0]);1<f.length?(p=l+f[0]+(h.optionalmarker.start+f[1]+h.optionalmarker.end)+(1<d.length?d[1]:""),-1==e.inArray(p,s)&&(s.push(p),u=a(p),o.push({mask:p,_buffer:u.mask,buffer:u.mask.slice(),tests:r(p),lastValidPosition:void 0,greedy:u.greedy,repeat:u.repeat})),p=l+f[0]+(1<d.length?d[1]:""),-1==e.inArray(p,s)&&(s.push(p),u=a(p),o.push({mask:p,_buffer:u.mask,buffer:u.mask.slice(),tests:r(p),lastValidPosition:void 0,greedy:u.greedy,repeat:u.repeat})),1<t(f[1]).length&&n(l+f[0],f[1]+d[1]),1<d.length&&1<t(d[1]).length&&(n(l+f[0]+(h.optionalmarker.start+f[1]+h.optionalmarker.end),d[1]),n(l+f[0],d[1]))):(p=l+d,-1==e.inArray(p,s)&&(s.push(p),u=a(p),o.push({mask:p,_buffer:u.mask,buffer:u.mask.slice(),tests:r(p),lastValidPosition:void 0,greedy:u.greedy,repeat:u.repeat})))}var o=[],s=[];return e.isArray(h.mask)?e.each(h.mask,(function(e,t){n("",t.toString())})):n("",h.mask.toString()),o}function l(e){return h.placeholder.charAt(e%h.placeholder.length)}function c(t,n){var i,o;function a(){return t[n]}function r(){return a().tests}function s(){return a()._buffer}function c(){return a().buffer}function u(i,o,r,s){function l(e,t){for(var n=b(e),i=o?1:0,a="",s=t.buffer,l=t.tests[n].cardinality;l>i;l--)a+=S(s,n-(l-1));return o&&(a+=o),null!=t.tests[n].fn&&t.tests[n].fn.test(a,s,e,r,h)}if(r=!0===r)return!0===(u=l(i,a()))&&(u={pos:i}),u;var d=[],u=!1,p=n;return e.each(t,(function(e){if(p!=(n=e)&&!v(i)){if(o==this._buffer[i]||o==h.skipOptionalPartCharacter)return d.push({activeMasksetIndex:e,result:{refresh:!0,c:this._buffer[i]}}),this.lastValidPosition=i,!1;this.lastValidPosition=s?y()+1:-1}if((null==this.lastValidPosition&&i==(s?x(y()):w(-1))||s||h.numericInput?this.lastValidPosition<=h.numericInput?y():w(i):this.lastValidPosition>=x(i))&&0<=i&&i<y()){if(!1!==(u=l(i,this))){!0===u&&(u={pos:i});var t=u.pos||i;(null==this.lastValidPosition||(s?h.greedy?this.lastValidPosition>t:t==c().length-1:this.lastValidPosition<t))&&(this.lastValidPosition=t)}else this.lastValidPosition=s?i==y()?void 0:w(i):0==i?void 0:x(i);d.push({activeMasksetIndex:e,result:u})}})),n=p,d}function p(i){var o=n,r={activeMasksetIndex:0,lastValidPosition:i?y()+1:-1};e.each(t,(function(e){null!=this.lastValidPosition&&(i||h.numericInput?this.lastValidPosition<r.lastValidPosition:this.lastValidPosition>r.lastValidPosition)&&(r.activeMasksetIndex=e,r.lastValidPosition=this.lastValidPosition)})),o!=(n=r.activeMasksetIndex)&&(i?T(c(),0,x(r.lastValidPosition)):T(c(),w(r.lastValidPosition),y()),a().writeOutBuffer=!0)}function v(e){return e=b(e),null!=(e=r()[e])&&e.fn}function b(e){return e%r().length}function y(){return h.getMaskLength(s(),a().greedy,a().repeat,c(),h)}function w(e){var t=y();if(e>=t)return t;for(;++e<t&&!v(e););return e}function x(e){if(0>=e)return 0;for(;0<--e&&!v(e););return e}function C(e,t,n,i,o){if(i&&(t=_(e,t,o)),i=r()[b(t)],null!=(o=n))switch(i.casing){case"upper":o=n.toUpperCase();break;case"lower":o=n.toLowerCase()}e[t]=o}function S(e,t,n){return n&&(t=_(e,t)),e[t]}function _(e,t,n){if(n)for(;0>t&&e.length<y();)for(n=s().length-1,t=s().length;void 0!==s()[n];)e.unshift(s()[n--]);else for(;null==e[t]&&e.length<y();)for(n=0;void 0!==s()[n];)e.push(s()[n++]);return t}function k(e,t,n){e._valueSet(t.join("")),null!=n&&P(e,n)}function T(e,t,n){for(var i=y();t<n&&t<i;t++)C(e,t,S(s().slice(),t,!0))}function E(e,t){var n=b(t);C(e,t,S(s(),n))}function D(i,o,r,l){var c=e(i).data("inputmask").isRTL;l=null!=l?l.slice():N(i._valueGet(),c).split("");e.each(t,(function(e,t){t.buffer=t._buffer.slice(),t.lastValidPosition=void 0,t.p=c?y():0})),!0!==r&&(n=0),c&&!h.numericInput&&(l=l.reverse());var d=y();e.each(l,(function(t,n){var a=c?h.numericInput?d:d-t-1:t;(v(c?h.numericInput?x(d):d-t-1:t)||!0!==r&&n!=S(s(),a,!0))&&e(i).trigger("keypress",[!0,n.charCodeAt(0),o,r,a])})),!0===r&&(a().lastValidPosition=c?w(a().p):x(a().p))}function I(t){return e.inputmask.escapeRegex.call(this,t)}function N(e,t){return t?e.replace(RegExp("^("+I(s().join(""))+")*"),""):e.replace(RegExp("("+I(s().join(""))+")*$"),"")}function A(t){var n,i,o=c(),a=o.slice();if(e(t).data("inputmask").isRTL)for(i=0;i<=a.length-1&&(n=b(i),r()[n].optionality)&&(!v(i)||!u(i,o[i],!0));i++)a.splice(0,1);else for(i=a.length-1;0<=i&&(n=b(i),r()[n].optionality)&&(!v(i)||!u(i,o[i],!0));i--)a.pop();k(t,a)}function P(t,n,a){var r=t.jquery&&0<t.length?t[0]:t;if("number"!=typeof n)return e(t).is(":visible")?(r.setSelectionRange?(n=r.selectionStart,a=r.selectionEnd):document.selection&&document.selection.createRange&&(t=document.selection.createRange(),n=0-t.duplicate().moveStart("character",-1e5),a=n+t.text.length),{begin:n,end:a}):{begin:0,end:0};e(t).is(":visible")&&(a="number"==typeof a?a:n,0==h.insertMode&&n==a&&a++,r.setSelectionRange?m?(setTimeout((function(){r.selectionStart=n,r.selectionEnd=m?n:a}),10),i=n,o=a):(r.selectionStart=n,r.selectionEnd=a):r.createTextRange&&((t=r.createTextRange()).collapse(!0),t.moveEnd("character",a),t.moveStart("character",n),t.select()))}function R(i){var o=!1,a=0,r=n;return e.each(t,(function(e,t){n=e;var r=x(y());if(null!=t.lastValidPosition&&t.lastValidPosition>=a&&t.lastValidPosition==r){for(var c=!0,d=0;d<=r;d++){var u=v(d),h=b(d);if(u&&(null==i[d]||i[d]==l(d))||!u&&i[d]!=s()[h]){c=!1;break}}if(o=o||c)return!1}a=t.lastValidPosition})),n=r,o}return this.unmaskedvalue=function(t,n){return function(t,n){var i=t[0];return!r()||!0!==n&&t.hasClass("hasDatepicker")?i._valueGet():(D(i,!1,!0),e.map(c(),(function(e,t){return v(t)&&u(t,e,!0)?e:null})).join(""))}(t,n)},this.isComplete=function(e){return R(e)},this.mask=function(I){function O(e,t){if(h.numericInput&&""!=h.radixPoint&&!1===h.skipRadixDance){var n=e._valueGet().indexOf(h.radixPoint);$=t.begin<=n||t.end<=n||-1==n}}function F(e,t,n){for(var i=c();!v(e)&&0<=e-1;)e--;for(var o=e;o<t&&o<y();o++)if(v(o)){E(i,o);var d=w(o),h=S(i,d);if(h!=l(d))if(d<y()&&!1!==u(o,h,!0,$)&&r()[b(o)].def==r()[b(d)].def)C(i,o,S(i,d),!0,$),d<t&&E(i,d);else if(v(o))break}else E(i,o);if(null!=n&&C(i,$?t:x(t),n),0==a().greedy){for(t=N(i.join(""),$).split(""),i.length=t.length,o=0,n=i.length;o<n;o++)i[o]=t[o];0==i.length&&(a().buffer=s().slice())}return e}function M(e,t,n,i){for(var o=c();e<=t&&e<y();e++)if(v(e)){var d=S(o,e);if(C(o,e,n,!0,$),d!=l(e)){if(!((n=w(e))<y()))break;if(!1!==u(n,d,!0,$)&&r()[b(e)].def==r()[b(n)].def)n=d;else{if(v(n))break;n=d}}else if(n=d,!0!==i)break}else E(o,e);if(i=o.length,0==a().greedy){for(n=N(o.join(""),$).split(""),o.length=n.length,e=0,d=o.length;e<d;e++)o[e]=n[e];0==o.length&&(a().buffer=s().slice())}return t-(i-o.length)}var L=e(I);if(L.is(":input")){L.data("inputmask",{masksets:t,activeMasksetIndex:n,opts:h,isRTL:!1}),h.showTooltip&&L.prop("title",a().mask),a().greedy=a().greedy?a().greedy:0==a().repeat;var B=L.prop("maxLength");y()>B&&-1<B&&(B<s().length&&(s().length=B),0==a().greedy&&(a().repeat=Math.round(B/s().length)),L.prop("maxLength",2*y())),function(t){var n;Object.getOwnPropertyDescriptor&&(n=Object.getOwnPropertyDescriptor(t,"value")),n&&n.get?t._valueGet||(t._valueGet=n.get,t._valueSet=n.set,Object.defineProperty(t,"value",{get:function(){var t=e(this),n=e(this).data("inputmask"),i=n.masksets,o=n.activeMasksetIndex;return n&&n.opts.autoUnmask?t.inputmask("unmaskedvalue"):this._valueGet()!=i[o]._buffer.join("")?this._valueGet():""},set:function(t){this._valueSet(t),e(this).triggerHandler("setvalue.inputmask")}})):document.__lookupGetter__&&t.__lookupGetter__("value")?t._valueGet||(t._valueGet=t.__lookupGetter__("value"),t._valueSet=t.__lookupSetter__("value"),t.__defineGetter__("value",(function(){var t=e(this),n=e(this).data("inputmask"),i=n.masksets,o=n.activeMasksetIndex;return n&&n.opts.autoUnmask?t.inputmask("unmaskedvalue"):this._valueGet()!=i[o]._buffer.join("")?this._valueGet():""})),t.__defineSetter__("value",(function(t){this._valueSet(t),e(this).triggerHandler("setvalue.inputmask")}))):(t._valueGet||(t._valueGet=function(){return this.value},t._valueSet=function(e){this.value=e}),1!=e.fn.val.inputmaskpatch&&(e.fn.val=function(){if(0==arguments.length){if((t=e(this)).data("inputmask")){if(t.data("inputmask").opts.autoUnmask)return t.inputmask("unmaskedvalue");var t=e.inputmask.val.apply(t),n=e(this).data("inputmask");return t!=n.masksets[n.activeMasksetIndex]._buffer.join("")?t:""}return e.inputmask.val.apply(t)}var i=arguments;return this.each((function(){var t=e(this),n=e.inputmask.val.apply(t,i);return t.data("inputmask")&&t.triggerHandler("setvalue.inputmask"),n}))},e.extend(e.fn.val,{inputmaskpatch:!0})))}(I),a().undoBuffer=I._valueGet();var z,H=!1,j=!1,$=!1;("rtl"==I.dir||h.numericInput)&&(("rtl"==I.dir||h.numericInput&&h.rightAlignNumerics)&&L.css("text-align","right"),I.dir="ltr",L.removeAttr("dir"),(B=L.data("inputmask")).isRTL=!0,L.data("inputmask",B),$=!0),L.unbind(".inputmask"),L.removeClass("focus.inputmask"),L.bind("mouseenter.inputmask",(function(){!e(this).hasClass("focus.inputmask")&&h.showMaskOnHover&&this._valueGet()!=c().join("")&&k(this,c())})).bind("blur.inputmask",(function(){var i=e(this),o=this._valueGet(),r=c();i.removeClass("focus.inputmask"),o!=a().undoBuffer&&i.change(),h.clearMaskOnLostFocus&&""!=o&&(o==s().join("")?this._valueSet(""):A(this)),R(r)||(i.trigger("incomplete"),h.clearIncomplete&&(e.each(t,(function(e,t){t.buffer=t._buffer.slice(),t.lastValidPosition=void 0,t.p=$?y():0})),n=0,h.clearMaskOnLostFocus?this._valueSet(""):k(this,r=s().slice())))})).bind("focus.inputmask",(function(){var t=e(this),n=this._valueGet();h.showMaskOnFocus&&!t.hasClass("focus.inputmask")&&(!h.showMaskOnHover||h.showMaskOnHover&&""==n)&&this._valueGet()!=c().join("")&&k(this,c(),a().p),t.addClass("focus.inputmask"),a().undoBuffer=this._valueGet()})).bind("mouseleave.inputmask",(function(){var t=e(this);h.clearMaskOnLostFocus&&(t.hasClass("focus.inputmask")||(this._valueGet()==s().join("")||""==this._valueGet()?this._valueSet(""):A(this)))})).bind("click.inputmask",(function(){var t=this;setTimeout((function(){var n=P(t),i=c();if(n.begin==n.end){var o=n.begin,r=a().lastValidPosition;O(t,n),$?(n=h.numericInput?!1===h.skipRadixDance&&""!=h.radixPoint&&-1!=e.inArray(h.radixPoint,i)?e.inArray(h.radixPoint,i):y():x((null==r?y():r)+1),P(t,o>n&&(!1!==u(o,i[o],!0,$)||!v(o))?o:n)):(n=w(null==r?-1:r),P(t,o<n&&(!1!==u(o,i[o],!0,$)||!v(o))?o:n))}}),0)})).bind("dblclick.inputmask",(function(){var e=this;null!=a().lastValidPosition&&setTimeout((function(){$?P(e,x(a().lastValidPosition),y()):P(e,0,w(a().lastValidPosition))}),0)})).bind("keydown.inputmask",(function(i){H=!1;var o=this,r=i.keyCode,u=P(o);if(O(o,u),r==h.keyCode.BACKSPACE||r==h.keyCode.DELETE||f&&127==r||i.ctrlKey&&88==r){i.preventDefault();var m=u.begin;if(0==u.begin&&u.end==y())T(c(),u.begin,u.end),e.each(t,(function(e,t){t.buffer=t._buffer.slice(),t.lastValidPosition=void 0,t.p=$?y():0}));else if(1<u.end-u.begin||1==u.end-u.begin&&h.insertMode){T(c(),u.begin,u.end);var g=y();if(0==h.greedy)$?M(0,u.end-1,l(u.end),!0):F(u.begin,g);else for(var b=u.begin;b<u.end;b++)v(b)&&($?M(0,u.end-1,l(u.end),!0):F(u.begin,g));D(o,!1,!0,c())}else e.each(t,(function(e){n=e,m=d?u.end:u.begin,e=c();var t=$?x(y()+1):w(-1),i=y();r==h.keyCode.DELETE?(($?m>t:m<t)&&(m=t),m<i&&(m=h.numericInput&&""!=h.radixPoint&&e[m]==h.radixPoint?F(m=e.length-1==m?m:w(m),i):$?w(m=M(0,m,l(m),!0)):F(m,i),null!=a().lastValidPosition)&&(-1!=a().lastValidPosition&&c()[a().lastValidPosition]==s()[a().lastValidPosition]&&(a().lastValidPosition=$?w(a().lastValidPosition):0==a().lastValidPosition?-1:x(a().lastValidPosition)),($?a().lastValidPosition>t:a().lastValidPosition<t)?(a().lastValidPosition=void 0,a().p=t):(a().writeOutBuffer=!0,a().p=m))):r==h.keyCode.BACKSPACE&&(($?m<=t:m>t)?(m-=1,h.numericInput&&""!=h.radixPoint&&e[m]==h.radixPoint?(m=M(0,e.length-1==m?m:m-1,l(m),!0),m++):m=$?e[(m=M(0,m,l(m),!0))+1]==h.radixPoint?m+1:w(m):F(m,i),null!=a().lastValidPosition&&(-1!=a().lastValidPosition&&c()[a().lastValidPosition]==s()[a().lastValidPosition]&&(a().lastValidPosition=$?w(a().lastValidPosition):0==a().lastValidPosition?-1:x(a().lastValidPosition)),($?a().lastValidPosition>t:a().lastValidPosition<t)?(a().lastValidPosition=void 0,a().p=t):(a().writeOutBuffer=!0,a().p=m))):0<n&&(a().lastValidPosition=void 0,a().writeOutBuffer=!0,a().p=t,n=0,a().buffer=s().slice(),a().p=$?x(y()+1):w(-1),a().lastValidPosition=void 0))}));p($),k(o,c(),a().p),o._valueGet()==s().join("")&&e(o).trigger("cleared"),h.showTooltip&&L.prop("title",a().mask)}else r==h.keyCode.END||r==h.keyCode.PAGE_DOWN?setTimeout((function(){var e=$?a().lastValidPosition:w(a().lastValidPosition);!h.insertMode&&e==y()&&!i.shiftKey&&e--,P(o,i.shiftKey?u.begin:e,e)}),0):r==h.keyCode.HOME&&!i.shiftKey||r==h.keyCode.PAGE_UP?P(o,0,i.shiftKey?u.begin:0):r==h.keyCode.ESCAPE?(o._valueSet(a().undoBuffer),D(o,!0,!0)):r==h.keyCode.INSERT?(h.insertMode=!h.insertMode,P(o,h.insertMode||u.begin!=y()?u.begin:u.begin-1)):0==h.insertMode&&!i.shiftKey&&(r==h.keyCode.RIGHT?setTimeout((function(){var e=P(o);P(o,e.begin)}),0):r==h.keyCode.LEFT&&setTimeout((function(){var e=P(o);P(o,e.begin-1)}),0));h.onKeyDown.call(this,i,c(),h),j=-1!=e.inArray(r,h.ignorables)})).bind("keypress.inputmask",(function(r,s,d,f,g,b){if(null==d&&H)return!1;H=!0;var E=e(this),D=(r=r||window.event,d=d||r.which||r.charCode||r.keyCode,String.fromCharCode(d));if((r.ctrlKey||r.metaKey||j)&&!0!==s)return!0;if(d){var I,N;s?(d=g?b:h.numericInput?w(a().p):a().p,I={begin:d,end:d}):I=P(this),d=n;var A=!1;if(e.each(t,(function(e){if(n=e,a().undoBuffer=c().join(""),I.end-I.begin>1||I.end-I.begin==1&&h.insertMode){e=I.end<y()?I.end:y(),T(c(),I.begin,e);var t=y();if(0==h.greedy)$?M(0,e-1,l(e),!0):F(I.begin,t);else for(var i=I.begin;i<e;i++)v(i)&&($?M(0,e-1,l(e),!0):F(I.begin,t));A=!0}})),n=d,$){var O=x(A?I.begin:I.end);if(d=u(O,D,g,$),!0===g&&(d=[{activeMasksetIndex:n,result:d}]),e.each(d,(function(e,t){if(n=t.activeMasksetIndex,a().writeOutBuffer=!0,!1!==(s=t.result)){var i=!1,o=c();if(!0!==s&&(i=s.refresh,O=null!=s.pos?s.pos:O,D=null!=s.c?s.c:D),!0!==i){i=y();var r=w(-1),s=r;if(1==h.insertMode){if(1==a().greedy)for(var d=o.slice();S(d,s,!0)!=l(s)&&s<=O;)s=s==i?i+1:w(s);s<=O&&(a().greedy||o.length<i||S(o,O)==l(O))?(o[r]!=l(r)&&o.length<i&&(o=_(o,-1,$),0!=(A?I.begin:I.end)&&(O+=o)),F(s,O,D)):a().writeOutBuffer=!1}else C(o,O,D,!0,$)}a().p=O}})),!0!==g&&p($),!1!==f&&(e.each(d,(function(e,t){if(t.activeMasksetIndex==n)return N=t,!1})),null!=N)){var L=this;if(setTimeout((function(){h.onKeyValidation.call(L,N.result,h)}),0),a().writeOutBuffer&&!1!==N.result){var B=c();k(this,B,s?void 0:h.numericInput?w(a().p):a().p),setTimeout((function(){R(B)&&E.trigger("complete")}),0)}else a().buffer=a().undoBuffer.split("")}}else d=u(O=w(I.begin-1),D,g,$),!0===g&&(d=[{activeMasksetIndex:n,result:d}]),e.each(d,(function(e,t){n=t.activeMasksetIndex,a().writeOutBuffer=!0;var i=t.result;if(!1!==i){var o=!1,r=c();if(!0!==i&&(o=i.refresh,O=null!=i.pos?i.pos:O,D=null!=i.c?i.c:D),!0!==o)if(1==h.insertMode){for(i=y(),o=r.slice();S(o,i,!0)!=l(i)&&i>=O;)i=0==i?-1:x(i);i>=O?M(O,r.length,D):a().writeOutBuffer=!1}else C(r,O,D,!0,$);a().p=w(O)}})),!0!==g&&p($),!1!==f&&(e.each(d,(function(e,t){if(t.activeMasksetIndex==n)return N=t,!1})),null!=N&&(L=this,setTimeout((function(){h.onKeyValidation.call(L,N.result,h)}),0),a().writeOutBuffer&&!1!==N.result?(O=a().p,k(this,B=c(),s?void 0:O),setTimeout((function(){R(B)&&E.trigger("complete")}),0)):a().buffer=a().undoBuffer.split("")));m&&!0!==s&&P(this,i,o),h.showTooltip&&E.prop("title",a().mask),r.preventDefault()}})).bind("keyup.inputmask",(function(t){var n=e(this),i=t.keyCode,o=c();h.onKeyUp.call(this,t,o,h),i==h.keyCode.TAB&&n.hasClass("focus.inputmask")&&0==this._valueGet().length&&h.showMaskOnFocus&&(k(this,o=s().slice()),$||P(this,0),a().undoBuffer=this._valueGet())})).bind(g+".inputmask dragdrop.inputmask drop.inputmask",(function(){var t=this,n=e(t);setTimeout((function(){D(t,!0,!1),R(c())&&n.trigger("complete"),n.click()}),0)})).bind("setvalue.inputmask",(function(){a().undoBuffer=this._valueGet(),D(this,!0),this._valueGet()==s().join("")&&this._valueSet("")})).bind("complete.inputmask",h.oncomplete).bind("incomplete.inputmask",h.onincomplete).bind("cleared.inputmask",h.oncleared),D(I,!0,!1);try{z=document.activeElement}catch(e){}z===I?(L.addClass("focus.inputmask"),P(I,a().lastValidPosition)):h.clearMaskOnLostFocus&&(c().join("")==s().join("")?I._valueSet(""):A(I)),function(t){t=e._data(t).events,e.each(t,(function(t,n){e.each(n,(function(e,t){if("inputmask"==t.namespace){var n=t.handler;t.handler=function(e){if(!this.readOnly&&!this.disabled)return n.apply(this,arguments);e.preventDefault}}}))}))}(I)}},this}var d,u,h=e.extend(!0,{},e.inputmask.defaults,n),p=null!==navigator.userAgent.match(/msie 10/i),f=null!==navigator.userAgent.match(/iphone/i),m=null!==navigator.userAgent.match(/android.*safari.*/i),g=function(e){var t=document.createElement("input"),n=(e="on"+e)in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),n}("paste")&&!p?"paste":"input",v=0;if(m&&(p=navigator.userAgent.match(/safari.*/i),d=533>=parseInt(RegExp(/[0-9]+/).exec(p))),"string"==typeof t)switch(t){case"mask":return o(h.alias,n),u=s(),this.each((function(){c(e.extend(!0,{},u),0).mask(this)}));case"unmaskedvalue":return p=e(this),u=p.data("inputmask").masksets,v=p.data("inputmask").activeMasksetIndex,h=p.data("inputmask").opts,c(u,v).unmaskedvalue(this);case"remove":return this.each((function(){var t=e(this),n=this;setTimeout((function(){var e;t.data("inputmask")&&(u=t.data("inputmask").masksets,v=t.data("inputmask").activeMasksetIndex,h=t.data("inputmask").opts,n._valueSet(c(u,v).unmaskedvalue(t,!0)),t.removeData("inputmask"),t.unbind(".inputmask"),t.removeClass("focus.inputmask"),Object.getOwnPropertyDescriptor&&(e=Object.getOwnPropertyDescriptor(n,"value")),e&&e.get?n._valueGet&&Object.defineProperty(n,"value",{get:n._valueGet,set:n._valueSet}):document.__lookupGetter__&&n.__lookupGetter__("value")&&n._valueGet&&(n.__defineGetter__("value",n._valueGet),n.__defineSetter__("value",n._valueSet)),delete n._valueGet,delete n._valueSet)}),0)}));case"getemptymask":return this.data("inputmask")?(u=this.data("inputmask").masksets,v=this.data("inputmask").activeMasksetIndex,u[v]._buffer.join("")):"";case"hasMaskedValue":return!!this.data("inputmask")&&!this.data("inputmask").opts.autoUnmask;case"isComplete":return u=this.data("inputmask").masksets,v=this.data("inputmask").activeMasksetIndex,h=this.data("inputmask").opts,c(u,v).isComplete(this[0]._valueGet().split(""));default:return o(t,n)||(h.mask=t),u=s(),this.each((function(){c(e.extend(!0,{},u),v).mask(this)}))}else{if("object"==typeof t)return o((h=e.extend(!0,{},e.inputmask.defaults,t)).alias,t),u=s(),this.each((function(){c(e.extend(!0,{},u),v).mask(this)}));if(null==t)return this.each((function(){if((t=e(this).attr("data-inputmask"))&&""!=t)try{var t=t.replace(RegExp("'","g"),'"'),i=e.parseJSON("{"+t+"}");h=e.extend(!0,{},e.inputmask.defaults,n),e.extend(!0,h,i),o(h.alias,i),h.alias=void 0,e(this).inputmask(h)}catch(e){}}))}return this})}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-z]",cardinality:1,casing:"upper"},"#":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:/[fh]/,urlpre2:/(ft|ht)/,urlpre3:/(ftp|htt)/,urlpre4:/(ftp:|http|ftps)/,urlpre5:/(ftp:\/|ftps:|http:|https)/,urlpre6:/(ftp:\/\/|ftps:\/|http:\/|https:)/,urlpre7:/(ftp:\/\/|ftps:\/\/|http:\/\/|https:\/)/,urlpre8:/(ftp:\/\/|ftps:\/\/|http:\/\/|https:\/\/)/},definitions:{i:{validator:function(){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=0;8>t;t++)e[t]=function(){var e=t;return{validator:function(t,n,i,o,a){if(a.regex["urlpre"+(e+1)]){var r=t;if(0<e+1-t.length&&(r=n.join("").substring(0,e+1-t.length)+""+r),t=a.regex["urlpre"+(e+1)].test(r),!o&&!t){for(i-=e,o=0;o<a.defaultPrefix.length;o++)n[i]=a.defaultPrefix[o],i++;for(o=0;o<r.length-1;o++)n[i]=r[o],i++;return{pos:i}}return t}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i.i.i.i",definitions:{i:{validator:"25[0-5]|2[0-4][0-9]|[01][0-9][0-9]",cardinality:3,prevalidator:[{validator:"[0-2]",cardinality:1},{validator:"2[0-5]|[01][0-9]",cardinality:2}]}}}})}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:/[0-3]/,val1:/0[1-9]|[12][0-9]|3[01]/,val2pre:function(t){return t=e.inputmask.escapeRegex.call(this,t),RegExp("((0[1-9]|[12][0-9]|3[01])"+t+"[01])")},val2:function(t){return t=e.inputmask.escapeRegex.call(this,t),RegExp("((0[1-9]|[12][0-9])"+t+"(0[1-9]|1[012]))|(30"+t+"(0[13-9]|1[012]))|(31"+t+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,n){var i=parseInt(e.concat(t.toString().slice(e.length)));e=parseInt(e.concat(n.toString().slice(e.length)));return NaN!=i&&(t<=i&&i<=n)||NaN!=e&&(t<=e&&e<=n)},determinebaseyear:function(e,t){var n=(new Date).getFullYear();return e>n?e:t<n?t:n},onKeyUp:function(t,n,i){n=e(this),t.ctrlKey&&t.keyCode==i.keyCode.RIGHT&&(t=new Date,n.val(t.getDate().toString()+(t.getMonth()+1).toString()+t.getFullYear().toString()))},definitions:{1:{validator:function(e,t,n,i,o){var a=o.regex.val1.test(e);return i||a||e.charAt(1)!=o.separator&&-1=="-./".indexOf(e.charAt(1))||!(a=o.regex.val1.test("0"+e.charAt(0)))?a:(t[n-1]="0",{pos:n,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){var a=o.regex.val1pre.test(e);return i||a||!(a=o.regex.val1.test("0"+e))?a:(t[n]="0",{pos:++n})},cardinality:1}]},2:{validator:function(e,t,n,i,o){var a=t.join("").substr(0,3),r=o.regex.val2(o.separator).test(a+e);return i||r||e.charAt(1)!=o.separator&&-1=="-./".indexOf(e.charAt(1))||!(r=o.regex.val2(o.separator).test(a+"0"+e.charAt(0)))?r:(t[n-1]="0",{pos:n,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){var a=t.join("").substr(0,3),r=o.regex.val2pre(o.separator).test(a+e);return i||r||!(r=o.regex.val2(o.separator).test(a+"0"+e))?r:(t[n]="0",{pos:++n})},cardinality:1}]},y:{validator:function(e,t,n,i,o){return!!o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear)&&(t.join("").substr(0,6)!=o.leapday||0==(e=parseInt(e,10))%4&&(0!=e%100||0==e%400))},cardinality:4,prevalidator:[{validator:function(e,t,n,i,o){var a=o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear);if(!i&&!a){if(i=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear).toString().slice(0,1),a=o.isInYearRange(i+e,o.yearrange.minyear,o.yearrange.maxyear))return t[n++]=i[0],{pos:n};if(i=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear).toString().slice(0,2),a=o.isInYearRange(i+e,o.yearrange.minyear,o.yearrange.maxyear))return t[n++]=i[0],t[n++]=i[1],{pos:n}}return a},cardinality:1},{validator:function(e,t,n,i,o){var a=o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear);if(!i&&!a){if(i=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear).toString().slice(0,2),a=o.isInYearRange(e[0]+i[1]+e[1],o.yearrange.minyear,o.yearrange.maxyear))return t[n++]=i[1],{pos:n};if(i=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear).toString().slice(0,2),o.isInYearRange(i+e,o.yearrange.minyear,o.yearrange.maxyear)?t.join("").substr(0,6)!=o.leapday?a=!0:a=0==(o=parseInt(e,10))%4&&(0!=o%100||0==o%400):a=!1,a)return t[n-1]=i[0],t[n++]=i[1],t[n++]=e[0],{pos:n}}return a},cardinality:2},{validator:function(e,t,n,i,o){return o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){return t=e.inputmask.escapeRegex.call(this,t),RegExp("((0[13-9]|1[012])"+t+"[0-3])|(02"+t+"[0-2])")},val2:function(t){return t=e.inputmask.escapeRegex.call(this,t),RegExp("((0[1-9]|1[012])"+t+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+t+"30)|((0[13578]|1[02])"+t+"31)")},val1pre:/[01]/,val1:/0[1-9]|1[012]/},leapday:"02/29/",onKeyUp:function(t,n,i){n=e(this),t.ctrlKey&&t.keyCode==i.keyCode.RIGHT&&(t=new Date,n.val((t.getMonth()+1).toString()+t.getDate().toString()+t.getFullYear().toString()))}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyUp:function(t,n,i){n=e(this),t.ctrlKey&&t.keyCode==i.keyCode.RIGHT&&(t=new Date,n.val(t.getFullYear().toString()+(t.getMonth()+1).toString()+t.getDate().toString()))},definitions:{2:{validator:function(e,t,n,i,o){var a=t.join("").substr(5,3),r=o.regex.val2(o.separator).test(a+e);return i||r||e.charAt(1)!=o.separator&&-1=="-./".indexOf(e.charAt(1))||!(r=o.regex.val2(o.separator).test(a+"0"+e.charAt(0)))?r?t.join("").substr(4,4)+e!=o.leapday||0==(e=parseInt(t.join("").substr(0,4),10))%4&&(0!=e%100||0==e%400):r:(t[n-1]="0",{pos:n,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){var a=t.join("").substr(5,3),r=o.regex.val2pre(o.separator).test(a+e);return i||r||!(r=o.regex.val2(o.separator).test(a+"0"+e))?r:(t[n]="0",{pos:++n})},cardinality:1}]}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:/[012]/,hrs24:/2[0-9]|1[3-9]/,hrs:/[01][0-9]|2[0-3]/,ampmpre:/[apAP]/,ampm:/^[a|p|A|P][m|M]/},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,n,i,o){var a=o.regex.hrs.test(e);return i||a||e.charAt(1)!=o.timeseparator&&-1=="-.:".indexOf(e.charAt(1))||!(a=o.regex.hrs.test("0"+e.charAt(0)))?a&&"24"!==o.hourFormat&&o.regex.hrs24.test(e)?(e=parseInt(e,10),t[n+5]=24==e?"a":"p",t[n+6]="m",10>(e-=12)?(t[n]=e.toString(),t[n-1]="0"):(t[n]=e.toString().charAt(1),t[n-1]=e.toString().charAt(0)),{pos:n,c:t[n]}):a:(t[n-1]="0",t[n]=e.charAt(0),{pos:++n})},cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){var a=o.regex.hrspre.test(e);return i||a||!(a=o.regex.hrs.test("0"+e))?a:(t[n]="0",{pos:++n})},cardinality:1}]},t:{validator:function(e,t,n,i,o){var a=o.regex.ampm.test(e);return i||a||!(a=o.regex.ampm.test(e+"m"))?a:(t[n-1]=e.charAt(0),t[n]="m",++n)},casing:"lower",cardinality:2,prevalidator:[{validator:function(e,t,n,i,o){return(i=o.regex.ampmpre.test(e))&&(i=o.regex.ampm.test(e+"m"))?(t[n]=e,t[n+1]="m",n):i},cardinality:1}]}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",autoUnmask:!1},"hh:mm":{mask:"h:s",autoUnmask:!1},date:{alias:"dd/mm/yyyy"}})}(jQuery),function(e){e.extend(e.inputmask.defaults.aliases,{decimal:{mask:"~",placeholder:"",repeat:10,greedy:!1,numericInput:!0,digits:"*",groupSeparator:"",radixPoint:".",groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,getMaskLength:function(t,n,i,o,a){var r=t.length;return!n&&1<i&&(r+=t.length*(i-1)),t=e.inputmask.escapeRegex.call(this,a.groupSeparator),a=e.inputmask.escapeRegex.call(this,a.radixPoint),a=(o=o.join("")).replace(RegExp(t,"g"),"").replace(RegExp(a),""),r+(o.length-a.length)},postFormat:function(t,n,i,o){if(""==o.groupSeparator)return n;var a=t.slice(),r=e.inArray(o.radixPoint,t);if(i||a.splice(0==n||n<=r||o.skipRadixDance?n+1:n,0,"?"),a=a.join(""),o.autoGroup||i&&-1!=a.indexOf(o.groupSeparator)){for(var s=e.inputmask.escapeRegex.call(this,o.groupSeparator),l=(a=(s=(a=a.replace(RegExp(s,"g"),"")).split(o.radixPoint))[0],RegExp("([-+]?[\\d?]+)([\\d?]{"+o.groupSize+"})"));l.test(a);)a=(a=a.replace(l,"$1"+o.groupSeparator+"$2")).replace(o.groupSeparator+o.groupSeparator,o.groupSeparator);1<s.length&&(a+=o.radixPoint+s[1])}for(t.length=a.length,s=0,l=a.length;s<l;s++)t[s]=a.charAt(s);return a=e.inArray("?",t),i||t.splice(a,1),i?n:a<=r||o.skipRadixDance&&0!=a?a-1:a},regex:{number:function(t,n,i,o,a,r){return t=e.inputmask.escapeRegex.call(this,t),i=e.inputmask.escapeRegex.call(this,i),o=isNaN(o)?o:"{0,"+o+"}",RegExp("^["+(a?"+":"")+(r?"-":"")+"]?(\\d+|\\d{1,"+n+"}(("+t+"\\d{"+n+"})?)+)("+i+"\\d"+o+")?$")}},onKeyDown:function(t,n,i){var o=e(this);if(t.keyCode==i.keyCode.TAB){if(-1!=(t=e.inArray(i.radixPoint,n))){for(var a=o.data("inputmask").masksets,r=(o=o.data("inputmask").activeMasksetIndex,1);r<=i.digits&&r<i.getMaskLength(a[o]._buffer,a[o].greedy,a[o].repeat,n,i);r++)null==n[t+r]&&(n[t+r]="0");this._valueSet(n.join(""))}}else t.keyCode!=i.keyCode.DELETE&&t.keyCode!=i.keyCode.BACKSPACE||(i.postFormat(n,0,!0,i),this._valueSet(n.join("")))},definitions:{"~":{validator:function(t,n,o,a,r){if(""==t)return!1;if(1>=o&&"0"===n[0]&&/[\d-]/.test(t))return n[0]="",{pos:0};if((l=a?n.slice(0,o):n.slice()).splice(0==o?o:o+1,0,t),l=l.join(""),r.autoGroup&&!a)var s=e.inputmask.escapeRegex.call(this,r.groupSeparator),l=l.replace(RegExp(s,"g"),"");if(!(s=r.regex.number(r.groupSeparator,r.groupSize,r.radixPoint,r.digits,r.allowPlus,r.allowMinus).test(l))&&(l+="0",!(s=r.regex.number(r.groupSeparator,r.groupSize,r.radixPoint,r.digits,r.allowPlus,r.allowMinus).test(l)))){for(s=l.lastIndexOf(r.groupSeparator),i=l.length-s;3>=i;i++)l+="0";if(!(s=r.regex.number(r.groupSeparator,r.groupSize,r.radixPoint,r.digits,r.allowPlus,r.allowMinus).test(l))&&!a&&t==r.radixPoint&&(s=r.regex.number(r.groupSeparator,r.groupSize,r.radixPoint,r.digits,r.allowPlus,r.allowMinus).test("0"+l+"0")))return n[o]="0",{pos:++o}}return 0==s||a||t==r.radixPoint?s:{pos:r.postFormat(n,o,!1,r)}},cardinality:1,prevalidator:null}},insertMode:!0,autoUnmask:!1},integer:{regex:{number:function(t,n,i,o,a,r){return t=e.inputmask.escapeRegex.call(this,t),RegExp("^["+(a?"+":"")+(r?"-":"")+"]?(\\d+|\\d{1,"+n+"}(("+t+"\\d{"+n+"})?)+)$")}},alias:"decimal"}})}(jQuery),function(e){e.extend(e.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:10,regex:null,regexSplit:null,definitions:{r:{validator:function(e,t,n,i,o){null==o.regexSplit&&(o.regexSplit=o.regex.match(RegExp("\\[.*?]\\*","g")));var a=t.slice();t="",i=!1;for(a.splice(n,0,e),e=a.join(""),n=0;n<o.regexSplit.length&&(t+=o.regexSplit[n],i=RegExp("^"+t+"$").test(e),console.log(e+" "+i+" "+t),!i);n++);return i},cardinality:1}}}})}(jQuery);var tns=function(){Object.keys||(Object.keys=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var e=window,t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,16)},n=window,i=n.cancelAnimationFrame||n.mozCancelAnimationFrame||function(e){clearTimeout(e)};function o(){for(var e,t,n,i=arguments[0]||{},o=1,a=arguments.length;o<a;o++)if(null!==(e=arguments[o]))for(t in e)i!==(n=e[t])&&void 0!==n&&(i[t]=n);return i}function a(e){return 0<=["true","false"].indexOf(e)?JSON.parse(e):e}function r(e,t,n,i){if(i)try{e.setItem(t,n)}catch(e){}return n}function s(){var e=document,t=e.body;return t||((t=e.createElement("body")).fake=!0),t}var l=document.documentElement;function c(e){var t="";return e.fake&&(t=l.style.overflow,e.style.background="",e.style.overflow=l.style.overflow="hidden",l.appendChild(e)),t}function d(e,t){e.fake&&(e.remove(),l.style.overflow=t,l.offsetHeight)}function u(e,t,n,i){"insertRule"in e?e.insertRule(t+"{"+n+"}",i):e.addRule(t,n,i)}function h(e){return("insertRule"in e?e.cssRules:e.rules).length}function p(e,t,n){for(var i=0,o=e.length;i<o;i++)t.call(n,e[i],i)}var f="classList"in document.createElement("_"),m=f?function(e,t){return e.classList.contains(t)}:function(e,t){return 0<=e.className.indexOf(t)},g=f?function(e,t){m(e,t)||e.classList.add(t)}:function(e,t){m(e,t)||(e.className+=" "+t)},v=f?function(e,t){m(e,t)&&e.classList.remove(t)}:function(e,t){m(e,t)&&(e.className=e.className.replace(t,""))};function b(e,t){return e.hasAttribute(t)}function y(e,t){return e.getAttribute(t)}function w(e){return void 0!==e.item}function x(e,t){if(e=w(e)||e instanceof Array?e:[e],"[object Object]"===Object.prototype.toString.call(t))for(var n=e.length;n--;)for(var i in t)e[n].setAttribute(i,t[i])}function C(e,t){e=w(e)||e instanceof Array?e:[e];for(var n=(t=t instanceof Array?t:[t]).length,i=e.length;i--;)for(var o=n;o--;)e[i].removeAttribute(t[o])}function S(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t}function _(e,t){"none"!==e.style.display&&(e.style.display="none")}function k(e,t){"none"===e.style.display&&(e.style.display="")}function T(e){return"none"!==window.getComputedStyle(e).display}function E(e){if("string"==typeof e){var t=[e],n=e.charAt(0).toUpperCase()+e.substr(1);["Webkit","Moz","ms","O"].forEach((function(i){"ms"===i&&"transform"!==e||t.push(i+n)})),e=t}for(var i=document.createElement("fakeelement"),o=(e.length,0);o<e.length;o++){var a=e[o];if(void 0!==i.style[a])return a}return!1}function D(e,t){var n=!1;return/^Webkit/.test(e)?n="webkit"+t+"End":/^O/.test(e)?n="o"+t+"End":e&&(n=t.toLowerCase()+"end"),n}var I=!1;try{var N=Object.defineProperty({},"passive",{get:function(){I=!0}});window.addEventListener("test",null,N)}catch(e){}var A=!!I&&{passive:!0};function P(e,t,n){for(var i in t){var o=0<=["touchstart","touchmove"].indexOf(i)&&!n&&A;e.addEventListener(i,t[i],o)}}function R(e,t){for(var n in t){var i=0<=["touchstart","touchmove"].indexOf(n)&&A;e.removeEventListener(n,t[n],i)}}function O(){return{topics:{},on:function(e,t){this.topics[e]=this.topics[e]||[],this.topics[e].push(t)},off:function(e,t){if(this.topics[e])for(var n=0;n<this.topics[e].length;n++)if(this.topics[e][n]===t){this.topics[e].splice(n,1);break}},emit:function(e,t){t.type=e,this.topics[e]&&this.topics[e].forEach((function(n){n(t,e)}))}}}var F=function(e){e=o({container:".slider",mode:"carousel",axis:"horizontal",items:1,gutter:0,edgePadding:0,fixedWidth:!1,autoWidth:!1,viewportMax:!1,slideBy:1,center:!1,controls:!0,controlsPosition:"top",controlsText:["prev","next"],controlsContainer:!1,prevButton:!1,nextButton:!1,nav:!0,navPosition:"top",navContainer:!1,navAsThumbnails:!1,arrowKeys:!1,speed:300,autoplay:!1,autoplayPosition:"top",autoplayTimeout:5e3,autoplayDirection:"forward",autoplayText:["start","stop"],autoplayHoverPause:!1,autoplayButton:!1,autoplayButtonOutput:!0,autoplayResetOnVisibility:!0,animateIn:"tns-fadeIn",animateOut:"tns-fadeOut",animateNormal:"tns-normal",animateDelay:!1,loop:!0,rewind:!1,autoHeight:!1,responsive:!1,lazyload:!1,lazyloadSelector:".tns-lazy-img",touch:!0,mouseDrag:!1,swipeAngle:15,nested:!1,preventActionWhenRunning:!1,preventScrollOnTouch:!1,freezable:!0,onInit:!1,useLocalStorage:!0},e||{});var n=document,l=window,f={ENTER:13,SPACE:32,LEFT:37,RIGHT:39},w={},I=e.useLocalStorage;if(I){var N=navigator.userAgent,A=new Date;try{(w=l.localStorage)?(w.setItem(A,A),I=w.getItem(A)==A,w.removeItem(A)):I=!1,I||(w={})}catch(N){I=!1}I&&(w.tnsApp&&w.tnsApp!==N&&["tC","tPL","tMQ","tTf","t3D","tTDu","tTDe","tADu","tADe","tTE","tAE"].forEach((function(e){w.removeItem(e)})),localStorage.tnsApp=N)}var M,L,B,z,H,j,$,W=w.tC?a(w.tC):r(w,"tC",function(){var e=document,t=s(),n=c(t),i=e.createElement("div"),o=!1;t.appendChild(i);try{for(var a,r="(10px * 10)",l=["calc"+r,"-moz-calc"+r,"-webkit-calc"+r],u=0;u<3;u++)if(a=l[u],i.style.width=a,100===i.offsetWidth){o=a.replace(r,"");break}}catch(e){}return t.fake?d(t,n):i.remove(),o}(),I),U=w.tPL?a(w.tPL):r(w,"tPL",function(){var e,t=document,n=s(),i=c(n),o=t.createElement("div"),a=t.createElement("div"),r="";o.className="tns-t-subp2",a.className="tns-t-ct";for(var l=0;l<70;l++)r+="<div></div>";return a.innerHTML=r,o.appendChild(a),n.appendChild(o),e=Math.abs(o.getBoundingClientRect().left-a.children[67].getBoundingClientRect().left)<2,n.fake?d(n,i):o.remove(),e}(),I),V=w.tMQ?a(w.tMQ):r(w,"tMQ",(L=document,z=c(B=s()),H=L.createElement("div"),$="@media all and (min-width:1px){.tns-mq-test{position:absolute}}",(j=L.createElement("style")).type="text/css",H.className="tns-mq-test",B.appendChild(j),B.appendChild(H),j.styleSheet?j.styleSheet.cssText=$:j.appendChild(L.createTextNode($)),M=window.getComputedStyle?window.getComputedStyle(H).position:H.currentStyle.position,B.fake?d(B,z):H.remove(),"absolute"===M),I),q=w.tTf?a(w.tTf):r(w,"tTf",E("transform"),I),G=w.t3D?a(w.t3D):r(w,"t3D",function(e){if(!e)return!1;if(!window.getComputedStyle)return!1;var t,n=document,i=s(),o=c(i),a=n.createElement("p"),r=9<e.length?"-"+e.slice(0,-9).toLowerCase()+"-":"";return r+="transform",i.insertBefore(a,null),a.style[e]="translate3d(1px,1px,1px)",t=window.getComputedStyle(a).getPropertyValue(r),i.fake?d(i,o):a.remove(),void 0!==t&&0<t.length&&"none"!==t}(q),I),Y=w.tTDu?a(w.tTDu):r(w,"tTDu",E("transitionDuration"),I),X=w.tTDe?a(w.tTDe):r(w,"tTDe",E("transitionDelay"),I),Q=w.tADu?a(w.tADu):r(w,"tADu",E("animationDuration"),I),K=w.tADe?a(w.tADe):r(w,"tADe",E("animationDelay"),I),J=w.tTE?a(w.tTE):r(w,"tTE",D(Y,"Transition"),I),Z=w.tAE?a(w.tAE):r(w,"tAE",D(Q,"Animation"),I),ee=l.console&&"function"==typeof l.console.warn,te=["container","controlsContainer","prevButton","nextButton","navContainer","autoplayButton"],ne={};if(te.forEach((function(t){if("string"==typeof e[t]){var i=e[t],o=n.querySelector(i);if(ne[t]=i,!o||!o.nodeName)return void(ee&&console.warn("Can't find",e[t]));e[t]=o}})),!(e.container.children.length<1)){var ie=e.responsive,oe=e.nested,ae="carousel"===e.mode;if(ie){0 in ie&&(e=o(e,ie[0]),delete ie[0]);var re={};for(var se in ie){var le=ie[se];le="number"==typeof le?{items:le}:le,re[se]=le}ie=re,re=null}if(ae||function e(t){for(var n in t)ae||("slideBy"===n&&(t[n]="page"),"edgePadding"===n&&(t[n]=!1),"autoHeight"===n&&(t[n]=!1)),"responsive"===n&&e(t[n])}(e),!ae){e.axis="horizontal",e.slideBy="page",e.edgePadding=!1;var ce=e.animateIn,de=e.animateOut,ue=e.animateDelay,he=e.animateNormal}var pe,fe,me="horizontal"===e.axis,ge=n.createElement("div"),ve=n.createElement("div"),be=e.container,ye=be.parentNode,we=be.outerHTML,xe=be.children,Ce=xe.length,Se=Mn(),_e=!1;ie&&ni(),ae&&(be.className+=" tns-vpfix");var ke,Te,Ee,De,Ie,Ne,Ae,Pe=e.autoWidth,Re=Hn("fixedWidth"),Oe=Hn("edgePadding"),Fe=Hn("gutter"),Me=Bn(),Le=Hn("center"),Be=Pe?1:Math.floor(Hn("items")),ze=Hn("slideBy"),He=e.viewportMax||e.fixedWidthViewportWidth,je=Hn("arrowKeys"),$e=Hn("speed"),We=e.rewind,Ue=!We&&e.loop,Ve=Hn("autoHeight"),qe=Hn("controls"),Ge=Hn("controlsText"),Ye=Hn("nav"),Xe=Hn("touch"),Qe=Hn("mouseDrag"),Ke=Hn("autoplay"),Je=Hn("autoplayTimeout"),Ze=Hn("autoplayText"),et=Hn("autoplayHoverPause"),tt=Hn("autoplayResetOnVisibility"),nt=(Ae=document.createElement("style"),document.querySelector("head").appendChild(Ae),Ae.sheet?Ae.sheet:Ae.styleSheet),it=e.lazyload,ot=(e.lazyloadSelector,[]),at=Ue?(Ie=function(){if(Pe||Re&&!He)return Ce-1;var t=Re?"fixedWidth":"items",n=[];if((Re||e[t]<Ce)&&n.push(e[t]),ie)for(var i in ie){var o=ie[i][t];o&&(Re||o<Ce)&&n.push(o)}return n.length||n.push(0),Math.ceil(Re?He/Math.min.apply(null,n):Math.max.apply(null,n))}(),Ne=ae?Math.ceil((5*Ie-Ce)/2):4*Ie-Ce,Ne=Math.max(Ie,Ne),zn("edgePadding")?Ne+1:Ne):0,rt=ae?Ce+2*at:Ce+at,st=!(!Re&&!Pe||Ue),lt=Re?Ii():null,ct=!ae||!Ue,dt=me?"left":"top",ut="",ht="",pt=Re?function(){return Le&&!Ue?Ce-1:Math.ceil(-lt/(Re+Fe))}:Pe?function(){for(var e=rt;e--;)if(ke[e]>=-lt)return e}:function(){return Le&&ae&&!Ue?Ce-1:Ue||ae?Math.max(0,rt-Math.ceil(Be)):rt-1},ft=Rn(Hn("startIndex")),mt=ft,gt=(Pn(),0),vt=Pe?null:pt(),bt=e.preventActionWhenRunning,yt=e.swipeAngle,wt=!yt||"?",xt=!1,Ct=e.onInit,St=new O,_t=" tns-slider tns-"+e.mode,kt=be.id||(De=window.tnsId,window.tnsId=De?De+1:1,"tns"+window.tnsId),Tt=Hn("disable"),Et=!1,Dt=e.freezable,It=!(!Dt||Pe)&&ti(),Nt=!1,At={click:Bi,keydown:function(e){e=qi(e);var t=[f.LEFT,f.RIGHT].indexOf(e.keyCode);0<=t&&(0===t?Jt.disabled||Bi(e,-1):Zt.disabled||Bi(e,1))}},Pt={click:function(e){if(xt){if(bt)return;Mi()}for(var t=Gi(e=qi(e));t!==on&&!b(t,"data-nav");)t=t.parentNode;if(b(t,"data-nav")){var n=ln=Number(y(t,"data-nav")),i=Re||Pe?n*Ce/rn:n*Be;Li(Ht?n:Math.min(Math.ceil(i),Ce-1),e),cn===n&&(mn&&Wi(),ln=-1)}},keydown:function(e){e=qi(e);var t=n.activeElement;if(b(t,"data-nav")){var i=[f.LEFT,f.RIGHT,f.ENTER,f.SPACE].indexOf(e.keyCode),o=Number(y(t,"data-nav"));0<=i&&(0===i?0<o&&Vi(nn[o-1]):1===i?o<rn-1&&Vi(nn[o+1]):Li(ln=o,e))}}},Rt={mouseover:function(){mn&&(Hi(),gn=!0)},mouseout:function(){gn&&(zi(),gn=!1)}},Ot={visibilitychange:function(){n.hidden?mn&&(Hi(),bn=!0):bn&&(zi(),bn=!1)}},Ft={keydown:function(e){e=qi(e);var t=[f.LEFT,f.RIGHT].indexOf(e.keyCode);0<=t&&Bi(e,0===t?-1:1)}},Mt={touchstart:Ki,touchmove:Ji,touchend:Zi,touchcancel:Zi},Lt={mousedown:Ki,mousemove:Ji,mouseup:Zi,mouseleave:Zi},Bt=zn("controls"),zt=zn("nav"),Ht=!!Pe||e.navAsThumbnails,jt=zn("autoplay"),$t=zn("touch"),Wt=zn("mouseDrag"),Ut="tns-slide-active",Vt="tns-complete",qt={load:function(e){ui(Gi(e))},error:function(e){var t;t=Gi(e),g(t,"failed"),hi(t)}},Gt="force"===e.preventScrollOnTouch;if(Bt)var Yt,Xt,Qt=e.controlsContainer,Kt=e.controlsContainer?e.controlsContainer.outerHTML:"",Jt=e.prevButton,Zt=e.nextButton,en=e.prevButton?e.prevButton.outerHTML:"",tn=e.nextButton?e.nextButton.outerHTML:"";if(zt)var nn,on=e.navContainer,an=e.navContainer?e.navContainer.outerHTML:"",rn=Pe?Ce:to(),sn=0,ln=-1,cn=Fn(),dn=cn,un="tns-nav-active",hn="Carousel Page ",pn=" (Current Slide)";if(jt)var fn,mn,gn,vn,bn,yn="forward"===e.autoplayDirection?1:-1,wn=e.autoplayButton,xn=e.autoplayButton?e.autoplayButton.outerHTML:"",Cn=["<span class='tns-visually-hidden'>"," animation</span>"];if($t||Wt)var Sn,_n,kn={},Tn={},En=!1,Dn=me?function(e,t){return e.x-t.x}:function(e,t){return e.y-t.y};Pe||An(Tt||It),q&&(dt=q,ut="translate",G?(ut+=me?"3d(":"3d(0px, ",ht=me?", 0px, 0px)":", 0px)"):(ut+=me?"X(":"Y(",ht=")")),ae&&(be.className=be.className.replace("tns-vpfix","")),function(){(zn("gutter"),ge.className="tns-outer",ve.className="tns-inner",ge.id=kt+"-ow",ve.id=kt+"-iw",""===be.id&&(be.id=kt),_t+=U||Pe?" tns-subpixel":" tns-no-subpixel",_t+=W?" tns-calc":" tns-no-calc",Pe&&(_t+=" tns-autowidth"),_t+=" tns-"+e.axis,be.className+=_t,ae?((pe=n.createElement("div")).id=kt+"-mw",pe.className="tns-ovh",ge.appendChild(pe),pe.appendChild(ve)):ge.appendChild(ve),Ve)&&((pe||ve).className+=" tns-ah");if(ye.insertBefore(ge,be),ve.appendChild(be),p(xe,(function(e,t){g(e,"tns-item"),e.id||(e.id=kt+"-item"+t),!ae&&he&&g(e,he),x(e,{"aria-hidden":"true",tabindex:"-1"})})),at){for(var t=n.createDocumentFragment(),i=n.createDocumentFragment(),o=at;o--;){var a=o%Ce,r=xe[a].cloneNode(!0);if(C(r,"id"),i.insertBefore(r,i.firstChild),ae){var s=xe[Ce-1-a].cloneNode(!0);C(s,"id"),t.appendChild(s)}}be.insertBefore(t,be.firstChild),be.appendChild(i),xe=be.children}}(),function(){if(!ae)for(var t=ft,n=ft+Math.min(Ce,Be);t<n;t++){var i=xe[t];i.style.left=100*(t-ft)/Be+"%",g(i,ce),v(i,he)}if(me&&(U||Pe?(u(nt,"#"+kt+" > .tns-item","font-size:"+l.getComputedStyle(xe[0]).fontSize+";",h(nt)),u(nt,"#"+kt,"font-size:0;",h(nt))):ae&&p(xe,(function(e,t){var n;e.style.marginLeft=(n=t,W?W+"("+100*n+"% / "+rt+")":100*n/rt+"%")}))),V){if(Y){var o=pe&&e.autoHeight?qn(e.speed):"";u(nt,"#"+kt+"-mw",o,h(nt))}o=jn(e.edgePadding,e.gutter,e.fixedWidth,e.speed,e.autoHeight),u(nt,"#"+kt+"-iw",o,h(nt)),ae&&(o=me&&!Pe?"width:"+$n(e.fixedWidth,e.gutter,e.items)+";":"",Y&&(o+=qn($e)),u(nt,"#"+kt,o,h(nt))),o=me&&!Pe?Wn(e.fixedWidth,e.gutter,e.items):"",e.gutter&&(o+=Un(e.gutter)),ae||(Y&&(o+=qn($e)),Q&&(o+=Gn($e))),o&&u(nt,"#"+kt+" > .tns-item",o,h(nt))}else{vi(),ve.style.cssText=jn(Oe,Fe,Re,Ve),ae&&me&&!Pe&&(be.style.width=$n(Re,Fe,Be));o=me&&!Pe?Wn(Re,Fe,Be):"";Fe&&(o+=Un(Fe)),o&&u(nt,"#"+kt+" > .tns-item",o,h(nt))}if(ie&&V)for(var a in ie){a=parseInt(a);var r=ie[a],s=(o="",""),c="",d="",f="",m=Pe?null:Hn("items",a),b=Hn("fixedWidth",a),y=Hn("speed",a),w=Hn("edgePadding",a),x=Hn("autoHeight",a),C=Hn("gutter",a);Y&&pe&&Hn("autoHeight",a)&&"speed"in r&&(s="#"+kt+"-mw{"+qn(y)+"}"),("edgePadding"in r||"gutter"in r)&&(c="#"+kt+"-iw{"+jn(w,C,b,y,x)+"}"),ae&&me&&!Pe&&("fixedWidth"in r||"items"in r||Re&&"gutter"in r)&&(d="width:"+$n(b,C,m)+";"),Y&&"speed"in r&&(d+=qn(y)),d&&(d="#"+kt+"{"+d+"}"),("fixedWidth"in r||Re&&"gutter"in r||!ae&&"items"in r)&&(f+=Wn(b,C,m)),"gutter"in r&&(f+=Un(C)),!ae&&"speed"in r&&(Y&&(f+=qn(y)),Q&&(f+=Gn(y))),f&&(f="#"+kt+" > .tns-item{"+f+"}"),(o=s+c+d+f)&&nt.insertRule("@media (min-width: "+a/16+"em) {"+o+"}",nt.cssRules.length)}}(),Yn();var In=Ue?ae?function(){var e=gt,t=vt;e+=ze,t-=ze,Oe?(e+=1,t-=1):Re&&(Me+Fe)%(Re+Fe)&&(t-=1),at&&(t<ft?ft-=Ce:ft<e&&(ft+=Ce))}:function(){if(vt<ft)for(;gt+Ce<=ft;)ft-=Ce;else if(ft<gt)for(;ft<=vt-Ce;)ft+=Ce}:function(){ft=Math.max(gt,Math.min(vt,ft))},Nn=ae?function(){var e,t,n,i,o,a,r,s,l,c,d;Ei(be,""),Y||!$e?(Pi(),$e&&T(be)||Mi()):(e=be,t=dt,n=ut,i=ht,o=Ni(),a=$e,r=Mi,s=Math.min(a,10),l=0<=o.indexOf("%")?"%":"px",o=o.replace(l,""),c=Number(e.style[t].replace(n,"").replace(i,"").replace(l,"")),d=(o-c)/a*s,setTimeout((function o(){a-=s,c+=d,e.style[t]=n+c+l+i,0<a?setTimeout(o,s):r()}),s)),me||eo()}:function(){ot=[];var e={};e[J]=e[Z]=Mi,R(xe[mt],e),P(xe[ft],e),Ri(mt,ce,de,!0),Ri(ft,he,ce),J&&Z&&$e&&T(be)||Mi()};return{version:"2.9.2",getInfo:io,events:St,goTo:Li,play:function(){Ke&&!mn&&($i(),vn=!1)},pause:function(){mn&&(Wi(),vn=!0)},isOn:_e,updateSliderHeight:yi,refresh:Yn,destroy:function(){if(nt.disabled=!0,nt.ownerNode&&nt.ownerNode.remove(),R(l,{resize:Zn}),je&&R(n,Ft),Qt&&R(Qt,At),on&&R(on,Pt),R(be,Rt),R(be,Ot),wn&&R(wn,{click:Ui}),Ke&&clearInterval(fn),ae&&J){var t={};t[J]=Mi,R(be,t)}Xe&&R(be,Mt),Qe&&R(be,Lt);var i=[we,Kt,en,tn,an,xn];for(var o in te.forEach((function(t,n){var o="container"===t?ge:e[t];if("object"==typeof o){var a=!!o.previousElementSibling&&o.previousElementSibling,r=o.parentNode;o.outerHTML=i[n],e[t]=a?a.nextElementSibling:r.firstElementChild}})),te=ce=de=ue=he=me=ge=ve=be=ye=we=xe=Ce=fe=Se=Pe=Re=Oe=Fe=Me=Be=ze=He=je=$e=We=Ue=Ve=nt=it=ke=ot=at=rt=st=lt=ct=dt=ut=ht=pt=ft=mt=gt=vt=yt=wt=xt=Ct=St=_t=kt=Tt=Et=Dt=It=Nt=At=Pt=Rt=Ot=Ft=Mt=Lt=Bt=zt=Ht=jt=$t=Wt=Ut=Vt=qt=Te=qe=Ge=Qt=Kt=Jt=Zt=Yt=Xt=Ye=on=an=nn=rn=sn=ln=cn=dn=un=hn=pn=Ke=Je=yn=Ze=et=wn=xn=tt=Cn=fn=mn=gn=vn=bn=kn=Tn=Sn=En=_n=Dn=Xe=Qe=null,this)"rebuild"!==o&&(this[o]=null);_e=!1},rebuild:function(){return F(o(e,ne))}}}function An(e){e&&(qe=Ye=Xe=Qe=je=Ke=et=tt=!1)}function Pn(){for(var e=ae?ft-at:ft;e<0;)e+=Ce;return e%Ce+1}function Rn(e){return e=e?Math.max(0,Math.min(Ue?Ce-1:Ce-Be,e)):0,ae?e+at:e}function On(e){for(null==e&&(e=ft),ae&&(e-=at);e<0;)e+=Ce;return Math.floor(e%Ce)}function Fn(){var e,t=On();return e=Ht?t:Re||Pe?Math.ceil((t+1)*rn/Ce-1):Math.floor(t/Be),!Ue&&ae&&ft===vt&&(e=rn-1),e}function Mn(){return l.innerWidth||n.documentElement.clientWidth||n.body.clientWidth}function Ln(e){return"top"===e?"afterbegin":"beforeend"}function Bn(){var e=Oe?2*Oe-Fe:0;return function e(t){var i,o,a=n.createElement("div");return t.appendChild(a),o=(i=a.getBoundingClientRect()).right-i.left,a.remove(),o||e(t.parentNode)}(ye)-e}function zn(t){if(e[t])return!0;if(ie)for(var n in ie)if(ie[n][t])return!0;return!1}function Hn(t,n){if(null==n&&(n=Se),"items"===t&&Re)return Math.floor((Me+Fe)/(Re+Fe))||1;var i=e[t];if(ie)for(var o in ie)n>=parseInt(o)&&t in ie[o]&&(i=ie[o][t]);return"slideBy"===t&&"page"===i&&(i=Hn("items")),ae||"slideBy"!==t&&"items"!==t||(i=Math.floor(i)),i}function jn(e,t,n,i,o){var a="";if(void 0!==e){var r=e;t&&(r-=t),a=me?"margin: 0 "+r+"px 0 "+e+"px;":"margin: "+e+"px 0 "+r+"px 0;"}else if(t&&!n){var s="-"+t+"px";a="margin: 0 "+(me?s+" 0 0":"0 "+s+" 0")+";"}return!ae&&o&&Y&&i&&(a+=qn(i)),a}function $n(e,t,n){return e?(e+t)*rt+"px":W?W+"("+100*rt+"% / "+n+")":100*rt/n+"%"}function Wn(e,t,n){var i;if(e)i=e+t+"px";else{ae||(n=Math.floor(n));var o=ae?rt:n;i=W?W+"(100% / "+o+")":100/o+"%"}return i="width:"+i,"inner"!==oe?i+";":i+" !important;"}function Un(e){var t="";return!1!==e&&(t=(me?"padding-":"margin-")+(me?"right":"bottom")+": "+e+"px;"),t}function Vn(e,t){var n=e.substring(0,e.length-t).toLowerCase();return n&&(n="-"+n+"-"),n}function qn(e){return Vn(Y,18)+"transition-duration:"+e/1e3+"s;"}function Gn(e){return Vn(Q,17)+"animation-duration:"+e/1e3+"s;"}function Yn(){if(zn("autoHeight")||Pe||!me){var e=be.querySelectorAll("img");p(e,(function(e){var t=e.src;t&&t.indexOf("data:image")<0?(P(e,qt),e.src="",e.src=t,g(e,"loading")):it||ui(e)})),t((function(){mi(S(e),(function(){Te=!0}))})),!Pe&&me&&(e=pi(ft,Math.min(ft+Be-1,rt-1))),it?Xn():t((function(){mi(S(e),Xn)}))}else ae&&Ai(),Kn(),Jn()}function Xn(){if(Pe){var e=Ue?ft:Ce-1;!function t(){xe[e-1].getBoundingClientRect().right.toFixed(2)===xe[e].getBoundingClientRect().left.toFixed(2)?Qn():setTimeout((function(){t()}),16)}()}else Qn()}function Qn(){me&&!Pe||(wi(),Pe?(lt=Ii(),Dt&&(It=ti()),vt=pt(),An(Tt||It)):eo()),ae&&Ai(),Kn(),Jn()}function Kn(){if(xi(),ge.insertAdjacentHTML("afterbegin",'<div class="tns-liveregion tns-visually-hidden" aria-live="polite" aria-atomic="true">slide <span class="current">'+li()+"</span>  of "+Ce+"</div>"),Ee=ge.querySelector(".tns-liveregion .current"),jt){var t=Ke?"stop":"start";wn?x(wn,{"data-action":t}):e.autoplayButtonOutput&&(ge.insertAdjacentHTML(Ln(e.autoplayPosition),'<button data-action="'+t+'">'+Cn[0]+t+Cn[1]+Ze[0]+"</button>"),wn=ge.querySelector("[data-action]")),wn&&P(wn,{click:Ui}),Ke&&($i(),et&&P(be,Rt),tt&&P(be,Ot))}if(zt){if(on)x(on,{"aria-label":"Carousel Pagination"}),p(nn=on.children,(function(e,t){x(e,{"data-nav":t,tabindex:"-1","aria-label":hn+(t+1),"aria-controls":kt})}));else{for(var n="",i=Ht?"":'style="display:none"',o=0;o<Ce;o++)n+='<button data-nav="'+o+'" tabindex="-1" aria-controls="'+kt+'" '+i+' aria-label="'+hn+(o+1)+'"></button>';n='<div class="tns-nav" aria-label="Carousel Pagination">'+n+"</div>",ge.insertAdjacentHTML(Ln(e.navPosition),n),on=ge.querySelector(".tns-nav"),nn=on.children}if(no(),Y){var a=Y.substring(0,Y.length-18).toLowerCase(),r="transition: all "+$e/1e3+"s";a&&(r="-"+a+"-"+r),u(nt,"[aria-controls^="+kt+"-item]",r,h(nt))}x(nn[cn],{"aria-label":hn+(cn+1)+pn}),C(nn[cn],"tabindex"),g(nn[cn],un),P(on,Pt)}Bt&&(Qt||Jt&&Zt||(ge.insertAdjacentHTML(Ln(e.controlsPosition),'<div class="tns-controls" aria-label="Carousel Navigation" tabindex="0"><button data-controls="prev" tabindex="-1" aria-controls="'+kt+'">'+Ge[0]+'</button><button data-controls="next" tabindex="-1" aria-controls="'+kt+'">'+Ge[1]+"</button></div>"),Qt=ge.querySelector(".tns-controls")),Jt&&Zt||(Jt=Qt.children[0],Zt=Qt.children[1]),e.controlsContainer&&x(Qt,{"aria-label":"Carousel Navigation",tabindex:"0"}),(e.controlsContainer||e.prevButton&&e.nextButton)&&x([Jt,Zt],{"aria-controls":kt,tabindex:"-1"}),(e.controlsContainer||e.prevButton&&e.nextButton)&&(x(Jt,{"data-controls":"prev"}),x(Zt,{"data-controls":"next"})),Yt=Si(Jt),Xt=Si(Zt),Ti(),Qt?P(Qt,At):(P(Jt,At),P(Zt,At))),ii()}function Jn(){if(ae&&J){var t={};t[J]=Mi,P(be,t)}Xe&&P(be,Mt,e.preventScrollOnTouch),Qe&&P(be,Lt),je&&P(n,Ft),"inner"===oe?St.on("outerResized",(function(){ei(),St.emit("innerLoaded",io())})):(ie||Re||Pe||Ve||!me)&&P(l,{resize:Zn}),Ve&&("outer"===oe?St.on("innerLoaded",fi):Tt||fi()),di(),Tt?ri():It&&ai(),St.on("indexChanged",gi),"inner"===oe&&St.emit("innerLoaded",io()),"function"==typeof Ct&&Ct(io()),_e=!0}function Zn(e){t((function(){ei(qi(e))}))}function ei(t){if(_e){"outer"===oe&&St.emit("outerResized",io(t)),Se=Mn();var i,o=fe,a=!1;ie&&(ni(),(i=o!==fe)&&St.emit("newBreakpointStart",io(t)));var r,s,l,c,d=Be,f=Tt,m=It,b=je,y=qe,w=Ye,x=Xe,C=Qe,S=Ke,T=et,E=tt,D=ft;if(i){var I=Re,N=Ve,A=Ge,O=Le,F=Ze;if(!V)var M=Fe,L=Oe}if(je=Hn("arrowKeys"),qe=Hn("controls"),Ye=Hn("nav"),Xe=Hn("touch"),Le=Hn("center"),Qe=Hn("mouseDrag"),Ke=Hn("autoplay"),et=Hn("autoplayHoverPause"),tt=Hn("autoplayResetOnVisibility"),i&&(Tt=Hn("disable"),Re=Hn("fixedWidth"),$e=Hn("speed"),Ve=Hn("autoHeight"),Ge=Hn("controlsText"),Ze=Hn("autoplayText"),Je=Hn("autoplayTimeout"),V||(Oe=Hn("edgePadding"),Fe=Hn("gutter"))),An(Tt),Me=Bn(),me&&!Pe||Tt||(wi(),me||(eo(),a=!0)),(Re||Pe)&&(lt=Ii(),vt=pt()),(i||Re)&&(Be=Hn("items"),ze=Hn("slideBy"),(s=Be!==d)&&(Re||Pe||(vt=pt()),In())),i&&Tt!==f&&(Tt?ri():function(){if(Et){if(nt.disabled=!1,be.className+=_t,Ai(),Ue)for(var e=at;e--;)ae&&k(xe[e]),k(xe[rt-e-1]);if(!ae)for(var t=ft,n=ft+Ce;t<n;t++){var i=xe[t],o=t<ft+Be?ce:he;i.style.left=100*(t-ft)/Be+"%",g(i,o)}oi(),Et=!1}}()),Dt&&(i||Re||Pe)&&(It=ti())!==m&&(It?(Pi(Ni(Rn(0))),ai()):(function(){if(Nt){if(Oe&&V&&(ve.style.margin=""),at)for(var e="tns-transparent",t=at;t--;)ae&&v(xe[t],e),v(xe[rt-t-1],e);oi(),Nt=!1}}(),a=!0)),An(Tt||It),Ke||(et=tt=!1),je!==b&&(je?P(n,Ft):R(n,Ft)),qe!==y&&(qe?Qt?k(Qt):(Jt&&k(Jt),Zt&&k(Zt)):Qt?_(Qt):(Jt&&_(Jt),Zt&&_(Zt))),Ye!==w&&(Ye?k(on):_(on)),Xe!==x&&(Xe?P(be,Mt,e.preventScrollOnTouch):R(be,Mt)),Qe!==C&&(Qe?P(be,Lt):R(be,Lt)),Ke!==S&&(Ke?(wn&&k(wn),mn||vn||$i()):(wn&&_(wn),mn&&Wi())),et!==T&&(et?P(be,Rt):R(be,Rt)),tt!==E&&(tt?P(n,Ot):R(n,Ot)),i){if(Re===I&&Le===O||(a=!0),Ve!==N&&(Ve||(ve.style.height="")),qe&&Ge!==A&&(Jt.innerHTML=Ge[0],Zt.innerHTML=Ge[1]),wn&&Ze!==F){var B=Ke?1:0,z=wn.innerHTML,H=z.length-F[B].length;z.substring(H)===F[B]&&(wn.innerHTML=z.substring(0,H)+Ze[B])}}else Le&&(Re||Pe)&&(a=!0);if((s||Re&&!Pe)&&(rn=to(),no()),(r=ft!==D)?(St.emit("indexChanged",io()),a=!0):s?r||gi():(Re||Pe)&&(di(),xi(),si()),s&&!ae&&function(){for(var e=ft+Math.min(Ce,Be),t=rt;t--;){var n=xe[t];ft<=t&&t<e?(g(n,"tns-moving"),n.style.left=100*(t-ft)/Be+"%",g(n,ce),v(n,he)):n.style.left&&(n.style.left="",g(n,he),v(n,ce)),v(n,de)}setTimeout((function(){p(xe,(function(e){v(e,"tns-moving")}))}),300)}(),!Tt&&!It){if(i&&!V&&(Ve===autoheightTem&&$e===speedTem||vi(),Oe===L&&Fe===M||(ve.style.cssText=jn(Oe,Fe,Re,$e,Ve)),me)){ae&&(be.style.width=$n(Re,Fe,Be));var j=Wn(Re,Fe,Be)+Un(Fe);c=h(l=nt)-1,"deleteRule"in l?l.deleteRule(c):l.removeRule(c),u(nt,"#"+kt+" > .tns-item",j,h(nt))}Ve&&fi(),a&&(Ai(),mt=ft)}i&&St.emit("newBreakpointEnd",io(t))}}function ti(){if(!Re&&!Pe)return Ce<=(Le?Be-(Be-1)/2:Be);var e=Re?(Re+Fe)*Ce:ke[Ce],t=Oe?Me+2*Oe:Me+Fe;return Le&&(t-=Re?(Me-Re)/2:(Me-(ke[ft+1]-ke[ft]-Fe))/2),e<=t}function ni(){for(var e in fe=0,ie)(e=parseInt(e))<=Se&&(fe=e)}function ii(){!Ke&&wn&&_(wn),!Ye&&on&&_(on),qe||(Qt?_(Qt):(Jt&&_(Jt),Zt&&_(Zt)))}function oi(){Ke&&wn&&k(wn),Ye&&on&&k(on),qe&&(Qt?k(Qt):(Jt&&k(Jt),Zt&&k(Zt)))}function ai(){if(!Nt){if(Oe&&(ve.style.margin="0px"),at)for(var e="tns-transparent",t=at;t--;)ae&&g(xe[t],e),g(xe[rt-t-1],e);ii(),Nt=!0}}function ri(){if(!Et){if(nt.disabled=!0,be.className=be.className.replace(_t.substring(1),""),C(be,["style"]),Ue)for(var e=at;e--;)ae&&_(xe[e]),_(xe[rt-e-1]);if(me&&ae||C(ve,["style"]),!ae)for(var t=ft,n=ft+Ce;t<n;t++){var i=xe[t];C(i,["style"]),v(i,ce),v(i,he)}ii(),Et=!0}}function si(){var e=li();Ee.innerHTML!==e&&(Ee.innerHTML=e)}function li(){var e=ci(),t=e[0]+1,n=e[1]+1;return t===n?t+"":t+" to "+n}function ci(e){null==e&&(e=Ni());var t,n,i,o=ft;if(Le||Oe?(Pe||Re)&&(n=-(parseFloat(e)+Oe),i=n+Me+2*Oe):Pe&&(n=ke[ft],i=n+Me),Pe)ke.forEach((function(e,a){a<rt&&((Le||Oe)&&e<=n+.5&&(o=a),.5<=i-e&&(t=a))}));else{if(Re){var a=Re+Fe;Le||Oe?(o=Math.floor(n/a),t=Math.ceil(i/a-1)):t=o+Math.ceil(Me/a)-1}else if(Le||Oe){var r=Be-1;if(Le?(o-=r/2,t=ft+r/2):t=ft+r,Oe){var s=Oe*Be/Me;o-=s,t+=s}o=Math.floor(o),t=Math.ceil(t)}else t=o+Be-1;o=Math.max(o,0),t=Math.min(t,rt-1)}return[o,t]}function di(){it&&!Tt&&pi.apply(null,ci()).forEach((function(e){if(!m(e,Vt)){var t={};t[J]=function(e){e.stopPropagation()},P(e,t),P(e,qt),e.src=y(e,"data-src");var n=y(e,"data-srcset");n&&(e.srcset=n),g(e,"loading")}}))}function ui(e){g(e,"loaded"),hi(e)}function hi(e){g(e,"tns-complete"),v(e,"loading"),R(e,qt)}function pi(e,t){for(var n=[];e<=t;)p(xe[e].querySelectorAll("img"),(function(e){n.push(e)})),e++;return n}function fi(){var e=pi.apply(null,ci());t((function(){mi(e,yi)}))}function mi(e,n){return Te?n():(e.forEach((function(t,n){m(t,Vt)&&e.splice(n,1)})),e.length?void t((function(){mi(e,n)})):n())}function gi(){di(),xi(),si(),Ti(),function(){if(Ye&&(cn=0<=ln?ln:Fn(),ln=-1,cn!==dn)){var e=nn[dn],t=nn[cn];x(e,{tabindex:"-1","aria-label":hn+(dn+1)}),v(e,un),x(t,{"aria-label":hn+(cn+1)+pn}),C(t,"tabindex"),g(t,un),dn=cn}}()}function vi(){ae&&Ve&&(pe.style[Y]=$e/1e3+"s")}function bi(e,t){for(var n=[],i=e,o=Math.min(e+t,rt);i<o;i++)n.push(xe[i].offsetHeight);return Math.max.apply(null,n)}function yi(){var e=Ve?bi(ft,Be):bi(at,Ce),t=pe||ve;t.style.height!==e&&(t.style.height=e+"px")}function wi(){ke=[0];var e=me?"left":"top",t=me?"right":"bottom",n=xe[0].getBoundingClientRect()[e];p(xe,(function(i,o){o&&ke.push(i.getBoundingClientRect()[e]-n),o===rt-1&&ke.push(i.getBoundingClientRect()[t]-n)}))}function xi(){var e=ci(),t=e[0],n=e[1];p(xe,(function(e,i){t<=i&&i<=n?b(e,"aria-hidden")&&(C(e,["aria-hidden","tabindex"]),g(e,Ut)):b(e,"aria-hidden")||(x(e,{"aria-hidden":"true",tabindex:"-1"}),v(e,Ut))}))}function Ci(e){return e.nodeName.toLowerCase()}function Si(e){return"button"===Ci(e)}function _i(e){return"true"===e.getAttribute("aria-disabled")}function ki(e,t,n){e?t.disabled=n:t.setAttribute("aria-disabled",n.toString())}function Ti(){if(qe&&!We&&!Ue){var e=Yt?Jt.disabled:_i(Jt),t=Xt?Zt.disabled:_i(Zt),n=ft<=gt,i=!We&&vt<=ft;n&&!e&&ki(Yt,Jt,!0),!n&&e&&ki(Yt,Jt,!1),i&&!t&&ki(Xt,Zt,!0),!i&&t&&ki(Xt,Zt,!1)}}function Ei(e,t){Y&&(e.style[Y]=t)}function Di(e){return null==e&&(e=ft),Pe?(Me-(Oe?Fe:0)-(ke[e+1]-ke[e]-Fe))/2:Re?(Me-Re)/2:(Be-1)/2}function Ii(){var e=Me+(Oe?Fe:0)-(Re?(Re+Fe)*rt:ke[rt]);return Le&&!Ue&&(e=Re?-(Re+Fe)*(rt-1)-Di():Di(rt-1)-ke[rt-1]),0<e&&(e=0),e}function Ni(e){var t;if(null==e&&(e=ft),me&&!Pe)if(Re)t=-(Re+Fe)*e,Le&&(t+=Di());else{var n=q?rt:Be;Le&&(e-=Di()),t=100*-e/n}else t=-ke[e],Le&&Pe&&(t+=Di());return st&&(t=Math.max(t,lt)),t+(!me||Pe||Re?"px":"%")}function Ai(e){Ei(be,"0s"),Pi(e)}function Pi(e){null==e&&(e=Ni()),be.style[dt]=ut+e+ht}function Ri(e,t,n,i){var o=e+Be;Ue||(o=Math.min(o,rt));for(var a=e;a<o;a++){var r=xe[a];i||(r.style.left=100*(a-ft)/Be+"%"),ue&&X&&(r.style[X]=r.style[K]=ue*(a-e)/1e3+"s"),v(r,t),g(r,n),i&&ot.push(r)}}function Oi(e,t){ct&&In(),(ft!==mt||t)&&(St.emit("indexChanged",io()),St.emit("transitionStart",io()),Ve&&fi(),mn&&e&&0<=["click","keydown"].indexOf(e.type)&&Wi(),xt=!0,Nn())}function Fi(e){return e.toLowerCase().replace(/-/g,"")}function Mi(e){if(ae||xt){if(St.emit("transitionEnd",io(e)),!ae&&0<ot.length)for(var t=0;t<ot.length;t++){var n=ot[t];n.style.left="",K&&X&&(n.style[K]="",n.style[X]=""),v(n,de),g(n,he)}if(!e||!ae&&e.target.parentNode===be||e.target===be&&Fi(e.propertyName)===Fi(dt)){if(!ct){var i=ft;In(),ft!==i&&(St.emit("indexChanged",io()),Ai())}"inner"===oe&&St.emit("innerLoaded",io()),xt=!1,mt=ft}}}function Li(e,t){if(!It)if("prev"===e)Bi(t,-1);else if("next"===e)Bi(t,1);else{if(xt){if(bt)return;Mi()}var n=On(),i=0;if("first"===e?i=-n:"last"===e?i=ae?Ce-Be-n:Ce-1-n:("number"!=typeof e&&(e=parseInt(e)),isNaN(e)||(t||(e=Math.max(0,Math.min(Ce-1,e))),i=e-n)),!ae&&i&&Math.abs(i)<Be){var o=0<i?1:-1;i+=gt<=ft+i-Ce?Ce*o:2*Ce*o*-1}ft+=i,ae&&Ue&&(ft<gt&&(ft+=Ce),vt<ft&&(ft-=Ce)),On(ft)!==On(mt)&&Oi(t)}}function Bi(e,t){if(xt){if(bt)return;Mi()}var n;if(!t){for(var i=Gi(e=qi(e));i!==Qt&&[Jt,Zt].indexOf(i)<0;)i=i.parentNode;var o=[Jt,Zt].indexOf(i);0<=o&&(n=!0,t=0===o?-1:1)}if(We){if(ft===gt&&-1===t)return void Li("last",e);if(ft===vt&&1===t)return void Li("first",e)}t&&(ft+=ze*t,Pe&&(ft=Math.floor(ft)),Oi(n||e&&"keydown"===e.type?e:null))}function zi(){fn=setInterval((function(){Bi(null,yn)}),Je),mn=!0}function Hi(){clearInterval(fn),mn=!1}function ji(e,t){x(wn,{"data-action":e}),wn.innerHTML=Cn[0]+e+Cn[1]+t}function $i(){zi(),wn&&ji("stop",Ze[1])}function Wi(){Hi(),wn&&ji("start",Ze[0])}function Ui(){mn?(Wi(),vn=!0):($i(),vn=!1)}function Vi(e){e.focus()}function qi(e){return Yi(e=e||l.event)?e.changedTouches[0]:e}function Gi(e){return e.target||l.event.srcElement}function Yi(e){return 0<=e.type.indexOf("touch")}function Xi(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Qi(){return a=Tn.y-kn.y,r=Tn.x-kn.x,t=Math.atan2(a,r)*(180/Math.PI),i=!1,90-(n=yt)<=(o=Math.abs(90-Math.abs(t)))?i="horizontal":o<=n&&(i="vertical"),i===e.axis;var t,n,i,o,a,r}function Ki(e){if(xt){if(bt)return;Mi()}Ke&&mn&&Hi(),En=!0,_n&&(i(_n),_n=null);var t=qi(e);St.emit(Yi(e)?"touchStart":"dragStart",io(e)),!Yi(e)&&0<=["img","a"].indexOf(Ci(Gi(e)))&&Xi(e),Tn.x=kn.x=t.clientX,Tn.y=kn.y=t.clientY,ae&&(Sn=parseFloat(be.style[dt].replace(ut,"")),Ei(be,"0s"))}function Ji(e){if(En){var n=qi(e);Tn.x=n.clientX,Tn.y=n.clientY,ae?_n||(_n=t((function(){!function e(n){if(wt){if(i(_n),En&&(_n=t((function(){e(n)}))),"?"===wt&&(wt=Qi()),wt){!Gt&&Yi(n)&&(Gt=!0);try{n.type&&St.emit(Yi(n)?"touchMove":"dragMove",io(n))}catch(e){}var o=Sn,a=Dn(Tn,kn);if(!me||Re||Pe)o+=a,o+="px";else o+=q?a*Be*100/((Me+Fe)*rt):100*a/(Me+Fe),o+="%";be.style[dt]=ut+o+ht}}else En=!1}(e)}))):("?"===wt&&(wt=Qi()),wt&&(Gt=!0)),Gt&&e.preventDefault()}}function Zi(n){if(En){_n&&(i(_n),_n=null),ae&&Ei(be,""),En=!1;var o=qi(n);Tn.x=o.clientX,Tn.y=o.clientY;var a=Dn(Tn,kn);if(Math.abs(a)){if(!Yi(n)){var r=Gi(n);P(r,{click:function e(t){Xi(t),R(r,{click:e})}})}ae?_n=t((function(){if(me&&!Pe){var e=-a*Be/(Me+Fe);e=0<a?Math.floor(e):Math.ceil(e),ft+=e}else{var t=-(Sn+a);if(t<=0)ft=gt;else if(t>=ke[rt-1])ft=vt;else for(var i=0;i<rt&&t>=ke[i];)t>ke[ft=i]&&a<0&&(ft+=1),i++}Oi(n,a),St.emit(Yi(n)?"touchEnd":"dragEnd",io(n))})):wt&&Bi(n,0<a?-1:1)}}"auto"===e.preventScrollOnTouch&&(Gt=!1),yt&&(wt="?"),Ke&&!mn&&zi()}function eo(){(pe||ve).style.height=ke[ft+Be]-ke[ft]+"px"}function to(){var e=Re?(Re+Fe)*Ce/Me:Ce/Be;return Math.min(Math.ceil(e),Ce)}function no(){if(Ye&&!Ht&&rn!==sn){var e=sn,t=rn,n=k;for(rn<sn&&(e=rn,t=sn,n=_);e<t;)n(nn[e]),e++;sn=rn}}function io(e){return{container:be,slideItems:xe,navContainer:on,navItems:nn,controlsContainer:Qt,hasControls:Bt,prevButton:Jt,nextButton:Zt,items:Be,slideBy:ze,cloneCount:at,slideCount:Ce,slideCountNew:rt,index:ft,indexCached:mt,displayIndex:Pn(),navCurrentIndex:cn,navCurrentIndexCached:dn,pages:rn,pagesCached:sn,sheet:nt,isOn:_e,event:e||{}}}ee&&console.warn("No slides found in",e.container)};return F}();!function(e,t){jQuery.fn[t]=function(e){return e?this.bind("resize",function(e,t,n){var i;return function(){var o=this,a=arguments;i?clearTimeout(i):n&&e.apply(o,a),i=setTimeout((function(){n||e.apply(o,a),i=null}),t||150)}}(e)):this.trigger(t)}}(jQuery,"smartresize"),function(e){e.Gal=function(t,n){this.element=e(n),this._init(t)},e.Gal.settings={selector:".item",width:225,gutter:20,animate:!1,animationOptions:{speed:200,duration:300,effect:"fadeInOnAppear",queue:!0,complete:function(){}}},e.Gal.prototype={_init:function(t){var n=this;this.name=this._setName(5),this.gridArr=[],this.gridArrAppend=[],this.gridArrPrepend=[],this.setArr=!1,this.setGrid=!1,this.setOptions,this.cols=0,this.itemCount=0,this.prependCount=0,this.isPrepending=!1,this.appendCount=0,this.resetCount=!0,this.ifCallback=!0,this.box=this.element,this.options=e.extend(!0,{},e.Gal.settings,t),this.gridArr=e.makeArray(this.box.find(this.options.selector)),this.isResizing=!1,this.w=0,this.boxArr=[],this._setCols(),this._renderGrid("append"),e(this.box).addClass("gridalicious"),e(window).smartresize((function(){n.resize()}))},_setName:function(e,t){return t=t||"",e?this._setName(--e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t},_setCols:function(){this.cols=Math.floor(this.box.width()/this.options.width),diff=(this.box.width()-this.cols*this.options.width-this.options.gutter)/this.cols,w=(this.options.width+diff)/this.box.width()*100,this.w=w;for(var t=0;t<this.cols;t++){var n=e("<div></div>").addClass("galcolumn").attr("id","item"+t+this.name).css({width:w+"%",paddingLeft:this.options.gutter,paddingBottom:this.options.gutter,float:"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(n)}this.box.find(e("#clear"+this.name)).remove();var i=e("<div></div>").css({clear:"both",height:"0",width:"0",display:"block"}).attr("id","clear"+this.name);this.box.append(i)},_renderGrid:function(t,n,i,o){var a=[],r=[],s=0,l=(this.prependCount,this.appendCount),c=this.options.gutter,d=this.cols,u=this.name;e(".galcolumn").width();n?(r=n,"append"==t&&(l+=i,s=this.appendCount),"prepend"==t&&(this.isPrepending=!0,(s=Math.round(i%d))<=0&&(s=d)),"renderAfterPrepend"==t&&(l+=i,s=i)):(r=this.gridArr,l=e(this.gridArr).size()),e.each(r,(function(n,i){var o=e(i),r="100%";o.hasClass("not-responsive")&&(r="auto"),o.css({marginBottom:c,zoom:"1",filter:"alpha(opacity=0)",opacity:"0"}).find("img, object, embed, iframe").css({width:r,height:"auto",display:"block","margin-left":"auto","margin-right":"auto"}),"prepend"==t?(s--,e("#item"+s+u).prepend(o),a.push(o),0==s&&(s=d)):(e("#item"+s+u).append(o),a.push(o),++s>=d&&(s=0),l>=d&&(l-=d))})),this.appendCount=l,this.itemCount=s,"append"==t||"prepend"==t?("prepend"==t&&this._updateAfterPrepend(this.gridArr,r),this._renderItem(a),this.isPrepending=!1):this._renderItem(this.gridArr)},_collectItems:function(){var t=[];return e(this.box).find(this.options.selector).each((function(n){t.push(e(this))})),t},_renderItem:function(t){var n=this.options.animationOptions.speed,i=this.options.animationOptions.effect,o=this.options.animationOptions.duration,a=this.options.animationOptions.queue,r=this.options.animate,s=this.options.animationOptions.complete,l=0,c=0;!0!==r||this.isResizing?(e.each(t,(function(t,n){e(n).css({opacity:"1",filter:"alpha(opacity=100)"})})),this.ifCallback&&s.call(t)):(!0===a&&"fadeInOnAppear"==i?(this.isPrepending&&t.reverse(),e.each(t,(function(i,a){setTimeout((function(){e(a).animate({opacity:"1.0"},o),++c==t.length&&s.call(void 0,t)}),l*n),l++}))):!1===a&&"fadeInOnAppear"==i&&(this.isPrepending&&t.reverse(),e.each(t,(function(n,i){e(i).animate({opacity:"1.0"},o),++c==t.length&&this.ifCallback&&s.call(void 0,t)}))),!0!==a||i||e.each(t,(function(n,i){e(i).css({opacity:"1",filter:"alpha(opacity=100)"}),++c==t.length&&this.ifCallback&&s.call(void 0,t)})))},_updateAfterPrepend:function(t,n){var i=this.gridArr;e.each(n,(function(e,t){i.unshift(t)})),this.gridArr=i},resize:function(){this.box.find(e(".galcolumn")).remove(),this._setCols(),this.ifCallback=!1,this.isResizing=!0,this._renderGrid("append"),this.ifCallback=!0,this.isResizing=!1},append:function(t){var n=this.gridArr,i=this.gridArrPrepend;e.each(t,(function(e,t){n.push(t),i.push(t)})),this._renderGrid("append",t,e(t).size())},prepend:function(t){this.ifCallback=!1,this._renderGrid("prepend",t,e(t).size()),this.ifCallback=!0}},e.fn.gridalicious=function(t,n){return"string"==typeof t?this.each((function(){var i=e.data(this,"gridalicious");i[t].apply(i,[n])})):this.each((function(){e.data(this,"gridalicious",new e.Gal(t,this))})),this}}(jQuery),function(e){"use strict";var t=null,n=null;!function(){var t=["webkit","moz","o","ms"],n=e.document.createElement("div"),i=-1;for(i=0;i<t.length&&!e.requestAnimationFrame;i++)e.requestAnimationFrame=e[t[i]+"RequestAnimationFrame"];void 0===n.nextElementSibling&&Object.defineProperty(e.Element.prototype,"nextElementSibling",{get:function(){for(var e=this.nextSibling;e;){if(1===e.nodeType)return e;e=e.nextSibling}return null}}),function(e){e.matches=e.matches||e.machesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){return Array.prototype.indexOf.call(this.parentElement.querySelectorAll(e),this)>-1}}(e.Element.prototype),Object.keys||(Object.keys=function(){var e,t,n,i=Object.prototype.hasOwnProperty;return e=!{toString:null}.propertyIsEnumerable("toString"),n=(t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(o){var a=[],r="",s=-1;if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");for(r in o)i.call(o,r)&&a.push(r);if(e)for(s=0;s<n;s++)i.call(o,t[s])&&a.push(t[s]);return a}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Object.create&&(Object.create=function(e){var t=function(){};return function(e,n){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var i=new t;return t.prototype=null,undefined!==n&&Object.defineProperties(i,n),null===e&&(i.__proto__=null),i}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t,n,i,o;if(null===this)throw new TypeError;if(0===(o=(i=Object(this)).length>>>0))return-1;if(t=0,arguments.length>1&&((t=Number(arguments[1]))!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=o)return-1;for(n=t>=0?t:Math.max(o-Math.abs(t),0);n<o;n++)if(n in i&&i[n]===e)return n;return-1}),Function.prototype.bind||(Function.prototype.bind=function(e){var t,n,i,o;if("function"!=typeof this)throw new TypeError;return t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))},this.prototype&&(i.prototype=this.prototype),o.prototype=new i,o}),e.Element.prototype.dispatchEvent||(e.Element.prototype.dispatchEvent=function(e){try{return this.fireEvent("on"+e.type,e)}catch(e){}})}(),t=function(i,o,a){var r=null,s=!1,l=null,c=null,d=null,u=[],h="",p=[],f=-1;if(d=a||e.document,(s=arguments[3])&&(s="boolean"==typeof s),"string"==typeof i)p=d.querySelectorAll(i);else if(i&&"object"==typeof i&&n.isElement(i,d))p=[i];else{if(!i||"object"!=typeof i||!i.length)throw new Error(t.messages.errorFactoryInvalidContainer());p=i}if(p.length<1)throw new Error(t.messages.errorFactoryContainerNotFound());for(f=0;(r=p[f])&&(!(f>0)||s);f++)r.id?h=r.id:(h="MixItUp"+n.randomHex(),r.id=h),t.instances[h]instanceof t.Mixer?(l=t.instances[h],(!o||o&&o.debug&&!1!==o.debug.showWarnings)&&console.warn(t.messages.warningFactoryPreexistingInstance())):((l=new t.Mixer).attach(r,d,h,o),t.instances[h]=l),c=new t.Facade(l),o&&o.debug&&o.debug.enable?u.push(l):u.push(c);return s?new t.Collection(u):u[0]},t.use=function(e){t.Base.prototype.callActions.call(t,"beforeUse",arguments),"function"==typeof e&&"mixitup-extension"===e.TYPE?void 0===t.extensions[e.NAME]&&(e(t),t.extensions[e.NAME]=e):e.fn&&e.fn.jquery&&(t.libraries.$=e),t.Base.prototype.callActions.call(t,"afterUse",arguments)},t.instances={},t.extensions={},t.libraries={},n={hasClass:function(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className+=e.className?" "+t:t)},removeClass:function(e,t){if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").trim()}},extend:function(e,t,n,i){var o=[],a="",r=-1;n=n||!1,i=i||!1;try{if(Array.isArray(t))for(r=0;r<t.length;r++)o.push(r);else t&&(o=Object.keys(t));for(r=0;r<o.length;r++)a=o[r],!n||"object"!=typeof t[a]||this.isElement(t[a])?e[a]=t[a]:Array.isArray(t[a])?(e[a]||(e[a]=[]),this.extend(e[a],t[a],n,i)):(e[a]||(e[a]={}),this.extend(e[a],t[a],n,i))}catch(t){if(!i)throw t;this.handleExtendError(t,e)}return e},handleExtendError:function(e,n){var i=null,o="",a="",r="",s="",l="",c=-1,d=-1;if(e instanceof TypeError&&(i=/property "?(\w*)"?[,:] object/i.exec(e.message))){for(l in o=i[1],n){for(d=0;d<o.length&&o.charAt(d)===l.charAt(d);)d++;d>c&&(c=d,s=l)}throw c>1&&(r=t.messages.errorConfigInvalidPropertySuggestion({probableMatch:s})),a=t.messages.errorConfigInvalidProperty({erroneous:o,suggestion:r}),new TypeError(a)}throw e},template:function(e){for(var t=/\${([\w]*)}/g,n={},i=null;i=t.exec(e);)n[i[1]]=new RegExp("\\${"+i[1]+"}","g");return function(t){var i="",o=e;for(i in t=t||{},n)o=o.replace(n[i],void 0!==t[i]?t[i]:"");return o}},on:function(t,n,i,o){t&&(t.addEventListener?t.addEventListener(n,i,o):t.attachEvent&&(t["e"+n+i]=i,t[n+i]=function(){t["e"+n+i](e.event)},t.attachEvent("on"+n,t[n+i])))},off:function(e,t,n){e&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&(e.detachEvent("on"+t,e[t+n]),e[t+n]=null))},getCustomEvent:function(t,n,i){var o=null;return i=i||e.document,"function"==typeof e.CustomEvent?o=new e.CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):"function"==typeof i.createEvent?(o=i.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n):((o=i.createEventObject()).type=t,o.returnValue=!1,o.cancelBubble=!1,o.detail=n),o},getOriginalEvent:function(e){return e.touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e},index:function(e,t){for(var n=0;null!==(e=e.previousElementSibling);)t&&!e.matches(t)||++n;return n},camelCase:function(e){return e.toLowerCase().replace(/([_-][a-z])/g,(function(e){return e.toUpperCase().replace(/[_-]/,"")}))},pascalCase:function(e){return(e=this.camelCase(e)).charAt(0).toUpperCase()+e.slice(1)},dashCase:function(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()},isElement:function(t,n){return n=n||e.document,!!(e.HTMLElement&&t instanceof e.HTMLElement)||!!(n.defaultView&&n.defaultView.HTMLElement&&t instanceof n.defaultView.HTMLElement)||null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},createElement:function(t,n){var i=null,o=null;for(i=(n=n||e.document).createDocumentFragment(),(o=n.createElement("div")).innerHTML=t.trim();o.firstChild;)i.appendChild(o.firstChild);return i},removeWhitespace:function(e){for(var t;e&&"#text"===e.nodeName;)t=e,e=e.previousSibling,t.parentElement&&t.parentElement.removeChild(t)},isEqualArray:function(e,t){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0},deepEquals:function(e,t){var n;if("object"==typeof e&&e&&"object"==typeof t&&t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(n in e)if(!t.hasOwnProperty(n)||!this.deepEquals(e[n],t[n]))return!1}else if(e!==t)return!1;return!0},arrayShuffle:function(e){for(var t=e.slice(),n=t.length,i=n,o=-1,a=[];i--;)o=~~(Math.random()*n),a=t[i],t[i]=t[o],t[o]=a;return t},arrayFromList:function(e){var t,n;try{return Array.prototype.slice.call(e)}catch(i){for(t=[],n=0;n<e.length;n++)t.push(e[n]);return t}},debounce:function(e,t,n){var i;return function(){var o,a=this,r=arguments,s=n&&!i;o=function(){i=null,n||e.apply(a,r)},clearTimeout(i),i=setTimeout(o,t),s&&e.apply(a,r)}},position:function(e){for(var t=0,n=0,i=e;e;)t-=e.scrollLeft,n-=e.scrollTop,e===i&&(t+=e.offsetLeft,n+=e.offsetTop,i=e.offsetParent),e=e.parentElement;return{x:t,y:n}},getHypotenuse:function(e,t){var n=e.x-t.x,i=e.y-t.y;return n=n<0?-1*n:n,i=i<0?-1*i:i,Math.sqrt(Math.pow(n,2)+Math.pow(i,2))},getIntersectionRatio:function(e,t){var n,i=e.width*e.height;return n=Math.max(0,Math.min(e.left+e.width,t.left+t.width)-Math.max(e.left,t.left)),Math.max(0,Math.min(e.top+e.height,t.top+t.height)-Math.max(e.top,t.top))*n/i},closestParent:function(t,n,i,o){var a=t.parentNode;if(o=o||e.document,i&&t.matches(n))return t;for(;a&&a!=o.body;){if(a.matches&&a.matches(n))return a;if(!a.parentNode)return null;a=a.parentNode}return null},children:function(t,n,i){var o=[],a="";return i=i||e.doc,t&&(t.id||(a="Temp"+this.randomHexKey(),t.id=a),o=i.querySelectorAll("#"+t.id+" > "+n),a&&t.removeAttribute("id")),o},clean:function(e){var t=[],n=-1;for(n=0;n<e.length;n++)""!==e[n]&&t.push(e[n]);return t},defer:function(n){var i=null,o=null,a=null;return o=new this.Deferred,t.features.has.promises?o.promise=new Promise((function(e,t){o.resolve=e,o.reject=t})):(a=e.jQuery||n.$)&&"function"==typeof a.Deferred?(i=a.Deferred(),o.promise=i.promise(),o.resolve=i.resolve,o.reject=i.reject):e.console&&console.warn(t.messages.warningNoPromiseImplementation()),o},all:function(n,i){var o=null;return t.features.has.promises?Promise.all(n):(o=e.jQuery||i.$)&&"function"==typeof o.when?o.when.apply(o,n).done((function(){return arguments})):(e.console&&console.warn(t.messages.warningNoPromiseImplementation()),[])},getPrefix:function(e,t,i){var o=-1,a="";if(n.dashCase(t)in e.style)return"";for(o=0;a=i[o];o++)if(a+t in e.style)return a.toLowerCase();return"unsupported"},randomHex:function(){return("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6).toUpperCase()},getDocumentState:function(t){return t="object"==typeof t.body?t:e.document,{scrollTop:e.pageYOffset,scrollLeft:e.pageXOffset,docHeight:t.documentElement.scrollHeight,docWidth:t.documentElement.scrollWidth,viewportHeight:t.documentElement.clientHeight,viewportWidth:t.documentElement.clientWidth}},bind:function(e,t){return function(){return t.apply(e,arguments)}},isVisible:function(t){var n=null;return!!t.offsetParent||"fixed"===(n=e.getComputedStyle(t)).position&&"hidden"!==n.visibility&&"0"!==n.opacity},seal:function(e){"function"==typeof Object.seal&&Object.seal(e)},freeze:function(e){"function"==typeof Object.freeze&&Object.freeze(e)},compareVersions:function(e,t){var n=e.split("."),i=t.split("."),o=-1,a=-1,r=-1;for(r=0;r<n.length;r++){if(o=parseInt(n[r].replace(/[^\d.]/g,"")),(a=parseInt(i[r].replace(/[^\d.]/g,"")||0))<o)return!1;if(a>o)return!0}return!0},Deferred:function(){this.promise=null,this.resolve=null,this.reject=null,this.id=n.randomHex()},isEmptyObject:function(e){var t="";if("function"==typeof Object.keys)return 0===Object.keys(e).length;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},getClassname:function(e,t,n){var i="";return(i+=e.block).length&&(i+=e.delineatorElement),i+=e["element"+this.pascalCase(t)],n?(i.length&&(i+=e.delineatorModifier),i+=n):i},getProperty:function(e,t){var n,i=t.split("."),o="",a=0;if(!t)return e;for(n=function(e){return e?e[o]:null};a<i.length;)o=i[a],e=n(e),a++;return void 0!==e?e:null}},t.h=n,t.Base=function(){},t.Base.prototype={constructor:t.Base,callActions:function(e,t){var i=this.constructor.actions[e],o="";if(i&&!n.isEmptyObject(i))for(o in i)i[o].apply(this,t)},callFilters:function(e,t,i){var o=this.constructor.filters[e],a=t,r="";if(!o||n.isEmptyObject(o))return a;for(r in i=i||[],o)(i=n.arrayFromList(i)).unshift(a),a=o[r].apply(this,i);return a}},t.BaseStatic=function(){this.actions={},this.filters={},this.extend=function(e){n.extend(this.prototype,e)},this.registerAction=function(e,t,n){(this.actions[e]=this.actions[e]||{})[t]=n},this.registerFilter=function(e,t,n){(this.filters[e]=this.filters[e]||{})[t]=n}},t.Features=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.boxSizingPrefix="",this.transformPrefix="",this.transitionPrefix="",this.boxSizingPrefix="",this.transformProp="",this.transformRule="",this.transitionProp="",this.perspectiveProp="",this.perspectiveOriginProp="",this.has=new t.Has,this.canary=null,this.BOX_SIZING_PROP="boxSizing",this.TRANSITION_PROP="transition",this.TRANSFORM_PROP="transform",this.PERSPECTIVE_PROP="perspective",this.PERSPECTIVE_ORIGIN_PROP="perspectiveOrigin",this.VENDORS=["Webkit","moz","O","ms"],this.TWEENABLE=["opacity","width","height","marginRight","marginBottom","x","y","scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],this.callActions("afterConstruct")},t.BaseStatic.call(t.Features),t.Features.prototype=Object.create(t.Base.prototype),n.extend(t.Features.prototype,{constructor:t.Features,init:function(){var e=this;e.callActions("beforeInit",arguments),e.canary=document.createElement("div"),e.setPrefixes(),e.runTests(),e.callActions("beforeInit",arguments)},runTests:function(){var t=this;t.callActions("beforeRunTests",arguments),t.has.promises="function"==typeof e.Promise,t.has.transitions="unsupported"!==t.transitionPrefix,t.callActions("afterRunTests",arguments),n.freeze(t.has)},setPrefixes:function(){var e=this;e.callActions("beforeSetPrefixes",arguments),e.transitionPrefix=n.getPrefix(e.canary,"Transition",e.VENDORS),e.transformPrefix=n.getPrefix(e.canary,"Transform",e.VENDORS),e.boxSizingPrefix=n.getPrefix(e.canary,"BoxSizing",e.VENDORS),e.boxSizingProp=e.boxSizingPrefix?e.boxSizingPrefix+n.pascalCase(e.BOX_SIZING_PROP):e.BOX_SIZING_PROP,e.transitionProp=e.transitionPrefix?e.transitionPrefix+n.pascalCase(e.TRANSITION_PROP):e.TRANSITION_PROP,e.transformProp=e.transformPrefix?e.transformPrefix+n.pascalCase(e.TRANSFORM_PROP):e.TRANSFORM_PROP,e.transformRule=e.transformPrefix?"-"+e.transformPrefix+"-"+e.TRANSFORM_PROP:e.TRANSFORM_PROP,e.perspectiveProp=e.transformPrefix?e.transformPrefix+n.pascalCase(e.PERSPECTIVE_PROP):e.PERSPECTIVE_PROP,e.perspectiveOriginProp=e.transformPrefix?e.transformPrefix+n.pascalCase(e.PERSPECTIVE_ORIGIN_PROP):e.PERSPECTIVE_ORIGIN_PROP,e.callActions("afterSetPrefixes",arguments)}}),t.Has=function(){this.transitions=!1,this.promises=!1,n.seal(this)},t.features=new t.Features,t.features.init(),t.ConfigAnimation=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.effects="fade scale",this.effectsIn="",this.effectsOut="",this.duration=600,this.easing="ease",this.applyPerspective=!0,this.perspectiveDistance="3000px",this.perspectiveOrigin="50% 50%",this.queue=!0,this.queueLimit=3,this.animateResizeContainer=!0,this.animateResizeTargets=!1,this.staggerSequence=null,this.reverseOut=!1,this.nudge=!0,this.clampHeight=!0,this.clampWidth=!0,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigAnimation),t.ConfigAnimation.prototype=Object.create(t.Base.prototype),t.ConfigAnimation.prototype.constructor=t.ConfigAnimation,t.ConfigBehavior=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.liveSort=!1,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigBehavior),t.ConfigBehavior.prototype=Object.create(t.Base.prototype),t.ConfigBehavior.prototype.constructor=t.ConfigBehavior,t.ConfigCallbacks=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.onMixStart=null,this.onMixBusy=null,this.onMixEnd=null,this.onMixFail=null,this.onMixClick=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigCallbacks),t.ConfigCallbacks.prototype=Object.create(t.Base.prototype),t.ConfigCallbacks.prototype.constructor=t.ConfigCallbacks,t.ConfigControls=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.live=!1,this.scope="global",this.toggleLogic="or",this.toggleDefault="all",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigControls),t.ConfigControls.prototype=Object.create(t.Base.prototype),t.ConfigControls.prototype.constructor=t.ConfigControls,t.ConfigClassNames=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.block="mixitup",this.elementContainer="container",this.elementFilter="control",this.elementSort="control",this.elementMultimix="control",this.elementToggle="control",this.modifierActive="active",this.modifierDisabled="disabled",this.modifierFailed="failed",this.delineatorElement="-",this.delineatorModifier="-",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigClassNames),t.ConfigClassNames.prototype=Object.create(t.Base.prototype),t.ConfigClassNames.prototype.constructor=t.ConfigClassNames,t.ConfigData=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.uidKey="",this.dirtyCheck=!1,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigData),t.ConfigData.prototype=Object.create(t.Base.prototype),t.ConfigData.prototype.constructor=t.ConfigData,t.ConfigDebug=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.enable=!1,this.showWarnings=!0,this.fauxAsync=!1,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigDebug),t.ConfigDebug.prototype=Object.create(t.Base.prototype),t.ConfigDebug.prototype.constructor=t.ConfigDebug,t.ConfigLayout=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.allowNestedTargets=!0,this.containerClassName="",this.siblingBefore=null,this.siblingAfter=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigLayout),t.ConfigLayout.prototype=Object.create(t.Base.prototype),t.ConfigLayout.prototype.constructor=t.ConfigLayout,t.ConfigLoad=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.filter="all",this.sort="default:asc",this.dataset=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigLoad),t.ConfigLoad.prototype=Object.create(t.Base.prototype),t.ConfigLoad.prototype.constructor=t.ConfigLoad,t.ConfigSelectors=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.target=".mix",this.control="",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigSelectors),t.ConfigSelectors.prototype=Object.create(t.Base.prototype),t.ConfigSelectors.prototype.constructor=t.ConfigSelectors,t.ConfigRender=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.target=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigRender),t.ConfigRender.prototype=Object.create(t.Base.prototype),t.ConfigRender.prototype.constructor=t.ConfigRender,t.ConfigTemplates=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.ConfigTemplates),t.ConfigTemplates.prototype=Object.create(t.Base.prototype),t.ConfigTemplates.prototype.constructor=t.ConfigTemplates,t.Config=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.animation=new t.ConfigAnimation,this.behavior=new t.ConfigBehavior,this.callbacks=new t.ConfigCallbacks,this.controls=new t.ConfigControls,this.classNames=new t.ConfigClassNames,this.data=new t.ConfigData,this.debug=new t.ConfigDebug,this.layout=new t.ConfigLayout,this.load=new t.ConfigLoad,this.selectors=new t.ConfigSelectors,this.render=new t.ConfigRender,this.templates=new t.ConfigTemplates,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.Config),t.Config.prototype=Object.create(t.Base.prototype),t.Config.prototype.constructor=t.Config,t.MixerDom=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.document=null,this.body=null,this.container=null,this.parent=null,this.targets=[],this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.MixerDom),t.MixerDom.prototype=Object.create(t.Base.prototype),t.MixerDom.prototype.constructor=t.MixerDom,t.UiClassNames=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.base="",this.active="",this.disabled="",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.UiClassNames),t.UiClassNames.prototype=Object.create(t.Base.prototype),t.UiClassNames.prototype.constructor=t.UiClassNames,t.CommandDataset=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.dataset=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.CommandDataset),t.CommandDataset.prototype=Object.create(t.Base.prototype),t.CommandDataset.prototype.constructor=t.CommandDataset,t.CommandMultimix=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.filter=null,this.sort=null,this.insert=null,this.remove=null,this.changeLayout=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.CommandMultimix),t.CommandMultimix.prototype=Object.create(t.Base.prototype),t.CommandMultimix.prototype.constructor=t.CommandMultimix,t.CommandFilter=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.selector="",this.collection=null,this.action="show",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.CommandFilter),t.CommandFilter.prototype=Object.create(t.Base.prototype),t.CommandFilter.prototype.constructor=t.CommandFilter,t.CommandSort=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.sortString="",this.attribute="",this.order="asc",this.collection=null,this.next=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.CommandSort),t.CommandSort.prototype=Object.create(t.Base.prototype),t.CommandSort.prototype.constructor=t.CommandSort,t.CommandInsert=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.index=0,this.collection=[],this.position="before",this.sibling=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.CommandInsert),t.CommandInsert.prototype=Object.create(t.Base.prototype),t.CommandInsert.prototype.constructor=t.CommandInsert,t.CommandRemove=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.targets=[],this.collection=[],this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.CommandRemove),t.CommandRemove.prototype=Object.create(t.Base.prototype),t.CommandRemove.prototype.constructor=t.CommandRemove,t.CommandChangeLayout=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.containerClassName="",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.CommandChangeLayout),t.CommandChangeLayout.prototype=Object.create(t.Base.prototype),t.CommandChangeLayout.prototype.constructor=t.CommandChangeLayout,t.ControlDefinition=function(e,i,o,a){t.Base.call(this),this.callActions("beforeConstruct"),this.type=e,this.selector=i,this.live=o||!1,this.parent=a||"",this.callActions("afterConstruct"),n.freeze(this),n.seal(this)},t.BaseStatic.call(t.ControlDefinition),t.ControlDefinition.prototype=Object.create(t.Base.prototype),t.ControlDefinition.prototype.constructor=t.ControlDefinition,t.controlDefinitions=[],t.controlDefinitions.push(new t.ControlDefinition("multimix","[data-filter][data-sort]")),t.controlDefinitions.push(new t.ControlDefinition("filter","[data-filter]")),t.controlDefinitions.push(new t.ControlDefinition("sort","[data-sort]")),t.controlDefinitions.push(new t.ControlDefinition("toggle","[data-toggle]")),t.Control=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.selector="",this.bound=[],this.pending=-1,this.type="",this.status="inactive",this.filter="",this.sort="",this.canDisable=!1,this.handler=null,this.classNames=new t.UiClassNames,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.Control),t.Control.prototype=Object.create(t.Base.prototype),n.extend(t.Control.prototype,{constructor:t.Control,init:function(e,n,i){var o=this;if(this.callActions("beforeInit",arguments),o.el=e,o.type=n,o.selector=i,o.selector)o.status="live";else switch(o.canDisable="boolean"==typeof o.el.disable,o.type){case"filter":o.filter=o.el.getAttribute("data-filter");break;case"toggle":o.filter=o.el.getAttribute("data-toggle");break;case"sort":o.sort=o.el.getAttribute("data-sort");break;case"multimix":o.filter=o.el.getAttribute("data-filter"),o.sort=o.el.getAttribute("data-sort")}o.bindClick(),t.controls.push(o),this.callActions("afterInit",arguments)},isBound:function(e){var t;return this.callActions("beforeIsBound",arguments),t=this.bound.indexOf(e)>-1,this.callFilters("afterIsBound",t,arguments)},addBinding:function(e){this.callActions("beforeAddBinding",arguments),this.isBound()||this.bound.push(e),this.callActions("afterAddBinding",arguments)},removeBinding:function(e){var n=this,i=-1;this.callActions("beforeRemoveBinding",arguments),(i=n.bound.indexOf(e))>-1&&n.bound.splice(i,1),n.bound.length<1&&(n.unbindClick(),i=t.controls.indexOf(n),t.controls.splice(i,1),"active"===n.status&&n.renderStatus(n.el,"inactive")),this.callActions("afterRemoveBinding",arguments)},bindClick:function(){var e=this;this.callActions("beforeBindClick",arguments),e.handler=function(t){e.handleClick(t)},n.on(e.el,"click",e.handler),this.callActions("afterBindClick",arguments)},unbindClick:function(){var e=this;this.callActions("beforeUnbindClick",arguments),n.off(e.el,"click",e.handler),e.handler=null,this.callActions("afterUnbindClick",arguments)},handleClick:function(e){var i=this,o=null,a=null,r=!1,s={},l=null,c=[],d=-1;if(this.callActions("beforeHandleClick",arguments),this.pending=0,a=i.bound[0],o=i.selector?n.closestParent(e.target,a.config.selectors.control+i.selector,!0,a.dom.document):i.el){switch(i.type){case"filter":s.filter=i.filter||o.getAttribute("data-filter");break;case"sort":s.sort=i.sort||o.getAttribute("data-sort");break;case"multimix":s.filter=i.filter||o.getAttribute("data-filter"),s.sort=i.sort||o.getAttribute("data-sort");break;case"toggle":s.filter=i.filter||o.getAttribute("data-toggle"),r="live"===i.status?n.hasClass(o,i.classNames.active):"active"===i.status}for(d=0;d<i.bound.length;d++)l=new t.CommandMultimix,n.extend(l,s),c.push(l);for(c=i.callFilters("commandsHandleClick",c,arguments),i.pending=i.bound.length,d=0;a=i.bound[d];d++)(s=c[d])&&(a.lastClicked||(a.lastClicked=o),t.events.fire("mixClick",a.dom.container,{state:a.state,instance:a,originalEvent:e,control:a.lastClicked},a.dom.document),"function"==typeof a.config.callbacks.onMixClick&&!1===a.config.callbacks.onMixClick.call(a.lastClicked,a.state,e,a)||("toggle"===i.type?r?a.toggleOff(s.filter):a.toggleOn(s.filter):a.multimix(s)));this.callActions("afterHandleClick",arguments)}else i.callActions("afterHandleClick",arguments)},update:function(e,n){var i=this,o=new t.CommandMultimix;i.callActions("beforeUpdate",arguments),i.pending--,i.pending=Math.max(0,i.pending),i.pending>0||("live"===i.status?i.updateLive(e,n):(o.sort=i.sort,o.filter=i.filter,i.callFilters("actionsUpdate",o,arguments),i.parseStatusChange(i.el,e,o,n)),i.callActions("afterUpdate",arguments))},updateLive:function(e,n){var i=this,o=null,a=null,r=null,s=-1;if(i.callActions("beforeUpdateLive",arguments),i.el){for(o=i.el.querySelectorAll(i.selector),s=0;r=o[s];s++){switch(a=new t.CommandMultimix,i.type){case"filter":a.filter=r.getAttribute("data-filter");break;case"sort":a.sort=r.getAttribute("data-sort");break;case"multimix":a.filter=r.getAttribute("data-filter"),a.sort=r.getAttribute("data-sort");break;case"toggle":a.filter=r.getAttribute("data-toggle")}a=i.callFilters("actionsUpdateLive",a,arguments),i.parseStatusChange(r,e,a,n)}i.callActions("afterUpdateLive",arguments)}},parseStatusChange:function(e,t,n,i){var o=this,a="",r=-1;switch(o.callActions("beforeParseStatusChange",arguments),o.type){case"filter":t.filter===n.filter?o.renderStatus(e,"active"):o.renderStatus(e,"inactive");break;case"multimix":t.sort===n.sort&&t.filter===n.filter?o.renderStatus(e,"active"):o.renderStatus(e,"inactive");break;case"sort":t.sort.match(/:asc/g)&&(a=t.sort.replace(/:asc/g,"")),t.sort===n.sort||a===n.sort?o.renderStatus(e,"active"):o.renderStatus(e,"inactive");break;case"toggle":for(i.length<1&&o.renderStatus(e,"inactive"),t.filter===n.filter&&o.renderStatus(e,"active"),r=0;r<i.length;r++){if(i[r]===n.filter){o.renderStatus(e,"active");break}o.renderStatus(e,"inactive")}}o.callActions("afterParseStatusChange",arguments)},renderStatus:function(e,t){var i=this;switch(i.callActions("beforeRenderStatus",arguments),t){case"active":n.addClass(e,i.classNames.active),n.removeClass(e,i.classNames.disabled),i.canDisable&&(i.el.disabled=!1);break;case"inactive":n.removeClass(e,i.classNames.active),n.removeClass(e,i.classNames.disabled),i.canDisable&&(i.el.disabled=!1);break;case"disabled":i.canDisable&&(i.el.disabled=!0),n.addClass(e,i.classNames.disabled),n.removeClass(e,i.classNames.active)}"live"!==i.status&&(i.status=t),i.callActions("afterRenderStatus",arguments)}}),t.controls=[],t.StyleData=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.x=0,this.y=0,this.top=0,this.right=0,this.bottom=0,this.left=0,this.width=0,this.height=0,this.marginRight=0,this.marginBottom=0,this.opacity=0,this.scale=new t.TransformData,this.translateX=new t.TransformData,this.translateY=new t.TransformData,this.translateZ=new t.TransformData,this.rotateX=new t.TransformData,this.rotateY=new t.TransformData,this.rotateZ=new t.TransformData,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.StyleData),t.StyleData.prototype=Object.create(t.Base.prototype),t.StyleData.prototype.constructor=t.StyleData,t.TransformData=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.value=0,this.unit="",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.TransformData),t.TransformData.prototype=Object.create(t.Base.prototype),t.TransformData.prototype.constructor=t.TransformData,t.TransformDefaults=function(){t.StyleData.apply(this),this.callActions("beforeConstruct"),this.scale.value=.01,this.scale.unit="",this.translateX.value=20,this.translateX.unit="px",this.translateY.value=20,this.translateY.unit="px",this.translateZ.value=20,this.translateZ.unit="px",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateY.value=90,this.rotateY.unit="deg",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateZ.value=180,this.rotateZ.unit="deg",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.TransformDefaults),t.TransformDefaults.prototype=Object.create(t.StyleData.prototype),t.TransformDefaults.prototype.constructor=t.TransformDefaults,t.transformDefaults=new t.TransformDefaults,t.EventDetail=function(){this.state=null,this.futureState=null,this.instance=null,this.originalEvent=null},t.Events=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.mixStart=null,this.mixBusy=null,this.mixEnd=null,this.mixFail=null,this.mixClick=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.Events),t.Events.prototype=Object.create(t.Base.prototype),t.Events.prototype.constructor=t.Events,t.Events.prototype.fire=function(e,i,o,a){var r,s=this,l=new t.EventDetail;if(s.callActions("beforeFire",arguments),void 0===s[e])throw new Error('Event type "'+e+'" not found.');l.state=new t.State,n.extend(l.state,o.state),o.futureState&&(l.futureState=new t.State,n.extend(l.futureState,o.futureState)),l.instance=o.instance,o.originalEvent&&(l.originalEvent=o.originalEvent),r=n.getCustomEvent(e,l,a),s.callFilters("eventFire",r,arguments),i.dispatchEvent(r)},t.events=new t.Events,t.QueueItem=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.args=[],this.instruction=null,this.triggerElement=null,this.deferred=null,this.isToggling=!1,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.QueueItem),t.QueueItem.prototype=Object.create(t.Base.prototype),t.QueueItem.prototype.constructor=t.QueueItem,t.Mixer=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.config=new t.Config,this.id="",this.isBusy=!1,this.isToggling=!1,this.incPadding=!0,this.controls=[],this.targets=[],this.origOrder=[],this.cache={},this.toggleArray=[],this.targetsMoved=0,this.targetsImmovable=0,this.targetsBound=0,this.targetsDone=0,this.staggerDuration=0,this.effectsIn=null,this.effectsOut=null,this.transformIn=[],this.transformOut=[],this.queue=[],this.state=null,this.lastOperation=null,this.lastClicked=null,this.userCallback=null,this.userDeferred=null,this.dom=new t.MixerDom,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.Mixer),t.Mixer.prototype=Object.create(t.Base.prototype),n.extend(t.Mixer.prototype,{constructor:t.Mixer,attach:function(i,o,a,r){var s=this,l=null,c=-1;for(s.callActions("beforeAttach",arguments),s.id=a,r&&n.extend(s.config,r,!0,!0),s.sanitizeConfig(),s.cacheDom(i,o),s.config.layout.containerClassName&&n.addClass(s.dom.container,s.config.layout.containerClassName),t.features.has.transitions||(s.config.animation.enable=!1),void 0===e.console&&(s.config.debug.showWarnings=!1),s.config.data.uidKey&&(s.config.controls.enable=!1),s.indexTargets(),s.state=s.getInitialState(),c=0;l=s.lastOperation.toHide[c];c++)l.hide();s.config.controls.enable&&(s.initControls(),s.buildToggleArray(null,s.state),s.updateControls({filter:s.state.activeFilter,sort:s.state.activeSort})),s.parseEffects(),s.callActions("afterAttach",arguments)},sanitizeConfig:function(){var e=this;e.callActions("beforeSanitizeConfig",arguments),e.config.controls.scope=e.config.controls.scope.toLowerCase().trim(),e.config.controls.toggleLogic=e.config.controls.toggleLogic.toLowerCase().trim(),e.config.controls.toggleDefault=e.config.controls.toggleDefault.toLowerCase().trim(),e.config.animation.effects=e.config.animation.effects.trim(),e.callActions("afterSanitizeConfig",arguments)},getInitialState:function(){var e=this,n=new t.State,i=new t.Operation;if(e.callActions("beforeGetInitialState",arguments),n.activeContainerClassName=e.config.layout.containerClassName,e.config.load.dataset){if(!e.config.data.uidKey||"string"!=typeof e.config.data.uidKey)throw new TypeError(t.messages.errorConfigDataUidKeyNotSet());i.startDataset=i.newDataset=n.activeDataset=e.config.load.dataset.slice(),i.startContainerClassName=i.newContainerClassName=n.activeContainerClassName,i.show=e.targets.slice(),n=e.callFilters("stateGetInitialState",n,arguments)}else n.activeFilter=e.parseFilterArgs([e.config.load.filter]).command,n.activeSort=e.parseSortArgs([e.config.load.sort]).command,n.totalTargets=e.targets.length,(n=e.callFilters("stateGetInitialState",n,arguments)).activeSort.collection||n.activeSort.attribute||"random"===n.activeSort.order||"desc"===n.activeSort.order?(i.newSort=n.activeSort,e.sortOperation(i),e.printSort(!1,i),e.targets=i.newOrder):i.startOrder=i.newOrder=e.targets,i.startFilter=i.newFilter=n.activeFilter,i.startSort=i.newSort=n.activeSort,i.startContainerClassName=i.newContainerClassName=n.activeContainerClassName,"all"===i.newFilter.selector?i.newFilter.selector=e.config.selectors.target:"none"===i.newFilter.selector&&(i.newFilter.selector="");return i=e.callFilters("operationGetInitialState",i,[n]),e.lastOperation=i,i.newFilter&&e.filterOperation(i),e.buildState(i)},cacheDom:function(e,t){var n=this;n.callActions("beforeCacheDom",arguments),n.dom.document=t,n.dom.body=n.dom.document.querySelector("body"),n.dom.container=e,n.dom.parent=e,n.callActions("afterCacheDom",arguments)},indexTargets:function(){var e,i=this,o=null,a=null,r=-1;if(i.callActions("beforeIndexTargets",arguments),i.dom.targets=i.config.layout.allowNestedTargets?i.dom.container.querySelectorAll(i.config.selectors.target):n.children(i.dom.container,i.config.selectors.target,i.dom.document),i.dom.targets=n.arrayFromList(i.dom.targets),i.targets=[],(e=i.config.load.dataset)&&e.length!==i.dom.targets.length)throw new Error(t.messages.errorDatasetPrerenderedMismatch());if(i.dom.targets.length){for(r=0;a=i.dom.targets[r];r++)(o=new t.Target).init(a,i,e?e[r]:void 0),o.isInDom=!0,i.targets.push(o);i.dom.parent=i.dom.targets[0].parentElement===i.dom.container?i.dom.container:i.dom.targets[0].parentElement}i.origOrder=i.targets,i.callActions("afterIndexTargets",arguments)},initControls:function(){var e=this,n="",i=null,o=null,a=null,r=null,s=null,l=-1,c=-1;switch(e.callActions("beforeInitControls",arguments),e.config.controls.scope){case"local":a=e.dom.container;break;case"global":a=e.dom.document;break;default:throw new Error(t.messages.errorConfigInvalidControlsScope())}for(l=0;n=t.controlDefinitions[l];l++)if(e.config.controls.live||n.live){if(n.parent){if(!(r=e.dom[n.parent])||r.length<0)continue;"number"!=typeof r.length&&(r=[r])}else r=[a];for(c=0;o=r[c];c++)s=e.getControl(o,n.type,n.selector),e.controls.push(s)}else for(i=a.querySelectorAll(e.config.selectors.control+n.selector),c=0;o=i[c];c++)(s=e.getControl(o,n.type,""))&&e.controls.push(s);e.callActions("afterInitControls",arguments)},getControl:function(e,i,o){var a=this,r=null,s=-1;if(a.callActions("beforeGetControl",arguments),!o)for(s=0;r=t.controls[s];s++){if(r.el===e&&r.isBound(a))return a.callFilters("controlGetControl",null,arguments);if(r.el===e&&r.type===i&&r.selector===o)return r.addBinding(a),a.callFilters("controlGetControl",r,arguments)}return(r=new t.Control).init(e,i,o),r.classNames.base=n.getClassname(a.config.classNames,i),r.classNames.active=n.getClassname(a.config.classNames,i,a.config.classNames.modifierActive),r.classNames.disabled=n.getClassname(a.config.classNames,i,a.config.classNames.modifierDisabled),r.addBinding(a),a.callFilters("controlGetControl",r,arguments)},getToggleSelector:function(){var e=this,t="or"===e.config.controls.toggleLogic?", ":"",i="";return e.callActions("beforeGetToggleSelector",arguments),e.toggleArray=n.clean(e.toggleArray),""===(i=e.toggleArray.join(t))&&(i=e.config.controls.toggleDefault),e.callFilters("selectorGetToggleSelector",i,arguments)},buildToggleArray:function(e,t){var i=this,o="";if(i.callActions("beforeBuildToggleArray",arguments),e&&e.filter)o=e.filter.selector.replace(/\s/g,"");else{if(!t)return;o=t.activeFilter.selector.replace(/\s/g,"")}o!==i.config.selectors.target&&"all"!==o||(o=""),"or"===i.config.controls.toggleLogic?i.toggleArray=o.split(","):i.toggleArray=i.splitCompoundSelector(o),i.toggleArray=n.clean(i.toggleArray),i.callActions("afterBuildToggleArray",arguments)},splitCompoundSelector:function(e){var t=e.split(/([\.\[])/g),n=[],i="",o=-1;for(""===t[0]&&t.shift(),o=0;o<t.length;o++)o%2==0&&(i=""),i+=t[o],o%2!=0&&n.push(i);return n},updateControls:function(e){var i=this,o=null,a=new t.CommandMultimix,r=-1;for(i.callActions("beforeUpdateControls",arguments),e.filter?a.filter=e.filter.selector:a.filter=i.state.activeFilter.selector,e.sort?a.sort=i.buildSortString(e.sort):a.sort=i.buildSortString(i.state.activeSort),a.filter===i.config.selectors.target&&(a.filter="all"),""===a.filter&&(a.filter="none"),n.freeze(a),r=0;o=i.controls[r];r++)o.update(a,i.toggleArray);i.callActions("afterUpdateControls",arguments)},buildSortString:function(e){var t="";return t+=e.sortString,e.next&&(t+=" "+this.buildSortString(e.next)),t},insertTargets:function(e,i){var o,a=this,r=-1,s=null,l=null,c=null,d=-1;if(a.callActions("beforeInsertTargets",arguments),void 0===e.index&&(e.index=0),o=a.getNextSibling(e.index,e.sibling,e.position),s=a.dom.document.createDocumentFragment(),r=o?n.index(o,a.config.selectors.target):a.targets.length,e.collection){for(d=0;c=e.collection[d];d++){if(a.dom.targets.indexOf(c)>-1)throw new Error(t.messages.errorInsertPreexistingElement());c.style.display="none",s.appendChild(c),s.appendChild(a.dom.document.createTextNode(" ")),n.isElement(c,a.dom.document)&&c.matches(a.config.selectors.target)&&((l=new t.Target).init(c,a),l.isInDom=!0,a.targets.splice(r,0,l),r++)}a.dom.parent.insertBefore(s,o)}i.startOrder=a.origOrder=a.targets,a.callActions("afterInsertTargets",arguments)},getNextSibling:function(e,t,n){var i=this,o=null;return e=Math.max(e,0),t&&"before"===n?o=t:t&&"after"===n?o=t.nextElementSibling||null:i.targets.length>0&&void 0!==e?o=e<i.targets.length||!i.targets.length?i.targets[e].dom.el:i.targets[i.targets.length-1].dom.el.nextElementSibling:0===i.targets.length&&i.dom.parent.children.length>0&&(i.config.layout.siblingAfter?o=i.config.layout.siblingAfter:i.config.layout.siblingBefore?o=i.config.layout.siblingBefore.nextElementSibling:i.dom.parent.children[0]),i.callFilters("elementGetNextSibling",o,arguments)},filterOperation:function(e){var t,n=this,i=!1,o=-1,a=null,r=-1;for(n.callActions("beforeFilterOperation",arguments),t=e.newFilter.action,r=0;a=e.newOrder[r];r++)i=e.newFilter.collection?e.newFilter.collection.indexOf(a.dom.el)>-1:""!==e.newFilter.selector&&a.dom.el.matches(e.newFilter.selector),n.evaluateHideShow(i,a,t,e);if(e.toRemove.length)for(r=0;a=e.show[r];r++)e.toRemove.indexOf(a)>-1&&(e.show.splice(r,1),(o=e.toShow.indexOf(a))>-1&&e.toShow.splice(o,1),e.toHide.push(a),e.hide.push(a),r--);e.matching=e.show.slice(),0===e.show.length&&""!==e.newFilter.selector&&0!==n.targets.length&&(e.hasFailed=!0),n.callActions("afterFilterOperation",arguments)},evaluateHideShow:function(e,t,n,i){var o,a=this,r=Array.prototype.slice.call(arguments,1);o=a.callFilters("testResultEvaluateHideShow",e,r),a.callActions("beforeEvaluateHideShow",arguments),!0===o&&"show"===n||!1===o&&"hide"===n?(i.show.push(t),!t.isShown&&i.toShow.push(t)):(i.hide.push(t),t.isShown&&i.toHide.push(t)),a.callActions("afterEvaluateHideShow",arguments)},sortOperation:function(e){var i=this,o=[],a=null,r=null,s=-1;if(i.callActions("beforeSortOperation",arguments),e.startOrder=i.targets,e.newSort.collection){for(o=[],s=0;r=e.newSort.collection[s];s++){if(i.dom.targets.indexOf(r)<0)throw new Error(t.messages.errorSortNonExistentElement());(a=new t.Target).init(r,i),a.isInDom=!0,o.push(a)}e.newOrder=o}else"random"===e.newSort.order?e.newOrder=n.arrayShuffle(e.startOrder):""===e.newSort.attribute?(e.newOrder=i.origOrder.slice(),"desc"===e.newSort.order&&e.newOrder.reverse()):(e.newOrder=e.startOrder.slice(),e.newOrder.sort((function(t,n){return i.compare(t,n,e.newSort)})));n.isEqualArray(e.newOrder,e.startOrder)&&(e.willSort=!1),i.callActions("afterSortOperation",arguments)},compare:function(e,t,n){var i=this,o=n.order,a=i.getAttributeValue(e,n.attribute),r=i.getAttributeValue(t,n.attribute);return isNaN(1*a)||isNaN(1*r)?(a=a.toLowerCase(),r=r.toLowerCase()):(a*=1,r*=1),a<r?"asc"===o?-1:1:a>r?"asc"===o?1:-1:a===r&&n.next?i.compare(e,t,n.next):0},getAttributeValue:function(e,n){var i;return null===(i=e.dom.el.getAttribute("data-"+n))&&this.config.debug.showWarnings&&console.warn(t.messages.warningInconsistentSortingAttributes({attribute:"data-"+n})),this.callFilters("valueGetAttributeValue",i||0,arguments)},printSort:function(t,i){var o,a=this,r=t?i.newOrder:i.startOrder,s=t?i.startOrder:i.newOrder,l=r.length?r[r.length-1].dom.el.nextElementSibling:null,c=e.document.createDocumentFragment(),d=null,u=null,h=-1;for(a.callActions("beforePrintSort",arguments),h=0;d=r[h];h++)"absolute"!==(u=d.dom.el).style.position&&(n.removeWhitespace(u.previousSibling),u.parentElement.removeChild(u));for((o=l?l.previousSibling:a.dom.parent.lastChild)&&"#text"===o.nodeName&&n.removeWhitespace(o),h=0;d=s[h];h++)u=d.dom.el,n.isElement(c.lastChild)&&c.appendChild(e.document.createTextNode(" ")),c.appendChild(u);a.dom.parent.firstChild&&a.dom.parent.firstChild!==l&&c.insertBefore(e.document.createTextNode(" "),c.childNodes[0]),l?(c.appendChild(e.document.createTextNode(" ")),a.dom.parent.insertBefore(c,l)):a.dom.parent.appendChild(c),a.callActions("afterPrintSort",arguments)},parseSortString:function(e,i){var o=e.split(" "),a=i,r=[],s=-1;for(s=0;s<o.length;s++){switch(r=o[s].split(":"),a.sortString=o[s],a.attribute=n.dashCase(r[0]),a.order=r[1]||"asc",a.attribute){case"default":a.attribute="";break;case"random":a.attribute="",a.order="random"}if(!a.attribute||"random"===a.order)break;s<o.length-1&&(a.next=new t.CommandSort,n.freeze(a),a=a.next)}return this.callFilters("commandsParseSort",i,arguments)},parseEffects:function(){var e=this,n="",i=e.config.animation.effectsIn||e.config.animation.effects,o=e.config.animation.effectsOut||e.config.animation.effects;for(n in e.callActions("beforeParseEffects",arguments),e.effectsIn=new t.StyleData,e.effectsOut=new t.StyleData,e.transformIn=[],e.transformOut=[],e.effectsIn.opacity=e.effectsOut.opacity=1,e.parseEffect("fade",i,e.effectsIn,e.transformIn),e.parseEffect("fade",o,e.effectsOut,e.transformOut,!0),t.transformDefaults)t.transformDefaults[n]instanceof t.TransformData&&(e.parseEffect(n,i,e.effectsIn,e.transformIn),e.parseEffect(n,o,e.effectsOut,e.transformOut,!0));e.parseEffect("stagger",i,e.effectsIn,e.transformIn),e.parseEffect("stagger",o,e.effectsOut,e.transformOut,!0),e.callActions("afterParseEffects",arguments)},parseEffect:function(e,n,i,o,a){var r,s=this,l="",c="",d=["%","px","em","rem","vh","vw","deg"],u="",h=-1;if(s.callActions("beforeParseEffect",arguments),"string"!=typeof n)throw new TypeError(t.messages.errorConfigInvalidAnimationEffects());if(n.indexOf(e)<0)"stagger"===e&&(s.staggerDuration=0);else{switch((r=n.indexOf(e+"("))>-1&&(l=n.substring(r),c=/\(([^)]+)\)/.exec(l)[1]),e){case"fade":i.opacity=c?parseFloat(c):0;break;case"stagger":s.staggerDuration=c?parseFloat(c):100;break;default:if(a&&s.config.animation.reverseOut&&"scale"!==e?i[e].value=-1*(c?parseFloat(c):t.transformDefaults[e].value):i[e].value=c?parseFloat(c):t.transformDefaults[e].value,c){for(h=0;u=d[h];h++)if(c.indexOf(u)>-1){i[e].unit=u;break}}else i[e].unit=t.transformDefaults[e].unit;o.push(e+"("+i[e].value+i[e].unit+")")}s.callActions("afterParseEffect",arguments)}},buildState:function(e){var n=this,i=new t.State,o=null,a=-1;for(n.callActions("beforeBuildState",arguments),a=0;o=n.targets[a];a++)(!e.toRemove.length||e.toRemove.indexOf(o)<0)&&i.targets.push(o.dom.el);for(a=0;o=e.matching[a];a++)i.matching.push(o.dom.el);for(a=0;o=e.show[a];a++)i.show.push(o.dom.el);for(a=0;o=e.hide[a];a++)(!e.toRemove.length||e.toRemove.indexOf(o)<0)&&i.hide.push(o.dom.el);return i.id=n.id,i.container=n.dom.container,i.activeFilter=e.newFilter,i.activeSort=e.newSort,i.activeDataset=e.newDataset,i.activeContainerClassName=e.newContainerClassName,i.hasFailed=e.hasFailed,i.totalTargets=n.targets.length,i.totalShow=e.show.length,i.totalHide=e.hide.length,i.totalMatching=e.matching.length,i.triggerElement=e.triggerElement,n.callFilters("stateBuildState",i,arguments)},goMix:function(i,o){var a,r=this;return r.callActions("beforeGoMix",arguments),r.config.animation.duration&&r.config.animation.effects&&n.isVisible(r.dom.container)||(i=!1),o.toShow.length||o.toHide.length||o.willSort||o.willChangeLayout||(i=!1),o.startState.show.length||o.show.length||(i=!1),t.events.fire("mixStart",r.dom.container,{state:o.startState,futureState:o.newState,instance:r},r.dom.document),"function"==typeof r.config.callbacks.onMixStart&&r.config.callbacks.onMixStart.call(r.dom.container,o.startState,o.newState,r),n.removeClass(r.dom.container,n.getClassname(r.config.classNames,"container",r.config.classNames.modifierFailed)),a=r.userDeferred?r.userDeferred:r.userDeferred=n.defer(t.libraries),r.isBusy=!0,i&&t.features.has.transitions?(e.pageYOffset!==o.docState.scrollTop&&e.scrollTo(o.docState.scrollLeft,o.docState.scrollTop),r.config.animation.applyPerspective&&(r.dom.parent.style[t.features.perspectiveProp]=r.config.animation.perspectiveDistance,r.dom.parent.style[t.features.perspectiveOriginProp]=r.config.animation.perspectiveOrigin),r.config.animation.animateResizeContainer&&o.startHeight!==o.newHeight&&o.viewportDeltaY!==o.startHeight-o.newHeight&&(r.dom.parent.style.height=o.startHeight+"px"),r.config.animation.animateResizeContainer&&o.startWidth!==o.newWidth&&o.viewportDeltaX!==o.startWidth-o.newWidth&&(r.dom.parent.style.width=o.startWidth+"px"),o.startHeight===o.newHeight&&(r.dom.parent.style.height=o.startHeight+"px"),o.startWidth===o.newWidth&&(r.dom.parent.style.width=o.startWidth+"px"),o.startHeight===o.newHeight&&o.startWidth===o.newWidth&&(r.dom.parent.style.overflow="hidden"),requestAnimationFrame((function(){r.moveTargets(o)})),r.callFilters("promiseGoMix",a.promise,arguments)):(r.config.debug.fauxAsync?setTimeout((function(){r.cleanUp(o)}),r.config.animation.duration):r.cleanUp(o),r.callFilters("promiseGoMix",a.promise,arguments))},getStartMixData:function(n){var i=this,o=e.getComputedStyle(i.dom.parent),a=i.dom.parent.getBoundingClientRect(),r=null,s={},l=-1,c=o[t.features.boxSizingProp];for(i.incPadding="border-box"===c,i.callActions("beforeGetStartMixData",arguments),l=0;r=n.show[l];l++)s=r.getPosData(),n.showPosData[l]={startPosData:s};for(l=0;r=n.toHide[l];l++)s=r.getPosData(),n.toHidePosData[l]={startPosData:s};n.startX=a.left,n.startY=a.top,n.startHeight=i.incPadding?a.height:a.height-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderTop)-parseFloat(o.borderBottom),n.startWidth=i.incPadding?a.width:a.width-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderLeft)-parseFloat(o.borderRight),i.callActions("afterGetStartMixData",arguments)},setInter:function(e){var t=this,i=null,o=-1;for(t.callActions("beforeSetInter",arguments),t.config.animation.clampHeight&&(t.dom.parent.style.height=e.startHeight+"px",t.dom.parent.style.overflow="hidden"),t.config.animation.clampWidth&&(t.dom.parent.style.width=e.startWidth+"px",t.dom.parent.style.overflow="hidden"),o=0;i=e.toShow[o];o++)i.show();e.willChangeLayout&&(n.removeClass(t.dom.container,e.startContainerClassName),n.addClass(t.dom.container,e.newContainerClassName)),t.callActions("afterSetInter",arguments)},getInterMixData:function(e){var t=null,n=-1;for(this.callActions("beforeGetInterMixData",arguments),n=0;t=e.show[n];n++)e.showPosData[n].interPosData=t.getPosData();for(n=0;t=e.toHide[n];n++)e.toHidePosData[n].interPosData=t.getPosData();this.callActions("afterGetInterMixData",arguments)},setFinal:function(e){var t=this,n=null,i=-1;for(t.callActions("beforeSetFinal",arguments),e.willSort&&t.printSort(!1,e),i=0;n=e.toHide[i];i++)n.hide();t.callActions("afterSetFinal",arguments)},getFinalMixData:function(t){var i,o=this,a=null,r=null,s=-1;for(o.callActions("beforeGetFinalMixData",arguments),s=0;r=t.show[s];s++)t.showPosData[s].finalPosData=r.getPosData();for(s=0;r=t.toHide[s];s++)t.toHidePosData[s].finalPosData=r.getPosData();for((o.config.animation.clampHeight||o.config.animation.clampWidth)&&(o.dom.parent.style.height=o.dom.parent.style.width=o.dom.parent.style.overflow=""),o.incPadding||(a=e.getComputedStyle(o.dom.parent)),i=o.dom.parent.getBoundingClientRect(),t.newX=i.left,t.newY=i.top,t.newHeight=o.incPadding?i.height:i.height-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderTop)-parseFloat(a.borderBottom),t.newWidth=o.incPadding?i.width:i.width-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderLeft)-parseFloat(a.borderRight),t.viewportDeltaX=t.docState.viewportWidth-this.dom.document.documentElement.clientWidth,t.viewportDeltaY=t.docState.viewportHeight-this.dom.document.documentElement.clientHeight,t.willSort&&o.printSort(!0,t),s=0;r=t.toShow[s];s++)r.hide();for(s=0;r=t.toHide[s];s++)r.show();t.willChangeLayout&&(n.removeClass(o.dom.container,t.newContainerClassName),n.addClass(o.dom.container,o.config.layout.containerClassName)),o.callActions("afterGetFinalMixData",arguments)},getTweenData:function(e){var n=this,i=null,o=null,a=Object.getOwnPropertyNames(n.effectsIn),r="",s=null,l=-1,c=-1,d=-1,u=-1;for(n.callActions("beforeGetTweenData",arguments),d=0;i=e.show[d];d++)for((o=e.showPosData[d]).posIn=new t.StyleData,o.posOut=new t.StyleData,o.tweenData=new t.StyleData,i.isShown?(o.posIn.x=o.startPosData.x-o.interPosData.x,o.posIn.y=o.startPosData.y-o.interPosData.y):o.posIn.x=o.posIn.y=0,o.posOut.x=o.finalPosData.x-o.interPosData.x,o.posOut.y=o.finalPosData.y-o.interPosData.y,o.posIn.opacity=i.isShown?1:n.effectsIn.opacity,o.posOut.opacity=1,o.tweenData.opacity=o.posOut.opacity-o.posIn.opacity,i.isShown||n.config.animation.nudge||(o.posIn.x=o.posOut.x,o.posIn.y=o.posOut.y),o.tweenData.x=o.posOut.x-o.posIn.x,o.tweenData.y=o.posOut.y-o.posIn.y,n.config.animation.animateResizeTargets&&(o.posIn.width=o.startPosData.width,o.posIn.height=o.startPosData.height,l=(o.startPosData.width||o.finalPosData.width)-o.interPosData.width,o.posIn.marginRight=o.startPosData.marginRight-l,c=(o.startPosData.height||o.finalPosData.height)-o.interPosData.height,o.posIn.marginBottom=o.startPosData.marginBottom-c,o.posOut.width=o.finalPosData.width,o.posOut.height=o.finalPosData.height,l=(o.finalPosData.width||o.startPosData.width)-o.interPosData.width,o.posOut.marginRight=o.finalPosData.marginRight-l,c=(o.finalPosData.height||o.startPosData.height)-o.interPosData.height,o.posOut.marginBottom=o.finalPosData.marginBottom-c,o.tweenData.width=o.posOut.width-o.posIn.width,o.tweenData.height=o.posOut.height-o.posIn.height,o.tweenData.marginRight=o.posOut.marginRight-o.posIn.marginRight,o.tweenData.marginBottom=o.posOut.marginBottom-o.posIn.marginBottom),u=0;r=a[u];u++)(s=n.effectsIn[r])instanceof t.TransformData&&s.value&&(o.posIn[r].value=s.value,o.posOut[r].value=0,o.tweenData[r].value=o.posOut[r].value-o.posIn[r].value,o.posIn[r].unit=o.posOut[r].unit=o.tweenData[r].unit=s.unit);for(d=0;i=e.toHide[d];d++)for((o=e.toHidePosData[d]).posIn=new t.StyleData,o.posOut=new t.StyleData,o.tweenData=new t.StyleData,o.posIn.x=i.isShown?o.startPosData.x-o.interPosData.x:0,o.posIn.y=i.isShown?o.startPosData.y-o.interPosData.y:0,o.posOut.x=n.config.animation.nudge?0:o.posIn.x,o.posOut.y=n.config.animation.nudge?0:o.posIn.y,o.tweenData.x=o.posOut.x-o.posIn.x,o.tweenData.y=o.posOut.y-o.posIn.y,n.config.animation.animateResizeTargets&&(o.posIn.width=o.startPosData.width,o.posIn.height=o.startPosData.height,l=o.startPosData.width-o.interPosData.width,o.posIn.marginRight=o.startPosData.marginRight-l,c=o.startPosData.height-o.interPosData.height,o.posIn.marginBottom=o.startPosData.marginBottom-c),o.posIn.opacity=1,o.posOut.opacity=n.effectsOut.opacity,o.tweenData.opacity=o.posOut.opacity-o.posIn.opacity,u=0;r=a[u];u++)(s=n.effectsOut[r])instanceof t.TransformData&&s.value&&(o.posIn[r].value=0,o.posOut[r].value=s.value,o.tweenData[r].value=o.posOut[r].value-o.posIn[r].value,o.posIn[r].unit=o.posOut[r].unit=o.tweenData[r].unit=s.unit);n.callActions("afterGetTweenData",arguments)},moveTargets:function(e){var i=this,o=null,a=null,r=null,s="",l=!1,c=-1,d=-1,u=i.checkProgress.bind(i);for(i.callActions("beforeMoveTargets",arguments),d=0;o=e.show[d];d++)a=new t.IMoveData,r=e.showPosData[d],s=o.isShown?"none":"show",(l=i.willTransition(s,e.hasEffect,r.posIn,r.posOut))&&c++,o.show(),a.posIn=r.posIn,a.posOut=r.posOut,a.statusChange=s,a.staggerIndex=c,a.operation=e,a.callback=l?u:null,o.move(a);for(d=0;o=e.toHide[d];d++)r=e.toHidePosData[d],a=new t.IMoveData,s="hide",l=i.willTransition(s,r.posIn,r.posOut),a.posIn=r.posIn,a.posOut=r.posOut,a.statusChange=s,a.staggerIndex=d,a.operation=e,a.callback=l?u:null,o.move(a);i.config.animation.animateResizeContainer&&(i.dom.parent.style[t.features.transitionProp]="height "+i.config.animation.duration+"ms ease, width "+i.config.animation.duration+"ms ease ",requestAnimationFrame((function(){e.startHeight!==e.newHeight&&e.viewportDeltaY!==e.startHeight-e.newHeight&&(i.dom.parent.style.height=e.newHeight+"px"),e.startWidth!==e.newWidth&&e.viewportDeltaX!==e.startWidth-e.newWidth&&(i.dom.parent.style.width=e.newWidth+"px")}))),e.willChangeLayout&&(n.removeClass(i.dom.container,i.config.layout.ContainerClassName),n.addClass(i.dom.container,e.newContainerClassName)),i.callActions("afterMoveTargets",arguments)},hasEffect:function(){var e=this,t=["scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],n="",i=null,o=!1,a=-1;if(1!==e.effectsIn.opacity)return e.callFilters("resultHasEffect",!0,arguments);for(a=0;n=t[a];a++)if(0!==("undefined"!==(i=e.effectsIn[n]).value?i.value:i)){o=!0;break}return e.callFilters("resultHasEffect",o,arguments)},willTransition:function(e,t,i,o){var a,r=this;return a=!(!n.isVisible(r.dom.container)||!("none"!==e&&t||i.x!==o.x||i.y!==o.y)&&(!r.config.animation.animateResizeTargets||i.width===o.width&&i.height===o.height&&i.marginRight===o.marginRight&&i.marginTop===o.marginTop)),r.callFilters("resultWillTransition",a,arguments)},checkProgress:function(e){var t=this;t.targetsDone++,t.targetsBound===t.targetsDone&&t.cleanUp(e)},cleanUp:function(e){var i=this,o=null,a=null,r=null,s=null,l=-1;for(i.callActions("beforeCleanUp",arguments),i.targetsMoved=i.targetsImmovable=i.targetsBound=i.targetsDone=0,l=0;o=e.show[l];l++)o.cleanUp(),o.show();for(l=0;o=e.toHide[l];l++)o.cleanUp(),o.hide();if(e.willSort&&i.printSort(!1,e),i.dom.parent.style[t.features.transitionProp]=i.dom.parent.style.height=i.dom.parent.style.width=i.dom.parent.style.overflow=i.dom.parent.style[t.features.perspectiveProp]=i.dom.parent.style[t.features.perspectiveOriginProp]="",e.willChangeLayout&&(n.removeClass(i.dom.container,e.startContainerClassName),n.addClass(i.dom.container,e.newContainerClassName)),e.toRemove.length){for(l=0;o=i.targets[l];l++)e.toRemove.indexOf(o)>-1&&((a=o.dom.el.previousSibling)&&"#text"===a.nodeName&&(r=o.dom.el.nextSibling)&&"#text"===r.nodeName&&n.removeWhitespace(a),e.willSort||i.dom.parent.removeChild(o.dom.el),i.targets.splice(l,1),o.isInDom=!1,l--);i.origOrder=i.targets}e.willSort&&(i.targets=e.newOrder),i.state=e.newState,i.lastOperation=e,i.dom.targets=i.state.targets,t.events.fire("mixEnd",i.dom.container,{state:i.state,instance:i},i.dom.document),"function"==typeof i.config.callbacks.onMixEnd&&i.config.callbacks.onMixEnd.call(i.dom.container,i.state,i),e.hasFailed&&(t.events.fire("mixFail",i.dom.container,{state:i.state,instance:i},i.dom.document),"function"==typeof i.config.callbacks.onMixFail&&i.config.callbacks.onMixFail.call(i.dom.container,i.state,i),n.addClass(i.dom.container,n.getClassname(i.config.classNames,"container",i.config.classNames.modifierFailed))),"function"==typeof i.userCallback&&i.userCallback.call(i.dom.container,i.state,i),"function"==typeof i.userDeferred.resolve&&i.userDeferred.resolve(i.state),i.userCallback=null,i.userDeferred=null,i.lastClicked=null,i.isToggling=!1,i.isBusy=!1,i.queue.length&&(i.callActions("beforeReadQueueCleanUp",arguments),s=i.queue.shift(),i.userDeferred=s.deferred,i.isToggling=s.isToggling,i.lastClicked=s.triggerElement,s.instruction.command instanceof t.CommandMultimix?i.multimix.apply(i,s.args):i.dataset.apply(i,s.args)),i.callActions("afterCleanUp",arguments)},parseMultimixArgs:function(e){var i=this,o=new t.UserInstruction,a=null,r=-1;for(o.animate=i.config.animation.enable,o.command=new t.CommandMultimix,r=0;r<e.length;r++)null!==(a=e[r])&&("object"==typeof a?n.extend(o.command,a):"boolean"==typeof a?o.animate=a:"function"==typeof a&&(o.callback=a));return!o.command.insert||o.command.insert instanceof t.CommandInsert||(o.command.insert=i.parseInsertArgs([o.command.insert]).command),!o.command.remove||o.command.remove instanceof t.CommandRemove||(o.command.remove=i.parseRemoveArgs([o.command.remove]).command),!o.command.filter||o.command.filter instanceof t.CommandFilter||(o.command.filter=i.parseFilterArgs([o.command.filter]).command),!o.command.sort||o.command.sort instanceof t.CommandSort||(o.command.sort=i.parseSortArgs([o.command.sort]).command),!o.command.changeLayout||o.command.changeLayout instanceof t.CommandChangeLayout||(o.command.changeLayout=i.parseChangeLayoutArgs([o.command.changeLayout]).command),o=i.callFilters("instructionParseMultimixArgs",o,arguments),n.freeze(o),o},parseFilterArgs:function(e){var i=this,o=new t.UserInstruction,a=null,r=-1;for(o.animate=i.config.animation.enable,o.command=new t.CommandFilter,r=0;r<e.length;r++)"string"==typeof(a=e[r])?o.command.selector=a:null===a?o.command.collection=[]:"object"==typeof a&&n.isElement(a,i.dom.document)?o.command.collection=[a]:"object"==typeof a&&void 0!==a.length?o.command.collection=n.arrayFromList(a):"object"==typeof a?n.extend(o.command,a):"boolean"==typeof a?o.animate=a:"function"==typeof a&&(o.callback=a);if(o.command.selector&&o.command.collection)throw new Error(t.messages.errorFilterInvalidArguments());return o=i.callFilters("instructionParseFilterArgs",o,arguments),n.freeze(o),o},parseSortArgs:function(e){var i=this,o=new t.UserInstruction,a=null,r="",s=-1;for(o.animate=i.config.animation.enable,o.command=new t.CommandSort,s=0;s<e.length;s++)if(null!==(a=e[s]))switch(typeof a){case"string":r=a;break;case"object":a.length&&(o.command.collection=n.arrayFromList(a));break;case"boolean":o.animate=a;break;case"function":o.callback=a}return r&&(o.command=i.parseSortString(r,o.command)),o=i.callFilters("instructionParseSortArgs",o,arguments),n.freeze(o),o},parseInsertArgs:function(e){var i=this,o=new t.UserInstruction,a=null,r=-1;for(o.animate=i.config.animation.enable,o.command=new t.CommandInsert,r=0;r<e.length;r++)null!==(a=e[r])&&("number"==typeof a?o.command.index=a:"string"==typeof a&&["before","after"].indexOf(a)>-1?o.command.position=a:"string"==typeof a?o.command.collection=n.arrayFromList(n.createElement(a).childNodes):"object"==typeof a&&n.isElement(a,i.dom.document)?o.command.collection.length?o.command.sibling=a:o.command.collection=[a]:"object"==typeof a&&a.length?o.command.collection.length?o.command.sibling=a[0]:o.command.collection=a:"object"==typeof a&&a.childNodes&&a.childNodes.length?o.command.collection.length?o.command.sibling=a.childNodes[0]:o.command.collection=n.arrayFromList(a.childNodes):"object"==typeof a?n.extend(o.command,a):"boolean"==typeof a?o.animate=a:"function"==typeof a&&(o.callback=a));if(o.command.index&&o.command.sibling)throw new Error(t.messages.errorInsertInvalidArguments());return!o.command.collection.length&&i.config.debug.showWarnings&&console.warn(t.messages.warningInsertNoElements()),o=i.callFilters("instructionParseInsertArgs",o,arguments),n.freeze(o),o},parseRemoveArgs:function(e){var i=this,o=new t.UserInstruction,a=null,r=null,s=-1;for(o.animate=i.config.animation.enable,o.command=new t.CommandRemove,s=0;s<e.length;s++)if(null!==(r=e[s]))switch(typeof r){case"number":i.targets[r]&&(o.command.targets[0]=i.targets[r]);break;case"string":o.command.collection=n.arrayFromList(i.dom.parent.querySelectorAll(r));break;case"object":r&&r.length?o.command.collection=r:n.isElement(r,i.dom.document)?o.command.collection=[r]:n.extend(o.command,r);break;case"boolean":o.animate=r;break;case"function":o.callback=r}if(o.command.collection.length)for(s=0;a=i.targets[s];s++)o.command.collection.indexOf(a.dom.el)>-1&&o.command.targets.push(a);return!o.command.targets.length&&i.config.debug.showWarnings&&console.warn(t.messages.warningRemoveNoElements()),n.freeze(o),o},parseDatasetArgs:function(e){var i=new t.UserInstruction,o=null,a=-1;for(i.animate=this.config.animation.enable,i.command=new t.CommandDataset,a=0;a<e.length;a++)if(null!==(o=e[a]))switch(typeof o){case"object":Array.isArray(o)||"number"==typeof o.length?i.command.dataset=o:n.extend(i.command,o);break;case"boolean":i.animate=o;break;case"function":i.callback=o}return n.freeze(i),i},parseChangeLayoutArgs:function(e){var i=new t.UserInstruction,o=null,a=-1;for(i.animate=this.config.animation.enable,i.command=new t.CommandChangeLayout,a=0;a<e.length;a++)if(null!==(o=e[a]))switch(typeof o){case"string":i.command.containerClassName=o;break;case"object":n.extend(i.command,o);break;case"boolean":i.animate=o;break;case"function":i.callback=o}return n.freeze(i),i},queueMix:function(e){var i=this,o=null,a="";return i.callActions("beforeQueueMix",arguments),o=n.defer(t.libraries),i.config.animation.queue&&i.queue.length<i.config.animation.queueLimit?(e.deferred=o,i.queue.push(e),i.config.controls.enable&&(i.isToggling?(i.buildToggleArray(e.instruction.command),a=i.getToggleSelector(),i.updateControls({filter:{selector:a}})):i.updateControls(e.instruction.command))):(i.config.debug.showWarnings&&console.warn(t.messages.warningMultimixInstanceQueueFull()),o.resolve(i.state),t.events.fire("mixBusy",i.dom.container,{state:i.state,instance:i},i.dom.document),"function"==typeof i.config.callbacks.onMixBusy&&i.config.callbacks.onMixBusy.call(i.dom.container,i.state,i)),i.callFilters("promiseQueueMix",o.promise,arguments)},getDataOperation:function(e){var i=this,o=new t.Operation,a=[];if(o=i.callFilters("operationUnmappedGetDataOperation",o,arguments),i.dom.targets.length&&!(a=i.state.activeDataset||[]).length)throw new Error(t.messages.errorDatasetNotSet());return o.id=n.randomHex(),o.startState=i.state,o.startDataset=a,o.newDataset=e.slice(),i.diffDatasets(o),o.startOrder=i.targets,o.newOrder=o.show,i.config.animation.enable&&(i.getStartMixData(o),i.setInter(o),o.docState=n.getDocumentState(i.dom.document),i.getInterMixData(o),i.setFinal(o),i.getFinalMixData(o),i.parseEffects(),o.hasEffect=i.hasEffect(),i.getTweenData(o)),i.targets=o.show.slice(),o.newState=i.buildState(o),Array.prototype.push.apply(i.targets,o.toRemove),i.callFilters("operationMappedGetDataOperation",o,arguments)},diffDatasets:function(e){var i=this,o=[],a=[],r=[],s=null,l=null,c=null,d=null,u=null,h={},p="",f=-1;for(i.callActions("beforeDiffDatasets",arguments),f=0;s=e.newDataset[f];f++){if(void 0===(p=s[i.config.data.uidKey])||p.toString().length<1)throw new TypeError(t.messages.errorDatasetInvalidUidKey({uidKey:i.config.data.uidKey}));if(h[p])throw new Error(t.messages.errorDatasetDuplicateUid({uid:p}));h[p]=!0,(l=i.cache[p])instanceof t.Target?(i.config.data.dirtyCheck&&!n.deepEquals(s,l.data)&&(c=l.render(s),l.data=s,c!==l.dom.el&&(l.isInDom&&(l.unbindEvents(),i.dom.parent.replaceChild(c,l.dom.el)),l.isShown||(c.style.display="none"),l.dom.el=c,l.isInDom&&l.bindEvents())),c=l.dom.el):((l=new t.Target).init(null,i,s),l.hide()),l.isInDom?(u=l.dom.el.nextElementSibling,a.push(p),d&&(d.lastElementChild&&d.appendChild(i.dom.document.createTextNode(" ")),i.insertDatasetFrag(d,l.dom.el,r),d=null)):(d||(d=i.dom.document.createDocumentFragment()),d.lastElementChild&&d.appendChild(i.dom.document.createTextNode(" ")),d.appendChild(l.dom.el),l.isInDom=!0,l.unbindEvents(),l.bindEvents(),l.hide(),e.toShow.push(l),r.push(l)),e.show.push(l)}for(d&&((u=u||i.config.layout.siblingAfter)&&d.appendChild(i.dom.document.createTextNode(" ")),i.insertDatasetFrag(d,u,r)),f=0;s=e.startDataset[f];f++)p=s[i.config.data.uidKey],l=i.cache[p],e.show.indexOf(l)<0?(e.hide.push(l),e.toHide.push(l),e.toRemove.push(l)):o.push(p);n.isEqualArray(o,a)||(e.willSort=!0),i.callActions("afterDiffDatasets",arguments)},insertDatasetFrag:function(e,t,i){var o=this,a=t?n.arrayFromList(o.dom.parent.children).indexOf(t):o.targets.length;for(o.dom.parent.insertBefore(e,t);i.length;)o.targets.splice(a,0,i.shift()),a++},willSort:function(e,t){var n,i=this;return n=!!(i.config.behavior.liveSort||"random"===e.order||e.attribute!==t.attribute||e.order!==t.order||e.collection!==t.collection||null===e.next&&t.next||e.next&&null===t.next)||!(!e.next||!t.next)&&i.willSort(e.next,t.next),i.callFilters("resultWillSort",n,arguments)},show:function(){return this.filter("all")},hide:function(){return this.filter("none")},isMixing:function(){return this.isBusy},filter:function(){var e=this.parseFilterArgs(arguments);return this.multimix({filter:e.command},e.animate,e.callback)},toggleOn:function(){var e,t=this,n=t.parseFilterArgs(arguments),i=n.command.selector;return t.isToggling=!0,t.toggleArray.indexOf(i)<0&&t.toggleArray.push(i),e=t.getToggleSelector(),t.multimix({filter:e},n.animate,n.callback)},toggleOff:function(){var e,t=this,n=t.parseFilterArgs(arguments),i=n.command.selector,o=t.toggleArray.indexOf(i);return t.isToggling=!0,o>-1&&t.toggleArray.splice(o,1),e=t.getToggleSelector(),t.multimix({filter:e},n.animate,n.callback)},sort:function(){var e=this.parseSortArgs(arguments);return this.multimix({sort:e.command},e.animate,e.callback)},changeLayout:function(){var e=this.parseChangeLayoutArgs(arguments);return this.multimix({changeLayout:e.command},e.animate,e.callback)},dataset:function(){var e=this,n=e.parseDatasetArgs(arguments),i=null,o=null,a=!1;return e.callActions("beforeDataset",arguments),e.isBusy?((o=new t.QueueItem).args=arguments,o.instruction=n,e.queueMix(o)):(n.callback&&(e.userCallback=n.callback),a=n.animate^e.config.animation.enable?n.animate:e.config.animation.enable,i=e.getDataOperation(n.command.dataset),e.goMix(a,i))},multimix:function(){var e=this,n=null,i=!1,o=null,a=e.parseMultimixArgs(arguments);return e.callActions("beforeMultimix",arguments),e.isBusy?((o=new t.QueueItem).args=arguments,o.instruction=a,o.triggerElement=e.lastClicked,o.isToggling=e.isToggling,e.queueMix(o)):(n=e.getOperation(a.command),e.config.controls.enable&&(a.command.filter&&!e.isToggling&&(e.toggleArray.length=0,e.buildToggleArray(n.command)),e.queue.length<1&&e.updateControls(n.command)),a.callback&&(e.userCallback=a.callback),i=a.animate^e.config.animation.enable?a.animate:e.config.animation.enable,e.callFilters("operationMultimix",n,arguments),e.goMix(i,n))},getOperation:function(e){var i=this,o=e.sort,a=e.filter,r=e.changeLayout,s=e.remove,l=e.insert,c=new t.Operation;return(c=i.callFilters("operationUnmappedGetOperation",c,arguments)).id=n.randomHex(),c.command=e,c.startState=i.state,c.triggerElement=i.lastClicked,i.isBusy?(i.config.debug.showWarnings&&console.warn(t.messages.warningGetOperationInstanceBusy()),null):(l&&i.insertTargets(l,c),s&&(c.toRemove=s.targets),c.startSort=c.newSort=c.startState.activeSort,c.startOrder=c.newOrder=i.targets,o&&(c.startSort=c.startState.activeSort,c.newSort=o,c.willSort=i.willSort(o,c.startState.activeSort),c.willSort&&i.sortOperation(c)),c.startFilter=c.startState.activeFilter,c.newFilter=a||n.extend(new t.CommandFilter,c.startFilter),"all"===c.newFilter.selector?c.newFilter.selector=i.config.selectors.target:"none"===c.newFilter.selector&&(c.newFilter.selector=""),i.filterOperation(c),c.startContainerClassName=c.startState.activeContainerClassName,r?(c.newContainerClassName=r.containerClassName,c.newContainerClassName!==c.startContainerClassName&&(c.willChangeLayout=!0)):c.newContainerClassName=c.startContainerClassName,i.config.animation.enable&&(i.getStartMixData(c),i.setInter(c),c.docState=n.getDocumentState(i.dom.document),i.getInterMixData(c),i.setFinal(c),i.getFinalMixData(c),i.parseEffects(),c.hasEffect=i.hasEffect(),i.getTweenData(c)),c.willSort&&(i.targets=c.newOrder),c.newState=i.buildState(c),i.callFilters("operationMappedGetOperation",c,arguments))},tween:function(e,t){var n=null,i=null,o=-1,a=-1;for(t=Math.min(t,1),t=Math.max(t,0),a=0;n=e.show[a];a++)i=e.showPosData[a],n.applyTween(i,t);for(a=0;n=e.hide[a];a++)n.isShown&&n.hide(),(o=e.toHide.indexOf(n))>-1&&(i=e.toHidePosData[o],n.isShown||n.show(),n.applyTween(i,t))},insert:function(){var e=this.parseInsertArgs(arguments);return this.multimix({insert:e.command},e.animate,e.callback)},insertBefore:function(){var e=this.parseInsertArgs(arguments);return this.insert(e.command.collection,"before",e.command.sibling,e.animate,e.callback)},insertAfter:function(){var e=this.parseInsertArgs(arguments);return this.insert(e.command.collection,"after",e.command.sibling,e.animate,e.callback)},prepend:function(){var e=this.parseInsertArgs(arguments);return this.insert(0,e.command.collection,e.animate,e.callback)},append:function(){var e=this,t=e.parseInsertArgs(arguments);return e.insert(e.state.totalTargets,t.command.collection,t.animate,t.callback)},remove:function(){var e=this.parseRemoveArgs(arguments);return this.multimix({remove:e.command},e.animate,e.callback)},getConfig:function(e){var t,i=this;return t=e?n.getProperty(i.config,e):i.config,i.callFilters("valueGetConfig",t,arguments)},configure:function(e){var t=this;t.callActions("beforeConfigure",arguments),n.extend(t.config,e,!0,!0),t.callActions("afterConfigure",arguments)},getState:function(){var e;return e=new t.State,n.extend(e,this.state),n.freeze(e),this.callFilters("stateGetState",e,arguments)},forceRefresh:function(){this.indexTargets()},forceRender:function(){var e=this,t=null,n=null,i="";for(i in e.cache)(n=(t=e.cache[i]).render(t.data))!==t.dom.el&&(t.isInDom&&(t.unbindEvents(),e.dom.parent.replaceChild(n,t.dom.el)),t.isShown||(n.style.display="none"),t.dom.el=n,t.isInDom&&t.bindEvents());e.state=e.buildState(e.lastOperation)},destroy:function(e){var n=this,i=null,o=null,a=0;for(n.callActions("beforeDestroy",arguments),a=0;i=n.controls[a];a++)i.removeBinding(n);for(a=0;o=n.targets[a];a++)e&&o.show(),o.unbindEvents();n.dom.container.id.match(/^MixItUp/)&&n.dom.container.removeAttribute("id"),delete t.instances[n.id],n.callActions("afterDestroy",arguments)}}),t.IMoveData=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.posIn=null,this.posOut=null,this.operation=null,this.callback=null,this.statusChange="",this.duration=-1,this.staggerIndex=-1,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.IMoveData),t.IMoveData.prototype=Object.create(t.Base.prototype),t.IMoveData.prototype.constructor=t.IMoveData,t.TargetDom=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.TargetDom),t.TargetDom.prototype=Object.create(t.Base.prototype),t.TargetDom.prototype.constructor=t.TargetDom,t.Target=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.sortString="",this.mixer=null,this.callback=null,this.isShown=!1,this.isBound=!1,this.isExcluded=!1,this.isInDom=!1,this.handler=null,this.operation=null,this.data=null,this.dom=new t.TargetDom,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.Target),t.Target.prototype=Object.create(t.Base.prototype),n.extend(t.Target.prototype,{constructor:t.Target,init:function(e,n,i){var o=this,a="";if(o.callActions("beforeInit",arguments),o.mixer=n,e||(e=o.render(i)),o.cacheDom(e),o.bindEvents(),"none"!==o.dom.el.style.display&&(o.isShown=!0),i&&n.config.data.uidKey){if(void 0===(a=i[n.config.data.uidKey])||a.toString().length<1)throw new TypeError(t.messages.errorDatasetInvalidUidKey({uidKey:n.config.data.uidKey}));o.id=a,o.data=i,n.cache[a]=o}o.callActions("afterInit",arguments)},render:function(e){var i,o=this,a=null,r=null,s=null;if(o.callActions("beforeRender",arguments),"function"!=typeof(a=o.callFilters("renderRender",o.mixer.config.render.target,arguments)))throw new TypeError(t.messages.errorDatasetRendererNotSet());return(i=a(e))&&"object"==typeof i&&n.isElement(i)?r=i:"string"==typeof i&&((s=document.createElement("div")).innerHTML=i,r=s.firstElementChild),o.callFilters("elRender",r,arguments)},cacheDom:function(e){var t=this;t.callActions("beforeCacheDom",arguments),t.dom.el=e,t.callActions("afterCacheDom",arguments)},getSortString:function(e){var t=this,n=t.dom.el.getAttribute("data-"+e)||"";t.callActions("beforeGetSortString",arguments),n=isNaN(1*n)?n.toLowerCase():1*n,t.sortString=n,t.callActions("afterGetSortString",arguments)},show:function(){var e=this;e.callActions("beforeShow",arguments),e.isShown||(e.dom.el.style.display="",e.isShown=!0),e.callActions("afterShow",arguments)},hide:function(){var e=this;e.callActions("beforeHide",arguments),e.isShown&&(e.dom.el.style.display="none",e.isShown=!1),e.callActions("afterHide",arguments)},move:function(e){var t=this;t.callActions("beforeMove",arguments),t.isExcluded||t.mixer.targetsMoved++,t.applyStylesIn(e),requestAnimationFrame((function(){t.applyStylesOut(e)})),t.callActions("afterMove",arguments)},applyTween:function(e,n){var i=this,o="",a=null,r=e.posIn,s=[],l=new t.StyleData,c=-1;for(i.callActions("beforeApplyTween",arguments),l.x=r.x,l.y=r.y,0===n?i.hide():i.isShown||i.show(),c=0;o=t.features.TWEENABLE[c];c++)if(a=e.tweenData[o],"x"===o){if(!a)continue;l.x=r.x+a*n}else if("y"===o){if(!a)continue;l.y=r.y+a*n}else if(a instanceof t.TransformData){if(!a.value)continue;l[o].value=r[o].value+a.value*n,l[o].unit=a.unit,s.push(o+"("+l[o].value+a.unit+")")}else{if(!a)continue;l[o]=r[o]+a*n,i.dom.el.style[o]=l[o]}(l.x||l.y)&&s.unshift("translate("+l.x+"px, "+l.y+"px)"),s.length&&(i.dom.el.style[t.features.transformProp]=s.join(" ")),i.callActions("afterApplyTween",arguments)},applyStylesIn:function(e){var n=this,i=e.posIn,o=1!==n.mixer.effectsIn.opacity,a=[];n.callActions("beforeApplyStylesIn",arguments),a.push("translate("+i.x+"px, "+i.y+"px)"),n.mixer.config.animation.animateResizeTargets&&("show"!==e.statusChange&&(n.dom.el.style.width=i.width+"px",n.dom.el.style.height=i.height+"px"),n.dom.el.style.marginRight=i.marginRight+"px",n.dom.el.style.marginBottom=i.marginBottom+"px"),o&&(n.dom.el.style.opacity=i.opacity),"show"===e.statusChange&&(a=a.concat(n.mixer.transformIn)),n.dom.el.style[t.features.transformProp]=a.join(" "),n.callActions("afterApplyStylesIn",arguments)},applyStylesOut:function(e){var n=this,i=[],o=[],a=n.mixer.config.animation.animateResizeTargets,r=void 0!==n.mixer.effectsIn.opacity;if(n.callActions("beforeApplyStylesOut",arguments),i.push(n.writeTransitionRule(t.features.transformRule,e.staggerIndex)),"none"!==e.statusChange&&i.push(n.writeTransitionRule("opacity",e.staggerIndex,e.duration)),a&&(i.push(n.writeTransitionRule("width",e.staggerIndex,e.duration)),i.push(n.writeTransitionRule("height",e.staggerIndex,e.duration)),i.push(n.writeTransitionRule("margin",e.staggerIndex,e.duration))),!e.callback)return n.mixer.targetsImmovable++,void(n.mixer.targetsMoved===n.mixer.targetsImmovable&&n.mixer.cleanUp(e.operation));switch(n.operation=e.operation,n.callback=e.callback,!n.isExcluded&&n.mixer.targetsBound++,n.isBound=!0,n.applyTransition(i),a&&e.posOut.width>0&&e.posOut.height>0&&(n.dom.el.style.width=e.posOut.width+"px",n.dom.el.style.height=e.posOut.height+"px",n.dom.el.style.marginRight=e.posOut.marginRight+"px",n.dom.el.style.marginBottom=e.posOut.marginBottom+"px"),n.mixer.config.animation.nudge||"hide"!==e.statusChange||o.push("translate("+e.posOut.x+"px, "+e.posOut.y+"px)"),e.statusChange){case"hide":r&&(n.dom.el.style.opacity=n.mixer.effectsOut.opacity),o=o.concat(n.mixer.transformOut);break;case"show":r&&(n.dom.el.style.opacity=1)}(n.mixer.config.animation.nudge||!n.mixer.config.animation.nudge&&"hide"!==e.statusChange)&&o.push("translate("+e.posOut.x+"px, "+e.posOut.y+"px)"),n.dom.el.style[t.features.transformProp]=o.join(" "),n.callActions("afterApplyStylesOut",arguments)},writeTransitionRule:function(e,t,n){var i,o=this,a=o.getDelay(t);return i=e+" "+(n>0?n:o.mixer.config.animation.duration)+"ms "+a+"ms "+("opacity"===e?"linear":o.mixer.config.animation.easing),o.callFilters("ruleWriteTransitionRule",i,arguments)},getDelay:function(e){var t,n=this;return"function"==typeof n.mixer.config.animation.staggerSequence&&(e=n.mixer.config.animation.staggerSequence.call(n,e,n.state)),t=n.mixer.staggerDuration?e*n.mixer.staggerDuration:0,n.callFilters("delayGetDelay",t,arguments)},applyTransition:function(e){var n=this,i=e.join(", ");n.callActions("beforeApplyTransition",arguments),n.dom.el.style[t.features.transitionProp]=i,n.callActions("afterApplyTransition",arguments)},handleTransitionEnd:function(e){var t=this,n=e.propertyName,i=t.mixer.config.animation.animateResizeTargets;t.callActions("beforeHandleTransitionEnd",arguments),t.isBound&&e.target.matches(t.mixer.config.selectors.target)&&(n.indexOf("transform")>-1||n.indexOf("opacity")>-1||i&&n.indexOf("height")>-1||i&&n.indexOf("width")>-1||i&&n.indexOf("margin")>-1)&&(t.callback.call(t,t.operation),t.isBound=!1,t.callback=null,t.operation=null),t.callActions("afterHandleTransitionEnd",arguments)},eventBus:function(e){var t=this;switch(t.callActions("beforeEventBus",arguments),e.type){case"webkitTransitionEnd":case"transitionend":t.handleTransitionEnd(e)}t.callActions("afterEventBus",arguments)},unbindEvents:function(){var e=this;e.callActions("beforeUnbindEvents",arguments),n.off(e.dom.el,"webkitTransitionEnd",e.handler),n.off(e.dom.el,"transitionend",e.handler),e.callActions("afterUnbindEvents",arguments)},bindEvents:function(){var e,i=this;i.callActions("beforeBindEvents",arguments),e="webkit"===t.features.transitionPrefix?"webkitTransitionEnd":"transitionend",i.handler=function(e){return i.eventBus(e)},n.on(i.dom.el,e,i.handler),i.callActions("afterBindEvents",arguments)},getPosData:function(n){var i=this,o={},a=null,r=new t.StyleData;return i.callActions("beforeGetPosData",arguments),r.x=i.dom.el.offsetLeft,r.y=i.dom.el.offsetTop,(i.mixer.config.animation.animateResizeTargets||n)&&(a=i.dom.el.getBoundingClientRect(),r.top=a.top,r.right=a.right,r.bottom=a.bottom,r.left=a.left,r.width=a.width,r.height=a.height),i.mixer.config.animation.animateResizeTargets&&(o=e.getComputedStyle(i.dom.el),r.marginBottom=parseFloat(o.marginBottom),r.marginRight=parseFloat(o.marginRight)),i.callFilters("posDataGetPosData",r,arguments)},cleanUp:function(){var e=this;e.callActions("beforeCleanUp",arguments),e.dom.el.style[t.features.transformProp]="",e.dom.el.style[t.features.transitionProp]="",e.dom.el.style.opacity="",e.mixer.config.animation.animateResizeTargets&&(e.dom.el.style.width="",e.dom.el.style.height="",e.dom.el.style.marginRight="",e.dom.el.style.marginBottom=""),e.callActions("afterCleanUp",arguments)}}),t.Collection=function(e){var t=null,i=-1;for(this.callActions("beforeConstruct"),i=0;t=e[i];i++)this[i]=t;this.length=e.length,this.callActions("afterConstruct"),n.freeze(this)},t.BaseStatic.call(t.Collection),t.Collection.prototype=Object.create(t.Base.prototype),n.extend(t.Collection.prototype,{constructor:t.Collection,mixitup:function(e){var i=null,o=Array.prototype.slice.call(arguments),a=[],r=-1;for(this.callActions("beforeMixitup"),o.shift(),r=0;i=this[r];r++)a.push(i[e].apply(i,o));return this.callFilters("promiseMixitup",n.all(a,t.libraries),arguments)}}),t.Operation=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.args=[],this.command=null,this.showPosData=[],this.toHidePosData=[],this.startState=null,this.newState=null,this.docState=null,this.willSort=!1,this.willChangeLayout=!1,this.hasEffect=!1,this.hasFailed=!1,this.triggerElement=null,this.show=[],this.hide=[],this.matching=[],this.toShow=[],this.toHide=[],this.toMove=[],this.toRemove=[],this.startOrder=[],this.newOrder=[],this.startSort=null,this.newSort=null,this.startFilter=null,this.newFilter=null,this.startDataset=null,this.newDataset=null,this.viewportDeltaX=0,this.viewportDeltaY=0,this.startX=0,this.startY=0,this.startHeight=0,this.startWidth=0,this.newX=0,this.newY=0,this.newHeight=0,this.newWidth=0,this.startContainerClassName="",this.startDisplay="",this.newContainerClassName="",this.newDisplay="",this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.Operation),t.Operation.prototype=Object.create(t.Base.prototype),t.Operation.prototype.constructor=t.Operation,t.State=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.activeFilter=null,this.activeSort=null,this.activeContainerClassName="",this.container=null,this.targets=[],this.hide=[],this.show=[],this.matching=[],this.totalTargets=-1,this.totalShow=-1,this.totalHide=-1,this.totalMatching=-1,this.hasFailed=!1,this.triggerElement=null,this.activeDataset=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.State),t.State.prototype=Object.create(t.Base.prototype),t.State.prototype.constructor=t.State,t.UserInstruction=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.command={},this.animate=!1,this.callback=null,this.callActions("afterConstruct"),n.seal(this)},t.BaseStatic.call(t.UserInstruction),t.UserInstruction.prototype=Object.create(t.Base.prototype),t.UserInstruction.prototype.constructor=t.UserInstruction,t.Messages=function(){t.Base.call(this),this.callActions("beforeConstruct"),this.ERROR_FACTORY_INVALID_CONTAINER="[MixItUp] An invalid selector or element reference was passed to the mixitup factory function",this.ERROR_FACTORY_CONTAINER_NOT_FOUND="[MixItUp] The provided selector yielded no container element",this.ERROR_CONFIG_INVALID_ANIMATION_EFFECTS="[MixItUp] Invalid value for `animation.effects`",this.ERROR_CONFIG_INVALID_CONTROLS_SCOPE="[MixItUp] Invalid value for `controls.scope`",this.ERROR_CONFIG_INVALID_PROPERTY='[MixitUp] Invalid configuration object property "${erroneous}"${suggestion}',this.ERROR_CONFIG_INVALID_PROPERTY_SUGGESTION='. Did you mean "${probableMatch}"?',this.ERROR_CONFIG_DATA_UID_KEY_NOT_SET="[MixItUp] To use the dataset API, a UID key must be specified using `data.uidKey`",this.ERROR_DATASET_INVALID_UID_KEY='[MixItUp] The specified UID key "${uidKey}" is not present on one or more dataset items',this.ERROR_DATASET_DUPLICATE_UID='[MixItUp] The UID "${uid}" was found on two or more dataset items. UIDs must be unique.',this.ERROR_INSERT_INVALID_ARGUMENTS="[MixItUp] Please provider either an index or a sibling and position to insert, not both",this.ERROR_INSERT_PREEXISTING_ELEMENT="[MixItUp] An element to be inserted already exists in the container",this.ERROR_FILTER_INVALID_ARGUMENTS="[MixItUp] Please provide either a selector or collection `.filter()`, not both",this.ERROR_DATASET_NOT_SET="[MixItUp] To use the dataset API with pre-rendered targets, a starting dataset must be set using `load.dataset`",this.ERROR_DATASET_PRERENDERED_MISMATCH="[MixItUp] `load.dataset` does not match pre-rendered targets",this.ERROR_DATASET_RENDERER_NOT_SET="[MixItUp] To insert an element via the dataset API, a target renderer function must be provided to `render.target`",this.ERROR_SORT_NON_EXISTENT_ELEMENT="[MixItUp] An element to be sorted does not already exist in the container",this.WARNING_FACTORY_PREEXISTING_INSTANCE="[MixItUp] WARNING: This element already has an active MixItUp instance. The provided configuration object will be ignored. If you wish to perform additional methods on this instance, please create a reference.",this.WARNING_INSERT_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.insert()`",this.WARNING_REMOVE_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.remove()`",this.WARNING_MULTIMIX_INSTANCE_QUEUE_FULL="[MixItUp] WARNING: An operation was requested but the MixItUp instance was busy. The operation was rejected because the queue is full or queuing is disabled.",this.WARNING_GET_OPERATION_INSTANCE_BUSY="[MixItUp] WARNING: Operations can be be created while the MixItUp instance is busy.",this.WARNING_NO_PROMISE_IMPLEMENTATION="[MixItUp] WARNING: No Promise implementations could be found. If you wish to use promises with MixItUp please install an ES6 Promise polyfill.",this.WARNING_INCONSISTENT_SORTING_ATTRIBUTES='[MixItUp] WARNING: The requested sorting data attribute "${attribute}" was not present on one or more target elements which may product unexpected sort output',this.callActions("afterConstruct"),this.compileTemplates(),n.seal(this)},t.BaseStatic.call(t.Messages),t.Messages.prototype=Object.create(t.Base.prototype),t.Messages.prototype.constructor=t.Messages,t.Messages.prototype.compileTemplates=function(){var e="",t="";for(e in this)"string"==typeof(t=this[e])&&(this[n.camelCase(e)]=n.template(t))},t.messages=new t.Messages,t.Facade=function(e){t.Base.call(this),this.callActions("beforeConstruct",arguments),this.configure=e.configure.bind(e),this.show=e.show.bind(e),this.hide=e.hide.bind(e),this.filter=e.filter.bind(e),this.toggleOn=e.toggleOn.bind(e),this.toggleOff=e.toggleOff.bind(e),this.sort=e.sort.bind(e),this.changeLayout=e.changeLayout.bind(e),this.multimix=e.multimix.bind(e),this.dataset=e.dataset.bind(e),this.tween=e.tween.bind(e),this.insert=e.insert.bind(e),this.insertBefore=e.insertBefore.bind(e),this.insertAfter=e.insertAfter.bind(e),this.prepend=e.prepend.bind(e),this.append=e.append.bind(e),this.remove=e.remove.bind(e),this.destroy=e.destroy.bind(e),this.forceRefresh=e.forceRefresh.bind(e),this.forceRender=e.forceRender.bind(e),this.isMixing=e.isMixing.bind(e),this.getOperation=e.getOperation.bind(e),this.getConfig=e.getConfig.bind(e),this.getState=e.getState.bind(e),this.callActions("afterConstruct",arguments),n.freeze(this),n.seal(this)},t.BaseStatic.call(t.Facade),t.Facade.prototype=Object.create(t.Base.prototype),t.Facade.prototype.constructor=t.Facade,"object"==typeof exports&&"object"==typeof module?module.exports=t:"function"==typeof define&&define.amd?define((function(){return t})):void 0!==e.mixitup&&"function"==typeof e.mixitup||(e.mixitup=t),t.BaseStatic.call(t.constructor),t.NAME="mixitup",t.CORE_VERSION="3.3.1"}(window),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper"],e):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=e(window.blueimp.helper||window.jQuery))}((function(e){"use strict";function t(e,n){return void 0===document.body.style.maxHeight?null:this&&this.options===t.prototype.options?void(e&&e.length?(this.list=e,this.num=e.length,this.initOptions(n),this.initialize()):this.console.log("blueimp Gallery: No or empty list provided as first argument.",e)):new t(e,n)}return e.extend(t.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",altTextProperty:"alt",urlProperty:"href",srcsetProperty:"urlset",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,slideshowDirection:"ltr",index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(t){var n,i={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},o={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(n in o)if(Object.prototype.hasOwnProperty.call(o,n)&&void 0!==t.style[n]){i.transition=o[n],i.transition.name=n;break}function a(){var e,n,o=i.transition;document.body.appendChild(t),o&&(e=o.name.slice(0,-9)+"ransform",void 0!==t.style[e]&&(t.style[e]="translateZ(0)",n=window.getComputedStyle(t).getPropertyValue(o.prefix+"transform"),i.transform={prefix:o.prefix,name:e,translate:!0,translateZ:!!n&&"none"!==n})),void 0!==t.style.backgroundSize&&(i.backgroundSize={},t.style.backgroundSize="contain",i.backgroundSize.contain="contain"===window.getComputedStyle(t).getPropertyValue("background-size"),t.style.backgroundSize="cover",i.backgroundSize.cover="cover"===window.getComputedStyle(t).getPropertyValue("background-size")),document.body.removeChild(t)}return document.body?a():e(document).on("DOMContentLoaded",a),i}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,initialize:function(){if(this.initStartIndex(),!1===this.initWidget())return!1;this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play()},slide:function(e,t){window.clearTimeout(this.timeout);var n,i,o,a=this.index;if(a!==e&&1!==this.num){if(t=t||this.options.transitionSpeed,this.support.transform){for(this.options.continuous||(e=this.circle(e)),n=Math.abs(a-e)/(a-e),this.options.continuous&&(i=n,(n=-this.positions[this.circle(e)]/this.slideWidth)!==i&&(e=-n*this.num+e)),o=Math.abs(a-e)-1;o;)o-=1,this.move(this.circle((a<e?e:a)-o-1),this.slideWidth*n,0);e=this.circle(e),this.move(a,this.slideWidth*n,t),this.move(e,0,t),this.options.continuous&&this.move(this.circle(e-n),-this.slideWidth*n,0)}else e=this.circle(e),this.animate(a*-this.slideWidth,e*-this.slideWidth,t);this.onslide(e)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(e){var t=this,n=this.index+("rtl"===this.options.slideshowDirection?-1:1);window.clearTimeout(this.timeout),this.interval=e||this.options.slideshowInterval,1<this.elements[this.index]&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(e,n){t.animationFrameId=t.requestAnimationFrame.call(window,(function(){t.slide(e,n)}))},[n,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.cancelAnimationFrame&&(this.cancelAnimationFrame.call(window,this.animationFrameId),this.animationFrameId=null),this.container.removeClass(this.options.playingClass)},add:function(e){var t;for(e.concat||(e=Array.prototype.slice.call(e)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(e),this.num=this.list.length,2<this.num&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),t=this.num-e.length;t<this.num;t+=1)this.addSlide(t),this.positionSlide(t);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var e=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(e.displayClass).removeClass(e.singleClass).removeClass(e.leftEdgeClass).removeClass(e.rightEdgeClass),e.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var e=this;this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,(function t(n){n.target===e.container[0]&&(e.container.off(e.support.transition.end,t),e.handleClose())})),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(e){return(this.num+e%this.num)%this.num},move:function(e,t,n){this.translateX(e,t,n),this.positions[e]=t},translate:function(e,t,n,i){if(this.slides[e]){var o=this.slides[e].style,a=this.support.transition,r=this.support.transform;o[a.name+"Duration"]=i+"ms",o[r.name]="translate("+t+"px, "+n+"px)"+(r.translateZ?" translateZ(0)":"")}},translateX:function(e,t,n){this.translate(e,t,0,n)},translateY:function(e,t,n){this.translate(e,0,t,n)},animate:function(e,t,n){if(n)var i=this,o=(new Date).getTime(),a=window.setInterval((function(){var r=(new Date).getTime()-o;if(n<r)return i.slidesContainer[0].style.left=t+"px",i.ontransitionend(),void window.clearInterval(a);i.slidesContainer[0].style.left=(t-e)*(Math.floor(r/n*100)/100)+e+"px"}),4);else this.slidesContainer[0].style.left=t+"px"},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(e){e.which&&1===e.which&&"VIDEO"!==e.target.nodeName&&"AUDIO"!==e.target.nodeName&&(e.preventDefault(),(e.originalEvent||e).touches=[{pageX:e.pageX,pageY:e.pageY}],this.ontouchstart(e))},onmousemove:function(e){this.touchStart&&((e.originalEvent||e).touches=[{pageX:e.pageX,pageY:e.pageY}],this.ontouchmove(e))},onmouseup:function(e){this.touchStart&&(this.ontouchend(e),delete this.touchStart)},onmouseout:function(t){if(this.touchStart){var n=t.target,i=t.relatedTarget;i&&(i===n||e.contains(n,i))||this.onmouseup(t)}},ontouchstart:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t=(e.originalEvent||e).touches[0];this.touchStart={x:t.pageX,y:t.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t,n,i=(e.originalEvent||e).touches[0],o=(e.originalEvent||e).scale,a=this.index;if(!(1<i.length||o&&1!==o))if(this.options.disableScroll&&e.preventDefault(),this.touchDelta={x:i.pageX-this.touchStart.x,y:i.pageY-this.touchStart.y},t=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(t)<Math.abs(this.touchDelta.y)),this.isScrolling)this.translateY(a,this.touchDelta.y+this.positions[a],0);else for(e.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?n=[this.circle(a+1),a,this.circle(a-1)]:(this.touchDelta.x=t/=!a&&0<t||a===this.num-1&&t<0?Math.abs(t)/this.slideWidth+1:1,n=[a],a&&n.push(a-1),a<this.num-1&&n.unshift(a+1));n.length;)a=n.pop(),this.translateX(a,t+this.positions[a],0)},ontouchend:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t,n,i,o,a,r=this.index,s=this.options.transitionSpeed,l=this.slideWidth,c=Number(Date.now()-this.touchStart.time)<250,d=c&&20<Math.abs(this.touchDelta.x)||Math.abs(this.touchDelta.x)>l/2,u=!r&&0<this.touchDelta.x||r===this.num-1&&this.touchDelta.x<0,h=!d&&this.options.closeOnSwipeUpOrDown&&(c&&20<Math.abs(this.touchDelta.y)||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(u=!1),t=this.touchDelta.x<0?-1:1,this.isScrolling?h?this.close():this.translateY(r,0,s):d&&!u?(n=r+t,i=r-t,o=l*t,a=-l*t,this.options.continuous?(this.move(this.circle(n),o,0),this.move(this.circle(r-2*t),a,0)):0<=n&&n<this.num&&this.move(n,o,0),this.move(r,this.positions[r]+o,s),this.move(this.circle(i),this.positions[this.circle(i)]+o,s),r=this.circle(i),this.onslide(r)):this.options.continuous?(this.move(this.circle(r-1),-l,s),this.move(r,0,s),this.move(this.circle(r+1),l,s)):(r&&this.move(r-1,-l,s),this.move(r,0,s),r<this.num-1&&this.move(r+1,l,s))},ontouchcancel:function(e){this.touchStart&&(this.ontouchend(e),delete this.touchStart)},ontransitionend:function(e){var t=this.slides[this.index];e&&t!==e.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,t]))},oncomplete:function(t){var n,i=t.target||t.srcElement,o=i&&i.parentNode;i&&o&&(n=this.getNodeIndex(o),e(o).removeClass(this.options.slideLoadingClass),"error"===t.type?(e(o).addClass(this.options.slideErrorClass),this.elements[n]=3):this.elements[n]=2,i.clientHeight>this.container[0].clientHeight&&(i.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===o&&this.play(),this.setTimeout(this.options.onslidecomplete,[n,o]))},onload:function(e){this.oncomplete(e)},onerror:function(e){this.oncomplete(e)},onkeydown:function(e){switch(e.which||e.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(e),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),e.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(e),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(e),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(e),this.next())}},handleClick:function(t){var n=this.options,i=t.target||t.srcElement,o=i.parentNode;function a(t){return e(i).hasClass(t)||e(o).hasClass(t)}a(n.toggleClass)?(this.preventDefault(t),this.toggleControls()):a(n.prevClass)?(this.preventDefault(t),this.prev()):a(n.nextClass)?(this.preventDefault(t),this.next()):a(n.closeClass)?(this.preventDefault(t),this.close()):a(n.playPauseClass)?(this.preventDefault(t),this.toggleSlideshow()):o===this.slidesContainer[0]?n.closeOnSlideClick?(this.preventDefault(t),this.close()):n.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls()):o.parentNode&&o.parentNode===this.slidesContainer[0]&&n.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls())},onclick:function(e){if(!(this.options.emulateTouchEvents&&this.touchDelta&&(20<Math.abs(this.touchDelta.x)||20<Math.abs(this.touchDelta.y))))return this.handleClick(e);delete this.touchDelta},updateEdgeClasses:function(e){e?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),e===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(e){this.options.continuous||this.updateEdgeClasses(e),this.loadElements(e),this.options.unloadElements&&this.unloadElements(e),this.setTitle(e)},onslide:function(e){this.index=e,this.handleSlide(e),this.setTimeout(this.options.onslide,[e,this.slides[e]])},setTitle:function(e){var t=this.slides[e].firstChild,n=t.title||t.alt,i=this.titleElement;i.length&&(this.titleElement.empty(),n&&i[0].appendChild(document.createTextNode(n)))},setTimeout:function(e,t,n){var i=this;return e&&window.setTimeout((function(){e.apply(i,t||[])}),n||0)},imageFactory:function(t,n){var i,o,a,r,s=this,l=this.imagePrototype.cloneNode(!1),c=t,d=this.options.stretchImages;return"string"!=typeof c&&(c=this.getItemProperty(t,this.options.urlProperty),a=this.getItemProperty(t,this.options.titleProperty),r=this.getItemProperty(t,this.options.altTextProperty)||a),!0===d&&(d="contain"),(d=this.support.backgroundSize&&this.support.backgroundSize[d]&&d)?o=this.elementPrototype.cloneNode(!1):(o=l).draggable=!1,a&&(o.title=a),r&&(o.alt=r),e(l).on("load error",(function t(a){if(!i){if(a={type:a.type,target:o},!o.parentNode)return s.setTimeout(t,[a]);i=!0,e(l).off("load error",t),d&&"load"===a.type&&(o.style.background='url("'+c+'") center no-repeat',o.style.backgroundSize=d),n(a)}})),l.src=c,o},createElement:function(t,n){var i=t&&this.getItemProperty(t,this.options.typeProperty),o=i&&this[i.split("/")[0]+"Factory"]||this.imageFactory,a=t&&o.call(this,t,n),r=this.getItemProperty(t,this.options.srcsetProperty);return a||(a=this.elementPrototype.cloneNode(!1),this.setTimeout(n,[{type:"error",target:a}])),r&&a.setAttribute("srcset",r),e(a).addClass(this.options.slideContentClass),a},loadElement:function(t){this.elements[t]||(this.slides[t].firstChild?this.elements[t]=e(this.slides[t]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[t]=1,e(this.slides[t]).addClass(this.options.slideLoadingClass),this.slides[t].appendChild(this.createElement(this.list[t],this.proxyListener))))},loadElements:function(e){var t,n=Math.min(this.num,2*this.options.preloadRange+1),i=e;for(t=0;t<n;t+=1)i+=t*(t%2==0?-1:1),i=this.circle(i),this.loadElement(i)},unloadElements:function(e){var t,n;for(t in this.elements)Object.prototype.hasOwnProperty.call(this.elements,t)&&(n=Math.abs(e-t))>this.options.preloadRange&&n+this.options.preloadRange<this.num&&(this.unloadSlide(t),delete this.elements[t])},addSlide:function(e){var t=this.slidePrototype.cloneNode(!1);t.setAttribute("data-index",e),this.slidesContainer[0].appendChild(t),this.slides.push(t)},positionSlide:function(e){var t=this.slides[e];t.style.width=this.slideWidth+"px",this.support.transform&&(t.style.left=e*-this.slideWidth+"px",this.move(e,this.index>e?-this.slideWidth:this.index<e?this.slideWidth:0,0))},initSlides:function(t){var n,i;for(t||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),e(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,n=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].clientWidth,this.slideHeight=this.container[0].clientHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",n&&this.resetSlides(),i=0;i<this.num;i+=1)n&&this.addSlide(i),this.positionSlide(i);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(e){var t,n;null!==(n=(t=this.slides[e]).firstChild)&&t.removeChild(n)},unloadAllSlides:function(){var e,t;for(e=0,t=this.slides.length;e<t;e++)this.unloadSlide(e)},toggleControls:function(){var e=this.options.controlsClass;this.container.hasClass(e)?this.container.removeClass(e):this.container.addClass(e)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(e){return parseInt(e.getAttribute("data-index"),10)},getNestedProperty:function(e,t){return t.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,(function(t,n,i,o,a){var r=a||n||i||o&&parseInt(o,10);t&&e&&(e=e[r])})),e},getDataProperty:function(t,n){var i,o;if(t.dataset?(i=n.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()})),o=t.dataset[i]):t.getAttribute&&(o=t.getAttribute("data-"+n.replace(/([A-Z])/g,"-$1").toLowerCase())),"string"==typeof o){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(o))try{return e.parseJSON(o)}catch(t){}return o}},getItemProperty:function(e,t){var n=this.getDataProperty(e,t);return void 0===n&&(n=e[t]),void 0===n&&(n=this.getNestedProperty(e,t)),n},initStartIndex:function(){var e,t=this.options.index,n=this.options.urlProperty;if(t&&"number"!=typeof t)for(e=0;e<this.num;e+=1)if(this.list[e]===t||this.getItemProperty(this.list[e],n)===this.getItemProperty(t,n)){t=e;break}this.index=this.circle(parseInt(t,10)||0)},initEventListeners:function(){var t=this,n=this.slidesContainer;function i(e){var n=t.support.transition&&t.support.transition.end===e.type?"transitionend":e.type;t["on"+n](e)}e(window).on("resize",i),e(document.body).on("keydown",i),this.container.on("click",i),this.support.touch?n.on("touchstart touchmove touchend touchcancel",i):this.options.emulateTouchEvents&&this.support.transition&&n.on("mousedown mousemove mouseup mouseout",i),this.support.transition&&n.on(this.support.transition.end,i),this.proxyListener=i},destroyEventListeners:function(){var t=this.slidesContainer,n=this.proxyListener;e(window).off("resize",n),e(document.body).off("keydown",n),this.container.off("click",n),this.support.touch?t.off("touchstart touchmove touchend touchcancel",n):this.options.emulateTouchEvents&&this.support.transition&&t.off("mousedown mousemove mouseup mouseout",n),this.support.transition&&t.off(this.support.transition.end,n)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var t=this;return this.container=e(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,(function e(n){n.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleOpen())})):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(t){this.options=e.extend({},this.options),(t&&t.carousel||this.options.carousel&&(!t||!1!==t.carousel))&&e.extend(this.options,this.carouselOptions),e.extend(this.options,t),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";e.extend(t.prototype.options,{fullScreen:!1});var n=t.prototype.initialize,i=t.prototype.close;return e.extend(t.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullScreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},initialize:function(){n.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),i.call(this)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";e.extend(t.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var n=t.prototype.initSlides,i=t.prototype.addSlide,o=t.prototype.resetSlides,a=t.prototype.handleClick,r=t.prototype.handleSlide,s=t.prototype.handleClose;return e.extend(t.prototype,{createIndicator:function(t){var n,i,o=this.indicatorPrototype.cloneNode(!1),a=this.getItemProperty(t,this.options.titleProperty),r=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(r&&(n=this.getItemProperty(t,r)),void 0===n&&(i=t.getElementsByTagName&&e(t).find("img")[0])&&(n=i.src),n&&(o.style.backgroundImage='url("'+n+'")')),a&&(o.title=a),o},addIndicator:function(e){if(this.indicatorContainer.length){var t=this.createIndicator(this.list[e]);t.setAttribute("data-index",e),this.indicatorContainer[0].appendChild(t),this.indicators.push(t)}},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=e(this.indicators[t]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(e){e||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),n.call(this,e)},addSlide:function(e){i.call(this,e),this.addIndicator(e)},resetSlides:function(){o.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(e){var t=e.target||e.srcElement,n=t.parentNode;if(n===this.indicatorContainer[0])this.preventDefault(e),this.slide(this.getNodeIndex(t));else{if(n.parentNode!==this.indicatorContainer[0])return a.call(this,e);this.preventDefault(e),this.slide(this.getNodeIndex(n))}},handleSlide:function(e){r.call(this,e),this.setActiveIndicator(e)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),s.call(this)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";e.extend(t.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"});var n=t.prototype.handleSlide;return e.extend(t.prototype,{handleSlide:function(e){n.call(this,e),this.playingVideo&&this.playingVideo.pause()},videoFactory:function(t,n,i){var o,a,r,s,l,c=this,d=this.options,u=this.elementPrototype.cloneNode(!1),h=e(u),p=[{type:"error",target:u}],f=i||document.createElement("video"),m=this.getItemProperty(t,d.urlProperty),g=this.getItemProperty(t,d.typeProperty),v=this.getItemProperty(t,d.titleProperty),b=this.getItemProperty(t,this.options.altTextProperty)||v,y=this.getItemProperty(t,d.videoPosterProperty),w=this.getItemProperty(t,d.videoSourcesProperty);if(h.addClass(d.videoContentClass),v&&(u.title=v),f.canPlayType)if(m&&g&&f.canPlayType(g))f.src=m;else if(w)for(;w.length;)if(a=w.shift(),m=this.getItemProperty(a,d.urlProperty),g=this.getItemProperty(a,d.typeProperty),m&&g&&f.canPlayType(g)){f.src=m;break}return y&&(f.poster=y,o=this.imagePrototype.cloneNode(!1),e(o).addClass(d.toggleClass),o.src=y,o.draggable=!1,o.alt=b,u.appendChild(o)),(r=document.createElement("a")).setAttribute("target","_blank"),i||r.setAttribute("download",v),r.href=m,f.src&&(f.controls=!0,(i||e(f)).on("error",(function(){c.setTimeout(n,p)})).on("pause",(function(){f.seeking||(s=!1,h.removeClass(c.options.videoLoadingClass).removeClass(c.options.videoPlayingClass),l&&c.container.addClass(c.options.controlsClass),delete c.playingVideo,c.interval&&c.play())})).on("playing",(function(){s=!1,h.removeClass(c.options.videoLoadingClass).addClass(c.options.videoPlayingClass),c.container.hasClass(c.options.controlsClass)?(l=!0,c.container.removeClass(c.options.controlsClass)):l=!1})).on("play",(function(){window.clearTimeout(c.timeout),s=!0,h.addClass(c.options.videoLoadingClass),c.playingVideo=f})),e(r).on("click",(function(e){c.preventDefault(e),s?f.pause():f.play()})),u.appendChild(i&&i.element||f)),u.appendChild(r),this.setTimeout(n,[{type:"load",target:u}]),u}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";if(!window.postMessage)return t;function n(e,t,n,i){this.url=e,this.videoId=t,this.playerId=n,this.clickToPlay=i,this.element=document.createElement("div"),this.listeners={}}e.extend(t.prototype.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0});var i=t.prototype.textFactory||t.prototype.imageFactory,o=0;return e.extend(n.prototype,{canPlayType:function(){return!0},on:function(e,t){return this.listeners[e]=t,this},loadAPI:function(){var t,n,i=this,o="//f.vimeocdn.com/js/froogaloop2.min.js",a=document.getElementsByTagName("script"),r=a.length;function s(){!n&&i.playOnReady&&i.play(),n=!0}for(;r;)if(a[r-=1].src===o){t=a[r];break}t||((t=document.createElement("script")).src=o),e(t).on("load",s),a[0].parentNode.insertBefore(t,a[0]),/loaded|complete/.test(t.readyState)&&s()},onReady:function(){var e=this;this.ready=!0,this.player.addEvent("play",(function(){e.hasPlayed=!0,e.onPlaying()})),this.player.addEvent("pause",(function(){e.onPause()})),this.player.addEvent("finish",(function(){e.onPause()})),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var e=document.createElement("iframe");e.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),e.id=this.playerId,this.element.parentNode.replaceChild(e,this.element),this.element=e},play:function(){var e=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",(function(){e.onReady()}))):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),e.extend(t.prototype,{VimeoPlayer:n,textFactory:function(e,t){var a=this.options,r=this.getItemProperty(e,a.vimeoVideoIdProperty);return r?(void 0===this.getItemProperty(e,a.urlProperty)&&(e[a.urlProperty]="//vimeo.com/"+r),o+=1,this.videoFactory(e,t,new n(a.vimeoPlayerUrl,r,a.vimeoPlayerIdPrefix+o,a.vimeoClickToPlay))):i.call(this,e,t)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";if(!window.postMessage)return t;function n(e,t,n){this.videoId=e,this.playerVars=t,this.clickToPlay=n,this.element=document.createElement("div"),this.listeners={}}e.extend(t.prototype.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0});var i=t.prototype.textFactory||t.prototype.imageFactory;return e.extend(n.prototype,{canPlayType:function(){return!0},on:function(e,t){return this.listeners[e]=t,this},loadAPI:function(){var e,t=this,n=window.onYouTubeIframeAPIReady,i="//www.youtube.com/iframe_api",o=document.getElementsByTagName("script"),a=o.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),t.playOnReady&&t.play()};a;)if(o[a-=1].src===i)return;(e=document.createElement("script")).src=i,o[0].parentNode.insertBefore(e,o[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){t.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){this.stateChange!==YT.PlayerState.PAUSED&&this.stateChange!==YT.PlayerState.ENDED||(this.listeners.pause(),delete this.playStatus)},onStateChange:function(e){switch(e.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=e.data},onError:function(e){this.listeners.error(e)},play:function(){var e=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){e.onReady()},onStateChange:function(t){e.onStateChange(t)},onError:function(t){e.onError(t)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),e.extend(t.prototype,{YouTubePlayer:n,textFactory:function(e,t){var o=this.options,a=this.getItemProperty(e,o.youTubeVideoIdProperty);return a?(void 0===this.getItemProperty(e,o.urlProperty)&&(e[o.urlProperty]="//www.youtube.com/watch?v="+a),void 0===this.getItemProperty(e,o.videoPosterProperty)&&(e[o.videoPosterProperty]="//img.youtube.com/vi/"+a+"/maxresdefault.jpg"),this.videoFactory(e,t,new n(a,o.youTubePlayerVars,o.youTubeClickToPlay))):i.call(this,e,t)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery"],e):e(window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";e(document).on("click","[data-gallery]",(function(n){var i=e(this).data("gallery"),o=e(i),a=o.length&&o||e(t.prototype.options.container),r={onopen:function(){a.data("gallery",this).trigger("open")},onopened:function(){a.trigger("opened")},onslide:function(){a.trigger("slide",arguments)},onslideend:function(){a.trigger("slideend",arguments)},onslidecomplete:function(){a.trigger("slidecomplete",arguments)},onclose:function(){a.trigger("close")},onclosed:function(){a.trigger("closed").removeData("gallery")}},s=e.extend(a.data(),{container:a[0],index:this,event:n},r),l=e(this).closest("[data-gallery-group], body").find('[data-gallery="'+i+'"]');return s.filter&&(l=l.filter(s.filter)),new t(l,s)}))})),function(e){function t(){var e=location.href;return hashtag=-1!==e.indexOf("#prettyPhoto")&&decodeURI(e.substring(e.indexOf("#prettyPhoto")+1,e.length)),hashtag}function n(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null==n?"":n[1]}e.prettyPhoto={version:"3.1.5"},e.fn.prettyPhoto=function(i){i=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:960,default_height:500,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder">           <div class="ppt">&nbsp;</div>           <div class="pp_top">             <div class="pp_left"></div>             <div class="pp_middle"></div>             <div class="pp_right"></div>           </div>           <div class="pp_content_container">             <div class="pp_left">             <div class="pp_right">               <div class="pp_content">                 <div class="pp_loaderIcon"></div>                 <div class="pp_fade">                   <a href="#" class="pp_expand" title="Expand the image">Expand</a>                   <div class="pp_hoverContainer">                     <a class="pp_next" href="#">next</a>                     <a class="pp_previous" href="#">previous</a>                   </div>                   <div id="pp_full_res"></div>                   <div class="pp_details">                     <div class="pp_nav">                       <a href="#" class="pp_arrow_previous">Previous</a>                       <p class="currentTextHolder">0/0</p>                       <a href="#" class="pp_arrow_next">Next</a>                     </div>                     <p class="pp_description"></p>                     <div class="pp_social">{pp_social}</div>                     <a class="pp_close" href="#">Close</a>                   </div>                 </div>               </div>             </div>             </div>           </div>           <div class="pp_bottom">             <div class="pp_left"></div>             <div class="pp_middle"></div>             <div class="pp_right"></div>           </div>         </div>         <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery">               <a href="#" class="pp_arrow_previous">Previous</a>               <div>                 <ul>                   {gallery}                 </ul>               </div>               <a href="#" class="pp_arrow_next">Next</a>             </div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"><\/script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},i);var o,a,r,s,l,c,d,u=this,h=!1,p=e(window).height(),f=e(window).width();function m(){e(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(p/2-o.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:o.contentHeight,width:o.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:f/2-o.containerWidth/2<0?0:f/2-o.containerWidth/2,width:o.containerWidth},settings.animation_speed,(function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(o.height).width(o.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==y(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(o.resized?e("a.pp_expand,a.pp_contract").show():e("a.pp_expand").hide()),!settings.autoplay_slideshow||d||a||e.prettyPhoto.startSlideshow(),settings.changepicturecallback(),a=!0})),isSet&&settings.overlay_gallery&&"image"==y(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((o.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,e.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave"),i.ajaxcallback()}function g(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,(function(){e(".pp_loaderIcon").show(),t()}))}function v(e,t){if(resized=!1,b(e,t),imageWidth=e,imageHeight=t,(c>f||l>p)&&doresize&&settings.allow_resize&&!h){for(resized=!0,fitting=!1;!fitting;)c>f?(imageWidth=f-200,imageHeight=t/e*imageWidth):l>p?(imageHeight=p-200,imageWidth=e/t*imageHeight):fitting=!0,l=imageHeight,c=imageWidth;(c>f||l>p)&&v(c,l),b(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(l),containerWidth:Math.floor(c)+2*settings.horizontal_padding,contentHeight:Math.floor(r),contentWidth:Math.floor(s),resized:resized}}function b(t,n){t=parseFloat(t),n=parseFloat(n),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(t),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(t).appendTo(e("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(t),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(e("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),r=n+detailsHeight,s=t,l=r+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),c=t}function y(e){return e.match(/youtube\.com\/watch/i)||e.match(/youtu\.be/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":e.match(/\b.mov\b/i)?"quicktime":e.match(/\b.swf\b/i)?"flash":e.match(/\biframe=true\b/i)?"iframe":e.match(/\bajax=true\b/i)?"ajax":e.match(/\bcustom=true\b/i)?"custom":"#"==e.substr(0,1)?"inline":"image"}function w(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=x(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=p/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>p)return;$pp_pic_holder.css({top:projectedTop,left:f/2+scroll_pos.scrollLeft-contentwidth/2})}}function x(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function C(t){if(settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))),settings.markup=settings.markup.replace("{pp_social}",""),e("body").append(settings.markup),$pp_pic_holder=e(".pp_pic_holder"),$ppt=e(".ppt"),$pp_overlay=e("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var n=0;n<pp_images.length;n++)pp_images[n].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[n]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=e(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click((function(){return e.prettyPhoto.changeGalleryPage("next"),e.prettyPhoto.stopSlideshow(),!1})),$pp_gallery.find(".pp_arrow_previous").click((function(){return e.prettyPhoto.changeGalleryPage("previous"),e.prettyPhoto.stopSlideshow(),!1})),$pp_pic_holder.find(".pp_content").hover((function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()}),(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()})),itemWidth=57,$pp_gallery_li.each((function(t){e(this).find("a").click((function(){return e.prettyPhoto.changePage(t),e.prettyPhoto.stopSlideshow(),!1}))}))}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click((function(){return e.prettyPhoto.startSlideshow(),!1}))),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:e(document).height(),width:e(window).width()}).bind("click",(function(){settings.modal||e.prettyPhoto.close()})),e("a.pp_close").bind("click",(function(){return e.prettyPhoto.close(),!1})),settings.allow_expand&&e("a.pp_expand").bind("click",(function(t){return e(this).hasClass("pp_expand")?(e(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(e(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),g((function(){e.prettyPhoto.open()})),!1})),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",(function(){return e.prettyPhoto.changePage("previous"),e.prettyPhoto.stopSlideshow(),!1})),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",(function(){return e.prettyPhoto.changePage("next"),e.prettyPhoto.stopSlideshow(),!1})),w()}return doresize=!0,scroll_pos=x(),e(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",(function(){w(),p=e(window).height(),f=e(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(e(document).height()).width(f)})),i.keyboard_shortcuts&&e(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",(function(t){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(t.keyCode){case 37:e.prettyPhoto.changePage("previous"),t.preventDefault();break;case 39:e.prettyPhoto.changePage("next"),t.preventDefault();break;case 27:settings.modal||e.prettyPhoto.close(),t.preventDefault()}})),e.prettyPhoto.initialize=function(){return settings=i,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=e(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=!!galleryRegExp.exec(theRel),pp_images=isSet?jQuery.map(u,(function(t,n){if(-1!=e(t).attr(settings.hook).indexOf(theRel))return e(t).attr("href")})):e.makeArray(e(this).attr("href")),pp_titles=isSet?jQuery.map(u,(function(t,n){if(-1!=e(t).attr(settings.hook).indexOf(theRel))return e(t).find("img").attr("alt")?e(t).find("img").attr("alt"):""})):e.makeArray(e(this).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(u,(function(t,n){if(-1!=e(t).attr(settings.hook).indexOf(theRel))return e(t).attr("title")?e(t).attr("title"):""})):e.makeArray(e(this).attr("title")),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray(e(this).attr("href"),pp_images),rel_index=isSet?set_position:e("a["+settings.hook+"^='"+theRel+"']").index(e(this)),C(this),settings.allow_resize&&e(window).bind("scroll.prettyphoto",(function(){w()})),e.prettyPhoto.open(),!1},e.prettyPhoto.open=function(t){return"undefined"==typeof settings&&(settings=i,pp_images=e.makeArray(arguments[0]),pp_titles=arguments[1]?e.makeArray(arguments[1]):e.makeArray(""),pp_descriptions=arguments[2]?e.makeArray(arguments[2]):e.makeArray(""),isSet=pp_images.length>1,set_position=arguments[3]?arguments[3]:0,C(t.target)),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),e(pp_images).length>1?e(".pp_nav").show():e(".pp_nav").hide(),e(".pp_loaderIcon").show(),settings.deeplinking&&function(){if("undefined"==typeof theRel)return;location.hash=theRel+"/"+rel_index+"/"}(),settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),$pp_pic_holder.find(".pp_social").html(facebook_like_link)),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+e(pp_images).length),void 0!==pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(n("width",pp_images[set_position]))?n("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(n("height",pp_images[set_position]))?n("height",pp_images[set_position]):settings.default_height.toString(),h=!1,-1!=movie_height.indexOf("%")&&(movie_height=parseFloat(e(window).height()*parseFloat(movie_height)/100-150),h=!0),-1!=movie_width.indexOf("%")&&(movie_width=parseFloat(e(window).width()*parseFloat(movie_width)/100-150),h=!0),$pp_pic_holder.fadeIn((function(){switch(settings.show_title&&""!=pp_titles[set_position]&&void 0!==pp_titles[set_position]?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;"),imgPreloader="",skipInjection=!1,y(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<e(pp_images).length-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){o=v(imgPreloader.width,imgPreloader.height),m()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),e.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":o=v(movie_width,movie_height),movie_id=n("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="http://www.youtube.com/embed/"+movie_id,n("rel",pp_images[set_position])?movie+="?rel="+n("rel",pp_images[set_position]):movie+="?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,o.width).replace(/{height}/g,o.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":o=v(movie_width,movie_height),movie_id=pp_images[set_position];var t=movie_id.match(/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/);movie="http://player.vimeo.com/video/"+t[3]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=o.width+"/embed/?moog_width="+o.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,o.height).replace(/{path}/g,movie);break;case"quicktime":(o=v(movie_width,movie_height)).height+=15,o.contentHeight+=15,o.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,o.width).replace(/{height}/g,o.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":o=v(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,o.width).replace(/{height}/g,o.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":o=v(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,o.width).replace(/{height}/g,o.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,o=v(movie_width,movie_height),doresize=!0,skipInjection=!0,e.get(pp_images[set_position],(function(e){toInject=settings.inline_markup.replace(/{content}/g,e),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,m()}));break;case"custom":o=v(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=e(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(e("body")).show(),doresize=!1,o=v(e(myClone).width(),e(myClone).height()),doresize=!0,e(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,e(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,m())})),!1},e.prettyPhoto.changePage=function(t){currentGalleryPage=0,"previous"==t?(set_position--,set_position<0&&(set_position=e(pp_images).length-1)):"next"==t?(set_position++,set_position>e(pp_images).length-1&&(set_position=0)):set_position=t,rel_index=set_position,doresize||(doresize=!0),settings.allow_expand&&e(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),g((function(){e.prettyPhoto.open()}))},e.prettyPhoto.changeGalleryPage=function(e){"next"==e?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==e?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=e,slide_speed="next"==e||"previous"==e?settings.animation_speed:0,slide_to=currentGalleryPage*(itemsPerPage*itemWidth),$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},e.prettyPhoto.startSlideshow=function(){void 0===d?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click((function(){return e.prettyPhoto.stopSlideshow(),!1})),d=setInterval(e.prettyPhoto.startSlideshow,settings.slideshow)):e.prettyPhoto.changePage("next")},e.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click((function(){return e.prettyPhoto.startSlideshow(),!1})),clearInterval(d),d=void 0},e.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(e.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),e("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,(function(){e(this).remove()})),$pp_overlay.fadeOut(settings.animation_speed,(function(){settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),e(this).remove(),e(window).unbind("scroll.prettyphoto"),-1!==location.href.indexOf("#prettyPhoto")&&(location.hash="prettyPhoto"),settings.callback(),doresize=!0,a=!1,delete settings})))},!pp_alreadyInitialized&&t()&&(pp_alreadyInitialized=!0,hashIndex=t(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout((function(){e("a["+i.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")}),50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",e.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;!function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper"],e):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=e(window.blueimp.helper||window.jQuery))}((function(e){"use strict";function t(e,n){return void 0===document.body.style.maxHeight?null:this&&this.options===t.prototype.options?void(e&&e.length?(this.list=e,this.num=e.length,this.initOptions(n),this.initialize()):this.console.log("blueimp Gallery: No or empty list provided as first argument.",e)):new t(e,n)}return e.extend(t.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",altTextProperty:"alt",urlProperty:"href",srcsetProperty:"urlset",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,slideshowDirection:"ltr",index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(t){var n,i={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},o={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(n in o)if(Object.prototype.hasOwnProperty.call(o,n)&&void 0!==t.style[n]){i.transition=o[n],i.transition.name=n;break}function a(){var e,n,o=i.transition;document.body.appendChild(t),o&&(e=o.name.slice(0,-9)+"ransform",void 0!==t.style[e]&&(t.style[e]="translateZ(0)",n=window.getComputedStyle(t).getPropertyValue(o.prefix+"transform"),i.transform={prefix:o.prefix,name:e,translate:!0,translateZ:!!n&&"none"!==n})),void 0!==t.style.backgroundSize&&(i.backgroundSize={},t.style.backgroundSize="contain",i.backgroundSize.contain="contain"===window.getComputedStyle(t).getPropertyValue("background-size"),t.style.backgroundSize="cover",i.backgroundSize.cover="cover"===window.getComputedStyle(t).getPropertyValue("background-size")),document.body.removeChild(t)}return document.body?a():e(document).on("DOMContentLoaded",a),i}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,initialize:function(){if(this.initStartIndex(),!1===this.initWidget())return!1;this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play()},slide:function(e,t){window.clearTimeout(this.timeout);var n,i,o,a=this.index;if(a!==e&&1!==this.num){if(t=t||this.options.transitionSpeed,this.support.transform){for(this.options.continuous||(e=this.circle(e)),n=Math.abs(a-e)/(a-e),this.options.continuous&&(i=n,(n=-this.positions[this.circle(e)]/this.slideWidth)!==i&&(e=-n*this.num+e)),o=Math.abs(a-e)-1;o;)o-=1,this.move(this.circle((a<e?e:a)-o-1),this.slideWidth*n,0);e=this.circle(e),this.move(a,this.slideWidth*n,t),this.move(e,0,t),this.options.continuous&&this.move(this.circle(e-n),-this.slideWidth*n,0)}else e=this.circle(e),this.animate(a*-this.slideWidth,e*-this.slideWidth,t);this.onslide(e)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(e){var t=this,n=this.index+("rtl"===this.options.slideshowDirection?-1:1);window.clearTimeout(this.timeout),this.interval=e||this.options.slideshowInterval,1<this.elements[this.index]&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(e,n){t.animationFrameId=t.requestAnimationFrame.call(window,(function(){t.slide(e,n)}))},[n,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.cancelAnimationFrame&&(this.cancelAnimationFrame.call(window,this.animationFrameId),this.animationFrameId=null),this.container.removeClass(this.options.playingClass)},add:function(e){var t;for(e.concat||(e=Array.prototype.slice.call(e)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(e),this.num=this.list.length,2<this.num&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),t=this.num-e.length;t<this.num;t+=1)this.addSlide(t),this.positionSlide(t);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var e=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(e.displayClass).removeClass(e.singleClass).removeClass(e.leftEdgeClass).removeClass(e.rightEdgeClass),e.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var e=this;this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,(function t(n){n.target===e.container[0]&&(e.container.off(e.support.transition.end,t),e.handleClose())})),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(e){return(this.num+e%this.num)%this.num},move:function(e,t,n){this.translateX(e,t,n),this.positions[e]=t},translate:function(e,t,n,i){if(this.slides[e]){var o=this.slides[e].style,a=this.support.transition,r=this.support.transform;o[a.name+"Duration"]=i+"ms",o[r.name]="translate("+t+"px, "+n+"px)"+(r.translateZ?" translateZ(0)":"")}},translateX:function(e,t,n){this.translate(e,t,0,n)},translateY:function(e,t,n){this.translate(e,0,t,n)},animate:function(e,t,n){if(n)var i=this,o=(new Date).getTime(),a=window.setInterval((function(){var r=(new Date).getTime()-o;if(n<r)return i.slidesContainer[0].style.left=t+"px",i.ontransitionend(),void window.clearInterval(a);i.slidesContainer[0].style.left=(t-e)*(Math.floor(r/n*100)/100)+e+"px"}),4);else this.slidesContainer[0].style.left=t+"px"},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(e){e.which&&1===e.which&&"VIDEO"!==e.target.nodeName&&"AUDIO"!==e.target.nodeName&&(e.preventDefault(),(e.originalEvent||e).touches=[{pageX:e.pageX,pageY:e.pageY}],this.ontouchstart(e))},onmousemove:function(e){this.touchStart&&((e.originalEvent||e).touches=[{pageX:e.pageX,pageY:e.pageY}],this.ontouchmove(e))},onmouseup:function(e){this.touchStart&&(this.ontouchend(e),delete this.touchStart)},onmouseout:function(t){if(this.touchStart){var n=t.target,i=t.relatedTarget;i&&(i===n||e.contains(n,i))||this.onmouseup(t)}},ontouchstart:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t=(e.originalEvent||e).touches[0];this.touchStart={x:t.pageX,y:t.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t,n,i=(e.originalEvent||e).touches[0],o=(e.originalEvent||e).scale,a=this.index;if(!(1<i.length||o&&1!==o))if(this.options.disableScroll&&e.preventDefault(),this.touchDelta={x:i.pageX-this.touchStart.x,y:i.pageY-this.touchStart.y},t=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(t)<Math.abs(this.touchDelta.y)),this.isScrolling)this.translateY(a,this.touchDelta.y+this.positions[a],0);else for(e.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?n=[this.circle(a+1),a,this.circle(a-1)]:(this.touchDelta.x=t/=!a&&0<t||a===this.num-1&&t<0?Math.abs(t)/this.slideWidth+1:1,n=[a],a&&n.push(a-1),a<this.num-1&&n.unshift(a+1));n.length;)a=n.pop(),this.translateX(a,t+this.positions[a],0)},ontouchend:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t,n,i,o,a,r=this.index,s=this.options.transitionSpeed,l=this.slideWidth,c=Number(Date.now()-this.touchStart.time)<250,d=c&&20<Math.abs(this.touchDelta.x)||Math.abs(this.touchDelta.x)>l/2,u=!r&&0<this.touchDelta.x||r===this.num-1&&this.touchDelta.x<0,h=!d&&this.options.closeOnSwipeUpOrDown&&(c&&20<Math.abs(this.touchDelta.y)||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(u=!1),t=this.touchDelta.x<0?-1:1,this.isScrolling?h?this.close():this.translateY(r,0,s):d&&!u?(n=r+t,i=r-t,o=l*t,a=-l*t,this.options.continuous?(this.move(this.circle(n),o,0),this.move(this.circle(r-2*t),a,0)):0<=n&&n<this.num&&this.move(n,o,0),this.move(r,this.positions[r]+o,s),this.move(this.circle(i),this.positions[this.circle(i)]+o,s),r=this.circle(i),this.onslide(r)):this.options.continuous?(this.move(this.circle(r-1),-l,s),this.move(r,0,s),this.move(this.circle(r+1),l,s)):(r&&this.move(r-1,-l,s),this.move(r,0,s),r<this.num-1&&this.move(r+1,l,s))},ontouchcancel:function(e){this.touchStart&&(this.ontouchend(e),delete this.touchStart)},ontransitionend:function(e){var t=this.slides[this.index];e&&t!==e.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,t]))},oncomplete:function(t){var n,i=t.target||t.srcElement,o=i&&i.parentNode;i&&o&&(n=this.getNodeIndex(o),e(o).removeClass(this.options.slideLoadingClass),"error"===t.type?(e(o).addClass(this.options.slideErrorClass),this.elements[n]=3):this.elements[n]=2,i.clientHeight>this.container[0].clientHeight&&(i.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===o&&this.play(),this.setTimeout(this.options.onslidecomplete,[n,o]))},onload:function(e){this.oncomplete(e)},onerror:function(e){this.oncomplete(e)},onkeydown:function(e){switch(e.which||e.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(e),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),e.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(e),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(e),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(e),this.next())}},handleClick:function(t){var n=this.options,i=t.target||t.srcElement,o=i.parentNode;function a(t){return e(i).hasClass(t)||e(o).hasClass(t)}a(n.toggleClass)?(this.preventDefault(t),this.toggleControls()):a(n.prevClass)?(this.preventDefault(t),this.prev()):a(n.nextClass)?(this.preventDefault(t),this.next()):a(n.closeClass)?(this.preventDefault(t),this.close()):a(n.playPauseClass)?(this.preventDefault(t),this.toggleSlideshow()):o===this.slidesContainer[0]?n.closeOnSlideClick?(this.preventDefault(t),this.close()):n.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls()):o.parentNode&&o.parentNode===this.slidesContainer[0]&&n.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls())},onclick:function(e){if(!(this.options.emulateTouchEvents&&this.touchDelta&&(20<Math.abs(this.touchDelta.x)||20<Math.abs(this.touchDelta.y))))return this.handleClick(e);delete this.touchDelta},updateEdgeClasses:function(e){e?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),e===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(e){this.options.continuous||this.updateEdgeClasses(e),this.loadElements(e),this.options.unloadElements&&this.unloadElements(e),this.setTitle(e)},onslide:function(e){this.index=e,this.handleSlide(e),this.setTimeout(this.options.onslide,[e,this.slides[e]])},setTitle:function(e){var t=this.slides[e].firstChild,n=t.title||t.alt,i=this.titleElement;i.length&&(this.titleElement.empty(),n&&i[0].appendChild(document.createTextNode(n)))},setTimeout:function(e,t,n){var i=this;return e&&window.setTimeout((function(){e.apply(i,t||[])}),n||0)},imageFactory:function(t,n){var i,o,a,r,s=this,l=this.imagePrototype.cloneNode(!1),c=t,d=this.options.stretchImages;return"string"!=typeof c&&(c=this.getItemProperty(t,this.options.urlProperty),a=this.getItemProperty(t,this.options.titleProperty),r=this.getItemProperty(t,this.options.altTextProperty)||a),!0===d&&(d="contain"),(d=this.support.backgroundSize&&this.support.backgroundSize[d]&&d)?o=this.elementPrototype.cloneNode(!1):(o=l).draggable=!1,a&&(o.title=a),r&&(o.alt=r),e(l).on("load error",(function t(a){if(!i){if(a={type:a.type,target:o},!o.parentNode)return s.setTimeout(t,[a]);i=!0,e(l).off("load error",t),d&&"load"===a.type&&(o.style.background='url("'+c+'") center no-repeat',o.style.backgroundSize=d),n(a)}})),l.src=c,o},createElement:function(t,n){var i=t&&this.getItemProperty(t,this.options.typeProperty),o=i&&this[i.split("/")[0]+"Factory"]||this.imageFactory,a=t&&o.call(this,t,n),r=this.getItemProperty(t,this.options.srcsetProperty);return a||(a=this.elementPrototype.cloneNode(!1),this.setTimeout(n,[{type:"error",target:a}])),r&&a.setAttribute("srcset",r),e(a).addClass(this.options.slideContentClass),a},loadElement:function(t){this.elements[t]||(this.slides[t].firstChild?this.elements[t]=e(this.slides[t]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[t]=1,e(this.slides[t]).addClass(this.options.slideLoadingClass),this.slides[t].appendChild(this.createElement(this.list[t],this.proxyListener))))},loadElements:function(e){var t,n=Math.min(this.num,2*this.options.preloadRange+1),i=e;for(t=0;t<n;t+=1)i+=t*(t%2==0?-1:1),i=this.circle(i),this.loadElement(i)},unloadElements:function(e){var t,n;for(t in this.elements)Object.prototype.hasOwnProperty.call(this.elements,t)&&(n=Math.abs(e-t))>this.options.preloadRange&&n+this.options.preloadRange<this.num&&(this.unloadSlide(t),delete this.elements[t])},addSlide:function(e){var t=this.slidePrototype.cloneNode(!1);t.setAttribute("data-index",e),this.slidesContainer[0].appendChild(t),this.slides.push(t)},positionSlide:function(e){var t=this.slides[e];t.style.width=this.slideWidth+"px",this.support.transform&&(t.style.left=e*-this.slideWidth+"px",this.move(e,this.index>e?-this.slideWidth:this.index<e?this.slideWidth:0,0))},initSlides:function(t){var n,i;for(t||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),e(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,n=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].clientWidth,this.slideHeight=this.container[0].clientHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",n&&this.resetSlides(),i=0;i<this.num;i+=1)n&&this.addSlide(i),this.positionSlide(i);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(e){var t,n;null!==(n=(t=this.slides[e]).firstChild)&&t.removeChild(n)},unloadAllSlides:function(){var e,t;for(e=0,t=this.slides.length;e<t;e++)this.unloadSlide(e)},toggleControls:function(){var e=this.options.controlsClass;this.container.hasClass(e)?this.container.removeClass(e):this.container.addClass(e)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(e){return parseInt(e.getAttribute("data-index"),10)},getNestedProperty:function(e,t){return t.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,(function(t,n,i,o,a){var r=a||n||i||o&&parseInt(o,10);t&&e&&(e=e[r])})),e},getDataProperty:function(t,n){var i,o;if(t.dataset?(i=n.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()})),o=t.dataset[i]):t.getAttribute&&(o=t.getAttribute("data-"+n.replace(/([A-Z])/g,"-$1").toLowerCase())),"string"==typeof o){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(o))try{return e.parseJSON(o)}catch(t){}return o}},getItemProperty:function(e,t){var n=this.getDataProperty(e,t);return void 0===n&&(n=e[t]),void 0===n&&(n=this.getNestedProperty(e,t)),n},initStartIndex:function(){var e,t=this.options.index,n=this.options.urlProperty;if(t&&"number"!=typeof t)for(e=0;e<this.num;e+=1)if(this.list[e]===t||this.getItemProperty(this.list[e],n)===this.getItemProperty(t,n)){t=e;break}this.index=this.circle(parseInt(t,10)||0)},initEventListeners:function(){var t=this,n=this.slidesContainer;function i(e){var n=t.support.transition&&t.support.transition.end===e.type?"transitionend":e.type;t["on"+n](e)}e(window).on("resize",i),e(document.body).on("keydown",i),this.container.on("click",i),this.support.touch?n.on("touchstart touchmove touchend touchcancel",i):this.options.emulateTouchEvents&&this.support.transition&&n.on("mousedown mousemove mouseup mouseout",i),this.support.transition&&n.on(this.support.transition.end,i),this.proxyListener=i},destroyEventListeners:function(){var t=this.slidesContainer,n=this.proxyListener;e(window).off("resize",n),e(document.body).off("keydown",n),this.container.off("click",n),this.support.touch?t.off("touchstart touchmove touchend touchcancel",n):this.options.emulateTouchEvents&&this.support.transition&&t.off("mousedown mousemove mouseup mouseout",n),this.support.transition&&t.off(this.support.transition.end,n)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var t=this;return this.container=e(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,(function e(n){n.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleOpen())})):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(t){this.options=e.extend({},this.options),(t&&t.carousel||this.options.carousel&&(!t||!1!==t.carousel))&&e.extend(this.options,this.carouselOptions),e.extend(this.options,t),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";e.extend(t.prototype.options,{fullScreen:!1});var n=t.prototype.initialize,i=t.prototype.close;return e.extend(t.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullScreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},initialize:function(){n.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),i.call(this)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";e.extend(t.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var n=t.prototype.initSlides,i=t.prototype.addSlide,o=t.prototype.resetSlides,a=t.prototype.handleClick,r=t.prototype.handleSlide,s=t.prototype.handleClose;return e.extend(t.prototype,{createIndicator:function(t){var n,i,o=this.indicatorPrototype.cloneNode(!1),a=this.getItemProperty(t,this.options.titleProperty),r=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(r&&(n=this.getItemProperty(t,r)),void 0===n&&(i=t.getElementsByTagName&&e(t).find("img")[0])&&(n=i.src),n&&(o.style.backgroundImage='url("'+n+'")')),a&&(o.title=a),o},addIndicator:function(e){if(this.indicatorContainer.length){var t=this.createIndicator(this.list[e]);t.setAttribute("data-index",e),this.indicatorContainer[0].appendChild(t),this.indicators.push(t)}},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=e(this.indicators[t]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(e){e||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),n.call(this,e)},addSlide:function(e){i.call(this,e),this.addIndicator(e)},resetSlides:function(){o.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(e){var t=e.target||e.srcElement,n=t.parentNode;if(n===this.indicatorContainer[0])this.preventDefault(e),this.slide(this.getNodeIndex(t));else{if(n.parentNode!==this.indicatorContainer[0])return a.call(this,e);this.preventDefault(e),this.slide(this.getNodeIndex(n))}},handleSlide:function(e){r.call(this,e),this.setActiveIndicator(e)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),s.call(this)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";e.extend(t.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"});var n=t.prototype.handleSlide;return e.extend(t.prototype,{handleSlide:function(e){n.call(this,e),this.playingVideo&&this.playingVideo.pause()},videoFactory:function(t,n,i){var o,a,r,s,l,c=this,d=this.options,u=this.elementPrototype.cloneNode(!1),h=e(u),p=[{type:"error",target:u}],f=i||document.createElement("video"),m=this.getItemProperty(t,d.urlProperty),g=this.getItemProperty(t,d.typeProperty),v=this.getItemProperty(t,d.titleProperty),b=this.getItemProperty(t,this.options.altTextProperty)||v,y=this.getItemProperty(t,d.videoPosterProperty),w=this.getItemProperty(t,d.videoSourcesProperty);if(h.addClass(d.videoContentClass),v&&(u.title=v),f.canPlayType)if(m&&g&&f.canPlayType(g))f.src=m;else if(w)for(;w.length;)if(a=w.shift(),m=this.getItemProperty(a,d.urlProperty),g=this.getItemProperty(a,d.typeProperty),m&&g&&f.canPlayType(g)){f.src=m;break}return y&&(f.poster=y,o=this.imagePrototype.cloneNode(!1),e(o).addClass(d.toggleClass),o.src=y,o.draggable=!1,o.alt=b,u.appendChild(o)),(r=document.createElement("a")).setAttribute("target","_blank"),i||r.setAttribute("download",v),r.href=m,f.src&&(f.controls=!0,(i||e(f)).on("error",(function(){c.setTimeout(n,p)})).on("pause",(function(){f.seeking||(s=!1,h.removeClass(c.options.videoLoadingClass).removeClass(c.options.videoPlayingClass),l&&c.container.addClass(c.options.controlsClass),delete c.playingVideo,c.interval&&c.play())})).on("playing",(function(){s=!1,h.removeClass(c.options.videoLoadingClass).addClass(c.options.videoPlayingClass),c.container.hasClass(c.options.controlsClass)?(l=!0,c.container.removeClass(c.options.controlsClass)):l=!1})).on("play",(function(){window.clearTimeout(c.timeout),s=!0,h.addClass(c.options.videoLoadingClass),c.playingVideo=f})),e(r).on("click",(function(e){c.preventDefault(e),s?f.pause():f.play()})),u.appendChild(i&&i.element||f)),u.appendChild(r),this.setTimeout(n,[{type:"load",target:u}]),u}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";if(!window.postMessage)return t;function n(e,t,n,i){this.url=e,this.videoId=t,this.playerId=n,this.clickToPlay=i,this.element=document.createElement("div"),this.listeners={}}e.extend(t.prototype.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0});var i=t.prototype.textFactory||t.prototype.imageFactory,o=0;return e.extend(n.prototype,{canPlayType:function(){return!0},on:function(e,t){return this.listeners[e]=t,this},loadAPI:function(){var t,n,i=this,o="//f.vimeocdn.com/js/froogaloop2.min.js",a=document.getElementsByTagName("script"),r=a.length;function s(){!n&&i.playOnReady&&i.play(),n=!0}for(;r;)if(a[r-=1].src===o){t=a[r];break}t||((t=document.createElement("script")).src=o),e(t).on("load",s),a[0].parentNode.insertBefore(t,a[0]),/loaded|complete/.test(t.readyState)&&s()},onReady:function(){var e=this;this.ready=!0,this.player.addEvent("play",(function(){e.hasPlayed=!0,e.onPlaying()})),this.player.addEvent("pause",(function(){e.onPause()})),this.player.addEvent("finish",(function(){e.onPause()})),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var e=document.createElement("iframe");e.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),e.id=this.playerId,this.element.parentNode.replaceChild(e,this.element),this.element=e},play:function(){var e=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",(function(){e.onReady()}))):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),e.extend(t.prototype,{VimeoPlayer:n,textFactory:function(e,t){var a=this.options,r=this.getItemProperty(e,a.vimeoVideoIdProperty);return r?(void 0===this.getItemProperty(e,a.urlProperty)&&(e[a.urlProperty]="//vimeo.com/"+r),o+=1,this.videoFactory(e,t,new n(a.vimeoPlayerUrl,r,a.vimeoPlayerIdPrefix+o,a.vimeoClickToPlay))):i.call(this,e,t)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";if(!window.postMessage)return t;function n(e,t,n){this.videoId=e,this.playerVars=t,this.clickToPlay=n,this.element=document.createElement("div"),this.listeners={}}e.extend(t.prototype.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0});var i=t.prototype.textFactory||t.prototype.imageFactory;return e.extend(n.prototype,{canPlayType:function(){return!0},on:function(e,t){return this.listeners[e]=t,this},loadAPI:function(){var e,t=this,n=window.onYouTubeIframeAPIReady,i="//www.youtube.com/iframe_api",o=document.getElementsByTagName("script"),a=o.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),t.playOnReady&&t.play()};a;)if(o[a-=1].src===i)return;(e=document.createElement("script")).src=i,o[0].parentNode.insertBefore(e,o[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){t.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){this.stateChange!==YT.PlayerState.PAUSED&&this.stateChange!==YT.PlayerState.ENDED||(this.listeners.pause(),delete this.playStatus)},onStateChange:function(e){switch(e.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=e.data},onError:function(e){this.listeners.error(e)},play:function(){var e=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){e.onReady()},onStateChange:function(t){e.onStateChange(t)},onError:function(t){e.onError(t)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),e.extend(t.prototype,{YouTubePlayer:n,textFactory:function(e,t){var o=this.options,a=this.getItemProperty(e,o.youTubeVideoIdProperty);return a?(void 0===this.getItemProperty(e,o.urlProperty)&&(e[o.urlProperty]="//www.youtube.com/watch?v="+a),void 0===this.getItemProperty(e,o.videoPosterProperty)&&(e[o.videoPosterProperty]="//img.youtube.com/vi/"+a+"/maxresdefault.jpg"),this.videoFactory(e,t,new n(a,o.youTubePlayerVars,o.youTubeClickToPlay))):i.call(this,e,t)}}),t})),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery"],e):e(window.jQuery,window.blueimp.Gallery)}((function(e,t){"use strict";e(document).on("click","[data-gallery]",(function(n){var i=e(this).data("gallery"),o=e(i),a=o.length&&o||e(t.prototype.options.container),r={onopen:function(){a.data("gallery",this).trigger("open")},onopened:function(){a.trigger("opened")},onslide:function(){a.trigger("slide",arguments)},onslideend:function(){a.trigger("slideend",arguments)},onslidecomplete:function(){a.trigger("slidecomplete",arguments)},onclose:function(){a.trigger("close")},onclosed:function(){a.trigger("closed").removeData("gallery")}},s=e.extend(a.data(),{container:a[0],index:this,event:n},r),l=e(this).closest("[data-gallery-group], body").find('[data-gallery="'+i+'"]');return s.filter&&(l=l.filter(s.filter)),new t(l,s)}))})),function(e,t){e.fn.bootpag=function(t){function n(t,n){n=parseInt(n,10);var r,s=0==a.maxVisible?1:a.maxVisible,l=1==a.maxVisible?0:1,c=Math.floor((n-1)/s)*s,d=t.find("li");if(a.page=n=0>n?0:n>a.total?a.total:n,d.removeClass(a.activeClass),r=1>n-1?1:a.leaps&&n-1>=a.maxVisible?Math.floor((n-1)/s)*s:n-1,a.firstLastUse&&d.first().toggleClass(a.disabledClass,1===n),s=d.first(),a.firstLastUse&&(s=s.next()),s.toggleClass(a.disabledClass,1===n).attr("data-lp",r).find("a").attr("href",i(r)),l=1==a.maxVisible?0:1,r=n+1>a.total?a.total:a.leaps&&n+1<a.total-a.maxVisible?c+a.maxVisible+l:n+1,s=d.last(),a.firstLastUse&&(s=s.prev()),s.toggleClass(a.disabledClass,n===a.total).attr("data-lp",r).find("a").attr("href",i(r)),d.last().toggleClass(a.disabledClass,n===a.total),s=d.filter("[data-lp="+n+"]"),l="."+[a.nextClass,a.prevClass,a.firstClass,a.lastClass].join(",."),!s.not(l).length){var u=n<=c?-a.maxVisible:0;d.not(l).each((function(t){r=t+1+c+u,e(this).attr("data-lp",r).toggle(r<=a.total).find("a").html(r).attr("href",i(r))})),s=d.filter("[data-lp="+n+"]")}s.not(l).addClass(a.activeClass),o.data("settings",a)}function i(e){return a.href.replace(a.hrefVariable,e)}var o=this,a=e.extend({total:0,page:1,maxVisible:null,leaps:!0,href:"javascript:void(0);",hrefVariable:"{{number}}",next:"&raquo;",prev:"&laquo;",firstLastUse:!1,first:'<span aria-hidden="true">&larr;</span>',last:'<span aria-hidden="true">&rarr;</span>',wrapClass:"pagination",activeClass:"active",disabledClass:"disabled",nextClass:"next",prevClass:"prev",lastClass:"last",firstClass:"first"},o.data("settings")||{},t||{});return 0>=a.total?this:(e.isNumeric(a.maxVisible)||a.maxVisible||(a.maxVisible=parseInt(a.total,10)),o.data("settings",a),this.each((function(){var t,r,s=e(this);for(t=['<ul class="',a.wrapClass,' bootpag">'],a.firstLastUse&&(t=t.concat(['<li data-lp="1" class="',a.firstClass,'"><a href="',i(1),'">',a.first,"</a></li>"])),a.prev&&(t=t.concat(['<li data-lp="1" class="',a.prevClass,'"><a href="',i(1),'">',a.prev,"</a></li>"])),r=1;r<=Math.min(a.total,a.maxVisible);r++)t=t.concat(['<li data-lp="',r,'"><a href="',i(r),'">',r,"</a></li>"]);a.next&&(r=a.leaps&&a.total>a.maxVisible?Math.min(a.maxVisible+1,a.total):2,t=t.concat(['<li data-lp="',r,'" class="',a.nextClass,'"><a href="',i(r),'">',a.next,"</a></li>"])),a.firstLastUse&&(t=t.concat(['<li data-lp="',a.total,'" class="last"><a href="',i(a.total),'">',a.last,"</a></li>"])),t.push("</ul>"),s.find("ul.bootpag").remove(),s.append(t.join("")),t=s.find("ul.bootpag"),s.find("li").click((function(){var t=e(this);if(!t.hasClass(a.disabledClass)&&!t.hasClass(a.activeClass)){var i=parseInt(t.attr("data-lp"),10);o.find("ul.bootpag").each((function(){n(e(this),i)})),o.trigger("page",i)}})),n(t,a.page)})))}}(jQuery,window),function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],(function(e){return t(e)})):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,(function(e){!function(e){"use strict";var t=["sanitize","whiteList","sanitizeFn"],n=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],i=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,o=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function a(t,a){var r=t.nodeName.toLowerCase();if(-1!==e.inArray(r,a))return-1===e.inArray(r,n)||Boolean(t.nodeValue.match(i)||t.nodeValue.match(o));for(var s=e(a).filter((function(e,t){return t instanceof RegExp})),l=0,c=s.length;l<c;l++)if(r.match(s[l]))return!0;return!1}function r(e,t,n){if(n&&"function"==typeof n)return n(e);for(var i=Object.keys(t),o=0,r=e.length;o<r;o++)for(var s=e[o].querySelectorAll("*"),l=0,c=s.length;l<c;l++){var d=s[l],u=d.nodeName.toLowerCase();if(-1!==i.indexOf(u))for(var h=[].slice.call(d.attributes),p=[].concat(t["*"]||[],t[u]||[]),f=0,m=h.length;f<m;f++){var g=h[f];a(g,p)||d.removeAttribute(g.nodeName)}else d.parentNode.removeChild(d)}}"classList"in document.createElement("_")||function(t){if("Element"in t){var n="classList",i="prototype",o=t.Element[i],a=Object,r=function(){var t=e(this);return{add:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.addClass(e)},remove:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.removeClass(e)},toggle:function(e,n){return t.toggleClass(e,n)},contains:function(e){return t.hasClass(e)}}};if(a.defineProperty){var s={get:r,enumerable:!0,configurable:!0};try{a.defineProperty(o,n,s)}catch(t){void 0!==t.number&&-2146823252!==t.number||(s.enumerable=!1,a.defineProperty(o,n,s))}}else a[i].__defineGetter__&&o.__defineGetter__(n,r)}}(window);var s,l,c=document.createElement("_");if(c.classList.add("c1","c2"),!c.classList.contains("c2")){var d=DOMTokenList.prototype.add,u=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,d.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,u.bind(this))}}if(c.classList.toggle("c3",!1),c.classList.contains("c3")){var h=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:h.call(this,e)}}function p(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==l.call(e))throw new TypeError;var n=t.length,i=String(e),o=i.length,a=1<arguments.length?arguments[1]:void 0,r=a?Number(a):0;r!=r&&(r=0);var s=Math.min(Math.max(r,0),n);if(n<o+s)return!1;for(var c=-1;++c<o;)if(t.charCodeAt(s+c)!=i.charCodeAt(c))return!1;return!0}function f(e,t){var n,i=e.selectedOptions,o=[];if(t){for(var a=0,r=i.length;a<r;a++)(n=i[a]).disabled||"OPTGROUP"===n.parentNode.tagName&&n.parentNode.disabled||o.push(n);return o}return i}function m(e,t){for(var n,i=[],o=t||e.selectedOptions,a=0,r=o.length;a<r;a++)(n=o[a]).disabled||"OPTGROUP"===n.parentNode.tagName&&n.parentNode.disabled||i.push(n.value||n.text);return e.multiple?i:i.length?i[0]:null}c=null,String.prototype.startsWith||(s=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),l={}.toString,s?s(String.prototype,"startsWith",{value:p,configurable:!0,writable:!0}):String.prototype.startsWith=p),Object.keys||(Object.keys=function(e,t,n){for(t in n=[],e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),HTMLSelectElement&&!HTMLSelectElement.prototype.hasOwnProperty("selectedOptions")&&Object.defineProperty(HTMLSelectElement.prototype,"selectedOptions",{get:function(){return this.querySelectorAll(":checked")}});var g={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,n){return n&&!g.useDefault&&e(t).data("selected",!0),g._set.apply(this,arguments)};var v=null,b=function(){try{return new Event("change"),!0}catch(e){return!1}}();function y(e,t,n,i){for(var o=["display","subtext","tokens"],a=!1,r=0;r<o.length;r++){var s=o[r],l=e[s];if(l&&(l=l.toString(),"display"===s&&(l=l.replace(/<[^>]+>/g,"")),i&&(l=k(l)),l=l.toUpperCase(),a="contains"===n?0<=l.indexOf(t):l.startsWith(t)))break}return a}function w(e){return parseInt(e,10)||0}e.fn.triggerNative=function(e){var t,n=this[0];n.dispatchEvent?(b?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),n.dispatchEvent(t)):n.fireEvent?((t=document.createEventObject()).eventType=e,n.fireEvent("on"+e,t)):this.trigger(e)};var x={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},C=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,S=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function _(e){return x[e]}function k(e){return(e=e.toString())&&e.replace(C,_).replace(S,"")}var T,E,D,I,N=(T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E="(?:"+Object.keys(T).join("|")+")",D=RegExp(E),I=RegExp(E,"g"),function(e){return e=null==e?"":""+e,D.test(e)?e.replace(I,A):e});function A(e){return T[e]}var P={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},R={success:!1,major:"3"};try{R.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),R.major=R.full[0],R.success=!0}catch(e){}var O=0,F=".bs.select",M={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},L={MENU:"."+M.MENU},B={span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(" "),fragment:document.createDocumentFragment()};B.a.setAttribute("role","option"),B.subtext.className="text-muted",B.text=B.span.cloneNode(!1),B.text.className="text",B.checkMark=B.span.cloneNode(!1);var z=new RegExp("38|40"),H=new RegExp("^9$|27"),j=function(e,t,n){var i=B.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?i.appendChild(e):i.innerHTML=e),void 0!==t&&""!==t&&(i.className=t),null!=n&&i.classList.add("optgroup-"+n),i},$=function(e,t){var n,i,o=B.text.cloneNode(!1);if(e.content)o.innerHTML=e.content;else{if(o.textContent=e.text,e.icon){var a=B.whitespace.cloneNode(!1);(i=(!0===t?B.i:B.span).cloneNode(!1)).className=e.iconBase+" "+e.icon,B.fragment.appendChild(i),B.fragment.appendChild(a)}e.subtext&&((n=B.subtext.cloneNode(!1)).textContent=e.subtext,o.appendChild(n))}if(!0===t)for(;0<o.childNodes.length;)B.fragment.appendChild(o.childNodes[0]);else B.fragment.appendChild(o);return B.fragment},W=function(t,n){var i=this;g.useDefault||(e.valHooks.select.set=g._set,g.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=n,this.selectpicker={main:{},search:{},current:{},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout((function(){i.selectpicker.keydown.keyHistory=""}),800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var o=this.options.windowPadding;"number"==typeof o&&(this.options.windowPadding=[o,o,o,o]),this.val=W.prototype.val,this.render=W.prototype.render,this.refresh=W.prototype.refresh,this.setStyle=W.prototype.setStyle,this.selectAll=W.prototype.selectAll,this.deselectAll=W.prototype.deselectAll,this.destroy=W.prototype.destroy,this.remove=W.prototype.remove,this.show=W.prototype.show,this.hide=W.prototype.hide,this.init()};function U(n){var i,o=arguments,a=n;if([].shift.apply(o),!R.success){try{R.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(n){W.BootstrapVersion?R.full=W.BootstrapVersion.split(" ")[0].split("."):(R.full=[R.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",n))}R.major=R.full[0],R.success=!0}if("4"===R.major){var r=[];W.DEFAULTS.style===M.BUTTONCLASS&&r.push({name:"style",className:"BUTTONCLASS"}),W.DEFAULTS.iconBase===M.ICONBASE&&r.push({name:"iconBase",className:"ICONBASE"}),W.DEFAULTS.tickIcon===M.TICKICON&&r.push({name:"tickIcon",className:"TICKICON"}),M.DIVIDER="dropdown-divider",M.SHOW="show",M.BUTTONCLASS="btn-light",M.POPOVERHEADER="popover-header",M.ICONBASE="",M.TICKICON="bs-ok-default";for(var s=0;s<r.length;s++)n=r[s],W.DEFAULTS[n.name]=M[n.className]}var l=this.each((function(){var n=e(this);if(n.is("select")){var r=n.data("selectpicker"),s="object"==typeof a&&a;if(r){if(s)for(var l in s)s.hasOwnProperty(l)&&(r.options[l]=s[l])}else{var c=n.data();for(var d in c)c.hasOwnProperty(d)&&-1!==e.inArray(d,t)&&delete c[d];var u=e.extend({},W.DEFAULTS,e.fn.selectpicker.defaults||{},c,s);u.template=e.extend({},W.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},c.template,s.template),n.data("selectpicker",r=new W(this,u))}"string"==typeof a&&(i=r[a]instanceof Function?r[a].apply(r,o):r.options[a])}}));return void 0!==i?i:l}W.VERSION="1.13.12",W.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:M.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:M.ICONBASE,tickIcon:M.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},W.prototype={constructor:W,init:function(){var e=this,t=this.$element.attr("id");O++,this.selectId="bs-select-"+O,this.$element[0].classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$element[0].classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(L.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element[0].classList.remove("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(M.MENURIGHT),void 0!==t&&this.$button.attr("data-id",t),this.checkDisabled(),this.clickListener(),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.render(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+F,(function(){if(e.isVirtual()){var t=e.$menuInner[0],n=t.firstChild.cloneNode(!1);t.replaceChild(n,t.firstChild),t.scrollTop=0}})),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(t){e.$element.trigger("hide"+F,t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden"+F,t)},"show.bs.dropdown":function(t){e.$element.trigger("show"+F,t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown"+F,t)}}),e.$element[0].hasAttribute("required")&&this.$element.on("invalid"+F,(function(){e.$button[0].classList.add("bs-invalid"),e.$element.on("shown"+F+".invalid",(function(){e.$element.val(e.$element.val()).off("shown"+F+".invalid")})).on("rendered"+F,(function(){this.validity.valid&&e.$button[0].classList.remove("bs-invalid"),e.$element.off("rendered"+F)})),e.$button.on("blur"+F,(function(){e.$element.trigger("focus").trigger("blur"),e.$button.off("blur"+F)}))})),setTimeout((function(){e.createLi(),e.$element.trigger("loaded"+F)}))},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",n=this.multiple?' aria-multiselectable="true"':"",i="",o=this.autofocus?" autofocus":"";R.major<4&&this.$element.parent().hasClass("input-group")&&(i=" input-group-btn");var a,r="",s="",l="",c="";return this.options.header&&(r='<div class="'+M.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(s='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+N(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(l='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+M.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+M.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(c='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+M.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),a='<div class="dropdown bootstrap-select'+t+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+o+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===R.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+M.MENU+" "+("4"===R.major?"":M.SHOW)+'">'+r+s+l+'<div class="inner '+M.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+n+'><ul class="'+M.MENU+" inner "+("4"===R.major?M.SHOW:"")+'" role="presentation"></ul></div>'+c+"</div></div>",e(a)},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var e=this.selectpicker.view.size=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],n=!0;"divider"===t.type?(n=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(n=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(n=!1),this.selectpicker.view.canHighlight.push(n),n&&(this.selectpicker.view.size++,t.posinset=this.selectpicker.view.size),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(t,n,i){var o,a,s=this,l=0,c=[];if(this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),n)if(i)l=this.$menuInner[0].scrollTop;else if(!s.multiple){var d=s.$element[0],u=(d.options[d.selectedIndex]||{}).liIndex;if("number"==typeof u&&!1!==s.options.size){var h=s.selectpicker.main.data[u],p=h&&h.position;p&&(l=p-(s.sizeInfo.menuInnerHeight+s.sizeInfo.liHeight)/2)}}function f(e,n){var i,l,d,u,h,p,f,m,g=s.selectpicker.current.elements.length,v=[],b=!0,y=s.isVirtual();s.selectpicker.view.scrollTop=e,i=Math.ceil(s.sizeInfo.menuInnerHeight/s.sizeInfo.liHeight*1.5),l=Math.round(g/i)||1;for(var w=0;w<l;w++){var x=(w+1)*i;if(w===l-1&&(x=g),v[w]=[w*i+(w?1:0),x],!g)break;void 0===h&&e-1<=s.selectpicker.current.data[x-1].position-s.sizeInfo.menuInnerHeight&&(h=w)}if(void 0===h&&(h=0),p=[s.selectpicker.view.position0,s.selectpicker.view.position1],d=Math.max(0,h-1),u=Math.min(l-1,h+1),s.selectpicker.view.position0=!1===y?0:Math.max(0,v[d][0])||0,s.selectpicker.view.position1=!1===y?g:Math.min(g,v[u][1])||0,f=p[0]!==s.selectpicker.view.position0||p[1]!==s.selectpicker.view.position1,void 0!==s.activeIndex&&(a=s.selectpicker.main.elements[s.prevActiveIndex],c=s.selectpicker.main.elements[s.activeIndex],o=s.selectpicker.main.elements[s.selectedIndex],n&&(s.activeIndex!==s.selectedIndex&&s.defocusItem(c),s.activeIndex=void 0),s.activeIndex&&s.activeIndex!==s.selectedIndex&&s.defocusItem(o)),void 0!==s.prevActiveIndex&&s.prevActiveIndex!==s.activeIndex&&s.prevActiveIndex!==s.selectedIndex&&s.defocusItem(a),(n||f)&&(m=s.selectpicker.view.visibleElements?s.selectpicker.view.visibleElements.slice():[],s.selectpicker.view.visibleElements=!1===y?s.selectpicker.current.elements:s.selectpicker.current.elements.slice(s.selectpicker.view.position0,s.selectpicker.view.position1),s.setOptionStatus(),(t||!1===y&&n)&&(b=!function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}(m,s.selectpicker.view.visibleElements)),(n||!0===y)&&b)){var C,S,_=s.$menuInner[0],k=document.createDocumentFragment(),T=_.firstChild.cloneNode(!1),E=s.selectpicker.view.visibleElements,D=[];_.replaceChild(T,_.firstChild),w=0;for(var I=E.length;w<I;w++){var N,A,P=E[w];s.options.sanitize&&(N=P.lastChild)&&(A=s.selectpicker.current.data[w+s.selectpicker.view.position0])&&A.content&&!A.sanitized&&(D.push(N),A.sanitized=!0),k.appendChild(P)}if(s.options.sanitize&&D.length&&r(D,s.options.whiteList,s.options.sanitizeFn),!0===y?(C=0===s.selectpicker.view.position0?0:s.selectpicker.current.data[s.selectpicker.view.position0-1].position,S=s.selectpicker.view.position1>g-1?0:s.selectpicker.current.data[g-1].position-s.selectpicker.current.data[s.selectpicker.view.position1-1].position,_.firstChild.style.marginTop=C+"px",_.firstChild.style.marginBottom=S+"px"):(_.firstChild.style.marginTop=0,_.firstChild.style.marginBottom=0),_.firstChild.appendChild(k),!0===y&&s.sizeInfo.hasScrollBar){var R=_.firstChild.offsetWidth;if(n&&R<s.sizeInfo.menuInnerInnerWidth&&s.sizeInfo.totalMenuWidth>s.sizeInfo.selectWidth)_.firstChild.style.minWidth=s.sizeInfo.menuInnerInnerWidth+"px";else if(R>s.sizeInfo.menuInnerInnerWidth){s.$menu[0].style.minWidth=0;var O=_.firstChild.offsetWidth;O>s.sizeInfo.menuInnerInnerWidth&&(s.sizeInfo.menuInnerInnerWidth=O,_.firstChild.style.minWidth=s.sizeInfo.menuInnerInnerWidth+"px"),s.$menu[0].style.minWidth=""}}}if(s.prevActiveIndex=s.activeIndex,s.options.liveSearch){if(t&&n){var F,M=0;s.selectpicker.view.canHighlight[M]||(M=1+s.selectpicker.view.canHighlight.slice(1).indexOf(!0)),F=s.selectpicker.view.visibleElements[M],s.defocusItem(s.selectpicker.view.currentActive),s.activeIndex=(s.selectpicker.current.data[M]||{}).index,s.focusItem(F)}}else s.$menuInner.trigger("focus")}f(l,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",(function(e,t){s.noScroll||f(this.scrollTop,t),s.noScroll=!1})),e(window).off("resize"+F+"."+this.selectId+".createView").on("resize"+F+"."+this.selectId+".createView",(function(){s.$newElement.hasClass(M.SHOW)&&f(s.$menuInner[0].scrollTop)}))},focusItem:function(e,t,n){if(e){t=t||this.selectpicker.main.data[this.activeIndex];var i=e.firstChild;i&&(i.setAttribute("aria-setsize",this.selectpicker.view.size),i.setAttribute("aria-posinset",t.posinset),!0!==n&&(this.focusedParent.setAttribute("aria-activedescendant",i.id),e.classList.add("active"),i.classList.add("active")))}},defocusItem:function(e){e&&(e.classList.remove("active"),e.firstChild&&e.firstChild.classList.remove("active"))},setPlaceholder:function(){var t=!1;if(this.options.title&&!this.multiple){this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),t=!0;var n=this.$element[0],i=!1,o=!this.selectpicker.view.titleOption.parentNode;o&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",i=void 0===e(n.options[n.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")),!o&&0===this.selectpicker.view.titleOption.index||n.insertBefore(this.selectpicker.view.titleOption,n.firstChild),i&&(n.selectedIndex=0)}return t},createLi:function(){var e=this,t=this.options.iconBase,n=':not([hidden]):not([data-hidden="true"])',i=[],o=[],a=0,r=0,s=this.setPlaceholder()?1:0;this.options.hideDisabled&&(n+=":not(:disabled)"),!e.options.showTick&&!e.multiple||B.checkMark.parentNode||(B.checkMark.className=t+" "+e.options.tickIcon+" check-mark",B.a.appendChild(B.checkMark));var l=this.$element[0].querySelectorAll("select > *"+n);function c(e){var t=o[o.length-1];t&&"divider"===t.type&&(t.optID||e.optID)||((e=e||{}).type="divider",i.push(j(!1,M.DIVIDER,e.optID?e.optID+"div":void 0)),o.push(e))}function d(n,r){if((r=r||{}).divider="true"===n.getAttribute("data-divider"),r.divider)c({optID:r.optID});else{var s=o.length,l=n.style.cssText,d=l?N(l):"",u=(n.className||"")+(r.optgroupClass||"");r.optID&&(u="opt "+u),r.text=n.textContent,r.content=n.getAttribute("data-content"),r.tokens=n.getAttribute("data-tokens"),r.subtext=n.getAttribute("data-subtext"),r.icon=n.getAttribute("data-icon"),r.iconBase=t;var h=$(r),p=j(function(e,t,n){var i=B.a.cloneNode(!0);return e&&(11===e.nodeType?i.appendChild(e):i.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&(i.className=t),"4"===R.major&&i.classList.add("dropdown-item"),n&&i.setAttribute("style",n),i}(h,u,d),"",r.optID);p.firstChild&&(p.firstChild.id=e.selectId+"-"+s),i.push(p),n.liIndex=s,r.display=r.content||r.text,r.type="option",r.index=s,r.option=n,r.disabled=r.disabled||n.disabled,o.push(r);var f=0;r.display&&(f+=r.display.length),r.subtext&&(f+=r.subtext.length),r.icon&&(f+=1),a<f&&(a=f,e.selectpicker.view.widestOption=i[i.length-1])}}function u(e,a){var s=a[e],l=a[e-1],u=a[e+1],h=s.querySelectorAll("option"+n);if(h.length){var p,f,m={label:N(s.label),subtext:s.getAttribute("data-subtext"),icon:s.getAttribute("data-icon"),iconBase:t},g=" "+(s.className||"");r++,l&&c({optID:r});var v=function(e){var t,n,i=B.text.cloneNode(!1);if(i.innerHTML=e.label,e.icon){var o=B.whitespace.cloneNode(!1);(n=B.span.cloneNode(!1)).className=e.iconBase+" "+e.icon,B.fragment.appendChild(n),B.fragment.appendChild(o)}return e.subtext&&((t=B.subtext.cloneNode(!1)).textContent=e.subtext,i.appendChild(t)),B.fragment.appendChild(i),B.fragment}(m);i.push(j(v,"dropdown-header"+g,r)),o.push({display:m.label,subtext:m.subtext,type:"optgroup-label",optID:r});for(var b=0,y=h.length;b<y;b++){var w=h[b];0===b&&(f=(p=o.length-1)+y),d(w,{headerIndex:p,lastIndex:f,optID:r,optgroupClass:g,disabled:s.disabled})}u&&c({optID:r})}}for(var h=l.length;s<h;s++){var p=l[s];"OPTGROUP"!==p.tagName?d(p,{}):u(s,l)}this.selectpicker.main.elements=i,this.selectpicker.main.data=o,this.selectpicker.current=this.selectpicker.main},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){this.setPlaceholder();var e,t=this,n=this.$element[0],i=f(n,this.options.hideDisabled),o=i.length,a=this.$button[0],s=a.querySelector(".filter-option-inner-inner"),l=document.createTextNode(this.options.multipleSeparator),c=B.fragment.cloneNode(!1),d=!1;if(a.classList.toggle("bs-placeholder",t.multiple?!o:!m(n,i)),this.tabIndex(),"static"===this.options.selectedTextFormat)c=$({text:this.options.title},!0);else if(!1===(this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&1<o&&(1<(e=this.options.selectedTextFormat.split(">")).length&&o>e[1]||1===e.length&&2<=o))){for(var u=0;u<o&&u<50;u++){var h=i[u],p={},g={content:h.getAttribute("data-content"),subtext:h.getAttribute("data-subtext"),icon:h.getAttribute("data-icon")};this.multiple&&0<u&&c.appendChild(l.cloneNode(!1)),h.title?p.text=h.title:g.content&&t.options.showContent?(p.content=g.content.toString(),d=!0):(t.options.showIcon&&(p.icon=g.icon,p.iconBase=this.options.iconBase),t.options.showSubtext&&!t.multiple&&g.subtext&&(p.subtext=" "+g.subtext),p.text=h.textContent.trim()),c.appendChild($(p,!0))}49<o&&c.appendChild(document.createTextNode("..."))}else{var v=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';this.options.hideDisabled&&(v+=":not(:disabled)");var b=this.$element[0].querySelectorAll("select > option"+v+", optgroup"+v+" option"+v).length,y="function"==typeof this.options.countSelectedText?this.options.countSelectedText(o,b):this.options.countSelectedText;c=$({text:y.replace("{0}",o.toString()).replace("{1}",b.toString())},!0)}if(null==this.options.title&&(this.options.title=this.$element.attr("title")),c.childNodes.length||(c=$({text:void 0!==this.options.title?this.options.title:this.options.noneSelectedText},!0)),a.title=c.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&d&&r([c],t.options.whiteList,t.options.sanitizeFn),s.innerHTML="",s.appendChild(c),R.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")){var w=a.querySelector(".filter-expand"),x=s.cloneNode(!0);x.className="filter-expand",w?a.replaceChild(x,w):a.appendChild(x)}this.$element.trigger("rendered"+F)},setStyle:function(e,t){var n,i=this.$button[0],o=this.$newElement[0],a=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),R.major<4&&(o.classList.add("bs3"),o.parentNode.classList.contains("input-group")&&(o.previousElementSibling||o.nextElementSibling)&&(o.previousElementSibling||o.nextElementSibling).classList.contains("input-group-addon")&&o.classList.add("bs3-has-addon")),n=e?e.trim():a,"add"==t?n&&i.classList.add.apply(i.classList,n.split(" ")):"remove"==t?n&&i.classList.remove.apply(i.classList,n.split(" ")):(a&&i.classList.remove.apply(i.classList,a.split(" ")),n&&i.classList.add.apply(i.classList,n.split(" ")))},liHeight:function(t){if(t||!1!==this.options.size&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),a=document.createElement("ul"),r=document.createElement("li"),s=document.createElement("li"),l=document.createElement("li"),c=document.createElement("a"),d=document.createElement("span"),u=this.options.header&&0<this.$menu.find("."+M.POPOVERHEADER).length?this.$menu.find("."+M.POPOVERHEADER)[0].cloneNode(!0):null,h=this.options.liveSearch?document.createElement("div"):null,p=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,f=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,m=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,d.className="text",c.className="dropdown-item "+(m?m.className:""),n.className=this.$menu[0].parentNode.className+" "+M.SHOW,n.style.width=0,"auto"===this.options.width&&(i.style.minWidth=0),i.className=M.MENU+" "+M.SHOW,o.className="inner "+M.SHOW,a.className=M.MENU+" inner "+("4"===R.major?M.SHOW:""),r.className=M.DIVIDER,s.className="dropdown-header",d.appendChild(document.createTextNode("​")),c.appendChild(d),l.appendChild(c),s.appendChild(d.cloneNode(!0)),this.selectpicker.view.widestOption&&a.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),a.appendChild(l),a.appendChild(r),a.appendChild(s),u&&i.appendChild(u),h){var g=document.createElement("input");h.className="bs-searchbox",g.className="form-control",h.appendChild(g),i.appendChild(h)}p&&i.appendChild(p),o.appendChild(a),i.appendChild(o),f&&i.appendChild(f),n.appendChild(i),document.body.appendChild(n);var v,b=l.offsetHeight,y=s?s.offsetHeight:0,x=u?u.offsetHeight:0,C=h?h.offsetHeight:0,S=p?p.offsetHeight:0,_=f?f.offsetHeight:0,k=e(r).outerHeight(!0),T=!!window.getComputedStyle&&window.getComputedStyle(i),E=i.offsetWidth,D=T?null:e(i),I={vert:w(T?T.paddingTop:D.css("paddingTop"))+w(T?T.paddingBottom:D.css("paddingBottom"))+w(T?T.borderTopWidth:D.css("borderTopWidth"))+w(T?T.borderBottomWidth:D.css("borderBottomWidth")),horiz:w(T?T.paddingLeft:D.css("paddingLeft"))+w(T?T.paddingRight:D.css("paddingRight"))+w(T?T.borderLeftWidth:D.css("borderLeftWidth"))+w(T?T.borderRightWidth:D.css("borderRightWidth"))},N={vert:I.vert+w(T?T.marginTop:D.css("marginTop"))+w(T?T.marginBottom:D.css("marginBottom"))+2,horiz:I.horiz+w(T?T.marginLeft:D.css("marginLeft"))+w(T?T.marginRight:D.css("marginRight"))+2};o.style.overflowY="scroll",v=i.offsetWidth-E,document.body.removeChild(n),this.sizeInfo.liHeight=b,this.sizeInfo.dropdownHeaderHeight=y,this.sizeInfo.headerHeight=x,this.sizeInfo.searchHeight=C,this.sizeInfo.actionsHeight=S,this.sizeInfo.doneButtonHeight=_,this.sizeInfo.dividerHeight=k,this.sizeInfo.menuPadding=I,this.sizeInfo.menuExtras=N,this.sizeInfo.menuWidth=E,this.sizeInfo.menuInnerInnerWidth=E-I.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=v,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,n=e(window),i=this.$newElement.offset(),o=e(this.options.container);this.options.container&&o.length&&!o.is("body")?((t=o.offset()).top+=parseInt(o.css("borderTopWidth")),t.left+=parseInt(o.css("borderLeftWidth"))):t={top:0,left:0};var a=this.options.windowPadding;this.sizeInfo.selectOffsetTop=i.top-t.top-n.scrollTop(),this.sizeInfo.selectOffsetBot=n.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-a[2],this.sizeInfo.selectOffsetLeft=i.left-t.left-n.scrollLeft(),this.sizeInfo.selectOffsetRight=n.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-a[1],this.sizeInfo.selectOffsetTop-=a[0],this.sizeInfo.selectOffsetLeft-=a[3]},setMenuSize:function(e){this.getSelectPosition();var t,n,i,o,a,r,s,l=this.sizeInfo.selectWidth,c=this.sizeInfo.liHeight,d=this.sizeInfo.headerHeight,u=this.sizeInfo.searchHeight,h=this.sizeInfo.actionsHeight,p=this.sizeInfo.doneButtonHeight,f=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&(s=c*this.selectpicker.current.elements.length+m.vert,this.$newElement.toggleClass(M.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&s+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot)),"auto"===this.options.size)o=3<this.selectpicker.current.elements.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,n=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,i=o+d+u+h+p,r=Math.max(o-m.vert,0),this.$newElement.hasClass(M.DROPUP)&&(n=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),t=(a=n)-d-u-h-p-m.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var v=0;v<this.options.size;v++)"divider"===this.selectpicker.current.data[v].type&&g++;t=(n=c*this.options.size+g*f+m.vert)-m.vert,a=n+d+u+h+p,i=r=""}this.$menu.css({"max-height":a+"px",overflow:"hidden","min-height":i+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":r+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(M.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-l),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){if(this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var n=this,i=e(window);this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",(function(){return n.setMenuSize()})),"auto"===this.options.size?i.off("resize"+F+"."+this.selectId+".setMenuSize scroll"+F+"."+this.selectId+".setMenuSize").on("resize"+F+"."+this.selectId+".setMenuSize scroll"+F+"."+this.selectId+".setMenuSize",(function(){return n.setMenuSize()})):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&i.off("resize"+F+"."+this.selectId+".setMenuSize scroll"+F+"."+this.selectId+".setMenuSize"),n.createView(!1,!0,t)}},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame((function(){e.$menu.css("min-width","0"),e.$element.on("loaded"+F,(function(){e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),n=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,n),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")}))})):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){function t(t){var s={},l=a.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;a.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(M.DROPUP,t.hasClass(M.DROPUP)),n=t.offset(),r.is("body")?i={top:0,left:0}:((i=r.offset()).top+=parseInt(r.css("borderTopWidth"))-r.scrollTop(),i.left+=parseInt(r.css("borderLeftWidth"))-r.scrollLeft()),o=t.hasClass(M.DROPUP)?0:t[0].offsetHeight,(R.major<4||"static"===l)&&(s.top=n.top-i.top+o,s.left=n.left-i.left),s.width=t[0].offsetWidth,a.$bsContainer.css(s)}this.$bsContainer=e('<div class="bs-container" />');var n,i,o,a=this,r=e(this.options.container);this.$button.on("click.bs.dropdown.data-api",(function(){a.isDisabled()||(t(a.$newElement),a.$bsContainer.appendTo(a.options.container).toggleClass(M.SHOW,!a.$button.hasClass(M.SHOW)).append(a.$menu))})),e(window).off("resize"+F+"."+this.selectId+" scroll"+F+"."+this.selectId).on("resize"+F+"."+this.selectId+" scroll"+F+"."+this.selectId,(function(){a.$newElement.hasClass(M.SHOW)&&t(a.$newElement)})),this.$element.on("hide"+F,(function(){a.$menu.data("height",a.$menu.height()),a.$bsContainer.detach()}))},setOptionStatus:function(e){var t=this;if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length)for(var n=0;n<t.selectpicker.view.visibleElements.length;n++){var i=t.selectpicker.current.data[n+t.selectpicker.view.position0],o=i.option;o&&(!0!==e&&t.setDisabled(i.index,i.disabled),t.setSelected(i.index,o.selected))}},setSelected:function(e,t){var n,i,o=this.selectpicker.main.elements[e],a=this.selectpicker.main.data[e],r=void 0!==this.activeIndex,s=this.activeIndex===e||t&&!this.multiple&&!r;a.selected=t,i=o.firstChild,t&&(this.selectedIndex=e),o.classList.toggle("selected",t),s?(this.focusItem(o,a),this.selectpicker.view.currentActive=o,this.activeIndex=e):this.defocusItem(o),i&&(i.classList.toggle("selected",t),t?i.setAttribute("aria-selected",!0):this.multiple?i.setAttribute("aria-selected",!1):i.removeAttribute("aria-selected")),s||r||!t||void 0===this.prevActiveIndex||(n=this.selectpicker.main.elements[this.prevActiveIndex],this.defocusItem(n))},setDisabled:function(e,t){var n,i=this.selectpicker.main.elements[e];this.selectpicker.main.data[e].disabled=t,n=i.firstChild,i.classList.toggle(M.DISABLED,t),n&&("4"===R.major&&n.classList.toggle(M.DISABLED,t),t?(n.setAttribute("aria-disabled",t),n.setAttribute("tabindex",-1)):(n.removeAttribute("aria-disabled"),n.setAttribute("tabindex",0)))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add(M.DISABLED),this.$button.addClass(M.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button[0].classList.contains(M.DISABLED)&&(this.$newElement[0].classList.remove(M.DISABLED),this.$button.removeClass(M.DISABLED).attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var t=this,n=e(document);function i(){t.options.liveSearch?t.$searchbox.trigger("focus"):t.$menuInner.trigger("focus")}function o(){t.dropdown&&t.dropdown._popper&&t.dropdown._popper.state.isCreated?i():requestAnimationFrame(o)}n.data("spaceSelect",!1),this.$button.on("keyup",(function(e){/(32)/.test(e.keyCode.toString(10))&&n.data("spaceSelect")&&(e.preventDefault(),n.data("spaceSelect",!1))})),this.$newElement.on("show.bs.dropdown",(function(){3<R.major&&!t.dropdown&&(t.dropdown=t.$button.data("bs.dropdown"),t.dropdown._menu=t.$menu[0])})),this.$button.on("click.bs.dropdown.data-api",(function(){t.$newElement.hasClass(M.SHOW)||t.setSize()})),this.$element.on("shown"+F,(function(){t.$menuInner[0].scrollTop!==t.selectpicker.view.scrollTop&&(t.$menuInner[0].scrollTop=t.selectpicker.view.scrollTop),3<R.major?requestAnimationFrame(o):i()})),this.$menuInner.on("mouseenter","li a",(function(e){var n=this.parentElement,i=t.isVirtual()?t.selectpicker.view.position0:0,o=Array.prototype.indexOf.call(n.parentElement.children,n),a=t.selectpicker.current.data[o+i];t.focusItem(n,a,!0)})),this.$menuInner.on("click","li a",(function(n,i){var o=e(this),a=t.$element[0],r=t.isVirtual()?t.selectpicker.view.position0:0,s=t.selectpicker.current.data[o.parent().index()+r],l=s.index,c=m(a),d=a.selectedIndex,u=a.options[d],h=!0;if(t.multiple&&1!==t.options.maxOptions&&n.stopPropagation(),n.preventDefault(),!t.isDisabled()&&!o.parent().hasClass(M.DISABLED)){var p=s.option,g=e(p),b=p.selected,y=g.parent("optgroup"),w=y.find("option"),x=t.options.maxOptions,C=y.data("maxOptions")||!1;if(l===t.activeIndex&&(i=!0),i||(t.prevActiveIndex=t.activeIndex,t.activeIndex=void 0),t.multiple){if(p.selected=!b,t.setSelected(l,!b),o.trigger("blur"),!1!==x||!1!==C){var S=x<f(a).length,_=C<y.find("option:selected").length;if(x&&S||C&&_)if(x&&1==x)a.selectedIndex=-1,p.selected=!0,t.setOptionStatus(!0);else if(C&&1==C){for(var k=0;k<w.length;k++){var T=w[k];T.selected=!1,t.setSelected(T.liIndex,!1)}p.selected=!0,t.setSelected(l,!0)}else{var E="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText,D="function"==typeof E?E(x,C):E,I=D[0].replace("{n}",x),N=D[1].replace("{n}",C),A=e('<div class="notify"></div>');D[2]&&(I=I.replace("{var}",D[2][1<x?0:1]),N=N.replace("{var}",D[2][1<C?0:1])),p.selected=!1,t.$menu.append(A),x&&S&&(A.append(e("<div>"+I+"</div>")),h=!1,t.$element.trigger("maxReached"+F)),C&&_&&(A.append(e("<div>"+N+"</div>")),h=!1,t.$element.trigger("maxReachedGrp"+F)),setTimeout((function(){t.setSelected(l,!1)}),10),A[0].classList.add("fadeOut"),setTimeout((function(){A.remove()}),1050)}}}else u&&(u.selected=!1),p.selected=!0,t.setSelected(l,!0);!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.trigger("focus"):t.options.liveSearch&&t.$searchbox.trigger("focus"),h&&(!t.multiple&&d===a.selectedIndex||(v=[p.index,g.prop("selected"),c],t.$element.triggerNative("change")))}})),this.$menu.on("click","li."+M.DISABLED+" a, ."+M.POPOVERHEADER+", ."+M.POPOVERHEADER+" :not(.close)",(function(n){n.currentTarget==this&&(n.preventDefault(),n.stopPropagation(),t.options.liveSearch&&!e(n.target).hasClass("close")?t.$searchbox.trigger("focus"):t.$button.trigger("focus"))})),this.$menuInner.on("click",".divider, .dropdown-header",(function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.trigger("focus"):t.$button.trigger("focus")})),this.$menu.on("click","."+M.POPOVERHEADER+" .close",(function(){t.$button.trigger("click")})),this.$searchbox.on("click",(function(e){e.stopPropagation()})),this.$menu.on("click",".actions-btn",(function(n){t.options.liveSearch?t.$searchbox.trigger("focus"):t.$button.trigger("focus"),n.preventDefault(),n.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()})),this.$element.on("change"+F,(function(){t.render(),t.$element.trigger("changed"+F,v),v=null})).on("focus"+F,(function(){t.options.mobile||t.$button.trigger("focus")}))},liveSearchListener:function(){var e=this,t=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",(function(){e.$searchbox.val()&&e.$searchbox.val("")})),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",(function(e){e.stopPropagation()})),this.$searchbox.on("input propertychange",(function(){var n=e.$searchbox.val();if(e.selectpicker.search.elements=[],e.selectpicker.search.data=[],n){var i=[],o=n.toUpperCase(),a={},r=[],s=e._searchStyle(),l=e.options.liveSearchNormalize;l&&(o=k(o)),e._$lisSelected=e.$menuInner.find(".selected");for(var c=0;c<e.selectpicker.main.data.length;c++){var d=e.selectpicker.main.data[c];a[c]||(a[c]=y(d,o,s,l)),a[c]&&void 0!==d.headerIndex&&-1===r.indexOf(d.headerIndex)&&(0<d.headerIndex&&(a[d.headerIndex-1]=!0,r.push(d.headerIndex-1)),a[d.headerIndex]=!0,r.push(d.headerIndex),a[d.lastIndex+1]=!0),a[c]&&"optgroup-label"!==d.type&&r.push(c)}c=0;for(var u=r.length;c<u;c++){var h=r[c],p=r[c-1],f=(d=e.selectpicker.main.data[h],e.selectpicker.main.data[p]);("divider"!==d.type||"divider"===d.type&&f&&"divider"!==f.type&&u-1!==c)&&(e.selectpicker.search.data.push(d),i.push(e.selectpicker.main.elements[h]))}e.activeIndex=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=i,e.createView(!0),i.length||(t.className="no-results",t.innerHTML=e.options.noneResultsText.replace("{0}",'"'+N(n)+'"'),e.$menuInner[0].firstChild.appendChild(t))}else e.$menuInner.scrollTop(0),e.createView(!1)}))},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){var t=this.$element[0];if(void 0===e)return this.$element.val();var n=m(t);if(v=[null,null,n],this.$element.val(e).trigger("changed"+F,v),this.$newElement.hasClass(M.SHOW))if(this.multiple)this.setOptionStatus(!0);else{var i=(t.options[t.selectedIndex]||{}).liIndex;"number"==typeof i&&(this.setSelected(this.selectedIndex,!1),this.setSelected(i,!0))}return this.render(),v=null,this.$element},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],n=0,i=0,o=m(t);t.classList.add("bs-select-hidden");for(var a=0,r=this.selectpicker.current.elements.length;a<r;a++){var s=this.selectpicker.current.data[a],l=s.option;l&&!s.disabled&&"divider"!==s.type&&(s.selected&&n++,(l.selected=e)&&i++)}t.classList.remove("bs-select-hidden"),n!==i&&(this.setOptionStatus(),v=[null,null,o],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){(e=e||window.event)&&e.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(t){var n,i,o,a,r,s=e(this),l=s.hasClass("dropdown-toggle"),c=(l?s.closest(".dropdown"):s.closest(L.MENU)).data("this"),d=c.findLis(),u=!1,h=9===t.which&&!l&&!c.options.selectOnTab,p=z.test(t.which)||h,f=c.$menuInner[0].scrollTop,m=!0===c.isVirtual()?c.selectpicker.view.position0:0;if(!(112<=t.which&&t.which<=123))if(!(i=c.$newElement.hasClass(M.SHOW))&&(p||48<=t.which&&t.which<=57||96<=t.which&&t.which<=105||65<=t.which&&t.which<=90)&&(c.$button.trigger("click.bs.dropdown.data-api"),c.options.liveSearch))c.$searchbox.trigger("focus");else{if(27===t.which&&i&&(t.preventDefault(),c.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),p){if(!d.length)return;-1!==(n=(o=c.selectpicker.main.elements[c.activeIndex])?Array.prototype.indexOf.call(o.parentElement.children,o):-1)&&c.defocusItem(o),38===t.which?(-1!==n&&n--,n+m<0&&(n+=d.length),c.selectpicker.view.canHighlight[n+m]||-1==(n=c.selectpicker.view.canHighlight.slice(0,n+m).lastIndexOf(!0)-m)&&(n=d.length-1)):40!==t.which&&!h||(++n+m>=c.selectpicker.view.canHighlight.length&&(n=0),c.selectpicker.view.canHighlight[n+m]||(n=n+1+c.selectpicker.view.canHighlight.slice(n+m+1).indexOf(!0))),t.preventDefault();var g=m+n;38===t.which?0===m&&n===d.length-1?(c.$menuInner[0].scrollTop=c.$menuInner[0].scrollHeight,g=c.selectpicker.current.elements.length-1):u=(r=(a=c.selectpicker.current.data[g]).position-a.height)<f:40!==t.which&&!h||(0===n?g=c.$menuInner[0].scrollTop=0:u=f<(r=(a=c.selectpicker.current.data[g]).position-c.sizeInfo.menuInnerHeight)),o=c.selectpicker.current.elements[g],c.activeIndex=c.selectpicker.current.data[g].index,c.focusItem(o),c.selectpicker.view.currentActive=o,u&&(c.$menuInner[0].scrollTop=r),c.options.liveSearch?c.$searchbox.trigger("focus"):s.trigger("focus")}else if(!s.is("input")&&!H.test(t.which)||32===t.which&&c.selectpicker.keydown.keyHistory){var v,b,w=[];t.preventDefault(),c.selectpicker.keydown.keyHistory+=P[t.which],c.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(c.selectpicker.keydown.resetKeyHistory.cancel),c.selectpicker.keydown.resetKeyHistory.cancel=c.selectpicker.keydown.resetKeyHistory.start(),b=c.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(b)&&(b=b.charAt(0));for(var x=0;x<c.selectpicker.current.data.length;x++){var C=c.selectpicker.current.data[x];y(C,b,"startsWith",!0)&&c.selectpicker.view.canHighlight[x]&&w.push(C.index)}if(w.length){var S=0;d.removeClass("active").find("a").removeClass("active"),1===b.length&&(-1===(S=w.indexOf(c.activeIndex))||S===w.length-1?S=0:S++),v=w[S],u=0<f-(a=c.selectpicker.main.data[v]).position?(r=a.position-a.height,!0):(r=a.position-c.sizeInfo.menuInnerHeight,a.position>f+c.sizeInfo.menuInnerHeight),o=c.selectpicker.main.elements[v],c.activeIndex=w[S],c.focusItem(o),o&&o.firstChild.focus(),u&&(c.$menuInner[0].scrollTop=r),s.trigger("focus")}}i&&(32===t.which&&!c.selectpicker.keydown.keyHistory||13===t.which||9===t.which&&c.options.selectOnTab)&&(32!==t.which&&t.preventDefault(),c.options.liveSearch&&32===t.which||(c.$menuInner.find(".active a").trigger("click",!0),s.trigger("focus"),c.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))}},mobile:function(){this.$element[0].classList.add("mobile-device")},refresh:function(){var t=e.extend({},this.options,this.$element.data());this.options=t,this.checkDisabled(),this.setStyle(),this.render(),this.createLi(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+F)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(F).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),e(window).off(F+"."+this.selectId)}};var V=e.fn.selectpicker;e.fn.selectpicker=U,e.fn.selectpicker.Constructor=W,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=V,this},e(document).off("keydown.bs.dropdown.data-api",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select .dropdown-menu').on("keydown"+F,'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',W.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',(function(e){e.stopPropagation()})),e(window).on("load"+F+".data-api",(function(){e(".selectpicker").each((function(){var t=e(this);U.call(t,t.data())}))}))}(e)})),function(e){function t(t){var i=this;e.extend(i,{container:e("#notyfy_container_"+t.layout),closed:!1,shown:!1,_triggerEvent:function(t,n){var o=e.Event("notyfy"+t);return i.wrapper.trigger(o,[i].concat(n||[])),!o.isDefaultPrevented()},_generateID:function(){var e;do{e="notyfy_"+(new Date).getTime()*Math.floor(1e6*Math.random())}while(document.getElementById(e));return e},init:function(){var n;return i.options=e.extend({},e.notyfy.defaults,{id:i._generateID()},t),i.container.length?i.container.removeClass("i-am-new"):(t.custom?i.container=t.custom.addClass("notyfy_container_inline"):i.container=e("<ul />",{id:"notyfy_container_"+i.options.layout,class:"notyfy_container"}).appendTo(i.options.custom||document.body),(n=e.notyfy.layouts[i.options.layout])&&e(window).bind("resize."+i.options.id,(function(e){n.call(i.container)})).triggerHandler("resize."+i.options.id),i.container.addClass("i-am-new")),i._build(),i},_build:function(){var t=e("<div />",{id:i.options.id,class:"notyfy_bar"}).append(i.options.template).find(".notyfy_text").html(i.options.text).end();i.wrapper=e("<li />",{class:["notyfy_wrapper","notyfy_"+i.options.type].join(" ")}).hide().append(t),i.options.theme&&i.wrapper.addClass("notyfytheme_"+i.options.theme),i.options.buttons&&(i.options.closeWith=[],i.options.timeout=!1,i.buttons=e("<div/>",{class:"notyfy_buttons"}).appendTo(e(".notyfy_bar",i.wrapper)).append(e.map(i.options.buttons,(function(t,n){return e("<button/>",{class:t.addClass||"gray",html:t.text,click:function(){e.isFunction(t.onClick)&&t.onClick.call(e(this),i)}})[0]})))),e.each(i.options.events,(function(t,n){e.isFunction(n)&&i.wrapper.bind("notyfy"+t,n)})),i.message=i.wrapper.find(".notyfy_message"),i.closeButton=i.wrapper.find(".notyfy_close"),e.notyfy.store[i.options.id]=i},show:function(t){function n(){i._triggerEvent("shown"),i.shown=!0}return i.wrapper.appendTo(i.container),e.inArray("click",i.options.closeWith)>-1&&i.wrapper.css("cursor","pointer").one("click",i.close),e.inArray("hover",i.options.closeWith)>-1&&i.wrapper.one("mouseenter",i.close),e.inArray("button",i.options.closeWith)>-1&&i.closeButton.one("click",i.close),-1==e.inArray("button",i.options.closeWith)&&i.closeButton.remove(),i._triggerEvent("show"),e.isFunction(i.options.showEffect)?(i.wrapper.clearQueue().stop(),i.options.showEffect.call(i,i.wrapper),i.wrapper.queue(n)):(i.wrapper.show(),n()),i.options.timeout&&(clearTimeout(i._delay),i._delay=setTimeout((function(){i.close()}),parseInt(i.options.timeout,10))),i},close:function(t){if(!i.closed){if(e(window).unbind("resize."+i.options.id),!i.shown)return e.notyfy.queue=e.map(e.notyfy.queue,(function(e,t){if(e.options.id!=i.options.id)return e})),i._removeContainerIfNew(),void delete e.notyfy.store[i.options.id];i.wrapper.addClass("i-am-closing-now"),i._triggerEvent("hide"),e.isFunction(i.options.hideEffect)?(i.wrapper.clearQueue().stop(),i.options.hideEffect.call(i,i.wrapper),i.wrapper.queue(o)):(i.wrapper.hide(),o())}function o(){i._triggerEvent("hidden"),i.options.modal&&n.hideModalFor(i),n.setLayoutCountFor(i,-1),0==n.getLayoutCountFor(i)&&i.wrapper.remove(),void 0!==i.wrapper&&null!==i.wrapper&&(i.wrapper.remove(),i._removeContainerIfNew(),i.wrapper=null,i.closed=!0),delete e.notyfy.store[i.options.id],i.options.dismissQueue||(e.notyfy.ontap=!0,n.render())}},_removeContainerIfNew:function(){i.container.filter(".i-am-new").remove(),delete i.container},setText:function(e){return i.closed||(i.options.text=e,i.wrapper.find(".notyfy_text").html(e)),i},setType:function(e){return i.closed||(i.options.type=e),i}}),i.init()}var n=e.notyfyRenderer={_modal:e("<div/>",{id:"notyfy_modal",data:{notyfy_modal_count:0}}),_modals:0,init:function(i){var o=new t(i);return e.notyfy.queue[o.options.force?"unshift":"push"](o),n.render(),o},render:function(){var t=e.notyfy.queue[0];"object"===e.type(t)?t.options.dismissQueue?n.show(e.notyfy.queue.shift()):e.notyfy.ontap&&(n.show(e.notyfy.queue.shift()),e.notyfy.ontap=!1):e.notyfy.ontap=!0},show:function(e){e.options.modal&&(n.createModalFor(e),n.setModalCount(1)),n.setLayoutCountFor(e,1),e.show()},createModalFor:function(e){n._modal[0].parentNode||n._modal.prependTo(document.body).fadeIn("fast")},hideModalFor:function(e){n.setModalCount(-1),0==n.getModalCount()&&n._modal.fadeOut("fast",(function(){n._modal.detach()}))},getLayoutCountFor:function(e){return e.container.data("notyfy_layout_count")||0},setLayoutCountFor:function(e,t){return e.container.data("notyfy_layout_count",n.getLayoutCountFor(e)+t)},getModalCount:function(){return n._modals},setModalCount:function(e){return n._modals+=e}},i=e(window);e.notyfy={ontap:!0,queue:[],store:{},layouts:{center:function(){this[0].style.top=i.height()/2-this.outerHeight()/2+"px",this[0].style.left=i.width()/2-this.outerWidth()/2+"px"},centerLeft:function(){this[0].style.top=i.height()/2-this.outerHeight()/2+"px"},centerRight:function(){this[0].style.top=i.height()/2-this.outerHeight()/2+"px"},topCenter:function(){this[0].style.left=i.width()/2-this.outerWidth()/2+"px"},bottomCenter:function(){this[0].style.left=i.width()/2-this.outerWidth()/2+"px"}},get:function(t){return!!e.notyfy.store.hasOwnProperty(t)&&e.notyfy.store[t]},close:function(t){return!!e.notyfy.get(t)&&e.notyfy.get(t).close()},setText:function(t,n){return!!e.notyfy.get(t)&&e.notyfy.get(t).setText(n)},setType:function(t,n){return!!e.notyfy.get(t)&&e.notyfy.get(t).setType(n)},clearQueue:function(){e.notyfy.queue=[]},closeAll:function(){e.notyfy.clearQueue(),e.each(e.notyfy.store,(function(e,t){t.close()}))},consumeAlert:function(e){window.alert=function(t){e?e.text=t:e={text:t},n.init(e)}},stopConsumeAlert:function(){delete window.alert},defaults:{layout:"top",theme:!1,type:"alert",text:"",dismissQueue:!0,template:'<div class="notyfy_message"><span class="notyfy_text"></span><div class="notyfy_close"></div></div>',showEffect:function(e){e.animate({height:"toggle"},500,"swing")},hideEffect:function(e){e.animate({height:"toggle"},500,"swing")},timeout:!1,force:!1,modal:!1,buttons:!1,closeWith:["click"],events:{show:null,hide:null,shown:null,hidden:null}}},window.notyfy=function(e){return n.init(e)},e.fn.notyfy=function(t){return t.custom=e(this),n.init(t)}}(jQuery),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,(function e(t,n){"use strict";var i,o,a,r;Object.keys||(Object.keys=(i=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),r=(a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("function"!=typeof e&&("object"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,s=[];for(t in e)i.call(e,t)&&s.push(t);if(o)for(n=0;n<r;n++)i.call(e,a[n])&&s.push(a[n]);return s}));var s={VERSION:"5.0.0"},l={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"}},c={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close" aria-hidden="true">&times;</button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:"<option></option>",promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-control"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}},d={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1};function u(e,i,o,a){var r;a&&a[0]&&(r=a[0].locale||d.locale,(a[0].swapButtonOrder||d.swapButtonOrder)&&(i=i.reverse()));var s,c,u,h={className:"bootbox-"+e,buttons:function(e,t){for(var n={},i=0,o=e.length;i<o;i++){var a=e[i],r=a.toLowerCase(),s=a.toUpperCase();n[r]={label:(c=s,(d=l[t])?d[c]:l.en[c])}}var c,d;return n}(i,r)};return s=function(e,n,i){return t.extend(!0,{},e,function(e,t){var n=e.length,i={};if(n<1||2<n)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(i[t[0]]=e[0],i[t[1]]=e[1]):i=e[0],i}(n,i))}(h,a,o),u={},p(c=i,(function(e,t){u[t]=!0})),p(s.buttons,(function(e){if(u[e]===n)throw new Error('button key "'+e+'" is not allowed (options are '+c.join(" ")+")")})),s}function h(e){return Object.keys(e).length}function p(e,n){var i=0;t.each(e,(function(e,t){n(e,t,i++)}))}function f(e){e.data.dialog.find(".bootbox-accept").first().trigger("focus")}function m(e){e.target===e.data.dialog[0]&&e.data.dialog.remove()}function g(e){e.target===e.data.dialog[0]&&(e.data.dialog.off("escape.close.bb"),e.data.dialog.off("click"))}function v(e,n,i){e.stopPropagation(),e.preventDefault(),t.isFunction(i)&&!1===i.call(n,e)||n.modal("hide")}function b(e){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(e)}function y(e){return/(\d{4})-(\d{2})-(\d{2})/.test(e)}return s.locales=function(e){return e?l[e]:l},s.addLocale=function(e,n){return t.each(["OK","CANCEL","CONFIRM"],(function(e,t){if(!n[t])throw new Error('Please supply a translation for "'+t+'"')})),l[e]={OK:n.OK,CANCEL:n.CANCEL,CONFIRM:n.CONFIRM},s},s.removeLocale=function(e){if("en"===e)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');return delete l[e],s},s.setLocale=function(e){return s.setDefaults("locale",e)},s.setDefaults=function(){var e={};return 2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(d,e),s},s.hideAll=function(){return t(".bootbox").modal("hide"),s},s.init=function(n){return e(n||t)},s.dialog=function(e){if(t.fn.modal===n)throw new Error('"$.fn.modal" is not defined; please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/4.4/getting-started/javascript/ for more details.');if(e=function(e){var n,i;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error('"message" option must not be null or an empty string.');return(e=t.extend({},d,e)).buttons||(e.buttons={}),n=e.buttons,i=h(n),p(n,(function(o,a,r){if(t.isFunction(a)&&(a=n[o]={callback:a}),"object"!==t.type(a))throw new Error('button with key "'+o+'" must be an object');if(a.label||(a.label=o),!a.className){var s;s=e.swapButtonOrder?0===r:r===i-1,a.className=i<=2&&s?"btn-primary":"btn-secondary btn-default"}})),e}(e),t.fn.modal.Constructor.VERSION){e.fullBootstrapVersion=t.fn.modal.Constructor.VERSION;var i=e.fullBootstrapVersion.indexOf(".");e.bootstrap=e.fullBootstrapVersion.substring(0,i)}else e.bootstrap="2",e.fullBootstrapVersion="2.3.2",console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible.");var o=t(c.dialog),a=o.find(".modal-dialog"),r=o.find(".modal-body"),s=t(c.header),l=t(c.footer),u=e.buttons,b={onEscape:e.onEscape};if(r.find(".bootbox-body").html(e.message),0<h(e.buttons)&&(p(u,(function(e,n){var i=t(c.button);switch(i.data("bb-handler",e),i.addClass(n.className),e){case"ok":case"confirm":i.addClass("bootbox-accept");break;case"cancel":i.addClass("bootbox-cancel")}i.html(n.label),l.append(i),b[e]=n.callback})),r.after(l)),!0===e.animate&&o.addClass("fade"),e.className&&o.addClass(e.className),e.size)switch(e.fullBootstrapVersion.substring(0,3)<"3.1"&&console.warn('"size" requires Bootstrap 3.1.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option."),e.size){case"small":case"sm":a.addClass("modal-sm");break;case"large":case"lg":a.addClass("modal-lg");break;case"extra-large":case"xl":a.addClass("modal-xl"),e.fullBootstrapVersion.substring(0,3)<"4.2"&&console.warn('Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")}if(e.scrollable&&(a.addClass("modal-dialog-scrollable"),e.fullBootstrapVersion.substring(0,3)<"4.3"&&console.warn('Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")),e.title&&(r.before(s),o.find(".modal-title").html(e.title)),e.closeButton){var y=t(c.closeButton);e.title?3<e.bootstrap?o.find(".modal-header").append(y):o.find(".modal-header").prepend(y):y.prependTo(r)}if(e.centerVertical&&(a.addClass("modal-dialog-centered"),e.fullBootstrapVersion<"4.0.0"&&console.warn('"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")),o.one("hide.bs.modal",{dialog:o},g),e.onHide){if(!t.isFunction(e.onHide))throw new Error('Argument supplied to "onHide" must be a function');o.on("hide.bs.modal",e.onHide)}if(o.one("hidden.bs.modal",{dialog:o},m),e.onHidden){if(!t.isFunction(e.onHidden))throw new Error('Argument supplied to "onHidden" must be a function');o.on("hidden.bs.modal",e.onHidden)}if(e.onShow){if(!t.isFunction(e.onShow))throw new Error('Argument supplied to "onShow" must be a function');o.on("show.bs.modal",e.onShow)}if(o.one("shown.bs.modal",{dialog:o},f),e.onShown){if(!t.isFunction(e.onShown))throw new Error('Argument supplied to "onShown" must be a function');o.on("shown.bs.modal",e.onShown)}return"static"!==e.backdrop&&o.on("click.dismiss.bs.modal",(function(e){o.children(".modal-backdrop").length&&(e.currentTarget=o.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&o.trigger("escape.close.bb")})),o.on("escape.close.bb",(function(e){b.onEscape&&v(e,o,b.onEscape)})),o.on("click",".modal-footer button:not(.disabled)",(function(e){var i=t(this).data("bb-handler");i!==n&&v(e,o,b[i])})),o.on("click",".bootbox-close-button",(function(e){v(e,o,b.onEscape)})),o.on("keyup",(function(e){27===e.which&&o.trigger("escape.close.bb")})),t(e.container).append(o),o.modal({backdrop:!!e.backdrop&&"static",keyboard:!1,show:!1}),e.show&&o.modal("show"),o},s.alert=function(){var e;if((e=u("alert",["ok"],["message","callback"],arguments)).callback&&!t.isFunction(e.callback))throw new Error('alert requires the "callback" property to be a function when provided');return e.buttons.ok.callback=e.onEscape=function(){return!t.isFunction(e.callback)||e.callback.call(this)},s.dialog(e)},s.confirm=function(){var e;if(e=u("confirm",["cancel","confirm"],["message","callback"],arguments),!t.isFunction(e.callback))throw new Error("confirm requires a callback");return e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},s.dialog(e)},s.prompt=function(){var e,i,o,a,r,l;if(o=t(c.form),(e=u("prompt",["cancel","confirm"],["title","callback"],arguments)).value||(e.value=d.value),e.inputType||(e.inputType=d.inputType),r=e.show===n?d.show:e.show,e.show=!1,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){var n;if("checkbox"===e.inputType)n=a.find("input:checked").map((function(){return t(this).val()})).get();else if("radio"===e.inputType)n=a.find("input:checked").val();else{if(a[0].checkValidity&&!a[0].checkValidity())return!1;n="select"===e.inputType&&!0===e.multiple?a.find("option:selected").map((function(){return t(this).val()})).get():a.val()}return e.callback.call(this,n)},!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!c.inputs[e.inputType])throw new Error("Invalid prompt type");switch(a=t(c.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"password":a.val(e.value),e.placeholder&&a.attr("placeholder",e.placeholder),e.pattern&&a.attr("pattern",e.pattern),e.maxlength&&a.attr("maxlength",e.maxlength),e.required&&a.prop({required:!0}),e.rows&&!isNaN(parseInt(e.rows))&&"textarea"===e.inputType&&a.attr({rows:e.rows});break;case"date":case"time":case"number":case"range":if(a.val(e.value),e.placeholder&&a.attr("placeholder",e.placeholder),e.pattern&&a.attr("pattern",e.pattern),e.required&&a.prop({required:!0}),"date"!==e.inputType&&e.step){if(!("any"===e.step||!isNaN(e.step)&&0<parseFloat(e.step)))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');a.attr("step",e.step)}!function(e,t,i){var o=!1,a=!0,r=!0;if("date"===e)t===n||(a=y(t))?i===n||(r=y(i))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if("time"===e){if(t!==n&&!(a=b(t)))throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(i!==n&&!(r=b(i)))throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else{if(t!==n&&isNaN(t))throw a=!1,new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(i!==n&&isNaN(i))throw r=!1,new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}if(a&&r){if(i<=t)throw new Error('"max" must be greater than "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');o=!0}return o}(e.inputType,e.min,e.max)||(e.min!==n&&a.attr("min",e.min),e.max!==n&&a.attr("max",e.max));break;case"select":var h={};if(l=e.inputOptions||[],!t.isArray(l))throw new Error("Please pass an array of input options");if(!l.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');e.placeholder&&a.attr("placeholder",e.placeholder),e.required&&a.prop({required:!0}),e.multiple&&a.prop({multiple:!0}),p(l,(function(e,i){var o=a;if(i.value===n||i.text===n)throw new Error('each option needs a "value" property and a "text" property');i.group&&(h[i.group]||(h[i.group]=t("<optgroup />").attr("label",i.group)),o=h[i.group]);var r=t(c.option);r.attr("value",i.value).text(i.text),o.append(r)})),p(h,(function(e,t){a.append(t)})),a.val(e.value);break;case"checkbox":var m=t.isArray(e.value)?e.value:[e.value];if(!(l=e.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');a=t('<div class="bootbox-checkbox-list"></div>'),p(l,(function(i,o){if(o.value===n||o.text===n)throw new Error('each option needs a "value" property and a "text" property');var r=t(c.inputs[e.inputType]);r.find("input").attr("value",o.value),r.find("label").append("\n"+o.text),p(m,(function(e,t){t===o.value&&r.find("input").prop("checked",!0)})),a.append(r)}));break;case"radio":if(e.value!==n&&t.isArray(e.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(!(l=e.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');a=t('<div class="bootbox-radiobutton-list"></div>');var g=!0;p(l,(function(i,o){if(o.value===n||o.text===n)throw new Error('each option needs a "value" property and a "text" property');var r=t(c.inputs[e.inputType]);r.find("input").attr("value",o.value),r.find("label").append("\n"+o.text),e.value!==n&&o.value===e.value&&(r.find("input").prop("checked",!0),g=!1),a.append(r)})),g&&a.find('input[type="radio"]').first().prop("checked",!0)}if(o.append(a),o.on("submit",(function(e){e.preventDefault(),e.stopPropagation(),i.find(".bootbox-accept").trigger("click")})),""!==t.trim(e.message)){var v=t(c.promptMessage).html(e.message);o.prepend(v),e.message=o}else e.message=o;return(i=s.dialog(e)).off("shown.bs.modal",f),i.on("shown.bs.modal",(function(){a.focus()})),!0===r&&i.modal("show"),i},s}));var wysihtml={version:"0.6.0-beta1",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},editorExtenders:[],extendEditor:function(e){this.editorExtenders.push(e)},INVISIBLE_SPACE:"\ufeff",INVISIBLE_SPACE_REG_EXP:/\uFEFF/g,VOID_ELEMENTS:"area, base, br, col, embed, hr, img, input, keygen, link, meta, param, source, track, wbr",PERMITTED_PHRASING_CONTENT_ONLY:"h1, h2, h3, h4, h5, h6, p, pre",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,TAB_KEY:9,DELETE_KEY:46};wysihtml.polyfills=function(e,t){var n={normalizeHasCaretError:function(){if("createRange"in t&&"getSelection"in e){var n,i,o,a=window.pageYOffset,r=window.pageXOffset,s=t.createElement("div"),l=t.createTextNode("a"),c=t.createTextNode("a"),d=t.createTextNode("a"),u=t.createRange();return document.activeElement&&(1===document.activeElement.nodeType&&["INPUT","TEXTAREA","SELECT","BUTTON"].indexOf(document.activeElement.nodeName)>-1?n={type:"form",node:document.activeElement,start:document.activeElement.selectionStart,end:document.activeElement.selectionEnd}:(i=e.getSelection())&&i.anchorNode&&(n={type:"range",anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset})),s.setAttribute("contenteditable","true"),s.appendChild(l),s.appendChild(c),s.appendChild(d),t.body.appendChild(s),u.setStart(c,1),u.setEnd(c,1),(i=e.getSelection()).removeAllRanges(),i.addRange(u),s.normalize(),i=e.getSelection(),o=1!==s.childNodes.length||i.anchorNode!==s.firstChild||2!==i.anchorOffset,s.parentNode.removeChild(s),i.removeAllRanges(),n&&("form"===n.type?(void 0!==n.start&&void 0!==n.end&&n.node.setSelectionRange(n.start,n.end),n.node.focus()):"range"===n.type&&((u=t.createRange()).setStart(n.anchorNode,n.anchorOffset),u.setEnd(n.focusNode,n.focusOffset),i.addRange(u))),(a!==window.pageYOffset||r!==window.pageXOffset)&&e.scrollTo(r,a),o}},apply:function(){!function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),i=0;n[i]&&n[i]!==t;)++i;return!!n[i]},e.closest=e.closest||function(e){for(var t=this;t&&!t.matches(e);)t=t.parentElement;return t},e.remove=e.remove||function(){this.parentNode&&this.parentNode.removeChild(this)}}(e.Element.prototype),"classList"in t.documentElement||!e.Object.defineProperty||void 0===e.HTMLElement||e.Object.defineProperty(e.HTMLElement.prototype,"classList",{get:function(){function t(e){return function(t){var i=n.className.split(/\s+/),o=i.indexOf(t);e(i,o,t),n.className=i.join(" ")}}var n=this,i={add:t((function(e,t,n){~t||e.push(n)})),remove:t((function(e,t){~t&&e.splice(t,1)})),toggle:t((function(e,t,n){~t?e.splice(t,1):e.push(n)})),contains:function(e){return!!~n.className.split(/\s+/).indexOf(e)},item:function(e){return n.className.split(/\s+/)[e]||null}};return e.Object.defineProperty(i,"length",{get:function(){return n.className.split(/\s+/).length}}),i}});var i=function(e){var t=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t.push(e):t=t.concat(i(e));return t},o=function(){e.removeEventListener("load",o),"Node"in e&&"normalize"in e.Node.prototype&&n.normalizeHasCaretError()&&function(){var t=(e.Node.prototype.normalize,function(){var t=i(this),n=this.ownerDocument.defaultView.getSelection(),o=n.anchorNode,a=n.anchorOffset,r=o&&1===o.nodeType&&o.childNodes.length>0?o.childNodes[a]:void 0,s=n.focusNode,l=n.focusOffset,c=s&&1===s.nodeType&&l>0?s.childNodes[l-1]:void 0,d=this.ownerDocument.createRange(),u=t.shift(),h=u?t.shift():null;for(c&&3===c.nodeType&&(s=c,l=c.nodeValue.length,c=void 0),r&&3===r.nodeType&&(o=r,a=0,r=void 0),(o===s&&a>l||o!==s&&o.compareDocumentPosition(s)&e.Node.DOCUMENT_POSITION_PRECEDING&&!(o.compareDocumentPosition(s)&e.Node.DOCUMENT_POSITION_CONTAINS))&&(s=[o,o=s][0],l=[a,a=l][0]);u&&h;)h.previousSibling&&h.previousSibling===u?(o===h&&(o=u,a=u.nodeValue.length+a),s===h&&(s=u,l=u.nodeValue.length+l),u.nodeValue=u.nodeValue+h.nodeValue,h.parentNode.removeChild(h),h=t.shift()):(u=h,h=t.shift());c&&(l=Array.prototype.indexOf.call(c.parentNode.childNodes,c)+1),r&&(a=Array.prototype.indexOf.call(r.parentNode.childNodes,r)),function(e){var t=e.ownerDocument,n=e;do{if(n===t)return!0;n=n.parentNode}while(n);return!1}(this)&&o&&o.parentNode&&s&&s.parentNode&&(d.setStart(o,a),d.setEnd(s,l),n.removeAllRanges(),n.addRange(d))});e.Node.prototype.normalize=t}()};"complete"!==t.readyState?e.addEventListener("load",o):o(),function(){function n(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=t.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i}!function(){try{var t=new e.CustomEvent("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(e){}return!1}()&&"CustomEvent"in e&&(n.prototype=e.Event.prototype,e.CustomEvent=n)}()}};return n},wysihtml.polyfills(window,document).apply();var Base=function(){},rangy;function jQueryDataTables(){(function(X,l,n){var L=function(h){var j=function(e){function o(e,t){var i=j.defaults.columns,o=e.aoColumns.length;i=h.extend({},j.models.oColumn,i,{sSortingClass:e.oClasses.sSortable,sSortingClassJUI:e.oClasses.sSortJUI,nTh:t||l.createElement("th"),sTitle:i.sTitle?i.sTitle:t?t.innerHTML:"",aDataSort:i.aDataSort?i.aDataSort:[o],mData:i.mData?i.oDefaults:o});e.aoColumns.push(i),e.aoPreSearchCols[o]===n||null===e.aoPreSearchCols[o]?e.aoPreSearchCols[o]=h.extend({},j.models.oSearch):((i=e.aoPreSearchCols[o]).bRegex===n&&(i.bRegex=!0),i.bSmart===n&&(i.bSmart=!0),i.bCaseInsensitive===n&&(i.bCaseInsensitive=!0)),m(e,o,null)}function m(e,t,i){var o=e.aoColumns[t];i!==n&&null!==i&&(i.mDataProp&&!i.mData&&(i.mData=i.mDataProp),i.sType!==n&&(o.sType=i.sType,o._bAutoType=!1),h.extend(o,i),p(o,i,"sWidth","sWidthOrig"),i.iDataSort!==n&&(o.aDataSort=[i.iDataSort]),p(o,i,"aDataSort"));var a=o.mRender?Q(o.mRender):null,r=Q(o.mData);o.fnGetData=function(e,t){var n=r(e,t);return o.mRender&&t&&""!==t?a(n,t,e):n},o.fnSetData=L(o.mData),e.oFeatures.bSort||(o.bSortable=!1),!o.bSortable||-1==h.inArray("asc",o.asSorting)&&-1==h.inArray("desc",o.asSorting)?(o.sSortingClass=e.oClasses.sSortableNone,o.sSortingClassJUI=""):-1==h.inArray("asc",o.asSorting)&&-1==h.inArray("desc",o.asSorting)?(o.sSortingClass=e.oClasses.sSortable,o.sSortingClassJUI=e.oClasses.sSortJUI):-1!=h.inArray("asc",o.asSorting)&&-1==h.inArray("desc",o.asSorting)?(o.sSortingClass=e.oClasses.sSortableAsc,o.sSortingClassJUI=e.oClasses.sSortJUIAscAllowed):-1==h.inArray("asc",o.asSorting)&&-1!=h.inArray("desc",o.asSorting)&&(o.sSortingClass=e.oClasses.sSortableDesc,o.sSortingClassJUI=e.oClasses.sSortJUIDescAllowed)}function k(e){if(!1===e.oFeatures.bAutoWidth)return!1;da(e);for(var t=0,n=e.aoColumns.length;t<n;t++)e.aoColumns[t].nTh.style.width=e.aoColumns[t].sWidth}function G(e,t){var n=r(e,"bVisible");return"number"==typeof n[t]?n[t]:null}function R(e,t){var n=r(e,"bVisible");return-1!==(n=h.inArray(t,n))?n:null}function t(e){return r(e,"bVisible").length}function r(e,t){var n=[];return h.map(e.aoColumns,(function(e,i){e[t]&&n.push(i)})),n}function B(e){for(var t=j.ext.aTypes,n=t.length,i=0;i<n;i++){var o=t[i](e);if(null!==o)return o}return"string"}function u(e,t){for(var n=t.split(","),i=[],o=0,a=e.aoColumns.length;o<a;o++)for(var r=0;r<a;r++)if(e.aoColumns[o].sName==n[r]){i.push(r);break}return i}function M(e){for(var t="",n=0,i=e.aoColumns.length;n<i;n++)t+=e.aoColumns[n].sName+",";return t.length==i?"":t.slice(0,-1)}function ta(e,t,n,i){var a,r,s,l,c;if(t)for(a=t.length-1;0<=a;a--){var d=t[a].aTargets;for(h.isArray(d)||D(e,1,"aTargets must be an array of targets, not a "+typeof d),r=0,s=d.length;r<s;r++)if("number"==typeof d[r]&&0<=d[r]){for(;e.aoColumns.length<=d[r];)o(e);i(d[r],t[a])}else if("number"==typeof d[r]&&0>d[r])i(e.aoColumns.length+d[r],t[a]);else if("string"==typeof d[r])for(l=0,c=e.aoColumns.length;l<c;l++)("_all"==d[r]||h(e.aoColumns[l].nTh).hasClass(d[r]))&&i(l,t[a])}if(n)for(a=0,e=n.length;a<e;a++)i(a,n[a])}function H(e,t){var n;n=h.isArray(t)?t.slice():h.extend(!0,{},t);var i=e.aoData.length;(a=h.extend(!0,{},j.models.oRow))._aData=n,e.aoData.push(a);for(var o,a=0,r=e.aoColumns.length;a<r;a++)"function"==typeof(n=e.aoColumns[a]).fnRender&&n.bUseRendered&&null!==n.mData?F(e,i,a,S(e,i,a)):F(e,i,a,v(e,i,a)),n._bAutoType&&"string"!=n.sType&&(null!==(o=v(e,i,a,"type"))&&""!==o&&(o=B(o),null===n.sType?n.sType=o:n.sType!=o&&"html"!=n.sType&&(n.sType="string")));return e.aiDisplayMaster.push(i),e.oFeatures.bDeferRender||ea(e,i),i}function ua(e){var t,n,i,o,a,r,s;if(e.bDeferLoading||null===e.sAjaxSource)for(t=e.nTBody.firstChild;t;){if("TR"==t.nodeName.toUpperCase())for(n=e.aoData.length,t._DT_RowIndex=n,e.aoData.push(h.extend(!0,{},j.models.oRow,{nTr:t})),e.aiDisplayMaster.push(n),a=t.firstChild,i=0;a;)"TD"!=(r=a.nodeName.toUpperCase())&&"TH"!=r||(F(e,n,i,h.trim(a.innerHTML)),i++),a=a.nextSibling;t=t.nextSibling}for(i=[],t=0,n=(o=T(e)).length;t<n;t++)for(a=o[t].firstChild;a;)("TD"==(r=a.nodeName.toUpperCase())||"TH"==r)&&i.push(a),a=a.nextSibling;for(n=0,o=e.aoColumns.length;n<o;n++){null===(s=e.aoColumns[n]).sTitle&&(s.sTitle=s.nTh.innerHTML);var l,c,d=s._bAutoType,u="function"==typeof s.fnRender,p=null!==s.sClass,f=s.bVisible;if(d||u||p||!f)for(r=0,t=e.aoData.length;r<t;r++)a=e.aoData[r],l=i[r*o+n],d&&"string"!=s.sType&&(""!==(c=v(e,r,n,"type"))&&(c=B(c),null===s.sType?s.sType=c:s.sType!=c&&"html"!=s.sType&&(s.sType="string"))),(s.mRender||s.mData!==n)&&(l.innerHTML=v(e,r,n,"display")),u&&(c=S(e,r,n),l.innerHTML=c,s.bUseRendered&&F(e,r,n,c)),p&&(l.className+=" "+s.sClass),f?a._anHidden[n]=null:(a._anHidden[n]=l,l.parentNode.removeChild(l)),s.fnCreatedCell&&s.fnCreatedCell.call(e.oInstance,l,v(e,r,n,"display"),a._aData,r,n)}if(0!==e.aoRowCreatedCallback.length)for(t=0,n=e.aoData.length;t<n;t++)A(e,"aoRowCreatedCallback",null,[(a=e.aoData[t]).nTr,a._aData,t])}function I(e,t){return t._DT_RowIndex!==n?t._DT_RowIndex:null}function fa(e,t,n){t=J(e,t);var i=0;for(e=e.aoColumns.length;i<e;i++)if(t[i]===n)return i;return-1}function Y(e,t,n,i){for(var o=[],a=0,r=i.length;a<r;a++)o.push(v(e,t,i[a],n));return o}function v(e,t,i,o){var a=e.aoColumns[i];if((i=a.fnGetData(e.aoData[t]._aData,o))===n)return e.iDrawError!=e.iDraw&&null===a.sDefaultContent&&(D(e,0,"Requested unknown parameter "+("function"==typeof a.mData?"{mData function}":"'"+a.mData+"'")+" from the data source for row "+t),e.iDrawError=e.iDraw),a.sDefaultContent;if(null===i&&null!==a.sDefaultContent)i=a.sDefaultContent;else if("function"==typeof i)return i();return"display"==o&&null===i?"":i}function F(e,t,n,i){e.aoColumns[n].fnSetData(e.aoData[t]._aData,i)}function Q(e){if(null===e)return function(){return null};if("function"==typeof e)return function(t,n,i){return e(t,n,i)};if("string"==typeof e&&(-1!==e.indexOf(".")||-1!==e.indexOf("["))){var t=function(e,i,o){var a,r=o.split(".");if(""!==o){var s=0;for(a=r.length;s<a;s++){if(o=r[s].match(U)){r[s]=r[s].replace(U,""),""!==r[s]&&(e=e[r[s]]),a=[],r.splice(0,s+1);r=r.join("."),s=0;for(var l=e.length;s<l;s++)a.push(t(e[s],i,r));e=""===(e=o[0].substring(1,o[0].length-1))?a:a.join(e);break}if(null===e||e[r[s]]===n)return n;e=e[r[s]]}}return e};return function(n,i){return t(n,i,e)}}return function(t){return t[e]}}function L(e){if(null===e)return function(){};if("function"==typeof e)return function(t,n){e(t,"set",n)};if("string"==typeof e&&(-1!==e.indexOf(".")||-1!==e.indexOf("["))){var t=function(e,i,o){var a,r,s=0;for(r=(o=o.split(".")).length-1;s<r;s++){if(a=o[s].match(U)){o[s]=o[s].replace(U,""),e[o[s]]=[],(a=o.slice()).splice(0,s+1),r=a.join(".");for(var l=0,c=i.length;l<c;l++)t(a={},i[l],r),e[o[s]].push(a);return}null!==e[o[s]]&&e[o[s]]!==n||(e[o[s]]={}),e=e[o[s]]}e[o[o.length-1].replace(U,"")]=i};return function(n,i){return t(n,i,e)}}return function(t,n){t[e]=n}}function Z(e){for(var t=[],n=e.aoData.length,i=0;i<n;i++)t.push(e.aoData[i]._aData);return t}function ga(e){e.aoData.splice(0,e.aoData.length),e.aiDisplayMaster.splice(0,e.aiDisplayMaster.length),e.aiDisplay.splice(0,e.aiDisplay.length),y(e)}function ha(e,t){for(var n=-1,i=0,o=e.length;i<o;i++)e[i]==t?n=i:e[i]>t&&e[i]--;-1!=n&&e.splice(n,1)}function S(e,t,n){var i=e.aoColumns[n];return i.fnRender({iDataRow:t,iDataColumn:n,oSettings:e,aData:e.aoData[t]._aData,mDataProp:i.mData},v(e,t,n,"display"))}function ea(e,t){var n,i=e.aoData[t];if(null===i.nTr){i.nTr=l.createElement("tr"),i.nTr._DT_RowIndex=t,i._aData.DT_RowId&&(i.nTr.id=i._aData.DT_RowId),i._aData.DT_RowClass&&(i.nTr.className=i._aData.DT_RowClass);for(var o=0,a=e.aoColumns.length;o<a;o++){var r=e.aoColumns[o];(n=l.createElement(r.sCellType)).innerHTML="function"!=typeof r.fnRender||r.bUseRendered&&null!==r.mData?v(e,t,o,"display"):S(e,t,o),null!==r.sClass&&(n.className=r.sClass),r.bVisible?(i.nTr.appendChild(n),i._anHidden[o]=null):i._anHidden[o]=n,r.fnCreatedCell&&r.fnCreatedCell.call(e.oInstance,n,v(e,t,o,"display"),i._aData,t,o)}A(e,"aoRowCreatedCallback",null,[i.nTr,i._aData,t])}}function va(e){var t,n,i;if(0!==h("th, td",e.nTHead).length)for(t=0,i=e.aoColumns.length;t<i;t++)(n=e.aoColumns[t].nTh).setAttribute("role","columnheader"),e.aoColumns[t].bSortable&&(n.setAttribute("tabindex",e.iTabIndex),n.setAttribute("aria-controls",e.sTableId)),null!==e.aoColumns[t].sClass&&h(n).addClass(e.aoColumns[t].sClass),e.aoColumns[t].sTitle!=n.innerHTML&&(n.innerHTML=e.aoColumns[t].sTitle);else{var o=l.createElement("tr");for(t=0,i=e.aoColumns.length;t<i;t++)(n=e.aoColumns[t].nTh).innerHTML=e.aoColumns[t].sTitle,n.setAttribute("tabindex","0"),null!==e.aoColumns[t].sClass&&h(n).addClass(e.aoColumns[t].sClass),o.appendChild(n);h(e.nTHead).html("")[0].appendChild(o),V(e.aoHeader,e.nTHead)}if(h(e.nTHead).children("tr").attr("role","row"),e.bJUI)for(t=0,i=e.aoColumns.length;t<i;t++){n=e.aoColumns[t].nTh,(o=l.createElement("div")).className=e.oClasses.sSortJUIWrapper,h(n).contents().appendTo(o);var a=l.createElement("span");a.className=e.oClasses.sSortIcon,o.appendChild(a),n.appendChild(o)}if(e.oFeatures.bSort)for(t=0;t<e.aoColumns.length;t++)!1!==e.aoColumns[t].bSortable?ia(e,e.aoColumns[t].nTh,t):h(e.aoColumns[t].nTh).addClass(e.oClasses.sSortableNone);if(""!==e.oClasses.sFooterTH&&h(e.nTFoot).children("tr").children("th").addClass(e.oClasses.sFooterTH),null!==e.nTFoot)for(n=N(e,null,e.aoFooter),t=0,i=e.aoColumns.length;t<i;t++)n[t]&&(e.aoColumns[t].nTf=n[t],e.aoColumns[t].sClass&&h(n[t]).addClass(e.aoColumns[t].sClass))}function W(e,t,i){var o,a,r,s,l=[],c=[],d=e.aoColumns.length;for(i===n&&(i=!1),o=0,a=t.length;o<a;o++){for(l[o]=t[o].slice(),l[o].nTr=t[o].nTr,r=d-1;0<=r;r--)!e.aoColumns[r].bVisible&&!i&&l[o].splice(r,1);c.push([])}for(o=0,a=l.length;o<a;o++){if(e=l[o].nTr)for(;r=e.firstChild;)e.removeChild(r);for(r=0,t=l[o].length;r<t;r++)if(s=d=1,c[o][r]===n){for(e.appendChild(l[o][r].cell),c[o][r]=1;l[o+d]!==n&&l[o][r].cell==l[o+d][r].cell;)c[o+d][r]=1,d++;for(;l[o][r+s]!==n&&l[o][r].cell==l[o][r+s].cell;){for(i=0;i<d;i++)c[o+i][r+s]=1;s++}l[o][r].cell.rowSpan=d,l[o][r].cell.colSpan=s}}}function x(e){var i=A(e,"aoPreDrawCallback","preDraw",[e]);if(-1!==h.inArray(!1,i))E(e,!1);else{i=[];var o,a,r=0,s=e.asStripeClasses.length;if(o=e.aoOpenRows.length,e.bDrawing=!0,e.iInitDisplayStart!==n&&-1!=e.iInitDisplayStart&&(e._iDisplayStart=e.oFeatures.bServerSide?e.iInitDisplayStart:e.iInitDisplayStart>=e.fnRecordsDisplay()?0:e.iInitDisplayStart,e.iInitDisplayStart=-1,y(e)),e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++;else if(e.oFeatures.bServerSide){if(!e.bDestroying&&!wa(e))return}else e.iDraw++;if(0!==e.aiDisplay.length){var c=e._iDisplayStart;for(a=e._iDisplayEnd,e.oFeatures.bServerSide&&(c=0,a=e.aoData.length);c<a;c++){var d=e.aoData[e.aiDisplay[c]];null===d.nTr&&ea(e,e.aiDisplay[c]);var u=d.nTr;if(0!==s){var p=e.asStripeClasses[r%s];d._sRowStripe!=p&&(h(u).removeClass(d._sRowStripe).addClass(p),d._sRowStripe=p)}if(A(e,"aoRowCallback",null,[u,e.aoData[e.aiDisplay[c]]._aData,r,c]),i.push(u),r++,0!==o)for(d=0;d<o;d++)if(u==e.aoOpenRows[d].nParent){i.push(e.aoOpenRows[d].nTr);break}}}else i[0]=l.createElement("tr"),e.asStripeClasses[0]&&(i[0].className=e.asStripeClasses[0]),s=(o=e.oLanguage).sZeroRecords,1!=e.iDraw||null===e.sAjaxSource||e.oFeatures.bServerSide?o.sEmptyTable&&0===e.fnRecordsTotal()&&(s=o.sEmptyTable):s=o.sLoadingRecords,(o=l.createElement("td")).setAttribute("valign","top"),o.colSpan=t(e),o.className=e.oClasses.sRowEmpty,o.innerHTML=ja(e,s),i[r].appendChild(o);if(A(e,"aoHeaderCallback","header",[h(e.nTHead).children("tr")[0],Z(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]),A(e,"aoFooterCallback","footer",[h(e.nTFoot).children("tr")[0],Z(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]),r=l.createDocumentFragment(),o=l.createDocumentFragment(),e.nTBody){if(s=e.nTBody.parentNode,o.appendChild(e.nTBody),!e.oScroll.bInfinite||!e._bInitComplete||e.bSorted||e.bFiltered)for(;o=e.nTBody.firstChild;)e.nTBody.removeChild(o);for(o=0,a=i.length;o<a;o++)r.appendChild(i[o]);e.nTBody.appendChild(r),null!==s&&s.appendChild(e.nTBody)}A(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1,e.oFeatures.bServerSide&&(E(e,!1),e._bInitComplete||$(e))}}function aa(e){e.oFeatures.bSort?O(e,e.oPreviousSearch):e.oFeatures.bFilter?K(e,e.oPreviousSearch):(y(e),x(e))}function xa(e){var t=h("<div></div>")[0];e.nTable.parentNode.insertBefore(t,e.nTable),e.nTableWrapper=h('<div id="'+e.sTableId+'_wrapper" class="'+e.oClasses.sWrapper+'" role="grid"></div>')[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var n,i,o,a,r,s,l,c=e.nTableWrapper,d=e.sDom.split(""),u=0;u<d.length;u++){if(i=0,"<"==(o=d[u])){if(a=h("<div></div>")[0],"'"==(r=d[u+1])||'"'==r){for(s="",l=2;d[u+l]!=r;)s+=d[u+l],l++;"H"==s?s=e.oClasses.sJUIHeader:"F"==s&&(s=e.oClasses.sJUIFooter),-1!=s.indexOf(".")?(r=s.split("."),a.id=r[0].substr(1,r[0].length-1),a.className=r[1]):"#"==s.charAt(0)?a.id=s.substr(1,s.length-1):a.className=s,u+=l}c.appendChild(a),c=a}else if(">"==o)c=c.parentNode;else if("l"==o&&e.oFeatures.bPaginate&&e.oFeatures.bLengthChange)n=ya(e),i=1;else if("f"==o&&e.oFeatures.bFilter)n=za(e),i=1;else if("r"==o&&e.oFeatures.bProcessing)n=Aa(e),i=1;else if("t"==o)n=Ba(e),i=1;else if("i"==o&&e.oFeatures.bInfo)n=Ca(e),i=1;else if("p"==o&&e.oFeatures.bPaginate)n=Da(e),i=1;else if(0!==j.ext.aoFeatures.length)for(l=0,r=(a=j.ext.aoFeatures).length;l<r;l++)if(o==a[l].cFeature){(n=a[l].fnInit(e))&&(i=1);break}1==i&&null!==n&&("object"!=typeof e.aanFeatures[o]&&(e.aanFeatures[o]=[]),e.aanFeatures[o].push(n),c.appendChild(n))}t.parentNode.replaceChild(e.nTableWrapper,t)}function V(e,t){var n,i,o,a,r,s,l,c,d,u,p=h(t).children("tr");for(e.splice(0,e.length),o=0,s=p.length;o<s;o++)e.push([]);for(o=0,s=p.length;o<s;o++)for(i=(n=p[o]).firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase()){for(c=(c=1*i.getAttribute("colspan"))&&0!==c&&1!==c?c:1,d=(d=1*i.getAttribute("rowspan"))&&0!==d&&1!==d?d:1,a=0,r=e[o];r[a];)a++;for(l=a,u=1===c,r=0;r<c;r++)for(a=0;a<d;a++)e[o+a][l+r]={cell:i,unique:u},e[o+a].nTr=n}i=i.nextSibling}}function N(e,t,n){var i=[];n||(n=e.aoHeader,t&&V(n=[],t));t=0;for(var o=n.length;t<o;t++)for(var a=0,r=n[t].length;a<r;a++)!n[t][a].unique||i[a]&&e.bSortCellsTop||(i[a]=n[t][a].cell);return i}function wa(e){if(e.bAjaxDataGet){e.iDraw++,E(e,!0);var t=Ea(e);return ka(e,t),e.fnServerData.call(e.oInstance,e.sAjaxSource,t,(function(t){Fa(e,t)}),e),!1}return!0}function Ea(e){var t,n,i,o,a=e.aoColumns.length,r=[];for(r.push({name:"sEcho",value:e.iDraw}),r.push({name:"iColumns",value:a}),r.push({name:"sColumns",value:M(e)}),r.push({name:"iDisplayStart",value:e._iDisplayStart}),r.push({name:"iDisplayLength",value:!1!==e.oFeatures.bPaginate?e._iDisplayLength:-1}),i=0;i<a;i++)t=e.aoColumns[i].mData,r.push({name:"mDataProp_"+i,value:"function"==typeof t?"function":t});if(!1!==e.oFeatures.bFilter)for(r.push({name:"sSearch",value:e.oPreviousSearch.sSearch}),r.push({name:"bRegex",value:e.oPreviousSearch.bRegex}),i=0;i<a;i++)r.push({name:"sSearch_"+i,value:e.aoPreSearchCols[i].sSearch}),r.push({name:"bRegex_"+i,value:e.aoPreSearchCols[i].bRegex}),r.push({name:"bSearchable_"+i,value:e.aoColumns[i].bSearchable});if(!1!==e.oFeatures.bSort){var s=0;for(t=null!==e.aaSortingFixed?e.aaSortingFixed.concat(e.aaSorting):e.aaSorting.slice(),i=0;i<t.length;i++)for(n=e.aoColumns[t[i][0]].aDataSort,o=0;o<n.length;o++)r.push({name:"iSortCol_"+s,value:n[o]}),r.push({name:"sSortDir_"+s,value:t[i][1]}),s++;for(r.push({name:"iSortingCols",value:s}),i=0;i<a;i++)r.push({name:"bSortable_"+i,value:e.aoColumns[i].bSortable})}return r}function ka(e,t){A(e,"aoServerParams","serverParams",[t])}function Fa(e,t){if(t.sEcho!==n){if(1*t.sEcho<e.iDraw)return;e.iDraw=1*t.sEcho}(!e.oScroll.bInfinite||e.oScroll.bInfinite&&(e.bSorted||e.bFiltered))&&ga(e),e._iRecordsTotal=parseInt(t.iTotalRecords,10),e._iRecordsDisplay=parseInt(t.iTotalDisplayRecords,10);var i,o=M(e);(o=t.sColumns!==n&&""!==o&&t.sColumns!=o)&&(i=u(e,t.sColumns));for(var a=Q(e.sAjaxDataProp)(t),r=0,s=a.length;r<s;r++)if(o){for(var l=[],c=0,d=e.aoColumns.length;c<d;c++)l.push(a[r][i[c]]);H(e,l)}else H(e,a[r]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,x(e),e.bAjaxDataGet=!0,E(e,!1)}function za(e){var t=e.oPreviousSearch,n=-1!==(n=e.oLanguage.sSearch).indexOf("_INPUT_")?n.replace("_INPUT_",'<input type="text" />'):""===n?'<input type="text" />':n+' <input type="text" />',i=l.createElement("div");return i.className=e.oClasses.sFilter,i.innerHTML="<label>"+n+"</label>",e.aanFeatures.f||(i.id=e.sTableId+"_filter"),n=h('input[type="text"]',i),i._DT_Input=n[0],n.val(t.sSearch.replace('"',"&quot;")),n.bind("keyup.DT",(function(){for(var n=e.aanFeatures.f,i=""===this.value?"":this.value,o=0,a=n.length;o<a;o++)n[o]!=h(this).parents("div.dataTables_filter")[0]&&h(n[o]._DT_Input).val(i);i!=t.sSearch&&K(e,{sSearch:i,bRegex:t.bRegex,bSmart:t.bSmart,bCaseInsensitive:t.bCaseInsensitive})})),n.attr("aria-controls",e.sTableId).bind("keypress.DT",(function(e){if(13==e.keyCode)return!1})),i}function K(e,t,n){var i=e.oPreviousSearch,o=e.aoPreSearchCols,a=function(e){i.sSearch=e.sSearch,i.bRegex=e.bRegex,i.bSmart=e.bSmart,i.bCaseInsensitive=e.bCaseInsensitive};if(e.oFeatures.bServerSide)a(t);else{for(Ga(e,t.sSearch,n,t.bRegex,t.bSmart,t.bCaseInsensitive),a(t),t=0;t<e.aoPreSearchCols.length;t++)Ha(e,o[t].sSearch,t,o[t].bRegex,o[t].bSmart,o[t].bCaseInsensitive);Ia(e)}e.bFiltered=!0,h(e.oInstance).trigger("filter",e),e._iDisplayStart=0,y(e),x(e),la(e,0)}function Ia(e){for(var t=j.ext.afnFiltering,n=r(e,"bSearchable"),i=0,o=t.length;i<o;i++)for(var a=0,s=0,l=e.aiDisplay.length;s<l;s++){var c=e.aiDisplay[s-a];t[i](e,Y(e,c,"filter",n),c)||(e.aiDisplay.splice(s-a,1),a++)}}function Ha(e,t,n,i,o,a){if(""!==t)for(t=ma(t,i,o,a),i=e.aiDisplay.length-1;0<=i;i--)o=Ja(v(e,e.aiDisplay[i],n,"filter"),e.aoColumns[n].sType),t.test(o)||(e.aiDisplay.splice(i,1))}function Ga(e,t,n,i,o,a){if(i=ma(t,i,o,a),o=e.oPreviousSearch,n||(n=0),0!==j.ext.afnFiltering.length&&(n=1),0>=t.length)e.aiDisplay.splice(0,e.aiDisplay.length),e.aiDisplay=e.aiDisplayMaster.slice();else if(e.aiDisplay.length==e.aiDisplayMaster.length||o.sSearch.length>t.length||1==n||0!==t.indexOf(o.sSearch))for(e.aiDisplay.splice(0,e.aiDisplay.length),la(e,1),t=0;t<e.aiDisplayMaster.length;t++)i.test(e.asDataSearch[t])&&e.aiDisplay.push(e.aiDisplayMaster[t]);else for(t=n=0;t<e.asDataSearch.length;t++)i.test(e.asDataSearch[t])||(e.aiDisplay.splice(t-n,1),n++)}function la(e,t){if(!e.oFeatures.bServerSide){e.asDataSearch=[];for(var n=r(e,"bSearchable"),i=1===t?e.aiDisplayMaster:e.aiDisplay,o=0,a=i.length;o<a;o++)e.asDataSearch[o]=na(e,Y(e,i[o],"filter",n))}}function na(e,t){var n=t.join("  ");return-1!==n.indexOf("&")&&(n=h("<div>").html(n).text()),n.replace(/[\n\r]/g," ")}function ma(e,t,n,i){return n?(e="^(?=.*?"+(e=t?e.split(" "):oa(e).split(" ")).join(")(?=.*?")+").*$",RegExp(e,i?"i":"")):(e=t?e:oa(e),RegExp(e,i?"i":""))}function Ja(e,t){return"function"==typeof j.ext.ofnSearch[t]?j.ext.ofnSearch[t](e):null===e?"":"html"==t?e.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"==typeof e?e.replace(/[\r\n]/g," "):e}function oa(e){return e.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Ca(e){var t=l.createElement("div");return t.className=e.oClasses.sInfo,e.aanFeatures.i||(e.aoDrawCallback.push({fn:Ka,sName:"information"}),t.id=e.sTableId+"_info"),e.nTable.setAttribute("aria-describedby",e.sTableId+"_info"),t}function Ka(e){if(e.oFeatures.bInfo&&0!==e.aanFeatures.i.length){var t,n=e.oLanguage,i=e._iDisplayStart+1,o=e.fnDisplayEnd(),a=e.fnRecordsTotal(),r=e.fnRecordsDisplay();for(t=0===r?n.sInfoEmpty:n.sInfo,r!=a&&(t+=" "+n.sInfoFiltered),t=ja(e,t+=n.sInfoPostFix),null!==n.fnInfoCallback&&(t=n.fnInfoCallback.call(e.oInstance,e,i,o,a,r,t)),n=0,i=(e=e.aanFeatures.i).length;n<i;n++)h(e[n]).html(t)}}function ja(e,t){var n=e.fnFormatNumber(e._iDisplayStart+1),i=e.fnDisplayEnd(),o=(i=e.fnFormatNumber(i),e.fnRecordsDisplay()),a=(o=e.fnFormatNumber(o),e.fnRecordsTotal());a=e.fnFormatNumber(a);return e.oScroll.bInfinite&&(n=e.fnFormatNumber(1)),t.replace(/_START_/g,n).replace(/_END_/g,i).replace(/_TOTAL_/g,o).replace(/_MAX_/g,a)}function ba(e){var t,n,i=e.iInitDisplayStart;if(!1===e.bInitialised)setTimeout((function(){ba(e)}),200);else{for(xa(e),va(e),W(e,e.aoHeader),e.nTFoot&&W(e,e.aoFooter),E(e,!0),e.oFeatures.bAutoWidth&&da(e),t=0,n=e.aoColumns.length;t<n;t++)null!==e.aoColumns[t].sWidth&&(e.aoColumns[t].nTh.style.width=q(e.aoColumns[t].sWidth));e.oFeatures.bSort?O(e):e.oFeatures.bFilter?K(e,e.oPreviousSearch):(e.aiDisplay=e.aiDisplayMaster.slice(),y(e),x(e)),null===e.sAjaxSource||e.oFeatures.bServerSide?e.oFeatures.bServerSide||(E(e,!1),$(e)):(ka(e,n=[]),e.fnServerData.call(e.oInstance,e.sAjaxSource,n,(function(n){var o=""!==e.sAjaxDataProp?Q(e.sAjaxDataProp)(n):n;for(t=0;t<o.length;t++)H(e,o[t]);e.iInitDisplayStart=i,e.oFeatures.bSort?O(e):(e.aiDisplay=e.aiDisplayMaster.slice(),y(e),x(e)),E(e,!1),$(e,n)}),e))}}function $(e,t){e._bInitComplete=!0,A(e,"aoInitComplete","init",[e,t])}function pa(e){var t=j.defaults.oLanguage;!e.sEmptyTable&&e.sZeroRecords&&"No data available in table"===t.sEmptyTable&&p(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&e.sZeroRecords&&"Loading..."===t.sLoadingRecords&&p(e,e,"sZeroRecords","sLoadingRecords")}function ya(e){if(e.oScroll.bInfinite)return null;var t,n,i='<select size="1" name="'+e.sTableId+'_length">',o=e.aLengthMenu;if(2==o.length&&"object"==typeof o[0]&&"object"==typeof o[1])for(t=0,n=o[0].length;t<n;t++)i+='<option value="'+o[0][t]+'">'+o[1][t]+"</option>";else for(t=0,n=o.length;t<n;t++)i+='<option value="'+o[t]+'">'+o[t]+"</option>";return i+="</select>",o=l.createElement("div"),e.aanFeatures.l||(o.id=e.sTableId+"_length"),o.className=e.oClasses.sLength,o.innerHTML="<label>"+e.oLanguage.sLengthMenu.replace("_MENU_",i)+"</label>",h('select option[value="'+e._iDisplayLength+'"]',o).attr("selected",!0),h("select",o).bind("change.DT",(function(){var i=h(this).val(),o=e.aanFeatures.l;for(t=0,n=o.length;t<n;t++)o[t]!=this.parentNode&&h("select",o[t]).val(i);e._iDisplayLength=parseInt(i,10),y(e),e.fnDisplayEnd()==e.fnRecordsDisplay()&&(e._iDisplayStart=e.fnDisplayEnd()-e._iDisplayLength,e._iDisplayStart<0&&(e._iDisplayStart=0)),-1==e._iDisplayLength&&(e._iDisplayStart=0),x(e)})),h("select",o).attr("aria-controls",e.sTableId),o}function y(e){e._iDisplayEnd=!1===e.oFeatures.bPaginate||e._iDisplayStart+e._iDisplayLength>e.aiDisplay.length||-1==e._iDisplayLength?e.aiDisplay.length:e._iDisplayStart+e._iDisplayLength}function Da(e){if(e.oScroll.bInfinite)return null;var t=l.createElement("div");return t.className=e.oClasses.sPaging+e.sPaginationType,j.ext.oPagination[e.sPaginationType].fnInit(e,t,(function(e){y(e),x(e)})),e.aanFeatures.p||e.aoDrawCallback.push({fn:function(e){j.ext.oPagination[e.sPaginationType].fnUpdate(e,(function(e){y(e),x(e)}))},sName:"pagination"}),t}function qa(e,t){var n=e._iDisplayStart;if("number"==typeof t)e._iDisplayStart=t*e._iDisplayLength,e._iDisplayStart>e.fnRecordsDisplay()&&(e._iDisplayStart=0);else if("first"==t)e._iDisplayStart=0;else if("previous"==t)e._iDisplayStart=0<=e._iDisplayLength?e._iDisplayStart-e._iDisplayLength:0,0>e._iDisplayStart&&(e._iDisplayStart=0);else if("next"==t)0<=e._iDisplayLength?e._iDisplayStart+e._iDisplayLength<e.fnRecordsDisplay()&&(e._iDisplayStart+=e._iDisplayLength):e._iDisplayStart=0;else if("last"==t)if(0<=e._iDisplayLength){var i=parseInt((e.fnRecordsDisplay()-1)/e._iDisplayLength,10)+1;e._iDisplayStart=(i-1)*e._iDisplayLength}else e._iDisplayStart=0;else D(e,0,"Unknown paging action: "+t);return h(e.oInstance).trigger("page",e),n!=e._iDisplayStart}function Aa(e){var t=l.createElement("div");return e.aanFeatures.r||(t.id=e.sTableId+"_processing"),t.innerHTML=e.oLanguage.sProcessing,t.className=e.oClasses.sProcessing,e.nTable.parentNode.insertBefore(t,e.nTable),t}function E(e,t){if(e.oFeatures.bProcessing)for(var n=e.aanFeatures.r,i=0,o=n.length;i<o;i++)n[i].style.visibility=t?"visible":"hidden";h(e.oInstance).trigger("processing",[e,t])}function Ba(e){if(""===e.oScroll.sX&&""===e.oScroll.sY)return e.nTable;var t=l.createElement("div"),n=l.createElement("div"),i=l.createElement("div"),o=l.createElement("div"),a=l.createElement("div"),r=l.createElement("div"),s=e.nTable.cloneNode(!1),c=e.nTable.cloneNode(!1),d=e.nTable.getElementsByTagName("thead")[0],u=0===e.nTable.getElementsByTagName("tfoot").length?null:e.nTable.getElementsByTagName("tfoot")[0],p=e.oClasses;return n.appendChild(i),a.appendChild(r),o.appendChild(e.nTable),t.appendChild(n),t.appendChild(o),i.appendChild(s),s.appendChild(d),null!==u&&(t.appendChild(a),r.appendChild(c),c.appendChild(u)),t.className=p.sScrollWrapper,n.className=p.sScrollHead,i.className=p.sScrollHeadInner,o.className=p.sScrollBody,a.className=p.sScrollFoot,r.className=p.sScrollFootInner,e.oScroll.bAutoCss&&(n.style.overflow="hidden",n.style.position="relative",a.style.overflow="hidden",o.style.overflow="auto"),n.style.border="0",n.style.width="100%",a.style.border="0",i.style.width=""!==e.oScroll.sXInner?e.oScroll.sXInner:"100%",s.removeAttribute("id"),s.style.marginLeft="0",e.nTable.style.marginLeft="0",null!==u&&(c.removeAttribute("id"),c.style.marginLeft="0"),0<(i=h(e.nTable).children("caption")).length&&("top"===(i=i[0])._captionSide?s.appendChild(i):"bottom"===i._captionSide&&u&&c.appendChild(i)),""!==e.oScroll.sX&&(n.style.width=q(e.oScroll.sX),o.style.width=q(e.oScroll.sX),null!==u&&(a.style.width=q(e.oScroll.sX)),h(o).scroll((function(){n.scrollLeft=this.scrollLeft,null!==u&&(a.scrollLeft=this.scrollLeft)}))),""!==e.oScroll.sY&&(o.style.height=q(e.oScroll.sY)),e.aoDrawCallback.push({fn:La,sName:"scrolling"}),e.oScroll.bInfinite&&h(o).scroll((function(){!e.bDrawing&&0!==h(this).scrollTop()&&h(this).scrollTop()+h(this).height()>h(e.nTable).height()-e.oScroll.iLoadGap&&e.fnDisplayEnd()<e.fnRecordsDisplay()&&(qa(e,"next"),y(e),x(e))})),e.nScrollHead=n,e.nScrollFoot=a,t}function La(e){var t,n,i,o,a,r,s,l,c=e.nScrollHead.getElementsByTagName("div")[0],d=c.getElementsByTagName("table")[0],u=e.nTable.parentNode,p=[],f=[],m=null!==e.nTFoot?e.nScrollFoot.getElementsByTagName("div")[0]:null,g=null!==e.nTFoot?m.getElementsByTagName("table")[0]:null,v=e.oBrowser.bScrollOversize,b=function(e){(s=e.style).paddingTop="0",s.paddingBottom="0",s.borderTopWidth="0",s.borderBottomWidth="0",s.height=0};h(e.nTable).children("thead, tfoot").remove(),t=h(e.nTHead).clone()[0],e.nTable.insertBefore(t,e.nTable.childNodes[0]),i=e.nTHead.getElementsByTagName("tr"),o=t.getElementsByTagName("tr"),null!==e.nTFoot&&(a=h(e.nTFoot).clone()[0],e.nTable.insertBefore(a,e.nTable.childNodes[1]),r=e.nTFoot.getElementsByTagName("tr"),a=a.getElementsByTagName("tr")),""===e.oScroll.sX&&(u.style.width="100%",c.parentNode.style.width="100%");var y=N(e,t);for(t=0,n=y.length;t<n;t++)l=G(e,t),y[t].style.width=e.aoColumns[l].sWidth;null!==e.nTFoot&&C((function(e){e.style.width=""}),a),e.oScroll.bCollapse&&""!==e.oScroll.sY&&(u.style.height=u.offsetHeight+e.nTHead.offsetHeight+"px"),t=h(e.nTable).outerWidth(),""===e.oScroll.sX?(e.nTable.style.width="100%",v&&(h("tbody",u).height()>u.offsetHeight||"scroll"==h(u).css("overflow-y"))&&(e.nTable.style.width=q(h(e.nTable).outerWidth()-e.oScroll.iBarWidth))):""!==e.oScroll.sXInner?e.nTable.style.width=q(e.oScroll.sXInner):t==h(u).width()&&h(u).height()<h(e.nTable).height()?(e.nTable.style.width=q(t-e.oScroll.iBarWidth),h(e.nTable).outerWidth()>t-e.oScroll.iBarWidth&&(e.nTable.style.width=q(t))):e.nTable.style.width=q(t),t=h(e.nTable).outerWidth(),C(b,o),C((function(e){p.push(q(h(e).width()))}),o),C((function(e,t){e.style.width=p[t]}),i),h(o).height(0),null!==e.nTFoot&&(C(b,a),C((function(e){f.push(q(h(e).width()))}),a),C((function(e,t){e.style.width=f[t]}),r),h(a).height(0)),C((function(e,t){e.innerHTML="",e.style.width=p[t]}),o),null!==e.nTFoot&&C((function(e,t){e.innerHTML="",e.style.width=f[t]}),a),h(e.nTable).outerWidth()<t?(i=u.scrollHeight>u.offsetHeight||"scroll"==h(u).css("overflow-y")?t+e.oScroll.iBarWidth:t,v&&(u.scrollHeight>u.offsetHeight||"scroll"==h(u).css("overflow-y"))&&(e.nTable.style.width=q(i-e.oScroll.iBarWidth)),u.style.width=q(i),e.nScrollHead.style.width=q(i),null!==e.nTFoot&&(e.nScrollFoot.style.width=q(i)),""===e.oScroll.sX?D(e,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==e.oScroll.sXInner&&D(e,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(u.style.width=q("100%"),e.nScrollHead.style.width=q("100%"),null!==e.nTFoot&&(e.nScrollFoot.style.width=q("100%"))),""===e.oScroll.sY&&v&&(u.style.height=q(e.nTable.offsetHeight+e.oScroll.iBarWidth)),""!==e.oScroll.sY&&e.oScroll.bCollapse&&(u.style.height=q(e.oScroll.sY),v=""!==e.oScroll.sX&&e.nTable.offsetWidth>u.offsetWidth?e.oScroll.iBarWidth:0,e.nTable.offsetHeight<u.offsetHeight&&(u.style.height=q(e.nTable.offsetHeight+v))),v=h(e.nTable).outerWidth(),d.style.width=q(v),c.style.width=q(v),d=h(e.nTable).height()>u.clientHeight||"scroll"==h(u).css("overflow-y"),c.style.paddingRight=d?e.oScroll.iBarWidth+"px":"0px",null!==e.nTFoot&&(g.style.width=q(v),m.style.width=q(v),m.style.paddingRight=d?e.oScroll.iBarWidth+"px":"0px"),h(u).scroll(),(e.bSorted||e.bFiltered)&&(u.scrollTop=0)}function C(e,t,n){for(var i,o,a=0,r=0,s=t.length;r<s;){for(i=t[r].firstChild,o=n?n[r].firstChild:null;i;)1===i.nodeType&&(n?e(i,o,a):e(i,a),a++),i=i.nextSibling,o=n?o.nextSibling:null;r++}}function Ma(e,t){if(!e||null===e||""===e)return 0;t||(t=l.body);var n,i=l.createElement("div");return i.style.width=q(e),t.appendChild(i),n=i.offsetWidth,t.removeChild(i),n}function da(e){var t,n,i,o=0,a=0,r=e.aoColumns.length,s=h("th",e.nTHead),c=e.nTable.getAttribute("width");for(i=e.nTable.parentNode,n=0;n<r;n++)e.aoColumns[n].bVisible&&(a++,null!==e.aoColumns[n].sWidth&&(null!==(t=Ma(e.aoColumns[n].sWidthOrig,i))&&(e.aoColumns[n].sWidth=q(t)),o++));if(r==s.length&&0===o&&a==r&&""===e.oScroll.sX&&""===e.oScroll.sY)for(n=0;n<e.aoColumns.length;n++)null!==(t=h(s[n]).width())&&(e.aoColumns[n].sWidth=q(t));else{for(o=e.nTable.cloneNode(!1),n=e.nTHead.cloneNode(!0),a=l.createElement("tbody"),t=l.createElement("tr"),o.removeAttribute("id"),o.appendChild(n),null!==e.nTFoot&&(o.appendChild(e.nTFoot.cloneNode(!0)),C((function(e){e.style.width=""}),o.getElementsByTagName("tr"))),o.appendChild(a),a.appendChild(t),0===(a=h("thead th",o)).length&&(a=h("tbody tr:eq(0)>td",o)),s=N(e,n),n=a=0;n<r;n++){var d=e.aoColumns[n];d.bVisible&&null!==d.sWidthOrig&&""!==d.sWidthOrig?s[n-a].style.width=q(d.sWidthOrig):d.bVisible?s[n-a].style.width="":a++}for(n=0;n<r;n++)e.aoColumns[n].bVisible&&(null!==(a=Na(e,n))&&(a=a.cloneNode(!0),""!==e.aoColumns[n].sContentPadding&&(a.innerHTML+=e.aoColumns[n].sContentPadding),t.appendChild(a)));if(i.appendChild(o),""!==e.oScroll.sX&&""!==e.oScroll.sXInner?o.style.width=q(e.oScroll.sXInner):""!==e.oScroll.sX?(o.style.width="",h(o).width()<i.offsetWidth&&(o.style.width=q(i.offsetWidth))):""!==e.oScroll.sY?o.style.width=q(i.offsetWidth):c&&(o.style.width=q(c)),o.style.visibility="hidden",Oa(e,o),0===(r=h("tbody tr:eq(0)",o).children()).length&&(r=N(e,h("thead",o)[0])),""!==e.oScroll.sX){for(n=a=i=0;n<e.aoColumns.length;n++)e.aoColumns[n].bVisible&&(i=null===e.aoColumns[n].sWidthOrig?i+h(r[a]).outerWidth():i+(parseInt(e.aoColumns[n].sWidth.replace("px",""),10)+(h(r[a]).outerWidth()-h(r[a]).width())),a++);o.style.width=q(i),e.nTable.style.width=q(i)}for(n=a=0;n<e.aoColumns.length;n++)e.aoColumns[n].bVisible&&(null!==(i=h(r[a]).width())&&0<i&&(e.aoColumns[n].sWidth=q(i)),a++);r=h(o).css("width"),e.nTable.style.width=-1!==r.indexOf("%")?r:q(h(o).outerWidth()),o.parentNode.removeChild(o)}c&&(e.nTable.style.width=q(c))}function Oa(e,t){""===e.oScroll.sX&&""!==e.oScroll.sY?(h(t).width(),t.style.width=q(h(t).outerWidth()-e.oScroll.iBarWidth)):""!==e.oScroll.sX&&(t.style.width=q(h(t).outerWidth()))}function Na(e,t){var n=Pa(e,t);if(0>n)return null;if(null===e.aoData[n].nTr){var i=l.createElement("td");return i.innerHTML=v(e,n,t,""),i}return J(e,n)[t]}function Pa(e,t){for(var n=-1,i=-1,o=0;o<e.aoData.length;o++){var a;(a=(a=v(e,o,t,"display")+"").replace(/<.*?>/g,"")).length>n&&(n=a.length,i=o)}return i}function q(e){if(null===e)return"0px";if("number"==typeof e)return 0>e?"0px":e+"px";var t=e.charCodeAt(e.length-1);return 48>t||57<t?e:e+"px"}function Qa(){var e=l.createElement("p");(t=e.style).width="100%",t.height="200px",t.padding="0px";var t,n=l.createElement("div");return(t=n.style).position="absolute",t.top="0px",t.left="0px",t.visibility="hidden",t.width="200px",t.height="150px",t.padding="0px",t.overflow="hidden",n.appendChild(e),l.body.appendChild(n),t=e.offsetWidth,n.style.overflow="scroll",t==(e=e.offsetWidth)&&(e=n.clientWidth),l.body.removeChild(n),t-e}function O(e,t){var i,o,a,r,s,l,c=[],d=[],u=j.ext.oSort,p=e.aoData,f=e.aoColumns,m=e.oLanguage.oAria;if(!e.oFeatures.bServerSide&&(0!==e.aaSorting.length||null!==e.aaSortingFixed)){for(c=null!==e.aaSortingFixed?e.aaSortingFixed.concat(e.aaSorting):e.aaSorting.slice(),i=0;i<c.length;i++)if(a=R(e,o=c[i][0]),r=e.aoColumns[o].sSortDataType,j.ext.afnSortData[r])if((s=j.ext.afnSortData[r].call(e.oInstance,e,o,a)).length===p.length)for(a=0,r=p.length;a<r;a++)F(e,a,o,s[a]);else D(e,0,"Returned data sort array (col "+o+") is the wrong length");for(i=0,o=e.aiDisplayMaster.length;i<o;i++)d[e.aiDisplayMaster[i]]=i;var g,b=c.length;for(i=0,o=p.length;i<o;i++)for(a=0;a<b;a++)for(s=0,l=(g=f[c[a][0]].aDataSort).length;s<l;s++)r=f[g[s]].sType,r=u[(r||"string")+"-pre"],p[i]._aSortData[g[s]]=r?r(v(e,i,g[s],"sort")):v(e,i,g[s],"sort");e.aiDisplayMaster.sort((function(e,t){var n,i,o,a,r;for(n=0;n<b;n++)for(i=0,o=(r=f[c[n][0]].aDataSort).length;i<o;i++)if(a=f[r[i]].sType,0!==(a=u[(a||"string")+"-"+c[n][1]](p[e]._aSortData[r[i]],p[t]._aSortData[r[i]])))return a;return u["numeric-asc"](d[e],d[t])}))}for((t===n||t)&&!e.oFeatures.bDeferRender&&P(e),i=0,o=e.aoColumns.length;i<o;i++)r=f[i].sTitle.replace(/<.*?>/g,""),(a=f[i].nTh).removeAttribute("aria-sort"),a.removeAttribute("aria-label"),f[i].bSortable?0<c.length&&c[0][0]==i?(a.setAttribute("aria-sort","asc"==c[0][1]?"ascending":"descending"),a.setAttribute("aria-label",r+("asc"==(f[i].asSorting[c[0][2]+1]?f[i].asSorting[c[0][2]+1]:f[i].asSorting[0])?m.sSortAscending:m.sSortDescending))):a.setAttribute("aria-label",r+("asc"==f[i].asSorting[0]?m.sSortAscending:m.sSortDescending)):a.setAttribute("aria-label",r);e.bSorted=!0,h(e.oInstance).trigger("sort",e),e.oFeatures.bFilter?K(e,e.oPreviousSearch,1):(e.aiDisplay=e.aiDisplayMaster.slice(),e._iDisplayStart=0,y(e),x(e))}function ia(e,t,n,i){Ra(t,{},(function(t){if(!1!==e.aoColumns[n].bSortable){var o=function(){var i,o;if(t.shiftKey){for(var a=!1,r=0;r<e.aaSorting.length;r++)if(e.aaSorting[r][0]==n){a=!0,i=e.aaSorting[r][0],o=e.aaSorting[r][2]+1,e.aoColumns[i].asSorting[o]?(e.aaSorting[r][1]=e.aoColumns[i].asSorting[o],e.aaSorting[r][2]=o):e.aaSorting.splice(r,1);break}!1===a&&e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0])}else 1==e.aaSorting.length&&e.aaSorting[0][0]==n?(i=e.aaSorting[0][0],o=e.aaSorting[0][2]+1,e.aoColumns[i].asSorting[o]||(o=0),e.aaSorting[0][1]=e.aoColumns[i].asSorting[o],e.aaSorting[0][2]=o):(e.aaSorting.splice(0,e.aaSorting.length),e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0]));O(e)};e.oFeatures.bProcessing?(E(e,!0),setTimeout((function(){o(),e.oFeatures.bServerSide||E(e,!1)}),0)):o(),"function"==typeof i&&i(e)}}))}function P(e){var t,n,i,o,a,r=e.aoColumns.length,s=e.oClasses;for(t=0;t<r;t++)e.aoColumns[t].bSortable&&h(e.aoColumns[t].nTh).removeClass(s.sSortAsc+" "+s.sSortDesc+" "+e.aoColumns[t].sSortingClass);for(n=null!==e.aaSortingFixed?e.aaSortingFixed.concat(e.aaSorting):e.aaSorting.slice(),t=0;t<e.aoColumns.length;t++)if(e.aoColumns[t].bSortable){for(a=e.aoColumns[t].sSortingClass,o=-1,i=0;i<n.length;i++)if(n[i][0]==t){a="asc"==n[i][1]?s.sSortAsc:s.sSortDesc,o=i;break}h(e.aoColumns[t].nTh).addClass(a),e.bJUI&&((a=h("span."+s.sSortIcon,e.aoColumns[t].nTh)).removeClass(s.sSortJUIAsc+" "+s.sSortJUIDesc+" "+s.sSortJUI+" "+s.sSortJUIAscAllowed+" "+s.sSortJUIDescAllowed),a.addClass(-1==o?e.aoColumns[t].sSortingClassJUI:"asc"==n[o][1]?s.sSortJUIAsc:s.sSortJUIDesc))}else h(e.aoColumns[t].nTh).addClass(e.aoColumns[t].sSortingClass);if(a=s.sSortColumn,e.oFeatures.bSort&&e.oFeatures.bSortClasses){for(e=J(e),o=[],t=0;t<r;t++)o.push("");for(t=0,i=1;t<n.length;t++)o[s=parseInt(n[t][0],10)]=a+i,3>i&&i++;var l;for(a=RegExp(a+"[123]"),t=0,n=e.length;t<n;t++)s=t%r,i=e[t].className,l=o[s],(s=i.replace(a,l))!=i?e[t].className=h.trim(s):0<l.length&&-1==i.indexOf(l)&&(e[t].className=i+" "+l)}}function ra(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var t,n;t=e.oScroll.bInfinite;var i={iCreate:(new Date).getTime(),iStart:t?0:e._iDisplayStart,iEnd:t?e._iDisplayLength:e._iDisplayEnd,iLength:e._iDisplayLength,aaSorting:h.extend(!0,[],e.aaSorting),oSearch:h.extend(!0,{},e.oPreviousSearch),aoSearchCols:h.extend(!0,[],e.aoPreSearchCols),abVisCols:[]};for(t=0,n=e.aoColumns.length;t<n;t++)i.abVisCols.push(e.aoColumns[t].bVisible);A(e,"aoStateSaveParams","stateSaveParams",[e,i]),e.fnStateSave.call(e.oInstance,e,i)}}function Sa(e,t){if(e.oFeatures.bStateSave){var n=e.fnStateLoad.call(e.oInstance,e);if(n){var i=A(e,"aoStateLoadParams","stateLoadParams",[e,n]);if(-1===h.inArray(!1,i)){for(e.oLoadedState=h.extend(!0,{},n),e._iDisplayStart=n.iStart,e.iInitDisplayStart=n.iStart,e._iDisplayEnd=n.iEnd,e._iDisplayLength=n.iLength,e.aaSorting=n.aaSorting.slice(),e.saved_aaSorting=n.aaSorting.slice(),h.extend(e.oPreviousSearch,n.oSearch),h.extend(!0,e.aoPreSearchCols,n.aoSearchCols),t.saved_aoColumns=[],i=0;i<n.abVisCols.length;i++)t.saved_aoColumns[i]={},t.saved_aoColumns[i].bVisible=n.abVisCols[i];A(e,"aoStateLoaded","stateLoaded",[e,n])}}}}function s(e){for(var t=0;t<j.settings.length;t++)if(j.settings[t].nTable===e)return j.settings[t];return null}function T(e){for(var t=[],n=0,i=(e=e.aoData).length;n<i;n++)null!==e[n].nTr&&t.push(e[n].nTr);return t}function J(e,t){var i,o,a,r,s,l,c=[];o=0;var d=e.aoData.length;for(t!==n&&(o=t,d=t+1),a=o;a<d;a++)if(null!==(l=e.aoData[a]).nTr){for(o=[],i=l.nTr.firstChild;i;)("td"==(r=i.nodeName.toLowerCase())||"th"==r)&&o.push(i),i=i.nextSibling;for(r=i=0,s=e.aoColumns.length;r<s;r++)e.aoColumns[r].bVisible?c.push(o[r-i]):(c.push(l._anHidden[r]),i++)}return c}function D(e,t,n){if(e=null===e?"DataTables warning: "+n:"DataTables warning (table id = '"+e.sTableId+"'): "+n,0===t){if("alert"!=j.ext.sErrMode)throw Error(e);alert(e)}else X.console&&console.log&&console.log(e)}function p(e,t,i,o){o===n&&(o=i),t[i]!==n&&(e[o]=t[i])}function Ta(t,n){var i,o;for(o in n)n.hasOwnProperty(o)&&(i=n[o],"object"==typeof e[o]&&null!==i&&!1===h.isArray(i)?h.extend(!0,t[o],i):t[o]=i);return t}function Ra(e,t,n){h(e).bind("click.DT",t,(function(t){e.blur(),n(t)})).bind("keypress.DT",t,(function(e){13===e.which&&n(e)})).bind("selectstart.DT",(function(){return!1}))}function z(e,t,n,i){n&&e[t].push({fn:n,sName:i})}function A(e,t,n,i){for(var o=[],a=(t=e[t]).length-1;0<=a;a--)o.push(t[a].fn.apply(e.oInstance,i));return null!==n&&h(e.oInstance).trigger(n,i),o}function Ua(e){var t=h('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];l.body.appendChild(t),e.oBrowser.bScrollOversize=100===h("#DT_BrowserTest",t)[0].offsetWidth,l.body.removeChild(t)}function Va(e){return function(){var t=[s(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return j.ext.oApi[e].apply(this,t)}}var U=/\[.*?\]$/,Wa=X.JSON?JSON.stringify:function(e){var t=typeof e;if("object"!==t||null===e)return"string"===t&&(e='"'+e+'"'),e+"";var n,i,o=[],a=h.isArray(e);for(n in e)"string"===(t=typeof(i=e[n]))?i='"'+i+'"':"object"===t&&null!==i&&(i=Wa(i)),o.push((a?"":'"'+n+'":')+i);return(a?"[":"{")+o+(a?"]":"}")};for(var sa in this.$=function(e,t){var n,i,o,a=[],r=(i=s(this[j.ext.iApiIndex])).aoData,l=i.aiDisplay,c=i.aiDisplayMaster;if(t||(t={}),"current"==(t=h.extend({},{filter:"none",order:"current",page:"all"},t)).page)for(n=i._iDisplayStart,i=i.fnDisplayEnd();n<i;n++)(o=r[l[n]].nTr)&&a.push(o);else if("current"==t.order&&"none"==t.filter)for(n=0,i=c.length;n<i;n++)(o=r[c[n]].nTr)&&a.push(o);else if("current"==t.order&&"applied"==t.filter)for(n=0,i=l.length;n<i;n++)(o=r[l[n]].nTr)&&a.push(o);else if("original"==t.order&&"none"==t.filter)for(n=0,i=r.length;n<i;n++)(o=r[n].nTr)&&a.push(o);else if("original"==t.order&&"applied"==t.filter)for(n=0,i=r.length;n<i;n++)o=r[n].nTr,-1!==h.inArray(n,l)&&o&&a.push(o);else D(i,1,"Unknown selection options");return n=(a=h(a)).filter(e),a=a.find(e),h([].concat(h.makeArray(n),h.makeArray(a)))},this._=function(e,t){var n,i,o=[],a=this.$(e,t);for(n=0,i=a.length;n<i;n++)o.push(this.fnGetData(a[n]));return o},this.fnAddData=function(e,t){if(0===e.length)return[];var i,o=[],a=s(this[j.ext.iApiIndex]);if("object"==typeof e[0]&&null!==e[0])for(var r=0;r<e.length;r++){if(-1==(i=H(a,e[r])))return o;o.push(i)}else{if(-1==(i=H(a,e)))return o;o.push(i)}return a.aiDisplay=a.aiDisplayMaster.slice(),(t===n||t)&&aa(a),o},this.fnAdjustColumnSizing=function(e){var t=s(this[j.ext.iApiIndex]);k(t),e===n||e?this.fnDraw(!1):(""!==t.oScroll.sX||""!==t.oScroll.sY)&&this.oApi._fnScrollDraw(t)},this.fnClearTable=function(e){var t=s(this[j.ext.iApiIndex]);ga(t),(e===n||e)&&x(t)},this.fnClose=function(e){for(var t=s(this[j.ext.iApiIndex]),n=0;n<t.aoOpenRows.length;n++)if(t.aoOpenRows[n].nParent==e)return(e=t.aoOpenRows[n].nTr.parentNode)&&e.removeChild(t.aoOpenRows[n].nTr),t.aoOpenRows.splice(n,1),0;return 1},this.fnDeleteRow=function(e,t,i){var o,a,r=s(this[j.ext.iApiIndex]),l=(e="object"==typeof e?I(r,e):e,r.aoData.splice(e,1));for(o=0,a=r.aoData.length;o<a;o++)null!==r.aoData[o].nTr&&(r.aoData[o].nTr._DT_RowIndex=o);return o=h.inArray(e,r.aiDisplay),r.asDataSearch.splice(o,1),ha(r.aiDisplayMaster,e),ha(r.aiDisplay,e),"function"==typeof t&&t.call(this,r,l),r._iDisplayStart>=r.fnRecordsDisplay()&&(r._iDisplayStart-=r._iDisplayLength,0>r._iDisplayStart&&(r._iDisplayStart=0)),(i===n||i)&&(y(r),x(r)),l},this.fnDestroy=function(t){var i,o,a=s(this[j.ext.iApiIndex]),r=a.nTableWrapper.parentNode,l=a.nTBody;t=t!==n&&t;if(a.bDestroying=!0,A(a,"aoDestroyCallback","destroy",[a]),!t)for(i=0,o=a.aoColumns.length;i<o;i++)!1===a.aoColumns[i].bVisible&&this.fnSetColumnVis(i,!0);for(h(a.nTableWrapper).find("*").andSelf().unbind(".DT"),h("tbody>tr>td."+a.oClasses.sRowEmpty,a.nTable).parent().remove(),a.nTable!=a.nTHead.parentNode&&(h(a.nTable).children("thead").remove(),a.nTable.appendChild(a.nTHead)),a.nTFoot&&a.nTable!=a.nTFoot.parentNode&&(h(a.nTable).children("tfoot").remove(),a.nTable.appendChild(a.nTFoot)),a.nTable.parentNode.removeChild(a.nTable),h(a.nTableWrapper).remove(),a.aaSorting=[],a.aaSortingFixed=[],P(a),h(T(a)).removeClass(a.asStripeClasses.join(" ")),h("th, td",a.nTHead).removeClass([a.oClasses.sSortable,a.oClasses.sSortableAsc,a.oClasses.sSortableDesc,a.oClasses.sSortableNone].join(" ")),a.bJUI&&(h("th span."+a.oClasses.sSortIcon+", td span."+a.oClasses.sSortIcon,a.nTHead).remove(),h("th, td",a.nTHead).each((function(){var e=h("div."+a.oClasses.sSortJUIWrapper,this),t=e.contents();h(this).append(t),e.remove()}))),!t&&a.nTableReinsertBefore?r.insertBefore(a.nTable,a.nTableReinsertBefore):t||r.appendChild(a.nTable),i=0,o=a.aoData.length;i<o;i++)null!==a.aoData[i].nTr&&l.appendChild(a.aoData[i].nTr);if(!0===a.oFeatures.bAutoWidth&&(a.nTable.style.width=q(a.sDestroyWidth)),o=a.asDestroyStripes.length)for(t=h(l).children("tr"),i=0;i<o;i++)t.filter(":nth-child("+o+"n + "+i+")").addClass(a.asDestroyStripes[i]);for(i=0,o=j.settings.length;i<o;i++)j.settings[i]==a&&j.settings.splice(i,1);e=a=null},this.fnDraw=function(e){var t=s(this[j.ext.iApiIndex]);!1===e?(y(t),x(t)):aa(t)},this.fnFilter=function(e,t,i,o,a,r){var c=s(this[j.ext.iApiIndex]);if(c.oFeatures.bFilter)if(i!==n&&null!==i||(i=!1),o!==n&&null!==o||(o=!0),a!==n&&null!==a||(a=!0),r!==n&&null!==r||(r=!0),t===n||null===t){if(K(c,{sSearch:e+"",bRegex:i,bSmart:o,bCaseInsensitive:r},1),a&&c.aanFeatures.f)for(i=0,o=(t=c.aanFeatures.f).length;i<o;i++)try{t[i]._DT_Input!=l.activeElement&&h(t[i]._DT_Input).val(e)}catch(n){h(t[i]._DT_Input).val(e)}}else h.extend(c.aoPreSearchCols[t],{sSearch:e+"",bRegex:i,bSmart:o,bCaseInsensitive:r}),K(c,c.oPreviousSearch,1)},this.fnGetData=function(e,t){var i=s(this[j.ext.iApiIndex]);if(e!==n){var o=e;if("object"==typeof e){var a=e.nodeName.toLowerCase();"tr"===a?o=I(i,e):"td"===a&&(t=fa(i,o=I(i,e.parentNode),e))}return t!==n?v(i,o,t,""):i.aoData[o]!==n?i.aoData[o]._aData:null}return Z(i)},this.fnGetNodes=function(e){var t=s(this[j.ext.iApiIndex]);return e!==n?t.aoData[e]!==n?t.aoData[e].nTr:null:T(t)},this.fnGetPosition=function(e){var t=s(this[j.ext.iApiIndex]),n=e.nodeName.toUpperCase();return"TR"==n?I(t,e):"TD"==n||"TH"==n?[n=I(t,e.parentNode),R(t,e=fa(t,n,e)),e]:null},this.fnIsOpen=function(e){for(var t=s(this[j.ext.iApiIndex]),n=0;n<t.aoOpenRows.length;n++)if(t.aoOpenRows[n].nParent==e)return!0;return!1},this.fnOpen=function(e,n,i){var o=s(this[j.ext.iApiIndex]),a=T(o);if(-1!==h.inArray(e,a)){this.fnClose(e);a=l.createElement("tr");var r=l.createElement("td");return a.appendChild(r),r.className=i,r.colSpan=t(o),"string"==typeof n?r.innerHTML=n:h(r).html(n),n=h("tr",o.nTBody),-1!=h.inArray(e,n)&&h(a).insertAfter(e),o.aoOpenRows.push({nTr:a,nParent:e}),a}},this.fnPageChange=function(e,t){var i=s(this[j.ext.iApiIndex]);qa(i,e),y(i),(t===n||t)&&x(i)},this.fnSetColumnVis=function(e,i,o){var a,r,l,c,d=s(this[j.ext.iApiIndex]),u=d.aoColumns,h=d.aoData;if(u[e].bVisible!=i){if(i){for(a=r=0;a<e;a++)u[a].bVisible&&r++;if(!(c=r>=t(d)))for(a=e;a<u.length;a++)if(u[a].bVisible){l=a;break}for(a=0,r=h.length;a<r;a++)null!==h[a].nTr&&(c?h[a].nTr.appendChild(h[a]._anHidden[e]):h[a].nTr.insertBefore(h[a]._anHidden[e],J(d,a)[l]))}else for(a=0,r=h.length;a<r;a++)null!==h[a].nTr&&(l=J(d,a)[e],h[a]._anHidden[e]=l,l.parentNode.removeChild(l));for(u[e].bVisible=i,W(d,d.aoHeader),d.nTFoot&&W(d,d.aoFooter),a=0,r=d.aoOpenRows.length;a<r;a++)d.aoOpenRows[a].nTr.colSpan=t(d);(o===n||o)&&(k(d),x(d)),ra(d)}},this.fnSettings=function(){return s(this[j.ext.iApiIndex])},this.fnSort=function(e){var t=s(this[j.ext.iApiIndex]);t.aaSorting=e,O(t)},this.fnSortListener=function(e,t,n){ia(s(this[j.ext.iApiIndex]),e,t,n)},this.fnUpdate=function(e,t,i,o,a){var l=s(this[j.ext.iApiIndex]);t="object"==typeof t?I(l,t):t;if(h.isArray(e)&&i===n)for(l.aoData[t]._aData=e.slice(),i=0;i<l.aoColumns.length;i++)this.fnUpdate(v(l,t,i),t,i,!1,!1);else if(h.isPlainObject(e)&&i===n)for(l.aoData[t]._aData=h.extend(!0,{},e),i=0;i<l.aoColumns.length;i++)this.fnUpdate(v(l,t,i),t,i,!1,!1);else{F(l,t,i,e);e=v(l,t,i,"display");var c=l.aoColumns[i];null!==c.fnRender&&(e=S(l,t,i),c.bUseRendered&&F(l,t,i,e)),null!==l.aoData[t].nTr&&(J(l,t)[i].innerHTML=e)}return i=h.inArray(t,l.aiDisplay),l.asDataSearch[i]=na(l,Y(l,t,"filter",r(l,"bSearchable"))),(a===n||a)&&k(l),(o===n||o)&&aa(l),0},this.fnVersionCheck=j.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:Va,_fnInitialise:ba,_fnInitComplete:$,_fnLanguageCompat:pa,_fnAddColumn:o,_fnColumnOptions:m,_fnAddData:H,_fnCreateTr:ea,_fnGatherData:ua,_fnBuildHead:va,_fnDrawHead:W,_fnDraw:x,_fnReDraw:aa,_fnAjaxUpdate:wa,_fnAjaxParameters:Ea,_fnAjaxUpdateDraw:Fa,_fnServerParams:ka,_fnAddOptionsHtml:xa,_fnFeatureHtmlTable:Ba,_fnScrollDraw:La,_fnAdjustColumnSizing:k,_fnFeatureHtmlFilter:za,_fnFilterComplete:K,_fnFilterCustom:Ia,_fnFilterColumn:Ha,_fnFilter:Ga,_fnBuildSearchArray:la,_fnBuildSearchRow:na,_fnFilterCreateSearch:ma,_fnDataToSearch:Ja,_fnSort:O,_fnSortAttachListener:ia,_fnSortingClasses:P,_fnFeatureHtmlPaginate:Da,_fnPageChange:qa,_fnFeatureHtmlInfo:Ca,_fnUpdateInfo:Ka,_fnFeatureHtmlLength:ya,_fnFeatureHtmlProcessing:Aa,_fnProcessingDisplay:E,_fnVisibleToColumnIndex:G,_fnColumnIndexToVisible:R,_fnNodeToDataIndex:I,_fnVisbleColumns:t,_fnCalculateEnd:y,_fnConvertToWidth:Ma,_fnCalculateColumnWidths:da,_fnScrollingWidthAdjust:Oa,_fnGetWidestNode:Na,_fnGetMaxLenString:Pa,_fnStringToCss:q,_fnDetectType:B,_fnSettingsFromNode:s,_fnGetDataMaster:Z,_fnGetTrNodes:T,_fnGetTdNodes:J,_fnEscapeRegex:oa,_fnDeleteIndex:ha,_fnReOrderIndex:u,_fnColumnOrdering:M,_fnLog:D,_fnClearTable:ga,_fnSaveState:ra,_fnLoadState:Sa,_fnCreateCookie:function(a,b,c,d,e){var f=new Date;f.setTime(f.getTime()+1e3*c);var c=X.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),g;if(null!==e?(g="function"==typeof h.parseJSON?h.parseJSON(b):eval("("+b+")"),b=e(a,g,f.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+f.toGMTString()+"; path="+c.join("/")+"/",a=l.cookie.split(";"),e=b.split(";")[0].length,f=[],4096<e+l.cookie.length+10){for(var j=0,o=a.length;j<o;j++)if(-1!=a[j].indexOf(d)){var k=a[j].split("=");try{(g=eval("("+decodeURIComponent(k[1])+")"))&&g.iCreate&&f.push({name:k[0],time:g.iCreate})}catch(e){}}for(f.sort((function(e,t){return t.time-e.time}));4096<e+l.cookie.length+10;){if(0===f.length)return;d=f.pop(),l.cookie=d.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}}l.cookie=b},_fnReadCookie:function(e){e=e+"_"+(t=X.location.pathname.split("/"))[t.length-1].replace(/[\/:]/g,"").toLowerCase()+"=";for(var t=l.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return decodeURIComponent(i.substring(e.length,i.length))}return null},_fnDetectHeader:V,_fnGetUniqueThs:N,_fnScrollBarWidth:Qa,_fnApplyToChildren:C,_fnMap:p,_fnGetRowData:Y,_fnGetCellData:v,_fnSetCellData:F,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:L,_fnApplyColumnDefs:ta,_fnBindAction:Ra,_fnExtend:Ta,_fnCallbackReg:z,_fnCallbackFire:A,_fnJsonString:Wa,_fnRender:S,_fnNodeToColumnIndex:fa,_fnInfoMacros:ja,_fnBrowserDetect:Ua,_fnGetColumns:r},h.extend(j.ext.oApi,this.oApi),j.ext.oApi)sa&&(this[sa]=Va(sa));var ca=this;return this.each((function(){var t,i,a,r=0;i=this.getAttribute("id");var s=!1,c=!1;if("table"!=this.nodeName.toLowerCase())D(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{for(r=0,t=j.settings.length;r<t;r++){if(j.settings[r].nTable==this){if(e===n||e.bRetrieve)return j.settings[r].oInstance;if(e.bDestroy){j.settings[r].oInstance.fnDestroy();break}return void D(j.settings[r],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy")}if(j.settings[r].sTableId==this.id){j.settings.splice(r,1);break}}null!==i&&""!==i||(this.id=i="DataTables_Table_"+j.ext._oExternConfig.iNextUnique++);var d=h.extend(!0,{},j.models.oSettings,{nTable:this,oApi:ca.oApi,oInit:e,sDestroyWidth:h(this).width(),sInstance:i,sTableId:i});if(j.settings.push(d),d.oInstance=1===ca.length?ca:h(this).dataTable(),e||(e={}),e.oLanguage&&pa(e.oLanguage),e=Ta(h.extend(!0,{},j.defaults),e),p(d.oFeatures,e,"bPaginate"),p(d.oFeatures,e,"bLengthChange"),p(d.oFeatures,e,"bFilter"),p(d.oFeatures,e,"bSort"),p(d.oFeatures,e,"bInfo"),p(d.oFeatures,e,"bProcessing"),p(d.oFeatures,e,"bAutoWidth"),p(d.oFeatures,e,"bSortClasses"),p(d.oFeatures,e,"bServerSide"),p(d.oFeatures,e,"bDeferRender"),p(d.oScroll,e,"sScrollX","sX"),p(d.oScroll,e,"sScrollXInner","sXInner"),p(d.oScroll,e,"sScrollY","sY"),p(d.oScroll,e,"bScrollCollapse","bCollapse"),p(d.oScroll,e,"bScrollInfinite","bInfinite"),p(d.oScroll,e,"iScrollLoadGap","iLoadGap"),p(d.oScroll,e,"bScrollAutoCss","bAutoCss"),p(d,e,"asStripeClasses"),p(d,e,"asStripClasses","asStripeClasses"),p(d,e,"fnServerData"),p(d,e,"fnFormatNumber"),p(d,e,"sServerMethod"),p(d,e,"aaSorting"),p(d,e,"aaSortingFixed"),p(d,e,"aLengthMenu"),p(d,e,"sPaginationType"),p(d,e,"sAjaxSource"),p(d,e,"sAjaxDataProp"),p(d,e,"iCookieDuration"),p(d,e,"sCookiePrefix"),p(d,e,"sDom"),p(d,e,"bSortCellsTop"),p(d,e,"iTabIndex"),p(d,e,"oSearch","oPreviousSearch"),p(d,e,"aoSearchCols","aoPreSearchCols"),p(d,e,"iDisplayLength","_iDisplayLength"),p(d,e,"bJQueryUI","bJUI"),p(d,e,"fnCookieCallback"),p(d,e,"fnStateLoad"),p(d,e,"fnStateSave"),p(d.oLanguage,e,"fnInfoCallback"),z(d,"aoDrawCallback",e.fnDrawCallback,"user"),z(d,"aoServerParams",e.fnServerParams,"user"),z(d,"aoStateSaveParams",e.fnStateSaveParams,"user"),z(d,"aoStateLoadParams",e.fnStateLoadParams,"user"),z(d,"aoStateLoaded",e.fnStateLoaded,"user"),z(d,"aoRowCallback",e.fnRowCallback,"user"),z(d,"aoRowCreatedCallback",e.fnCreatedRow,"user"),z(d,"aoHeaderCallback",e.fnHeaderCallback,"user"),z(d,"aoFooterCallback",e.fnFooterCallback,"user"),z(d,"aoInitComplete",e.fnInitComplete,"user"),z(d,"aoPreDrawCallback",e.fnPreDrawCallback,"user"),d.oFeatures.bServerSide&&d.oFeatures.bSort&&d.oFeatures.bSortClasses?z(d,"aoDrawCallback",P,"server_side_sort_classes"):d.oFeatures.bDeferRender&&z(d,"aoDrawCallback",P,"defer_sort_classes"),e.bJQueryUI?(h.extend(d.oClasses,j.ext.oJUIClasses),e.sDom===j.defaults.sDom&&"lfrtip"===j.defaults.sDom&&(d.sDom='<"H"lfr>t<"F"ip>')):h.extend(d.oClasses,j.ext.oStdClasses),h(this).addClass(d.oClasses.sTable),""===d.oScroll.sX&&""===d.oScroll.sY||(d.oScroll.iBarWidth=Qa()),d.iInitDisplayStart===n&&(d.iInitDisplayStart=e.iDisplayStart,d._iDisplayStart=e.iDisplayStart),e.bStateSave&&(d.oFeatures.bStateSave=!0,Sa(d,e),z(d,"aoDrawCallback",ra,"state_save")),null!==e.iDeferLoading&&(d.bDeferLoading=!0,r=h.isArray(e.iDeferLoading),d._iRecordsDisplay=r?e.iDeferLoading[0]:e.iDeferLoading,d._iRecordsTotal=r?e.iDeferLoading[1]:e.iDeferLoading),null!==e.aaData&&(c=!0),""!==e.oLanguage.sUrl?(d.oLanguage.sUrl=e.oLanguage.sUrl,h.getJSON(d.oLanguage.sUrl,null,(function(t){pa(t),h.extend(!0,d.oLanguage,e.oLanguage,t),ba(d)})),s=!0):h.extend(!0,d.oLanguage,e.oLanguage),null===e.asStripeClasses&&(d.asStripeClasses=[d.oClasses.sStripeOdd,d.oClasses.sStripeEven]),t=d.asStripeClasses.length,d.asDestroyStripes=[],t){for(i=!1,a=h(this).children("tbody").children("tr:lt("+t+")"),r=0;r<t;r++)a.hasClass(d.asStripeClasses[r])&&(i=!0,d.asDestroyStripes.push(d.asStripeClasses[r]));i&&a.removeClass(d.asStripeClasses.join(" "))}if(i=[],0!==(r=this.getElementsByTagName("thead")).length&&(V(d.aoHeader,r[0]),i=N(d)),null===e.aoColumns)for(a=[],r=0,t=i.length;r<t;r++)a.push(null);else a=e.aoColumns;for(r=0,t=a.length;r<t;r++)e.saved_aoColumns!==n&&e.saved_aoColumns.length==t&&(null===a[r]&&(a[r]={}),a[r].bVisible=e.saved_aoColumns[r].bVisible),o(d,i?i[r]:null);for(ta(d,e.aoColumnDefs,a,(function(e,t){m(d,e,t)})),r=0,t=d.aaSorting.length;r<t;r++){d.aaSorting[r][0]>=d.aoColumns.length&&(d.aaSorting[r][0]=0);var u=d.aoColumns[d.aaSorting[r][0]];for(d.aaSorting[r][2]===n&&(d.aaSorting[r][2]=0),e.aaSorting===n&&d.saved_aaSorting===n&&(d.aaSorting[r][1]=u.asSorting[0]),i=0,a=u.asSorting.length;i<a;i++)if(d.aaSorting[r][1]==u.asSorting[i]){d.aaSorting[r][2]=i;break}}if(P(d),Ua(d),r=h(this).children("caption").each((function(){this._captionSide=h(this).css("caption-side")})),0===(t=h(this).children("thead")).length&&(t=[l.createElement("thead")],this.appendChild(t[0])),d.nTHead=t[0],0===(t=h(this).children("tbody")).length&&(t=[l.createElement("tbody")],this.appendChild(t[0])),d.nTBody=t[0],d.nTBody.setAttribute("role","alert"),d.nTBody.setAttribute("aria-live","polite"),d.nTBody.setAttribute("aria-relevant","all"),0===(t=h(this).children("tfoot")).length&&0<r.length&&(""!==d.oScroll.sX||""!==d.oScroll.sY)&&(t=[l.createElement("tfoot")],this.appendChild(t[0])),0<t.length&&(d.nTFoot=t[0],V(d.aoFooter,d.nTFoot)),c)for(r=0;r<e.aaData.length;r++)H(d,e.aaData[r]);else ua(d);d.aiDisplay=d.aiDisplayMaster.slice(),d.bInitialised=!0,!1===s&&ba(d)}})),ca=null,this};j.fnVersionCheck=function(e){for(var t=function(e,t){for(;e.length<t;)e+="0";return e},n=j.ext.sVersion.split("."),i="",o="",a=0,r=(e=e.split(".")).length;a<r;a++)i+=t(n[a],3),o+=t(e[a],3);return parseInt(i,10)>=parseInt(o,10)},j.fnIsDataTable=function(e){for(var t=j.settings,n=0;n<t.length;n++)if(t[n].nTable===e||t[n].nScrollHead===e||t[n].nScrollFoot===e)return!0;return!1},j.fnTables=function(e){var t=[];return jQuery.each(j.settings,(function(n,i){(!e||!0===e&&h(i.nTable).is(":visible"))&&t.push(i.nTable)})),t},j.version="1.9.4",j.settings=[],j.models={},j.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:j.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:j.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},j.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},j.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},j.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},j.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){if(1e3>e)return e;e=(n=e+"").split("");for(var t="",n=n.length,i=0;i<n;i++)0==i%3&&0!==i&&(t=this.oLanguage.sInfoThousands+t),t=e[n-i-1]+t;return t},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(e,t,n,i){i.jqXHR=h.ajax({url:e,data:t,success:function(e){e.sError&&i.oApi._fnLog(i,0,e.sError),h(i.oInstance).trigger("xhr",[i,e]),n(e)},dataType:"json",cache:!1,type:i.sServerMethod,error:function(e,t){"parsererror"==t&&i.oApi._fnLog(i,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(e){var e=this.oApi._fnReadCookie(e.sCookiePrefix+e.sInstance),j;try{j="function"==typeof h.parseJSON?h.parseJSON(e):eval("("+e+")")}catch(e){j=null}return j},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(e,t){this.oApi._fnCreateCookie(e.sCookiePrefix+e.sInstance,this.oApi._fnJsonString(t),e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},j.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},j.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},j.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},j.ext=h.extend(!0,{},j.models.ext),h.extend(j.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),h.extend(j.ext.oJUIClasses,j.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),h.extend(j.ext.oPagination,{two_button:{fnInit:function(e,t,n){var i=e.oLanguage.oPaginate,o=function(t){e.oApi._fnPageChange(e,t.data.action)&&n(e)};i=e.bJUI?'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUIPrev+'"></span></a><a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUINext+'"></span></a>':'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+i.sPrevious+'</a><a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+i.sNext+"</a>";h(t).append(i);i=(a=h("a",t))[0];var a=a[1];e.oApi._fnBindAction(i,{action:"previous"},o),e.oApi._fnBindAction(a,{action:"next"},o),e.aanFeatures.p||(t.id=e.sTableId+"_paginate",i.id=e.sTableId+"_previous",a.id=e.sTableId+"_next",i.setAttribute("aria-controls",e.sTableId),a.setAttribute("aria-controls",e.sTableId))},fnUpdate:function(e){if(e.aanFeatures.p)for(var t,n=e.oClasses,i=e.aanFeatures.p,o=0,a=i.length;o<a;o++)(t=i[o].firstChild)&&(t.className=0===e._iDisplayStart?n.sPagePrevDisabled:n.sPagePrevEnabled,(t=t.nextSibling).className=e.fnDisplayEnd()==e.fnRecordsDisplay()?n.sPageNextDisabled:n.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,t,n){var i=e.oLanguage.oPaginate,o=e.oClasses,a=function(t){e.oApi._fnPageChange(e,t.data.action)&&n(e)};h(t).append('<a  tabindex="'+e.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageFirst+'">'+i.sFirst+'</a><a  tabindex="'+e.iTabIndex+'" class="'+o.sPageButton+" "+o.sPagePrevious+'">'+i.sPrevious+'</a><span></span><a tabindex="'+e.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageNext+'">'+i.sNext+'</a><a tabindex="'+e.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageLast+'">'+i.sLast+"</a>");i=(s=h("a",t))[0],o=s[1];var r=s[2],s=s[3];e.oApi._fnBindAction(i,{action:"first"},a),e.oApi._fnBindAction(o,{action:"previous"},a),e.oApi._fnBindAction(r,{action:"next"},a),e.oApi._fnBindAction(s,{action:"last"},a),e.aanFeatures.p||(t.id=e.sTableId+"_paginate",i.id=e.sTableId+"_first",o.id=e.sTableId+"_previous",r.id=e.sTableId+"_next",s.id=e.sTableId+"_last")},fnUpdate:function(e,t){if(e.aanFeatures.p){var n,i,o=j.ext.oPagination.iFullNumbersShowPages,a=Math.floor(o/2),r=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),s=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,l="",c=e.oClasses,d=e.aanFeatures.p,u=function(i){e.oApi._fnBindAction(this,{page:i+n-1},(function(n){e.oApi._fnPageChange(e,n.data.page),t(e),n.preventDefault()}))};for(-1===e._iDisplayLength?s=a=n=1:r<o?(n=1,a=r):s<=a?(n=1,a=o):s>=r-a?(n=r-o+1,a=r):a=(n=s-Math.ceil(o/2)+1)+o-1,o=n;o<=a;o++)l+=s!==o?'<a tabindex="'+e.iTabIndex+'" class="'+c.sPageButton+'">'+e.fnFormatNumber(o)+"</a>":'<a tabindex="'+e.iTabIndex+'" class="'+c.sPageButtonActive+'">'+e.fnFormatNumber(o)+"</a>";for(o=0,a=d.length;o<a;o++)(i=d[o]).hasChildNodes()&&(h("span:eq(0)",i).html(l).children("a").each(u),i=[(i=i.getElementsByTagName("a"))[0],i[1],i[i.length-2],i[i.length-1]],h(i).removeClass(c.sPageButton+" "+c.sPageButtonActive+" "+c.sPageButtonStaticDisabled),h([i[0],i[1]]).addClass(1==s?c.sPageButtonStaticDisabled:c.sPageButton),h([i[2],i[3]]).addClass(0===r||s===r||-1===e._iDisplayLength?c.sPageButtonStaticDisabled:c.sPageButton))}}}}),h.extend(j.ext.oSort,{"string-pre":function(e){return"string"!=typeof e&&(e=null!==e&&e.toString?e.toString():""),e.toLowerCase()},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0},"html-pre":function(e){return e.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(e,t){return e<t?-1:e>t?1:0},"html-desc":function(e,t){return e<t?1:e>t?-1:0},"date-pre":function(e){return e=Date.parse(e),(isNaN(e)||""===e)&&(e=Date.parse("01/01/1970 00:00:00")),e},"date-asc":function(e,t){return e-t},"date-desc":function(e,t){return t-e},"numeric-pre":function(e){return"-"==e||""===e?0:1*e},"numeric-asc":function(e,t){return e-t},"numeric-desc":function(e,t){return t-e}}),h.extend(j.ext.aTypes,[function(e){if("number"==typeof e)return"numeric";if("string"!=typeof e)return null;var t,n=!1;if(t=e.charAt(0),-1=="0123456789-".indexOf(t))return null;for(var i=1;i<e.length;i++){if(t=e.charAt(i),-1=="0123456789.".indexOf(t))return null;if("."==t){if(n)return null;n=!0}}return"numeric"},function(e){var t=Date.parse(e);return null!==t&&!isNaN(t)||"string"==typeof e&&0===e.length?"date":null},function(e){return"string"==typeof e&&-1!=e.indexOf("<")&&-1!=e.indexOf(">")?"html":null}]),h.fn.DataTable=j,h.fn.dataTable=j,h.fn.dataTableSettings=j.settings,h.fn.dataTableExt=j.ext};"function"==typeof define&&define.amd?define(["jquery"],L):jQuery&&!jQuery.fn.dataTable&&L(jQuery)})(window,document)}function jQueryRangeSliders(){!function(e){"use strict";e.widget("ui.rangeSliderMouseTouch",e.ui.mouse,{enabled:!0,_mouseInit:function(){var t=this;e.ui.mouse.prototype._mouseInit.apply(this),this._mouseDownEvent=!1,this.element.bind("touchstart."+this.widgetName,(function(e){return t._touchStart(e)}))},_mouseDestroy:function(){e(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),e.ui.mouse.prototype._mouseDestroy.apply(this)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){this._mouseDestroy(),e.ui.mouse.prototype.destroy.apply(this),this._mouseInit=null},_touchStart:function(t){if(!this.enabled)return!1;t.which=1,t.preventDefault(),this._fillTouchEvent(t);var n=this,i=this._mouseDownEvent;this._mouseDown(t),i!==this._mouseDownEvent&&(this._touchEndDelegate=function(e){n._touchEnd(e)},this._touchMoveDelegate=function(e){n._touchMove(e)},e(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},_mouseDown:function(t){return!!this.enabled&&e.ui.mouse.prototype._mouseDown.apply(this,[t])},_touchEnd:function(t){this._fillTouchEvent(t),this._mouseUp(t),e(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),this._mouseDownEvent=!1,e(document).trigger("mouseup")},_touchMove:function(e){return e.preventDefault(),this._fillTouchEvent(e),this._mouseMove(e)},_fillTouchEvent:function(e){var t;t=void 0===e.targetTouches&&void 0===e.changedTouches?e.originalEvent.targetTouches[0]||e.originalEvent.changedTouches[0]:e.targetTouches[0]||e.changedTouches[0],e.pageX=t.pageX,e.pageY=t.pageY}})}(jQuery),function(e){"use strict";e.widget("ui.rangeSliderDraggable",e.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){e.ui.rangeSliderMouseTouch.prototype._create.apply(this),setTimeout(e.proxy(this._initElementIfNotDestroyed,this),10)},destroy:function(){this.cache=null,e.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_initElementIfNotDestroyed:function(){this._mouseInit&&this._initElement()},_initElement:function(){this._mouseInit(),this._cache()},_setOption:function(t,n){"containment"===t&&(this.options.containment=null===n||0===e(n).length?null:e(n))},_mouseStart:function(e){return this._cache(),this.cache.click={left:e.pageX,top:e.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(e){var t=e.pageX-this.cache.click.left;return t=this._constraintPosition(t+this.cache.initialOffset.left),this._applyPosition(t),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(e){return 0!==this.element.parent().length&&null!==this.cache.parent.offset&&(e=Math.min(e,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),e=Math.max(e,this.cache.parent.offset.left)),e},_applyPosition:function(e){var t={top:this.cache.offset.top,left:e};this.element.offset({left:e}),this.cache.offset=t},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={},this._cacheMargins(),this._cacheParent(),this._cacheDimensions(),this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var e=this.element.parent();this.cache.parent={offset:e.offset(),width:e.width()}}else this.cache.parent=null},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(e,t){return parseInt(e.css(t),10)||0},_triggerMouseEvent:function(e){var t=this._prepareEventData();this.element.trigger(e,t)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})}(jQuery),function(e,t){"use strict";e.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1,enabled:!0},_values:null,_valuesChanged:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._setDefaultValues(),this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0},this.arrows={left:null,right:null},this.changing={min:!1,max:!1},this.changed={min:!1,max:!1},this._createElements(),this._bindResize(),setTimeout(e.proxy(this.resize,this),1),setTimeout(e.proxy(this._initValues,this),1)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max}},_bindResize:function(){var t=this;this._resizeProxy=function(e){t.resize(e)},e(window).resize(this._resizeProxy)},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width()),this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this.values(this._values.min,this._values.max)},_setOption:function(e,t){this._setWheelOption(e,t),this._setArrowsOption(e,t),this._setLabelsOption(e,t),this._setLabelsDurations(e,t),this._setFormatterOption(e,t),this._setBoundsOption(e,t),this._setRangeOption(e,t),this._setStepOption(e,t),this._setScalesOption(e,t),this._setEnabledOption(e,t)},_validProperty:function(e,t,n){return null===e||void 0===e[t]?n:e[t]},_setStepOption:function(e,t){"step"===e&&(this.options.step=t,this._leftHandle("option","step",t),this._rightHandle("option","step",t),this._changed(!0))},_setScalesOption:function(e,t){"scales"===e&&(!1===t||null===t?(this.options.scales=!1,this._destroyRuler()):t instanceof Array&&(this.options.scales=t,this._updateRuler()))},_setRangeOption:function(e,t){"range"===e&&(this._bar("option","range",t),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(e,t){"bounds"===e&&void 0!==t.min&&void 0!==t.max&&this.bounds(t.min,t.max)},_setWheelOption:function(e,t){("wheelMode"===e||"wheelSpeed"===e)&&(this._bar("option",e,t),this.options[e]=this._bar("option",e))},_setLabelsOption:function(e,t){if("valueLabels"===e){if("hide"!==t&&"show"!==t&&"change"!==t)return;this.options.valueLabels=t,"hide"!==t?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setFormatterOption:function(e,t){"formatter"===e&&null!==t&&"function"==typeof t&&(this.options.formatter=t,"hide"!==this.options.valueLabels&&(this._destroyLabels(),this._createLabels()))},_setArrowsOption:function(e,t){"arrows"!==e||!0!==t&&!1!==t||t===this.options.arrows||(!0===t?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):!1===t&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(e,t){if("durationIn"===e||"durationOut"===e||"delayOut"===e){if(parseInt(t,10)!==t)return;null!==this.labels.left&&this._leftLabel("option",e,t),null!==this.labels.right&&this._rightLabel("option",e,t),this.options[e]=t}},_setEnabledOption:function(e,t){"enabled"===e&&this.toggle(t)},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative"),this.element.addClass("ui-rangeSlider"),this.container=e("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element),this.innerBar=e("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0),this._createHandles(),this._createBar(),this.container.prepend(this.innerBar),this._createArrows(),"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels(),this._updateRuler(),this.options.enabled||this._toggle(this.options.enabled)},_createHandle:function(t){return e("<div />")[this._handleType()](t).bind("sliderDrag",e.proxy(this._changing,this)).bind("stop",e.proxy(this._changed,this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step}).appendTo(this.container),this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step}).appendTo(this.container)},_createBar:function(){this.bar=e("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",e.proxy(this._changing,this)).bind("stop",e.proxy(this._changed,this)),this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed}),this.options.range=this._bar("option","range"),this.options.wheelMode=this._bar("option","wheelMode"),this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=this._createArrow("left"),this.arrows.right=this._createArrow("right"),this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(t){var n,i=e("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+t+"Arrow").css("position","absolute").css(t,0).appendTo(this.element);return n="right"===t?e.proxy(this._scrollRightClick,this):e.proxy(this._scrollLeftClick,this),i.bind("mousedown touchstart",n),i},_proxy:function(e,t,n){var i=Array.prototype.slice.call(n);return e[t].apply(e,i)},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(e,t){return t===this.rightHandle&&(e-=t.outerWidth()),e*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-t.outerWidth(!0))+this.options.bounds.min},_trigger:function(e){var t=this;setTimeout((function(){t.element.trigger(e,{label:t.element,values:t.values()})}),1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_changed:function(e){(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),!0!==e&&this._trigger("userValuesChanged"),this._valuesChanged=!1)},_updateValues:function(){var e=this._leftHandle("value"),t=this._rightHandle("value"),n=this._min(e,t),i=this._max(e,t),o=n!==this._values.min||i!==this._values.max;return this._values.min=this._min(e,t),this._values.max=this._max(e,t),o},_min:function(e,t){return Math.min(e,t)},_max:function(e,t){return Math.max(e,t)},_createLabel:function(t,n){var i;return null===t?(i=this._getLabelConstructorParameters(t,n),t=e("<div />").appendTo(this.element)[this._labelType()](i)):(i=this._getLabelRefreshParameters(t,n),t[this._labelType()](i)),t},_getLabelConstructorParameters:function(e,t){return{handle:t,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return!1===this.options.formatter||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(e){return Math.round(e)},_destroyLabel:function(e){return null!==e&&(e[this._labelType()]("destroy"),e.remove(),e=null),e},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle),this.labels.right=this._createLabel(this.labels.right,this.rightHandle),this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left),this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(e){return!!this.options.enabled&&(e.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollRight",4*this._stepRatio(),1))},_continueScrolling:function(e,t,n,i){if(!this.options.enabled)return!1;this._bar(e,n),i=i||5,i--;var o=this,a=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout((function(){0===i&&(t>16?t=Math.max(16,t/1.5):n=Math.min(a,2*n),i=5),o._continueScrolling(e,t,n,i)}),t)},_scrollLeftClick:function(e){return!!this.options.enabled&&(e.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollLeft",4*this._stepRatio(),1))},_bindStopScroll:function(){var t=this;this._stopScrollHandle=function(e){e.preventDefault(),t._stopScroll()},e(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){e(document).unbind("mouseup touchend",this._stopScrollHandle),this._stopScrollHandle=null,this._bar("stopScroll"),clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=e("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales})},_destroyRuler:function(){null!==this.ruler&&e.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler(),!1!==this.options.scales&&e.fn.ruler&&(this._createRuler(),this._setRulerParameters())},values:function(e,t){var n=this._bar("values",e,t);return void 0!==e&&void 0!==t&&this._changed(!0),n},min:function(e){return this._values.min=this.values(e,this._values.max).min,this._values.min},max:function(e){return this._values.max=this.values(this._values.min,e).max,this._values.max},bounds:function(e,t){return this._isValidValue(e)&&this._isValidValue(t)&&t>e&&(this._setBounds(e,t),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(e){return void 0!==e&&parseFloat(e)===e},_setBounds:function(e,t){this.options.bounds={min:e,max:t},this._leftHandle("option","bounds",this.options.bounds),this._rightHandle("option","bounds",this.options.bounds),this._bar("option","bounds",this.options.bounds)},zoomIn:function(e){this._bar("zoomIn",e)},zoomOut:function(e){this._bar("zoomOut",e)},scrollLeft:function(e){this._bar("startScroll"),this._bar("scrollLeft",e),this._bar("stopScroll")},scrollRight:function(e){this._bar("startScroll"),this._bar("scrollRight",e),this._bar("stopScroll")},resize:function(){this._initWidth(),this._leftHandle("update"),this._rightHandle("update"),this._bar("update")},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(e){undefined===e&&(e=!this.options.enabled),this.options.enabled!==e&&this._toggle(e)},_toggle:function(e){this.options.enabled=e,this.element.toggleClass("ui-rangeSlider-disabled",!e);var t=e?"enable":"disable";this._bar(t),this._leftHandle(t),this._rightHandle(t),this._leftLabel(t),this._rightLabel(t)},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows ui-rangeSlider-noArrow ui-rangeSlider-disabled"),this._destroyWidgets(),this._destroyElements(),this.element.removeClass("ui-rangeSlider"),this.options=null,e(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this._bindResize=null,e.Widget.prototype.destroy.apply(this,arguments)},_destroyWidget:function(e){this["_"+e]("destroy"),this[e].remove(),this[e]=null},_destroyWidgets:function(){this._destroyWidget("bar"),this._destroyWidget("leftHandle"),this._destroyWidget("rightHandle"),this._destroyRuler(),this._destroyLabels()},_destroyElements:function(){this.container.remove(),this.container=null,this.innerBar.remove(),this.innerBar=null,this.arrows.left.remove(),this.arrows.right.remove(),this.arrows=null}})}(jQuery),function(e){"use strict";e.widget("ui.rangeSliderHandle",e.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){e.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this.element.append("<div class='ui-rangeSlider-handle-inner' />"),this._value=this._constraintValue(this.options.value)},destroy:function(){this.element.empty(),e.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(t,n){"isLeft"!==t||!0!==n&&!1!==n||n===this.options.isLeft?"step"===t&&this._checkStep(n)?(this.options.step=n,this.update()):"bounds"===t?(this.options.bounds=n,this.update()):"range"===t&&this._checkRange(n)&&(this.options.range=n,this.update()):(this.options.isLeft=n,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)),e.ui.rangeSliderDraggable.prototype._setOption.apply(this,[t,n])},_checkRange:function(e){return!1===e||!this._isValidValue(e.min)&&!this._isValidValue(e.max)},_isValidValue:function(e){return void 0!==e&&!1!==e&&parseFloat(e)!==e},_checkStep:function(e){return!1===e||parseFloat(e)===e},_initElement:function(){e.ui.rangeSliderDraggable.prototype._initElement.apply(this),0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(e.proxy(this._initElementIfNotDestroyed,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){e.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheParent()},_cacheParent:function(){var e=this.element.parent();this.cache.parent={element:e,offset:e.offset(),padding:{left:this._parsePixels(e,"paddingLeft")},width:e.width()}},_position:function(e){var t=this._getPositionForValue(e);this._applyPosition(t)},_constraintPosition:function(e){var t=this._getValueForPosition(e);return this._getPositionForValue(t)},_applyPosition:function(t){e.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[t]),this._left=t,this._setValue(this._getValueForPosition(t)),this._triggerMouseEvent("moving")},_prepareEventData:function(){var t=e.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);return t.value=this._value,t},_setValue:function(e){e!==this._value&&(this._value=e)},_constraintValue:function(e){if(e=Math.min(e,this._bounds().max),e=Math.max(e,this._bounds().min),e=this._round(e),!1!==this.options.range){var t=this.options.range.min||!1,n=this.options.range.max||!1;!1!==t&&(e=Math.max(e,this._round(t))),!1!==n&&(e=Math.min(e,this._round(n))),e=Math.min(e,this._bounds().max),e=Math.max(e,this._bounds().min)}return e},_round:function(e){return!1!==this.options.step&&this.options.step>0?Math.round(e/this.options.step)*this.options.step:e},_getPositionForValue:function(e){return this.cache&&this.cache.parent&&null!==this.cache.parent.offset?((e=this._constraintValue(e))-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min)*(this.cache.parent.width-this.cache.width.outer)+this.cache.parent.offset.left:0},_getValueForPosition:function(e){var t=this._getRawValueForPositionAndBounds(e,this.options.bounds.min,this.options.bounds.max);return this._constraintValue(t)},_getRawValueForPositionAndBounds:function(e,t,n){return(e-(null===this.cache.parent.offset?0:this.cache.parent.offset.left))/(this.cache.parent.width-this.cache.width.outer)*(n-t)+t},value:function(e){return void 0!==e&&(this._cache(),e=this._constraintValue(e),this._position(e)),this._value},update:function(){this._cache();var e=this._constraintValue(this._value),t=this._getPositionForValue(e);(e!==this._value||t!==this.cache.offset.left)&&(this._triggerMouseEvent("updating"),this._position(e),this._triggerMouseEvent("update"))},position:function(e){return void 0!==e&&(this._cache(),e=this._constraintPosition(e),this._applyPosition(e)),this._left},add:function(e,t){return e+t},substract:function(e,t){return e-t},stepsBetween:function(e,t){return!1===this.options.step?t-e:(t-e)/this.options.step},multiplyStep:function(e,t){return e*t},moveRight:function(e){var t;return!1===this.options.step?(t=this._left,this.position(this._left+e),this._left-t):(t=this._value,this.value(this.add(t,this.multiplyStep(this.options.step,e))),this.stepsBetween(t,this._value))},moveLeft:function(e){return-this.moveRight(-e)},stepRatio:function(){if(!1===this.options.step)return 1;var e=(this.options.bounds.max-this.options.bounds.min)/this.options.step;return this.cache.parent.width/e}})}(jQuery),function(e){"use strict";e.widget("ui.rangeSliderBar",e.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){e.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar"),this.options.leftHandle.bind("initialize",e.proxy(this._onInitialized,this)).bind("mousestart",e.proxy(this._cache,this)).bind("stop",e.proxy(this._onHandleStop,this)),this.options.rightHandle.bind("initialize",e.proxy(this._onInitialized,this)).bind("mousestart",e.proxy(this._cache,this)).bind("stop",e.proxy(this._onHandleStop,this)),this._bindHandles(),this._values=this.options.values,this._setWheelModeOption(this.options.wheelMode)},destroy:function(){this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this.options=null,e.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(e,t){"range"===e?this._setRangeOption(t):"wheelSpeed"===e?this._setWheelSpeedOption(t):"wheelMode"===e&&this._setWheelModeOption(t)},_setRangeOption:function(e){if(("object"!=typeof e||null===e)&&(e=!1),!1!==e||!1!==this.options.range){if(!1!==e){var t=void 0===e.min?this.options.range.min||!1:e.min,n=void 0===e.max?this.options.range.max||!1:e.max;this.options.range={min:t,max:n}}else this.options.range=!1;this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(e){"number"==typeof e&&e>0&&(this.options.wheelSpeed=e)},_setWheelModeOption:function(e){(null===e||!1===e||"zoom"===e||"scroll"===e)&&(this.options.wheelMode!==e&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(e),this.options.wheelMode=e)},_bindMouseWheel:function(t){"zoom"===t?this.element.parent().bind("mousewheel.bar",e.proxy(this._mouseWheelZoom,this)):"scroll"===t&&this.element.parent().bind("mousewheel.bar",e.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(!1===this.options.range)return!1;var e=this._values.max,t={min:!1,max:!1};t.max=!1!==(this.options.range.min||!1)&&this._leftHandle("substract",e,this.options.range.min),t.min=!1!==(this.options.range.max||!1)&&this._leftHandle("substract",e,this.options.range.max),this._leftHandle("option","range",t)},_setRightRange:function(){var e=this._values.min,t={min:!1,max:!1};t.min=!1!==(this.options.range.min||!1)&&this._rightHandle("add",e,this.options.range.min),t.max=!1!==(this.options.range.max||!1)&&this._rightHandle("add",e,this.options.range.max),this._rightHandle("option","range",t)},_deactivateRange:function(){this._leftHandle("option","range",!1),this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--,0===this._waitingToInit&&this._initMe()},_initMe:function(){this._cache(),this.min(this._values.min),this.max(this._values.max);var e=this._leftHandle("position"),t=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:e}),this.element.css("width",t-e)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(e,t){var n=Array.prototype.slice.call(t);return e[this.options.type].apply(e,n)},_cache:function(){e.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={},this.cache.rightHandle.width=this.options.rightHandle.width(),this.cache.rightHandle.offset=this.options.rightHandle.offset(),this.cache.leftHandle={},this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(t){e.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[t]),this._deactivateRange()},_mouseStop:function(t){e.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[t]),this._cacheHandles(),this._values.min=this._leftHandle("value"),this._values.max=this._rightHandle("value"),this._reactivateRange(),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},_onDragLeftHandle:function(e,t){return this._cacheIfNecessary(),this._switchedValues()?(this._switchHandles(),void this._onDragRightHandle(e,t)):(this._values.min=t.value,this.cache.offset.left=t.offset.left,this.cache.leftHandle.offset=t.offset,void this._positionBar())},_onDragRightHandle:function(e,t){return this._cacheIfNecessary(),this._switchedValues()?(this._switchHandles(),void this._onDragLeftHandle(e,t)):(this._values.max=t.value,this.cache.rightHandle.offset=t.offset,void this._positionBar())},_positionBar:function(){var e=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=e,this.element.css("width",e).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange(),this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var e=this._values.min;return this._values.min=this._values.max,this._values.max=e,!0}return!1},_switchHandles:function(){var e=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle,this.options.rightHandle=e,this._leftHandle("option","isLeft",!0),this._rightHandle("option","isLeft",!1),this._bindHandles(),this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",e.proxy(this._onDragLeftHandle,this)),this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",e.proxy(this._onDragRightHandle,this))},_constraintPosition:function(t){var n,i={};return i.left=e.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[t]),i.left=this._leftHandle("position",i.left),n=this._rightHandle("position",i.left+this.cache.width.outer-this.cache.rightHandle.width),i.width=n-i.left+this.cache.rightHandle.width,i},_applyPosition:function(t){e.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[t.left]),this.element.width(t.width)},_mouseWheelZoom:function(t,n,i,o){var a=this._values.min+(this._values.max-this._values.min)/2,r={},s={};return!1===this.options.range||!1===this.options.range.min?(r.max=a,s.min=a):(r.max=a-this.options.range.min/2,s.min=a+this.options.range.min/2),!1!==this.options.range&&!1!==this.options.range.max&&(r.min=a-this.options.range.max/2,s.max=a+this.options.range.max/2),this._leftHandle("option","range",r),this._rightHandle("option","range",s),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(e.proxy(this._wheelStop,this),200),this.zoomOut(o*this.options.wheelSpeed),!1},_mouseWheelScroll:function(t,n,i,o){return!1===this._wheelTimeout?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(e.proxy(this._wheelStop,this),200),this.scrollLeft(o*this.options.wheelSpeed),!1},_wheelStop:function(){this.stopScroll(),this._wheelTimeout=!1},min:function(e){return this._leftHandle("value",e)},max:function(e){return this._rightHandle("value",e)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange(),this._triggerMouseEvent("stop"),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},scrollLeft:function(e){return 0>(e=e||1)?this.scrollRight(-e):(e=this._leftHandle("moveLeft",e),this._rightHandle("moveLeft",e),this.update(),void this._triggerMouseEvent("scroll"))},scrollRight:function(e){return 0>(e=e||1)?this.scrollLeft(-e):(e=this._rightHandle("moveRight",e),this._leftHandle("moveRight",e),this.update(),void this._triggerMouseEvent("scroll"))},zoomIn:function(e){if(0>(e=e||1))return this.zoomOut(-e);var t=this._rightHandle("moveLeft",e);e>t&&(t/=2,this._rightHandle("moveRight",t)),this._leftHandle("moveRight",t),this.update(),this._triggerMouseEvent("zoom")},zoomOut:function(e){if(0>(e=e||1))return this.zoomIn(-e);var t=this._rightHandle("moveRight",e);e>t&&(t/=2,this._rightHandle("moveLeft",t)),this._leftHandle("moveLeft",t),this.update(),this._triggerMouseEvent("zoom")},values:function(e,t){if(void 0!==e&&void 0!==t){var n=Math.min(e,t),i=Math.max(e,t);this._deactivateRange(),this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this._values.min=this._leftHandle("value",n),this._values.max=this._rightHandle("value",i),this._bindHandles(),this._reactivateRange(),this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min(),this._values.max=this.max(),this._cache(),this._positionBar()}})}(jQuery),function(e){"use strict";function t(t,n,i,o){this.label1=t,this.label2=n,this.type=i,this.options=o,this.handle1=this.label1[this.type]("option","handle"),this.handle2=this.label2[this.type]("option","handle"),this.cache=null,this.left=t,this.right=n,this.moving=!1,this.initialized=!1,this.updating=!1,this.Init=function(){this.BindHandle(this.handle1),this.BindHandle(this.handle2),"show"===this.options.show?(setTimeout(e.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(e.proxy(this.AfterInit,this),1e3),this._resizeProxy=e.proxy(this.onWindowResize,this),e(window).resize(this._resizeProxy)},this.Destroy=function(){this._resizeProxy&&(e(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this.handle1.unbind(".positionner"),this.handle1=null,this.handle2.unbind(".positionner"),this.handle2=null,this.label1=null,this.label2=null,this.left=null,this.right=null),this.cache=null},this.AfterInit=function(){this.initialized=!0},this.Cache=function(){this.label1&&"none"!==this.label1.css("display")&&(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheElement=function(e,t){this.CacheWidth(e,t),this.CacheHeight(e,t),t.offset=e.offset(),t.margin={left:this.ParsePixels("marginLeft",e),right:this.ParsePixels("marginRight",e)},t.border={left:this.ParsePixels("borderLeftWidth",e),right:this.ParsePixels("borderRightWidth",e)}},this.CacheWidth=function(e,t){t.width=e.width(),t.outerWidth=e.outerWidth()},this.CacheHeight=function(e,t){t.outerHeightMargin=e.outerHeight(!0)},this.ParsePixels=function(e,t){return parseInt(t.css(e),10)||0},this.BindHandle=function(t){t.bind("updating.positionner",e.proxy(this.onHandleUpdating,this)),t.bind("update.positionner",e.proxy(this.onHandleUpdated,this)),t.bind("moving.positionner",e.proxy(this.onHandleMoving,this)),t.bind("stop.positionner",e.proxy(this.onHandleStop,this))},this.PositionLabels=function(){if(this.CacheIfNecessary(),null!==this.cache){var e=this.GetRawPosition(this.cache.label1,this.cache.handle1),t=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.ConstraintPositions(e,t),this.PositionLabel(this.label1,e.left,this.cache.label1),this.PositionLabel(this.label2,t.left,this.cache.label2)}},this.PositionLabel=function(e,t,n){var i,o=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;o-t>=0?(e.css("right",""),e.offset({left:t})):(i=o+this.cache.offsetParent.width-(t+n.margin.left+n.outerWidth+n.margin.right),e.css("left",""),e.css("right",i))},this.ConstraintPositions=function(e,t){e.center<t.center&&e.outerRight>t.outerLeft?(e=this.getLeftPosition(e,t),t=this.getRightPosition(e,t)):e.center>t.center&&t.outerRight>e.outerLeft&&(t=this.getLeftPosition(t,e),e=this.getRightPosition(t,e))},this.getLeftPosition=function(e,t){var n=(t.center+e.center)/2-e.cache.outerWidth-e.cache.margin.right+e.cache.border.left;return e.left=n,e},this.getRightPosition=function(e,t){var n=(t.center+e.center)/2;return t.left=n+t.cache.margin.left+t.cache.border.left,t},this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)},this.HideIfNeeded=function(){!0===this.moving&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1)},this.onHandleMoving=function(e,t){this.ShowIfNecessary(),this.CacheIfNecessary(),this.UpdateHandlePosition(t),this.PositionLabels()},this.onHandleUpdating=function(){this.updating=!0},this.onHandleUpdated=function(){this.updating=!1,this.cache=null},this.onHandleStop=function(){this.HideIfNeeded()},this.onWindowResize=function(){this.cache=null},this.UpdateHandlePosition=function(e){null!==this.cache&&(e.element[0]===this.handle1[0]?this.UpdatePosition(e,this.cache.handle1):this.UpdatePosition(e,this.cache.handle2))},this.UpdatePosition=function(e,t){t.offset=e.offset},this.GetRawPosition=function(e,t){var n=t.offset.left+t.outerWidth/2,i=n-e.outerWidth/2,o=i+e.outerWidth-e.border.left-e.border.right,a=i-e.margin.left-e.border.left;return{left:i,outerLeft:a,top:t.offset.top-e.outerHeightMargin,right:o,outerRight:a+e.outerWidth+e.margin.left+e.margin.right,cache:e,center:n}},this.Init()}e.widget("ui.rangeSliderLabel",e.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_create:function(){this.options.isLeft=this._handle("option","isLeft"),this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block"),this._createElements(),this._toggleClass(),this.options.handle.bind("moving.label",e.proxy(this._onMoving,this)).bind("update.label",e.proxy(this._onUpdate,this)).bind("switch.label",e.proxy(this._onSwitch,this)),"show"!==this.options.show&&this.element.hide(),this._mouseInit()},destroy:function(){this.options.handle.unbind(".label"),this.options.handle=null,this._valueContainer=null,this._innerElement=null,this.element.empty(),this._positionner&&(this._positionner.Destroy(),this._positionner=null),e.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_createElements:function(){this._valueContainer=e("<div class='ui-rangeSlider-label-value' />").appendTo(this.element),this._innerElement=e("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){var e=Array.prototype.slice.apply(arguments);return this.options.handle[this.options.handleType].apply(this.options.handle,e)},_setOption:function(e,t){"show"===e?this._updateShowOption(t):("durationIn"===e||"durationOut"===e||"delayOut"===e)&&this._updateDurations(e,t)},_updateShowOption:function(e){this.options.show=e,"show"!==this.options.show?this.element.hide():(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels()),this._positionner.options.show=this.options.show},_updateDurations:function(e,t){parseInt(t,10)===t&&(this._positionner.options[e]=t,this.options[e]=t)},_display:function(e){!1===this.options.formatter?this._displayText(Math.round(e)):this._displayText(this.options.formatter(e))},_displayText:function(e){this._valueContainer.text(e)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_mouseDown:function(e){this.options.handle.trigger(e)},_mouseUp:function(e){this.options.handle.trigger(e)},_mouseMove:function(e){this.options.handle.trigger(e)},_onMoving:function(e,t){this._display(t.value)},_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(e,t){this.options.isLeft=t,this._toggleClass(),this._positionner.PositionLabels()},pair:function(e){null===this._positionner&&(this._positionner=new t(this.element,e,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),e[this.widgetName]("positionner",this._positionner))},positionner:function(e){return void 0!==e&&(this._positionner=e),this._positionner},update:function(){this._positionner.cache=null,this._display(this._handle("value")),"show"===this.options.show&&this._positionner.PositionLabels()}})}(jQuery),function(e){"use strict";e.widget("ui.dateRangeSlider",e.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1).valueOf(),max:new Date(2012,0,1).valueOf()},defaultValues:{min:new Date(2010,1,11).valueOf(),max:new Date(2011,1,11).valueOf()}},_create:function(){e.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-dateRangeSlider")},destroy:function(){this.element.removeClass("ui-dateRangeSlider"),e.ui.rangeSlider.prototype.destroy.apply(this)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min.valueOf(),max:this.options.defaultValues.max.valueOf()}},_setRulerParameters:function(){this.ruler.ruler({min:new Date(this.options.bounds.min),max:new Date(this.options.bounds.max),scales:this.options.scales})},_setOption:function(t,n){("defaultValues"===t||"bounds"===t)&&null!=n&&this._isValidDate(n.min)&&this._isValidDate(n.max)?e.ui.rangeSlider.prototype._setOption.apply(this,[t,{min:n.min.valueOf(),max:n.max.valueOf()}]):e.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments))},_handleType:function(){return"dateRangeSliderHandle"},option:function(t){if("bounds"===t||"defaultValues"===t){var n=e.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(n.min),max:new Date(n.max)}}return e.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments))},_defaultFormatter:function(e){var t=e.getMonth()+1,n=e.getDate();return e.getFullYear()+"-"+(10>t?"0"+t:t)+"-"+(10>n?"0"+n:n)},_getFormatter:function(){var e=this.options.formatter;return(!1===this.options.formatter||null===this.options.formatter)&&(e=this._defaultFormatter),function(e){return function(t){return e(new Date(t))}}(e)},values:function(t,n){var i;return i=this._isValidDate(t)&&this._isValidDate(n)?e.ui.rangeSlider.prototype.values.apply(this,[t.valueOf(),n.valueOf()]):e.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments)),{min:new Date(i.min),max:new Date(i.max)}},min:function(t){return this._isValidDate(t)?new Date(e.ui.rangeSlider.prototype.min.apply(this,[t.valueOf()])):new Date(e.ui.rangeSlider.prototype.min.apply(this))},max:function(t){return this._isValidDate(t)?new Date(e.ui.rangeSlider.prototype.max.apply(this,[t.valueOf()])):new Date(e.ui.rangeSlider.prototype.max.apply(this))},bounds:function(t,n){var i;return i=this._isValidDate(t)&&this._isValidDate(n)?e.ui.rangeSlider.prototype.bounds.apply(this,[t.valueOf(),n.valueOf()]):e.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments)),{min:new Date(i.min),max:new Date(i.max)}},_isValidDate:function(e){return void 0!==e&&e instanceof Date},_toArray:function(e){return Array.prototype.slice.call(e)}})}(jQuery),function(e){"use strict";e.widget("ui.dateRangeSliderHandle",e.ui.rangeSliderHandle,{_steps:!1,_boundsValues:{},_create:function(){this._createBoundsValues(),e.ui.rangeSliderHandle.prototype._create.apply(this)},_getValueForPosition:function(e){var t=this._getRawValueForPositionAndBounds(e,this.options.bounds.min.valueOf(),this.options.bounds.max.valueOf());return this._constraintValue(new Date(t))},_setOption:function(t,n){return"step"===t?(this.options.step=n,this._createSteps(),void this.update()):(e.ui.rangeSliderHandle.prototype._setOption.apply(this,[t,n]),void("bounds"===t&&this._createBoundsValues()))},_createBoundsValues:function(){this._boundsValues={min:this.options.bounds.min.valueOf(),max:this.options.bounds.max.valueOf()}},_bounds:function(){return this._boundsValues},_createSteps:function(){if(!1!==this.options.step&&this._isValidStep()){var e=new Date(this.options.bounds.min),t=new Date(this.options.bounds.max),n=e,i=0;for(this._steps=[];t>=n;)this._steps.push(n.valueOf()),n=this._addStep(e,i,this.options.step),i++}else this._steps=!1},_isValidStep:function(){return"object"==typeof this.options.step},_addStep:function(e,t,n){var i=new Date(e.valueOf());return i=this._addThing(i,"FullYear",t,n.years),i=this._addThing(i,"Month",t,n.months),i=this._addThing(i,"Date",t,n.days),i=this._addThing(i,"Hours",t,n.hours),i=this._addThing(i,"Minutes",t,n.minutes),this._addThing(i,"Seconds",t,n.seconds)},_addThing:function(e,t,n,i){return 0===n||0===(i||0)||e["set"+t](e["get"+t]()+n*(i||0)),e},_round:function(e){if(!1===this._steps)return e;for(var t,n,i=this.options.bounds.max.valueOf(),o=this.options.bounds.min.valueOf(),a=Math.max(0,(e-o)/(i-o)),r=Math.floor(this._steps.length*a);this._steps[r]>e;)r--;for(;r+1<this._steps.length&&this._steps[r+1]<=e;)r++;return r>=this._steps.length-1?this._steps[this._steps.length-1]:0===r?this._steps[0]:(t=this._steps[r],(n=this._steps[r+1])-e>e-t?t:n)},update:function(){this._createBoundsValues(),this._createSteps(),e.ui.rangeSliderHandle.prototype.update.apply(this)},add:function(e,t){return this._addStep(new Date(e),1,t).valueOf()},substract:function(e,t){return this._addStep(new Date(e),-1,t).valueOf()},stepsBetween:function(e,t){if(!1===this.options.step)return t-e;var n=Math.min(e,t),i=Math.max(e,t),o=0,a=!1,r=e>t;for(this.add(n,this.options.step)-n<0&&(a=!0);i>n;)a?i=this.add(i,this.options.step):n=this.add(n,this.options.step),o++;return r?-o:o},multiplyStep:function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]*t);return n},stepRatio:function(){if(!1===this.options.step)return 1;var e=this._steps.length;return this.cache.parent.width/e}})}(jQuery),function(e){"use strict";e.widget("ui.editRangeSlider",e.ui.rangeSlider,{options:{type:"text",round:1},_create:function(){e.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-editRangeSlider")},destroy:function(){this.element.removeClass("ui-editRangeSlider"),e.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(t,n){("type"===t||"step"===t)&&this._setLabelOption(t,n),"type"===t&&(this.options[t]=null===this.labels.left?n:this._leftLabel("option",t)),e.ui.rangeSlider.prototype._setOption.apply(this,[t,n])},_setLabelOption:function(e,t){null!==this.labels.left&&(this._leftLabel("option",e,t),this._rightLabel("option",e,t))},_labelType:function(){return"editRangeSliderLabel"},_createLabel:function(t,n){var i=e.ui.rangeSlider.prototype._createLabel.apply(this,[t,n]);return null===t&&i.bind("valueChange",e.proxy(this._onValueChange,this)),i},_addPropertiesToParameter:function(e){return e.type=this.options.type,e.step=this.options.step,e.id=this.element.attr("id"),e},_getLabelConstructorParameters:function(t,n){var i=e.ui.rangeSlider.prototype._getLabelConstructorParameters.apply(this,[t,n]);return this._addPropertiesToParameter(i)},_getLabelRefreshParameters:function(t,n){var i=e.ui.rangeSlider.prototype._getLabelRefreshParameters.apply(this,[t,n]);return this._addPropertiesToParameter(i)},_onValueChange:function(e,t){t.isLeft?this.min(t.value):this.max(t.value)}})}(jQuery),function(e){"use strict";e.widget("ui.editRangeSliderLabel",e.ui.rangeSliderLabel,{options:{type:"text",step:!1,id:""},_input:null,_text:"",_create:function(){e.ui.rangeSliderLabel.prototype._create.apply(this),this._createInput()},_setOption:function(t,n){"type"===t?this._setTypeOption(n):"step"===t&&this._setStepOption(n),e.ui.rangeSliderLabel.prototype._setOption.apply(this,[t,n])},_createInput:function(){this._input=e("<input type='"+this.options.type+"' />").addClass("ui-editRangeSlider-inputValue").appendTo(this._valueContainer),this._setInputName(),this._input.bind("keyup",e.proxy(this._onKeyUp,this)),this._input.blur(e.proxy(this._onChange,this)),"number"===this.options.type&&(!1!==this.options.step&&this._input.attr("step",this.options.step),this._input.click(e.proxy(this._onChange,this))),this._input.val(this._text)},_setInputName:function(){var e=this.options.isLeft?"left":"right";this._input.attr("name",this.options.id+e)},_onSwitch:function(t,n){e.ui.rangeSliderLabel.prototype._onSwitch.apply(this,[t,n]),this._setInputName()},_destroyInput:function(){this._input.remove(),this._input=null},_onKeyUp:function(e){return 13===e.which?(this._onChange(e),!1):void 0},_onChange:function(){var e=this._returnCheckedValue(this._input.val());!1!==e&&this._triggerValue(e)},_triggerValue:function(e){var t=this.options.handle[this.options.handleType]("option","isLeft");this.element.trigger("valueChange",[{isLeft:t,value:e}])},_returnCheckedValue:function(e){var t=parseFloat(e);return!isNaN(t)&&t.toString()===e&&t},_setTypeOption:function(e){"text"!==e&&"number"!==e||this.options.type===e||(this._destroyInput(),this.options.type=e,this._createInput())},_setStepOption:function(e){this.options.step=e,"number"===this.options.type&&this._input.attr("step",!1!==e?e:"any")},_displayText:function(e){this._input.val(e),this._text=e},enable:function(){e.ui.rangeSliderLabel.prototype.enable.apply(this),this._input.attr("disabled",null)},disable:function(){e.ui.rangeSliderLabel.prototype.disable.apply(this),this._input.attr("disabled","disabled")}})}(jQuery),function(e){"use strict";var t={first:function(e){return e},next:function(e){return e+1},format:function(){},label:function(e){return Math.round(e)},stop:function(){return!1}};e.widget("ui.ruler",{options:{min:0,max:100,scales:[]},_create:function(){this.element.addClass("ui-ruler"),this._createScales()},destroy:function(){this.element.removeClass("ui-ruler"),this.element.empty()},_regenerate:function(){this.element.empty(),this._createScales()},_setOption:function(e,t){return"min"===e||"max"===e&&t!==this.options[e]?(this.options[e]=t,void this._regenerate()):"scales"===e&&t instanceof Array?(this.options.scales=t,void this._regenerate()):void 0},_createScales:function(){if(this.options.max!==this.options.min)for(var e=0;e<this.options.scales.length;e++)this._createScale(this.options.scales[e],e)},_createScale:function(n,i){var o=e.extend({},t,n),a=e("<div class='ui-ruler-scale' />").appendTo(this.element);a.addClass("ui-ruler-scale"+i),this._createTicks(a,o)},_createTicks:function(e,t){var n,i,o,a=t.first(this.options.min,this.options.max),r=this.options.max-this.options.min,s=!0;do{n=a,a=t.next(n),i=(Math.min(a,this.options.max)-Math.max(n,this.options.min))/r,o=this._createTick(n,a,t),e.append(o),o.css("width",100*i+"%"),s&&n>this.options.min&&o.css("margin-left",100*(n-this.options.min)/r+"%"),s=!1}while(!this._stop(t,a))},_stop:function(e,t){return e.stop(t)||t>=this.options.max},_createTick:function(t,n,i){var o=e("<div class='ui-ruler-tick' style='display:inline-block' />"),a=e("<div class='ui-ruler-tick-inner' />").appendTo(o);return e("<span class='ui-ruler-tick-label' />").appendTo(a).text(i.label(t,n)),i.format(o,t,n),o}})}(jQuery)}function footableJQuery(){!function(e,t){function n(){var e=this;e.id=null,e.busy=!1,e.start=function(t,n){e.busy||(e.stop(),e.id=setTimeout((function(){t(),e.id=null,e.busy=!1}),n),e.busy=!0)},e.stop=function(){null!==e.id&&(clearTimeout(e.id),e.id=null,e.busy=!1)}}function i(i,o,a){var r=this;r.id=a,r.table=i,r.options=o,r.breakpoints=[],r.breakpointNames="",r.columns={},r.plugins=t.footable.plugins.load(r);var s=r.options,l=s.classes,c=s.events,d=s.triggers,u=0;return r.timers={resize:new n,register:function(e){return r.timers[e]=new n,r.timers[e]}},r.init=function(){var n=e(t),i=e(r.table);if(t.footable.plugins.init(r),i.hasClass(l.loaded))r.raise(c.alreadyInitialized);else{for(var o in r.raise(c.initializing),i.addClass(l.loading),i.find(s.columnDataSelector).each((function(){var e=r.getColumnData(this);r.columns[e.index]=e})),s.breakpoints)r.breakpoints.push({name:o,width:s.breakpoints[o]}),r.breakpointNames+=o+" ";r.breakpoints.sort((function(e,t){return e.width-t.width})),i.bind(d.initialize,(function(){i.removeData("footable_info"),i.data("breakpoint",""),i.trigger(d.resize),i.removeClass(l.loading),i.addClass(l.loaded).addClass(l.main),r.raise(c.initialized)})).bind(d.redraw,(function(){r.redraw()})).bind(d.resize,(function(){r.resize()})).bind(d.expandFirstRow,(function(){i.find(s.toggleSelector).first().not("."+l.detailShow).trigger(d.toggleRow)})),i.trigger(d.initialize),n.bind("resize.footable",(function(){r.timers.resize.stop(),r.timers.resize.start((function(){r.raise(d.resize)}),s.delay)}))}},r.addRowToggle=function(){if(s.addRowToggle){var t=e(r.table),n=!1;for(var i in t.find("span."+l.toggle).remove(),r.columns){var o=r.columns[i];if(o.toggle){n=!0;var a="> tbody > tr:not(."+l.detail+",."+l.disabled+") > td:nth-child("+(parseInt(o.index,10)+1)+")";return void t.find(a).not("."+l.detailCell).prepend(e("<span />").addClass(l.toggle))}}n||t.find("> tbody > tr:not(."+l.detail+",."+l.disabled+") > td:first-child").not("."+l.detailCell).prepend(e("<span />").addClass(l.toggle))}},r.setColumnClasses=function(){for(var t in $table=e(r.table),r.columns){var n=r.columns[t];if(null!==n.className){var i="",o=!0;e.each(n.matches,(function(e,t){o||(i+=", "),i+="> tbody > tr:not(."+l.detail+") > td:nth-child("+(parseInt(t,10)+1)+")",o=!1})),$table.find(i).not("."+l.detailCell).addClass(n.className)}}},r.bindToggleSelectors=function(){var t=e(r.table);r.hasAnyBreakpointColumn()&&(t.find(s.toggleSelector).unbind(d.toggleRow).bind(d.toggleRow,(function(){var t=e(this).is("tr")?e(this):e(this).parents("tr:first");r.toggleDetail(t.get(0))})),t.find(s.toggleSelector).unbind("click.footable").bind("click.footable",(function(n){t.is(".breakpoint")&&e(n.target).is("td,."+l.toggle)&&e(this).trigger(d.toggleRow)})))},r.parse=function(e,t){return(s.parsers[t.type]||s.parsers.alpha)(e)},r.getColumnData=function(t){var n=e(t),i=n.data("hide"),o=n.index();i=i||"",i=jQuery.map(i.split(","),(function(e){return jQuery.trim(e)}));var a={index:o,hide:{},type:n.data("type")||"alpha",name:n.data("name")||e.trim(n.text()),ignore:n.data("ignore")||!1,toggle:n.data("toggle")||!1,className:n.data("class")||null,matches:[],names:{},group:n.data("group")||null,groupName:null};if(null!==a.group){var l=e(r.table).find('> thead > tr.footable-group-row > th[data-group="'+a.group+'"], > thead > tr.footable-group-row > td[data-group="'+a.group+'"]').first();a.groupName=r.parse(l,{type:"alpha"})}var d=parseInt(n.prev().attr("colspan")||0,10);u+=d>1?d-1:0;var h=parseInt(n.attr("colspan")||0,10),p=a.index+u;if(h>1){var f=n.data("names");f=(f=f||"").split(",");for(var m=0;h>m;m++)a.matches.push(m+p),f.length>m&&(a.names[m+p]=f[m])}else a.matches.push(p);a.hide.default="all"===n.data("hide")||e.inArray("default",i)>=0;var g=!1;for(var v in s.breakpoints)a.hide[v]="all"===n.data("hide")||e.inArray(v,i)>=0,g=g||a.hide[v];return a.hasBreakpoint=g,r.raise(c.columnData,{column:{data:a,th:t}}).column.data},r.getViewportWidth=function(){return window.innerWidth||(document.body?document.body.offsetWidth:0)},r.calculateWidth=function(e,t){return jQuery.isFunction(s.calculateWidthOverride)?s.calculateWidthOverride(e,t):(t.viewportWidth<t.width&&(t.width=t.viewportWidth),t.parentWidth<t.width&&(t.width=t.parentWidth),t)},r.hasBreakpointColumn=function(e){for(var t in r.columns)if(r.columns[t].hide[e]){if(r.columns[t].ignore)continue;return!0}return!1},r.hasAnyBreakpointColumn=function(){for(var e in r.columns)if(r.columns[e].hasBreakpoint)return!0;return!1},r.resize=function(){var t=e(r.table);if(t.is(":visible")&&r.hasAnyBreakpointColumn()){var n={width:t.width(),viewportWidth:r.getViewportWidth(),parentWidth:t.parent().width()};n=r.calculateWidth(t,n);var i=t.data("footable_info");if(t.data("footable_info",n),r.raise(c.resizing,{old:i,info:n}),!i||i&&i.width&&i.width!==n.width){for(var o,a=null,s=0;r.breakpoints.length>s;s++)if((o=r.breakpoints[s])&&o.width&&n.width<=o.width){a=o;break}var l=null===a?"default":a.name,u=r.hasBreakpointColumn(l),h=t.data("breakpoint");t.data("breakpoint",l).removeClass("default breakpoint").removeClass(r.breakpointNames).addClass(l+(u?" breakpoint":"")),l!==h&&(t.trigger(d.redraw),r.raise(c.breakpoint,{breakpoint:l,info:n}))}r.raise(c.resized,{old:i,info:n})}},r.redraw=function(){r.addRowToggle(),r.bindToggleSelectors(),r.setColumnClasses();var t=e(r.table),n=t.data("breakpoint"),i=r.hasBreakpointColumn(n);t.find("> tbody > tr:not(."+l.detail+")").data("detail_created",!1).end().find("> thead > tr:last-child > th").each((function(){var i=r.columns[e(this).index()],o="",a=!0;e.each(i.matches,(function(e,t){a||(o+=", ");var n=t+1;o+="> tbody > tr:not(."+l.detail+") > td:nth-child("+n+")",o+=", > tfoot > tr:not(."+l.detail+") > td:nth-child("+n+")",o+=", > colgroup > col:nth-child("+n+")",a=!1})),o+=', > thead > tr[data-group-row="true"] > th[data-group="'+i.group+'"]';var s=t.find(o).add(this);if(!1===i.hide[n]?s.show():s.hide(),1===t.find("> thead > tr.footable-group-row").length){var c=t.find('> thead > tr:last-child > th[data-group="'+i.group+'"]:visible, > thead > tr:last-child > th[data-group="'+i.group+'"]:visible'),d=t.find('> thead > tr.footable-group-row > th[data-group="'+i.group+'"], > thead > tr.footable-group-row > td[data-group="'+i.group+'"]'),u=0;e.each(c,(function(){u+=parseInt(e(this).attr("colspan")||1,10)})),u>0?d.attr("colspan",u).show():d.hide()}})).end().find("> tbody > tr."+l.detailShow).each((function(){r.createOrUpdateDetailRow(this)})),t.find("> tbody > tr."+l.detailShow+":visible").each((function(){var t=e(this).next();t.hasClass(l.detail)&&(i?t.show():t.hide())})),t.find("> thead > tr > th.footable-last-column, > tbody > tr > td.footable-last-column").removeClass("footable-last-column"),t.find("> thead > tr > th.footable-first-column, > tbody > tr > td.footable-first-column").removeClass("footable-first-column"),t.find("> thead > tr, > tbody > tr").find("> th:visible:last, > td:visible:last").addClass("footable-last-column").end().find("> th:visible:first, > td:visible:first").addClass("footable-first-column"),r.raise(c.redrawn)},r.toggleDetail=function(t){var n=t.jquery?t:e(t),i=n.next();n.hasClass(l.detailShow)?(n.removeClass(l.detailShow),i.hasClass(l.detail)&&i.hide(),r.raise(c.rowCollapsed,{row:n[0]})):(r.createOrUpdateDetailRow(n[0]),n.addClass(l.detailShow),n.next().show(),r.raise(c.rowExpanded,{row:n[0]}))},r.removeRow=function(t){var n=t.jquery?t:e(t);n.hasClass(l.detail)&&(n=n.prev());var i=n.next();!0===n.data("detail_created")&&i.remove(),n.remove(),r.raise(c.rowRemoved)},r.appendRow=function(t){var n=t.jquery?t:e(t);e(r.table).find("tbody").append(n),r.redraw()},r.getColumnFromTdIndex=function(t){var n=null;for(var i in r.columns)if(e.inArray(t,r.columns[i].matches)>=0){n=r.columns[i];break}return n},r.createOrUpdateDetailRow=function(t){var n,i=e(t),o=i.next(),a=[];if(!0===i.data("detail_created"))return!0;if(i.is(":hidden"))return!1;if(r.raise(c.rowDetailUpdating,{row:i,detail:o}),i.find("> td:hidden").each((function(){var t=e(this).index(),n=r.getColumnFromTdIndex(t),i=n.name;return!0===n.ignore||(t in n.names&&(i=n.names[t]),a.push({name:i,value:r.parse(this,n),display:e.trim(e(this).html()),group:n.group,groupName:n.groupName})),!0})),0===a.length)return!1;var d=i.find("> td:visible").length,u=o.hasClass(l.detail);return u||(o=e('<tr class="'+l.detail+'"><td class="'+l.detailCell+'"><div class="'+l.detailInner+'"></div></td></tr>'),i.after(o)),o.find("> td:first").attr("colspan",d),n=o.find("."+l.detailInner).empty(),s.createDetail(n,a,s.createGroupedDetail,s.detailSeparator,l),i.data("detail_created",!0),r.raise(c.rowDetailUpdated,{row:i,detail:o}),!u},r.raise=function(t,n){!0===r.options.debug&&e.isFunction(r.options.log)&&r.options.log(t,"event"),n=n||{};var i={ft:r};e.extend(!0,i,n);var o=e.Event(t,i);return o.ft||e.extend(!0,o,i),e(r.table).trigger(o),o},r.init(),r}t.footable={options:{delay:100,breakpoints:{phone:480,tablet:1024},parsers:{alpha:function(t){return e(t).data("value")||e.trim(e(t).text())},numeric:function(t){var n=e(t).data("value")||e(t).text().replace(/[^0-9.\-]/g,"");return n=parseFloat(n),isNaN(n)&&(n=0),n}},addRowToggle:!0,calculateWidthOverride:null,toggleSelector:" > tbody > tr:not(.footable-row-detail)",columnDataSelector:"> thead > tr:last-child > th, > thead > tr:last-child > td",detailSeparator:":",createGroupedDetail:function(e){for(var t={_none:{name:null,data:[]}},n=0;e.length>n;n++){var i=e[n].group;null!==i?(i in t||(t[i]={name:e[n].groupName||e[n].group,data:[]}),t[i].data.push(e[n])):t._none.data.push(e[n])}return t},createDetail:function(e,t,n,i,o){var a=n(t);for(var r in a)if(0!==a[r].data.length){"_none"!==r&&e.append('<div class="'+o.detailInnerGroup+'">'+a[r].name+"</div>");for(var s=0;a[r].data.length>s;s++){var l=a[r].data[s].name?i:"";e.append('<div class="'+o.detailInnerRow+'"><div class="'+o.detailInnerName+'">'+a[r].data[s].name+l+'</div><div class="'+o.detailInnerValue+'">'+a[r].data[s].display+"</div></div>")}}},classes:{main:"footable",loading:"footable-loading",loaded:"footable-loaded",toggle:"footable-toggle",disabled:"footable-disabled",detail:"footable-row-detail",detailCell:"footable-row-detail-cell",detailInner:"footable-row-detail-inner",detailInnerRow:"footable-row-detail-row",detailInnerGroup:"footable-row-detail-group",detailInnerName:"footable-row-detail-name",detailInnerValue:"footable-row-detail-value",detailShow:"footable-detail-show"},triggers:{initialize:"footable_initialize",resize:"footable_resize",redraw:"footable_redraw",toggleRow:"footable_toggle_row",expandFirstRow:"footable_expand_first_row"},events:{alreadyInitialized:"footable_already_initialized",initializing:"footable_initializing",initialized:"footable_initialized",resizing:"footable_resizing",resized:"footable_resized",redrawn:"footable_redrawn",breakpoint:"footable_breakpoint",columnData:"footable_column_data",rowDetailUpdating:"footable_row_detail_updating",rowDetailUpdated:"footable_row_detail_updated",rowCollapsed:"footable_row_collapsed",rowExpanded:"footable_row_expanded",rowRemoved:"footable_row_removed"},debug:!1,log:null},version:{major:0,minor:5,toString:function(){return t.footable.version.major+"."+t.footable.version.minor},parse:function(e){return version=/(\d+)\.?(\d+)?\.?(\d+)?/.exec(e),{major:parseInt(version[1],10)||0,minor:parseInt(version[2],10)||0,patch:parseInt(version[3],10)||0}}},plugins:{_validate:function(n){if(!e.isFunction(n))return!0===t.footable.options.debug&&console.error('Validation failed, expected type "function", received type "{0}".',typeof n),!1;var i=new n;return"string"!=typeof i.name?(!0===t.footable.options.debug&&console.error('Validation failed, plugin does not implement a string property called "name".',i),!1):e.isFunction(i.init)?(!0===t.footable.options.debug&&console.log('Validation succeeded for plugin "'+i.name+'".',i),!0):(!0===t.footable.options.debug&&console.error('Validation failed, plugin "'+i.name+'" does not implement a function called "init".',i),!1)},registered:[],register:function(n,i){t.footable.plugins._validate(n)&&(t.footable.plugins.registered.push(n),"object"==typeof i&&e.extend(!0,t.footable.options,i))},load:function(e){var n,i,o=[];for(i=0;t.footable.plugins.registered.length>i;i++)try{n=t.footable.plugins.registered[i],o.push(new n(e))}catch(e){!0===t.footable.options.debug&&console.error(e)}return o},init:function(e){for(var n=0;e.plugins.length>n;n++)try{e.plugins[n].init(e)}catch(e){!0===t.footable.options.debug&&console.error(e)}}}};var o=0;e.fn.footable=function(n){n=n||{};var a=e.extend(!0,{},t.footable.options,n);return this.each((function(){o++;var t=new i(this,a,o);e(this).data("footable",t)}))}}(jQuery,window)}function animationsInit(){$(".panel-3d").find(".front .btn").on("click",(function(){$(this).closest(".panel-3d").addClass("panel-flip")})).end().find(".back .btn").on("click",(function(){$(this).closest(".panel-3d").removeClass("panel-flip")})),Modernizr.touch?$(".panel-3d").css("visibility","visible").find('[class*="icon-"]').css("visibility","visible"):$("html.csstransitions.csstransforms3d").length&&$(".panel-3d").addClass("flip-default").each((function(e){var t=$(this);setTimeout((function(){t.css("visibility","visible").addClass("animated fadeInLeft")}),300*(e+1)),setTimeout((function(){t.removeClass("flip-default fadeInLeft"),setTimeout((function(){t.find('[class*="icon-"]').css("visibility","visible").addClass("animated fadeInDown")}),200*(e+1))}),800*(e+1))}))}function holderInit(){var e=e||{};!function(e,t){var n=!1,o=!1,a=document.createElement("canvas");function r(e){e=e.match(/^(\W)?(.*)/);var t=document["getElement"+(e[1]?"#"==e[1]?"ById":"sByClassName":"sByTagName")](e[2]),n=[];return null!=t&&(n=t.length||0==t.length?t:[t]),n}function s(e,t){var n={};for(var i in e)n[i]=e[i];for(var o in t)n[o]=t[o];return n}function l(e,t,n,i){var o=function(e,t,n){var i=[t,e].sort(),o=Math.round(i[1]/16);return Math.round(i[0]/16),{height:Math.max(n.size,o)}}(t.width,t.height,n),r=o.height,s=t.width*i,l=t.height*i,c=n.font?n.font:"sans-serif";a.width=s,a.height=l,e.textAlign="center",e.textBaseline="middle",e.fillStyle=n.background,e.fillRect(0,0,s,l),e.fillStyle=n.foreground,e.font="bold "+r+"px "+c;var d=n.text?n.text:t.width+"x"+t.height;return e.measureText(d).width/s>1&&(r=n.size/(e.measureText(d).width/s)),e.font="bold "+r*i+"px "+c,e.fillText(d,s/2,l/2,s),a.toDataURL("image/png")}function c(e,t,n,i){var a=n.dimensions,r=n.theme,c=n.text?decodeURIComponent(n.text):n.text,d=a.width+"x"+a.height;r=c?s(r,{text:c}):r,r=n.font?s(r,{font:n.font}):r,"image"==e?(t.setAttribute("data-src",i),t.setAttribute("alt",c||(r.text?r.text+" ["+d+"]":d)),!o&&n.auto||(t.style.width=a.width+"px",t.style.height=a.height+"px"),o?t.style.backgroundColor=r.background:t.setAttribute("src",l(p,a,r,g))):o||(t.style.backgroundImage="url("+l(p,a,r,g)+")",t.style.backgroundSize=a.width+"px "+a.height+"px")}function d(e,t,n){var i=t.dimensions,o=t.theme,a=t.text,r=i.width+"x"+i.height;o=a?s(o,{text:a}):o;var l=document.createElement("div");e.fluidRef&&(l=e.fluidRef),l.style.backgroundColor=o.background,l.style.color=o.foreground,l.className=e.className+" holderjs-fluid",l.style.width=t.dimensions.width+(t.dimensions.width.indexOf("%")>0?"":"px"),l.style.height=t.dimensions.height+(t.dimensions.height.indexOf("%")>0?"":"px"),l.id=e.id,e.style.width=0,e.style.height=0,e.fluidRef||(o.text?l.appendChild(document.createTextNode(o.text)):(l.appendChild(document.createTextNode(r)),v.push(l),setTimeout(u,0))),e.fluidRef=l,e.parentNode.insertBefore(l,e.nextSibling),window.jQuery&&jQuery((function(t){t(e).on("load",(function(){e.style.width=l.style.width,e.style.height=l.style.height,t(e).show(),t(l).remove()}))}))}function u(){for(i in v)if(v.hasOwnProperty(i)){var e=v[i],t=e.firstChild;e.style.lineHeight=e.offsetHeight+"px",t.data=e.offsetWidth+"x"+e.offsetHeight}}function h(t,n){var i={theme:b.themes.gray},o=!1;for(sl=t.length,j=0;j<sl;j++){var a=t[j];e.flags.dimensions.match(a)?(o=!0,i.dimensions=e.flags.dimensions.output(a)):e.flags.fluid.match(a)?(o=!0,i.dimensions=e.flags.fluid.output(a),i.fluid=!0):e.flags.colors.match(a)?i.theme=e.flags.colors.output(a):n.themes[a]?i.theme=n.themes[a]:e.flags.text.match(a)?i.text=e.flags.text.output(a):e.flags.font.match(a)?i.font=e.flags.font.output(a):e.flags.auto.match(a)&&(i.auto=!0)}return!!o&&i}if(document.getElementsByClassName||(document.getElementsByClassName=function(e){var t,n,i,o=document,a=[];if(o.querySelectorAll)return o.querySelectorAll("."+e);if(o.evaluate)for(n=".//*[contains(concat(' ', @class, ' '), ' "+e+" ')]",t=o.evaluate(n,o,null,0,null);i=t.iterateNext();)a.push(i);else for(t=o.getElementsByTagName("*"),n=new RegExp("(^|\\s)"+e+"(\\s|$)"),i=0;i<t.length;i++)n.test(t[i].className)&&a.push(t[i]);return a}),window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,(function(){return arguments[2].toUpperCase()}))),e.currentStyle[t]?e.currentStyle[t]:null},this}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e){var t=this.__proto__||this.constructor.prototype;return e in this&&(!(e in t)||t[e]!==this[e])}),a.getContext)if(a.toDataURL("image/png").indexOf("data:image/png")<0)o=!0;else var p=a.getContext("2d");else o=!0;var f=1,m=1;o||(f=window.devicePixelRatio||1,m=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1);var g=f/m,v=[],b={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12}},stylesheet:".holderjs-fluid {font-size:16px;font-weight:bold;text-align:center;font-family:sans-serif;margin:0}"};for(var y in e.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(e){var t=this.regex.exec(e);return{width:+t[1],height:+t[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(e){var t=this.regex.exec(e);return{width:t[1],height:t[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(e){var t=this.regex.exec(e);return{size:b.themes.gray.size,foreground:"#"+t[2],background:"#"+t[1]}}},text:{regex:/text\:(.*)/,output:function(e){return this.regex.exec(e)[1]}},font:{regex:/font\:(.*)/,output:function(e){return this.regex.exec(e)[1]}},auto:{regex:/^auto$/}},e.flags)e.flags.hasOwnProperty(y)&&(e.flags[y].match=function(e){return e.match(this.regex)});e.add_theme=function(t,n){return null!=t&&null!=n&&(b.themes[t]=n),e},e.add_image=function(t,n){var i=r(n);if(i.length)for(var o=0,a=i.length;o<a;o++){var s=document.createElement("img");s.setAttribute("data-src",t),i[o].appendChild(s)}return e},e.run=function(t){var i=s(b,t),o=[],a=[],l=[];for("string"==typeof i.images?a=r(i.images):window.NodeList&&i.images instanceof window.NodeList?a=i.images:window.Node&&i.images instanceof window.Node&&(a=[i.images]),"string"==typeof i.bgnodes?l=r(i.bgnodes):window.NodeList&&i.elements instanceof window.NodeList?l=i.bgnodes:window.Node&&i.bgnodes instanceof window.Node&&(l=[i.bgnodes]),n=!0,m=0,f=a.length;m<f;m++)o.push(a[m]);var u=document.getElementById("holderjs-style");u||((u=document.createElement("style")).setAttribute("id","holderjs-style"),u.type="text/css",document.getElementsByTagName("head")[0].appendChild(u)),i.nocss||(u.styleSheet?u.styleSheet.cssText+=i.stylesheet:u.appendChild(document.createTextNode(i.stylesheet)));for(var p=new RegExp(i.domain+'/(.*?)"?\\)'),f=l.length,m=0;m<f;m++){var g=window.getComputedStyle(l[m],null).getPropertyValue("background-image"),v=g.match(p),y=l[m].getAttribute("data-background-src");if(v)(w=h(v[1].split("/"),i))&&c("background",l[m],w,g);else if(null!=y){(w=h(y.substr(y.lastIndexOf(i.domain)+i.domain.length+1).split("/"),i))&&c("background",l[m],w,g)}}for(f=o.length,m=0;m<f;m++){var w,x=attr_data_src=g=null;try{x=o[m].getAttribute("src"),attr_datasrc=o[m].getAttribute("data-src")}catch(e){}if(null==attr_datasrc&&x&&x.indexOf(i.domain)>=0?g=x:attr_datasrc&&attr_datasrc.indexOf(i.domain)>=0&&(g=attr_datasrc),g)(w=h(g.substr(g.lastIndexOf(i.domain)+i.domain.length+1).split("/"),i))&&(w.fluid?d(o[m],w):c("image",o[m],w,g))}return e},function(e,t){var n="complete",i="readystatechange",o=!1,a=o,r=!0,s=e.document,l=s.documentElement,c=s.addEventListener?"addEventListener":"attachEvent",d=s.addEventListener?"removeEventListener":"detachEvent",u=s.addEventListener?"":"on",h=function(r){(r.type!=i||s.readyState==n)&&(("load"==r.type?e:s)[d](u+r.type,h,o),!a&&(a=!0)&&t.call(e,null))},p=function(){try{l.doScroll("left")}catch(e){return void setTimeout(p,50)}h("poll")};if(s.readyState==n)t.call(e,"lazy");else{if(s.createEventObject&&l.doScroll){try{r=!e.frameElement}catch(e){}r&&p()}s[c](u+"DOMContentLoaded",h,o),s[c](u+i,h,o),e[c](u+"load",h,o)}}(t,(function(){window.addEventListener?(window.addEventListener("resize",u,!1),window.addEventListener("orientationchange",u,!1)):window.attachEvent("onresize",u),n||e.run()})),"function"==typeof define&&define.amd&&define("Holder",[],(function(){return e}))}(e,window)}function easyPieInit(){$(".easy-pie").length&&$.fn.easyPieChart&&$.each($(".easy-pie"),(function(e,t){var n=primaryColor;$(this).is(".info")&&(n=infoColor),$(this).is(".danger")&&(n=dangerColor),$(this).is(".success")&&(n=successColor),$(this).is(".warning")&&(n=warningColor),$(this).is(".inverse")&&(n=inverseColor),$(t).easyPieChart({barColor:n,animate:!$("html").is(".ie")&&3e3,lineWidth:4,size:50})}))}function widgetScrollableInit(){$(".widget-scroll").each((function(){$(this).find(".widget-body > div").height($(this).attr("data-scroll-height")).niceScroll({cursorwidth:3,zindex:2,cursorborder:"none",cursorborderradius:"0",cursorcolor:primaryColor})})),$("*:not(#menu) .slim-scroll").each((function(){$(this).height($(this).attr("data-scroll-height")).niceScroll({cursorwidth:3,zindex:2,cursorborder:"none",cursorborderradius:"0",cursorcolor:primaryColor})}))}function bootstrapDatepickerInit(){$.fn.bdatepicker=$.fn.datepicker,$("#datepicker1").bdatepicker({format:"yyyy-mm-dd",startDate:"2013-02-14"}),$("#datepicker2").bdatepicker({format:"dd MM yyyy",startDate:"2013-02-14"}),$("#datepicker3").bdatepicker({format:"dd MM yyyy",startDate:"2013-02-14",todayBtn:!0}),$("#datetimepicker4").bdatepicker({format:"dd MM yyyy - hh:ii",autoclose:!0,todayBtn:!0,startDate:"2013-02-14 10:00",minuteStep:10}),$("#datetimepicker5").bdatepicker({format:"dd MM yyyy - HH:ii P",showMeridian:!0,autoclose:!0,startDate:"2013-02-14 10:00",todayBtn:!0}),$("#datepicker").length&&$("#datepicker").bdatepicker({showOtherMonths:!0}),$("#datepicker-inline").length&&$("#datepicker-inline").bdatepicker({inline:!0,showOtherMonths:!0}),$(".datepicker-block").length&&$(".datepicker-block").bdatepicker({inline:!0,showOtherMonths:!0})}function bootstrapTimePickerInit(){$("#timepicker1").timepicker(),$("#timepicker2").timepicker({minuteStep:1,template:"modal",showSeconds:!0,showMeridian:!1,modalBackdrop:!0}),$("#timepicker3").timepicker({minuteStep:5,showInputs:!1,disableFocus:!0}),$("#timepicker4").timepicker({minuteStep:1,secondStep:5,showInputs:!1,showSeconds:!0,showMeridian:!1}),$("#timepicker5").timepicker({template:!1,showInputs:!1,minuteStep:5})}Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,e),i.base=function(){},delete Base._prototyping;var o=i.constructor,a=i.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==a)this._constructing=!0,o.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],i)};return a.ancestor=this,a.extend=this.extend,a.forEach=this.forEach,a.implement=this.implement,a.prototype=i,a.toString=this.toString,a.valueOf=function(e){return"object"==e?a:o.valueOf()},n.call(a,t),"function"==typeof a.init&&a.init(),a},Base.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var i=t.valueOf();t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=i.apply(this,arguments);return this.base=e,t},t.valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString}this[e]=t}else if(e){var o=Base.prototype.extend;Base._prototyping||"function"==typeof this||(o=this.extend||o);for(var a={toSource:null},r=["constructor","toString","valueOf"],s=Base._prototyping?0:1;l=r[s++];)e[l]!=a[l]&&o.call(this,l,e[l]);for(var l in e)a[l]||o.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),function(){function e(e,t){var n=typeof e[t];return n==y||!(n!=b||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=b||!e[t])}function n(e,t){return typeof e[t]!=w}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function o(e){return e&&k(e,_)&&E(e,S)}function a(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function r(t){typeof console!=w&&e(console,"log")&&console.log(t)}function s(e,t){N&&t?alert(e):r(e)}function l(e){P.initialized=!0,P.supported=!1,s("Rangy is not supported in this environment. Reason: "+e,P.config.alertOnFail)}function c(e){return e.message||e.description||String(e)}function d(){if(N&&!P.initialized){var t,n=!1,i=!1;e(document,"createRange")&&(t=document.createRange(),k(t,C)&&E(t,x)&&(n=!0));var s,d=a(document);if(!d||"body"!=d.nodeName.toLowerCase())return void l("No body element found");if(d&&e(d,"createTextRange")&&(o(t=d.createTextRange())&&(i=!0)),!n&&!i)return void l("Neither Range nor TextRange are available");for(var u in P.initialized=!0,P.features={implementsDomRange:n,implementsTextRange:i},I)(s=I[u])instanceof p&&s.init(s,P);for(var h=0,f=R.length;f>h;++h)try{R[h](P)}catch(e){r("Rangy init listener threw an exception. Continuing. Detail: "+c(e))}}}function u(e,t,n){n&&(e+=" in module "+n.name),P.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function h(e,t,n,i){e[t]=function(){return u(t,n,i),e[n].apply(e,A.toArray(arguments))}}function p(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function f(e,t,n){var i=new p(e,t,(function(t){if(!t.initialized){t.initialized=!0;try{n(P,t),t.supported=!0}catch(t){r("Module '"+e+"' failed to load: "+c(t)),t.stack&&r(t.stack)}}}));return I[e]=i,i}function m(){}var g,v,b="object",y="function",w="undefined",x=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],C=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],S=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],_=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],k=i(e),T=i(t),E=i(n),D=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,i=e.length;i>n;++n)t(e[n],n)},I={},N=typeof window!=w&&typeof document!=w,A={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:k,areHostObjects:T,areHostProperties:E,isTextRange:o,getBody:a,forEach:D},P={version:"1.3.1-dev",initialized:!1,isBrowser:N,supported:!0,util:A,features:{},modules:I,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==w||rangyAutoInitialize}};P.fail=l,P.warn=function(e){s("Rangy warning: "+e,P.config.alertOnWarn)},!{}.hasOwnProperty?l("hasOwnProperty not supported"):(A.extend=g=function(e,t,n){var i,o;for(var a in t)t.hasOwnProperty(a)&&(i=e[a],o=t[a],n&&null!==i&&"object"==typeof i&&null!==o&&"object"==typeof o&&g(i,o,!0),e[a]=o);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},A.createOptions=function(e,t){var n={};return g(n,t),e&&g(n,e),n}),N||l("Rangy can only run in a browser"),function(){var e;if(N){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,i=e.length;i>n;++n)t[n]=e[n];return t}),A.toArray=e}(),N&&(e(document,"addEventListener")?v=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?v=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),A.addListener=v);var R=[];A.deprecationNotice=u,A.createAliasForDeprecatedMethod=h,P.init=d,P.addInitListener=function(e){P.initialized?e(P):R.push(e)};var O=[];P.addShimListener=function(e){O.push(e)},N&&(P.shim=P.createMissingNativeApi=function(e){e=e||window,d();for(var t=0,n=O.length;n>t;++t)O[t](e)},h(P,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var e,t,n=this.dependencies||[],i=0,o=n.length;o>i;++i){if(t=n[i],!((e=I[t])&&e instanceof p))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){P.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){P.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},P.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var i=f(e,n,t);P.initialized&&P.supported&&i.init()},P.createCoreModule=function(e,t,n){f(e,t,n)},P.RangePrototype=m,P.rangePrototype=new m,P.selectionPrototype=new function(){},P.createCoreModule("DomUtil",[],(function(e,t){function n(e){for(var t=0;e=e.previousSibling;)++t;return t}function i(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(S(i,n))return n;return null}function o(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function a(e,t,n){for(var i,o=n?e:e.parentNode;o;){if((i=o.parentNode)===t)return o;o=i}return null}function r(e){var t=e.nodeType;return 3==t||4==t||8==t}function s(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function l(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=v)return e.ownerDocument;if(typeof e.document!=v)return e.document;if(e.parentNode)return l(e.parentNode);throw t.createError("getDocument: no document found for node")}function c(e){var n=l(e);if(typeof n.defaultView!=v)return n.defaultView;if(typeof n.parentWindow!=v)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function d(e){if(typeof e.contentDocument!=v)return e.contentDocument;if(typeof e.contentWindow!=v)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function u(e){return e&&b.isHostMethod(e,"setTimeout")&&b.isHostObject(e,"document")}function h(e){try{return e.parentNode,!1}catch(e){return!0}}function p(e){if(!e)return"[No node]";if(_&&h(e))return"[Broken node]";if(r(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+n(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function f(e){this.root=e,this._next=e}function m(e,t){this.node=e,this.offset=t}function g(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var v="undefined",b=e.util,y=b.getBody;b.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),b.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var w=document.createElement("div");b.areHostMethods(w,["insertBefore","appendChild","cloneNode"]||!b.areHostObjects(w,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),b.isHostProperty(w,"innerHTML")||t.fail("Element is missing innerHTML property");var x=document.createTextNode("test");b.areHostMethods(x,["splitText","deleteData","insertData","appendData","cloneNode"]||!b.areHostObjects(w,["previousSibling","nextSibling","childNodes","parentNode"])||!b.areHostProperties(x,["data"]))||t.fail("Incomplete Text Node implementation");var C,S=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},_=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",_=h(n),e.features.crashyTextNodes=_}(),typeof window.getComputedStyle!=v?C=function(e,t){return c(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=v?C=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),f.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},m.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+p(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},g.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},g.prototype.toString=function(){return this.message},e.dom={arrayContains:S,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==v||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){var t=e.parentNode;return 1==t.nodeType?t:null},getNodeIndex:n,getNodeLength:function(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},getCommonAncestor:i,isAncestorOf:o,isOrIsAncestorOf:function(e,t){return o(e,t,!0)},getClosestAncestorIn:a,isCharacterDataNode:r,isTextOrCommentNode:function(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t},insertAfter:s,splitDataNode:function(e,t,i){var o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),s(o,e),i)for(var a,r=0;a=i[r++];)a.node==e&&a.offset>t?(a.node=o,a.offset-=t):a.node==e.parentNode&&a.offset>n(e)&&++a.offset;return o},getDocument:l,getWindow:c,getIframeWindow:function(e){if(typeof e.contentWindow!=v)return e.contentWindow;if(typeof e.contentDocument!=v)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")},getIframeDocument:d,getBody:y,isWindow:u,getContentDocument:function(e,t,n){var i;if(e?b.isHostProperty(e,"nodeType")?i=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?d(e):l(e):u(e)&&(i=e.document):i=document,!i)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return i},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,o,r,s){var l,c,d,u,h;if(e==r)return o===s?0:s>o?-1:1;if(l=a(r,e,!0))return o<=n(l)?-1:1;if(l=a(e,r,!0))return n(l)<s?-1:1;if(!(c=i(e,r)))throw new Error("comparePoints error: nodes have no common ancestor");if((d=e===c?c:a(e,c,!0))===(u=r===c?c:a(r,c,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(h=c.firstChild;h;){if(h===d)return-1;if(h===u)return 1;h=h.nextSibling}},isBrokenNode:h,inspectNode:p,getComputedStyleProperty:C,createTestElement:function(e,t,n){var i=y(e),o=e.createElement("div");o.contentEditable=""+!!n,t&&(o.innerHTML=t);var a=i.firstChild;return a?i.insertBefore(o,a):i.appendChild(o),o},removeNode:function(e){return e.parentNode.removeChild(e)},fragmentFromNodeChildren:function(e){for(var t,n=l(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new f(e)},DomPosition:m},e.DOMException=g})),P.createCoreModule("DomRange",["DomUtil"],(function(e,t){function n(e,t){return 3!=e.nodeType&&(z(e,t.startContainer)||z(e,t.endContainer))}function i(e){return e.document||H(e.startContainer)}function o(e){return new F(e.parentNode,B(e))}function a(e){return new F(e.parentNode,B(e)+1)}function r(e,t,n){var i=11==e.nodeType?e.firstChild:e;return L(t)?n==t.length?R.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:$(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function s(e,t,n){if(S(e),S(t),i(t)!=i(e))throw new M("WRONG_DOCUMENT_ERR");var o=j(e.startContainer,e.startOffset,t.endContainer,t.endOffset),a=j(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?0>=o&&a>=0:0>o&&a>0}function l(e){for(var t,n,o,a=i(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(o=e.getSubtreeIterator(),n.appendChild(l(o)),o.detach()),10==n.nodeType)throw new M("HIERARCHY_REQUEST_ERR");a.appendChild(n)}return a}function c(e,t,n){var i,o,a,r;for(n=n||{stop:!1};a=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(a))return void(n.stop=!0);if(c(r=e.getSubtreeIterator(),t,n),r.detach(),n.stop)return}else for(i=R.createIterator(a);o=i.next();)if(!1===t(o))return void(n.stop=!0)}function d(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(d(t=e.getSubtreeIterator()),t.detach()):e.remove()}function u(e){for(var t,n,o=i(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(u(n)),n.detach()):e.remove(),10==t.nodeType)throw new M("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function h(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+R.inspectNode(e.startContainer)+":"+e.startOffset+", "+R.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&L(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||L(this.sc)?W(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||L(this.ec)?W(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function f(e){return function(t,n){for(var i,o=n?t:t.parentNode;o;){if(i=o.nodeType,V(e,i))return o;o=o.parentNode}return null}}function m(e,t){if(te(e,t))throw new M("INVALID_NODE_TYPE_ERR")}function g(e,t){if(!V(t,e.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function v(e,t){if(0>t||t>(L(e)?e.length:e.childNodes.length))throw new M("INDEX_SIZE_ERR")}function b(e,t){if(Z(e,!0)!==Z(t,!0))throw new M("WRONG_DOCUMENT_ERR")}function y(e){if(ee(e,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(e,t){if(!e)throw new M(t)}function x(e,t){return t<=(L(e)?e.length:e.childNodes.length)}function C(e){return!!e.startContainer&&!!e.endContainer&&!(G&&(R.isBrokenNode(e.startContainer)||R.isBrokenNode(e.endContainer)))&&q(e.startContainer)==q(e.endContainer)&&x(e.startContainer,e.startOffset)&&x(e.endContainer,e.endOffset)}function S(e){if(!C(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function _(e,t){S(e);var n=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,r=n===o;L(o)&&a>0&&a<o.length&&$(o,a,t),L(n)&&i>0&&i<n.length&&(n=$(n,i,t),r?(a-=i,o=n):o==n.parentNode&&a>=B(n)&&a++,i=0),e.setStartAndEnd(n,i,o,a)}function k(e){S(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function T(e){e.START_TO_START=re,e.START_TO_END=se,e.END_TO_END=le,e.END_TO_START=ce,e.NODE_BEFORE=de,e.NODE_AFTER=ue,e.NODE_BEFORE_AND_AFTER=he,e.NODE_INSIDE=pe}function E(e){T(e),T(e.prototype)}function D(e,t){return function(){S(this);var n,i=this.startContainer,o=this.startOffset,r=this.commonAncestorContainer,s=new p(this,!0);i!==r&&(i=(n=a(W(i,r,!0))).node,o=n.offset),c(s,y),s.reset();var l=e(s);return s.detach(),t(this,i,o,i,o),l}}function I(t,i){function r(e,t){return function(n){g(n,X),g(q(n),Q);var i=(e?o:a)(n);(t?s:l)(this,i.node,i.offset)}}function s(e,t,n){var o=e.endContainer,a=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((q(t)!=q(o)||1==j(t,n,o,a))&&(o=t,a=n),i(e,t,n,o,a))}function l(e,t,n){var o=e.startContainer,a=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((q(t)!=q(o)||-1==j(t,n,o,a))&&(o=t,a=n),i(e,o,a,t,n))}var c=function(){};c.prototype=e.rangePrototype,t.prototype=new c,O.extend(t.prototype,{setStart:function(e,t){m(e,!0),v(e,t),s(this,e,t)},setEnd:function(e,t){m(e,!0),v(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],o=t,a=n;switch(e.length){case 3:a=e[2];break;case 4:o=e[2],a=e[3]}i(this,t,n,o,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:r(!0,!0),setStartAfter:r(!1,!0),setEndBefore:r(!0,!1),setEndAfter:r(!1,!1),collapse:function(e){S(this),e?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){m(e,!0),i(this,e,0,e,U(e))},selectNode:function(e){m(e,!1),g(e,X);var t=o(e),n=a(e);i(this,t.node,t.offset,n.node,n.offset)},extractContents:D(u,i),deleteContents:D(d,i),canSurroundContents:function(){S(this),y(this.startContainer),y(this.endContainer);var e=new p(this,!0),t=e._first&&n(e._first,this)||e._last&&n(e._last,this);return e.detach(),!t},splitBoundaries:function(){_(this)},splitBoundariesPreservingPositions:function(e){_(this,e)},normalizeBoundaries:function(){S(this);var e,t=this.startContainer,n=this.startOffset,o=this.endContainer,a=this.endOffset,r=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(o=e,a=e.length,e.appendData(t.data),Y(t))},s=function(e){var i=e.previousSibling;if(i&&i.nodeType==e.nodeType){t=e;var r=e.length;if(n=i.length,e.insertData(0,i.data),Y(i),t==o)a+=n,o=t;else if(o==e.parentNode){var s=B(e);a==s?(o=e,a=r):a>s&&a--}}},l=!0;if(L(o))a==o.length?r(o):0==a&&((e=o.previousSibling)&&e.nodeType==o.nodeType&&(a=e.length,t==o&&(l=!1),e.appendData(o.data),Y(o),o=e));else{if(a>0){var c=o.childNodes[a-1];c&&L(c)&&r(c)}l=!this.collapsed}if(l){if(L(t))0==n?s(t):n==t.length&&((e=t.nextSibling)&&e.nodeType==t.nodeType&&(o==e&&(o=t,a+=t.length),t.appendData(e.data),Y(e)));else if(n<t.childNodes.length){var d=t.childNodes[n];d&&L(d)&&s(d)}}else t=o,n=a;i(this,t,n,o,a)},collapseToPoint:function(e,t){m(e,!0),v(e,t),this.setStartAndEnd(e,t)}}),E(t)}function N(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:R.getCommonAncestor(e.startContainer,e.endContainer)}function A(e,t,n,i,o){e.startContainer=t,e.startOffset=n,e.endContainer=i,e.endOffset=o,e.document=R.getDocument(t),N(e)}function P(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,N(this)}var R=e.dom,O=e.util,F=R.DomPosition,M=e.DOMException,L=R.isCharacterDataNode,B=R.getNodeIndex,z=R.isOrIsAncestorOf,H=R.getDocument,j=R.comparePoints,$=R.splitDataNode,W=R.getClosestAncestorIn,U=R.getNodeLength,V=R.arrayContains,q=R.getRootContainer,G=e.features.crashyTextNodes,Y=R.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,L(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!L(n)||n!==this.sc&&n!==this.ec?n.parentNode&&Y(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return n(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new P(i(this.range));var t=this._current,n=t,o=0,a=t,r=U(t);z(t,this.sc)&&(n=this.sc,o=this.so),z(t,this.ec)&&(a=this.ec,r=this.eo),A(e,n,o,a,r)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var X=[1,3,4,5,7,8,10],Q=[2,9,11],K=[1,3,4,5,7,8,10,11],J=[1,3,4,5,7,8],Z=f([9,11]),ee=f([5,6,10,12]),te=f([6,10,12]),ne=document.createElement("style"),ie=!1;try{ne.innerHTML="<b>x</b>",ie=3==ne.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=ie;var oe=ie?function(e){var t=this.startContainer,n=H(t);if(!t)throw new M("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:L(t)&&(i=R.parentElement(t)),(i=null===i||"HTML"==i.nodeName&&R.isHtmlNamespace(H(i).documentElement)&&R.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1)).innerHTML=e,R.fragmentFromNodeChildren(i)}:function(e){var t=i(this).createElement("body");return t.innerHTML=e,R.fragmentFromNodeChildren(t)},ae=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],re=0,se=1,le=2,ce=3,de=0,ue=1,he=2,pe=3;O.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){S(this),b(this.startContainer,t.startContainer);var n,i,o,a,r=e==ce||e==re?"start":"end",s=e==se||e==re?"start":"end";return n=this[r+"Container"],i=this[r+"Offset"],o=t[s+"Container"],a=t[s+"Offset"],j(n,i,o,a)},insertNode:function(e){if(S(this),g(e,K),y(this.startContainer),z(e,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var t=r(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(S(this),this.collapsed)return i(this).createDocumentFragment();if(this.startContainer===this.endContainer&&L(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=i(this).createDocumentFragment()).appendChild(e),t;var n=new p(this,!0);return e=l(n),n.detach(),e},canSurroundContents:function(){S(this),y(this.startContainer),y(this.endContainer);var e=new p(this,!0),t=e._first&&n(e._first,this)||e._last&&n(e._last,this);return e.detach(),!t},surroundContents:function(e){if(g(e,J),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);r(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new P(i(this)),n=ae.length;n--;)t[e=ae[n]]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&L(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new p(this,!0);return c(n,(function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)})),n.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,n=B(e);if(!t)throw new M("NOT_FOUND_ERR");var i=this.comparePoint(t,n),o=this.comparePoint(t,n+1);return 0>i?o>0?he:de:o>0?ue:pe},comparePoint:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),b(e,this.startContainer),j(e,t,this.startContainer,this.startOffset)<0?-1:j(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:oe,toHtml:function(){return k(this)},intersectsNode:function(e,t){if(S(this),q(e)!=function(e){return q(e.startContainer)}(this))return!1;var n=e.parentNode,i=B(e);if(!n)return!0;var o=j(n,i,this.endContainer,this.endOffset),a=j(n,i+1,this.startContainer,this.startOffset);return t?0>=o&&a>=0:0>o&&a>0},isPointInRange:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),b(e,this.startContainer),j(e,t,this.startContainer,this.startOffset)>=0&&j(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return s(this,e,!1)},intersectsOrTouchesRange:function(e){return s(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=j(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=j(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==j(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==j(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new M("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==pe},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,U(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var i=n.pop();return t.setEnd(i,i.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return S(this),function(e,t,n){var i,o=!(!t||!t.length),a=!!n;o&&(i=new RegExp("^("+t.join("|")+")$"));var r=[];return c(new p(e,!1),(function(t){if((!o||i.test(t.nodeType))&&(!a||n(t))){var s=e.startContainer;if(t!=s||!L(s)||e.startOffset!=s.length){var l=e.endContainer;t==l&&L(l)&&0==e.endOffset||r.push(t)}}})),r}(this,e,t)},getDocument:function(){return i(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var n=i(this),o=e.createRange(n);t=t||R.getBody(n),o.selectNodeContents(t);var a=this.intersection(o),r=0,s=0;return a&&(o.setEnd(a.startContainer,a.startOffset),s=(r=o.toString().length)+a.toString().length),{start:r,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var i,o,a,r,s=[t],l=!1,c=!1;!c&&(i=s.pop());)if(3==i.nodeType)o=n+i.length,!l&&e.start>=n&&e.start<=o&&(this.setStart(i,e.start-n),l=!0),l&&e.end>=n&&e.end<=o&&(this.setEnd(i,e.end-n),c=!0),n=o;else for(a=(r=i.childNodes).length;a--;)s.push(r[a])},getName:function(){return"DomRange"},equals:function(e){return P.rangesEqual(this,e)},isValid:function(){return C(this)},inspect:function(){return h(this)},detach:function(){}}),I(P,A),O.extend(P,{rangeProperties:ae,RangeIterator:p,copyComparisonConstants:E,createPrototypeRange:I,inspect:h,toHtml:k,getRangeDocument:i,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=P})),P.createCoreModule("WrappedRange",["DomRange"],(function(e,t){var n,i,o=e.dom,a=e.util,r=o.DomPosition,s=e.DomRange,l=o.getBody,c=o.getContentDocument,d=o.isCharacterDataNode;if(e.features.implementsDomRange&&function(){function i(e){for(var t,n=u.length;n--;)e[t=u[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}var r,d,u=s.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,i(this)},s.createPrototypeRange(n,(function(e,t,n,i,o){var a=e.startContainer!==t||e.startOffset!=n,r=e.endContainer!==i||e.endOffset!=o,s=!e.equals(e.nativeRange);(a||r||s)&&(e.setEnd(i,o),e.setStart(t,n))})),(r=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),i(this)},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),i(this)},r.collapse=function(e){this.nativeRange.collapse(e),i(this)},r.cloneRange=function(){return new n(this.nativeRange.cloneRange())},r.refresh=function(){i(this)},r.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");l(document).appendChild(h);var p=document.createRange();p.setStart(h,0),p.setEnd(h,0);try{p.setStart(h,1),r.setStart=function(e,t){this.nativeRange.setStart(e,t),i(this)},r.setEnd=function(e,t){this.nativeRange.setEnd(e,t),i(this)},d=function(e){return function(t){this.nativeRange[e](t),i(this)}}}catch(e){r.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}i(this)},r.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}i(this)},d=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(i){this.nativeRange[t](n),this.nativeRange[e](n)}i(this)}}}r.setStartBefore=d("setStartBefore","setEndBefore"),r.setStartAfter=d("setStartAfter","setEndAfter"),r.setEndBefore=d("setEndBefore","setStartBefore"),r.setEndAfter=d("setEndAfter","setStartAfter"),r.selectNodeContents=function(e){this.setStartAndEnd(e,0,o.getNodeLength(e))},p.selectNodeContents(h),p.setEnd(h,3);var f=document.createRange();f.selectNodeContents(h),f.setEnd(h,4),f.setStart(h,2),-1==p.compareBoundaryPoints(p.START_TO_END,f)&&1==p.compareBoundaryPoints(p.END_TO_START,f)?r.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:r.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var m=document.createElement("div");m.innerHTML="123";var g=m.firstChild,v=l(document);v.appendChild(m),p.setStart(g,1),p.setEnd(g,2),p.deleteContents(),"13"==g.data&&(r.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return i(this),e}),v.removeChild(m),v=null,a.isHostMethod(p,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(h),r.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=c(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var u=function(e,t,n,i,a){var s=e.duplicate();s.collapse(n);var l=s.parentElement();if(o.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var c=new r(l.parentNode,o.getNodeIndex(l));return{boundaryPosition:c,nodeInfo:{nodeIndex:c.offset,containerElement:c.node}}}var u=o.getDocument(l).createElement("span");u.parentNode&&o.removeNode(u);for(var h,p,f,m,g,v=n?"StartToStart":"StartToEnd",b=a&&a.containerElement==l?a.nodeIndex:0,y=l.childNodes.length,w=y,x=w;x==y?l.appendChild(u):l.insertBefore(u,l.childNodes[x]),s.moveToElementText(u),0!=(h=s.compareEndPoints(v,e))&&b!=w;){if(-1==h){if(w==b+1)break;b=x}else w=w==b+1?b:x;x=Math.floor((b+w)/2),l.removeChild(u)}if(g=u.nextSibling,-1==h&&g&&d(g)){var C;if(s.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(g.data)){var S=s.duplicate(),_=S.text.replace(/\r\n/g,"\r").length;for(C=S.moveStart("character",_);-1==(h=S.compareEndPoints("StartToEnd",S));)C++,S.moveStart("character",1)}else C=s.text.length;m=new r(g,C)}else p=(i||!n)&&u.previousSibling,m=(f=(i||n)&&u.nextSibling)&&d(f)?new r(f,0):p&&d(p)?new r(p,p.data.length):new r(l,o.getNodeIndex(u));return o.removeNode(u),{boundaryPosition:m,nodeInfo:{nodeIndex:x,containerElement:l}}},h=function(e,t){var n,i,a,r,s=e.offset,c=o.getDocument(e.node),u=l(c).createTextRange(),h=d(e.node);return h?i=(n=e.node).parentNode:(n=s<(r=e.node.childNodes).length?r[s]:null,i=e.node),(a=c.createElement("span")).innerHTML="&#feff;",n?i.insertBefore(a,n):i.appendChild(a),u.moveToElementText(a),u.collapse(!t),i.removeChild(a),h&&u[t?"moveStart":"moveEnd"]("character",s),u};i=function(e){this.textRange=e,this.refresh()},(i.prototype=new s(document)).refresh=function(){var e,t,n,i=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();(n=e.duplicate()).collapse(!1);var a=n.parentElement(),r=i==a?i:o.getCommonAncestor(i,a);return r==t?r:o.getCommonAncestor(t,r)}(this.textRange);!function(e){return 0==e.compareEndPoints("StartToEnd",e)}(this.textRange)?(e=(n=u(this.textRange,i,!0,!1)).boundaryPosition,t=u(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition):t=e=u(this.textRange,i,!0,!0).boundaryPosition,this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},i.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(i);var p=function(e){if(e.collapsed)return h(new r(e.startContainer,e.startOffset),!0);var t=h(new r(e.startContainer,e.startOffset),!0),n=h(new r(e.endContainer,e.endOffset),!1),i=l(s.getRangeDocument(e)).createTextRange();return i.setEndPoint("StartToStart",t),i.setEndPoint("EndToEnd",n),i};if(i.rangeToTextRange=p,i.prototype.toTextRange=function(){return p(this)},e.WrappedTextRange=i,!e.features.implementsDomRange||e.config.preferTextRange){var f=Function("return this;")();void 0===f.Range&&(f.Range=i),e.createNativeRange=function(e){return e=c(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=i}}e.createRange=function(n){return n=c(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=c(e,t,"createRangyRange"),new s(e)},a.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),a.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener((function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null}))})),P.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],(function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function i(e,n){if(e){if(k.isWindow(e))return e;if(e instanceof f)return e.win;var i=k.getContentDocument(e,t,n);return k.getWindow(i)}return window}function o(e){return i(e,"getDocSelection").document.selection}function a(e){var t=!1;return e.anchorNode&&(t=1==k.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function r(e,t,n){var i=n?"end":"start",o=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function l(t){var n;return t instanceof D?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof I?n=t.nativeRange:P.implementsDomRange&&t instanceof k.getWindow(t.startContainer).Range&&(n=t),n}function c(e){var n=e.getNodes();if(!function(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!k.isAncestorOf(e[0],e[t]))return!1;return!0}(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function d(e){return!!e&&void 0!==e.text}function u(e,t){var n=new I(t);e._ranges=[n],r(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function h(t){if(t._ranges.length=0,"None"==t.docSelection.type)s(t);else{var n=t.docSelection.createRange();if(d(n))u(t,n);else{t.rangeCount=n.length;for(var i,o=O(n.item(0)),a=0;a<t.rangeCount;++a)(i=e.createRange(o)).selectNode(n.item(a)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,r(t,t._ranges[t.rangeCount-1],!1)}}}function p(e,n){for(var i=e.docSelection.createRange(),o=c(n),a=O(i.item(0)),r=F(a).createControlRange(),s=0,l=i.length;l>s;++s)r.add(i.item(s));try{r.add(o)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select(),h(e)}function f(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function m(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function g(e,t){for(var n,i,o=J.length;o--;)if(i=(n=J[o]).selection,"deleteAll"==t)m(i);else if(n.win==e)return"delete"==t?(J.splice(o,1),!0):i;return"deleteAll"==t&&(J.length=0),null}function v(e,n){for(var i,o=O(n[0].startContainer),a=F(o).createControlRange(),r=0,s=n.length;s>r;++r){i=c(n[r]);try{a.add(i)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select(),h(e)}function b(e,t){if(e.win.document!=O(t))throw new N("WRONG_DOCUMENT_ERR")}function y(t){return function(n,i){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(t?"Start":"End")](n,i):(o=e.createRange(this.win.document)).setStartAndEnd(n,i),this.setSingleRange(o,this.isBackward())}}function w(e){var t=[],n=new A(e.anchorNode,e.anchorOffset),i=new A(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var a=0,r=e.rangeCount;r>a;++a)t[a]=D.inspect(e.getRangeAt(a));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}e.config.checkSelectionRanges=!0;var x,C,S="boolean",_="number",k=e.dom,T=e.util,E=T.isHostMethod,D=e.DomRange,I=e.WrappedRange,N=e.DOMException,A=k.DomPosition,P=e.features,R="Control",O=k.getDocument,F=k.getBody,M=D.rangesEqual,L=E(window,"getSelection"),B=T.isHostObject(document,"selection");P.implementsWinGetSelection=L,P.implementsDocSelection=B;var z=B&&(!L||e.config.preferTextRange);if(z)x=o,e.isSelectionValid=function(e){var t=i(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||O(n.createRange().parentElement())==t};else{if(!L)return t.fail("Neither document.selection or window.getSelection() detected."),!1;x=function(e){return i(e,"getWinSelection").getSelection()},e.isSelectionValid=function(){return!0}}e.getNativeSelection=x;var H=x();if(!H)return t.fail("Native selection was null (possibly issue 138?)"),!1;var j=e.createNativeRange(document),$=F(document),W=T.areHostProperties(H,["anchorNode","focusNode","anchorOffset","focusOffset"]);P.selectionHasAnchorAndFocus=W;var U=E(H,"extend");P.selectionHasExtend=U;var V=typeof H.rangeCount==_;P.selectionHasRangeCount=V;var q=!1,G=!0,Y=U?function(t,n){var i=D.getRangeDocument(n),o=e.createRange(i);o.collapseToPoint(n.endContainer,n.endOffset),t.addRange(l(o)),t.extend(n.startContainer,n.startOffset)}:null;T.areHostMethods(H,["addRange","getRangeAt","removeAllRanges"])&&typeof H.rangeCount==_&&P.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,i=n>1,o=[],r=a(t),s=0;n>s;++s)o[s]=t.getRangeAt(s);var l=k.createTestElement(document,"",!1),c=l.appendChild(document.createTextNode("   ")),d=document.createRange();if(d.setStart(c,1),d.collapse(!0),t.removeAllRanges(),t.addRange(d),G=1==t.rangeCount,t.removeAllRanges(),!i){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)q=!1;else{var h=d.cloneRange();d.setStart(c,0),h.setEnd(c,3),h.setStart(c,2),t.addRange(d),t.addRange(h),q=2==t.rangeCount}}for(k.removeNode(l),t.removeAllRanges(),s=0;n>s;++s)0==s&&r?Y?Y(t,o[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(o[s])):t.addRange(o[s])}}(),P.selectionSupportsMultipleRanges=q,P.collapsedNonEditableSelectionsSupported=G;var X,Q,K=!1;$&&E($,"createControlRange")&&(X=$.createControlRange(),T.areHostProperties(X,["item","add"])&&(K=!0)),P.implementsControlRange=K,C=W?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},E(H,"getRangeAt")?Q=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:W&&(Q=function(t){var n=O(t.anchorNode),i=e.createRange(n);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),f.prototype=e.selectionPrototype;var J=[],Z=function(e){if(e&&e instanceof f)return e.refresh(),e;var t=g(e=i(e,"getNativeSelection")),n=x(e),a=B?o(e):null;return t?(t.nativeSelection=n,t.docSelection=a,t.refresh()):(t=new f(n,a,e),J.push({win:e,selection:t})),t};e.getSelection=Z,T.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var ee,te=f.prototype;if(!z&&W&&T.areHostMethods(H,["removeAllRanges","addRange"])){te.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var ne=function(e,t){Y(e.nativeSelection,t),e.refresh()};te.addRange=V?function(t,i){if(K&&B&&this.docSelection.type==R)p(this,t);else if(n(i)&&U)ne(this,t);else{var o;q?o=this.rangeCount:(this.removeAllRanges(),o=0);var a=l(t).cloneRange();try{this.nativeSelection.addRange(a)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(e.config.checkSelectionRanges){var s=Q(this.nativeSelection,this.rangeCount-1);s&&!M(s,t)&&(t=new I(s))}this._ranges[this.rangeCount-1]=t,r(this,t,ie(this.nativeSelection)),this.isCollapsed=C(this)}else this.refresh()}}:function(e,t){n(t)&&U?ne(this,e):(this.nativeSelection.addRange(l(e)),this.refresh())},te.setRanges=function(e){if(K&&B&&e.length>1)v(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(E(H,"empty")&&E(j,"select")&&K&&z))return t.fail("No means of selecting a Range or TextRange was found"),!1;te.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=O(this.anchorNode);else if(this.docSelection.type==R){var t=this.docSelection.createRange();t.length&&(e=O(t.item(0)))}if(e)F(e).createTextRange().select(),this.docSelection.empty()}}catch(e){}s(this)},te.addRange=function(t){this.docSelection.type==R?p(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,r(this,t,!1))},te.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?v(this,e):t&&this.addRange(e[0])}}if(te.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new N("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},z)ee=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=F(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==R?h(t):d(n)?u(t,n):s(t)};else if(E(H,"getRangeAt")&&typeof H.rangeCount==_)ee=function(t){if(K&&B&&t.docSelection.type==R)h(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;i>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));r(t,t._ranges[t.rangeCount-1],ie(t.nativeSelection)),t.isCollapsed=C(t)}else s(t)};else{if(!W||typeof H.isCollapsed!=S||typeof j.collapsed!=S||!P.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;ee=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=Q(n,0),e._ranges=[t],e.rangeCount=1,function(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}(e),e.isCollapsed=C(e)):s(e)}}te.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,i=this.anchorOffset;if(ee(this),e){var o=t.length;if(o!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=i)return!0;for(;o--;)if(!M(t[o],this._ranges[o]))return!0;return!1}};var ie,oe=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var i=0,o=n.length;o>i;++i)M(t,n[i])||e.addRange(n[i]);e.rangeCount||s(e)};te.removeRange=K&&B?function(e){if(this.docSelection.type==R){for(var t=this.docSelection.createRange(),n=c(e),i=O(t.item(0)),o=F(i).createControlRange(),a=!1,r=0,s=t.length;s>r;++r)t.item(r)!==n||a?o.add(t.item(r)):a=!0;o.select(),h(this)}else oe(this,e)}:function(e){oe(this,e)},!z&&W&&P.implementsDomRange?(ie=a,te.isBackward=function(){return ie(this)}):ie=te.isBackward=function(){return!1},te.isBackwards=te.isBackward,te.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},te.collapse=function(t,n){b(this,t);var i=e.createRange(t);i.collapseToPoint(t,n),this.setSingleRange(i),this.isCollapsed=!0},te.collapseToStart=function(){if(!this.rangeCount)throw new N("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},te.collapseToEnd=function(){if(!this.rangeCount)throw new N("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},te.selectAllChildren=function(t){b(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},te.deleteFromDocument=function(){if(K&&B&&this.docSelection.type==R){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),k.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var i=0,o=n.length;o>i;++i)n[i].deleteContents();this.addRange(n[o-1])}}},te.eachRange=function(e,t){for(var n=0,i=this._ranges.length;i>n;++n)if(e(this.getRangeAt(n)))return t},te.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},te.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},te.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(i){n.push(i[e].apply(i,t||[]))})),n},te.setStart=y(!0),te.setEnd=y(!1),e.rangePrototype.select=function(e){Z(this.getDocument()).setSingleRange(this,e)},te.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},te.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},te.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},te.moveToBookmark=function(t){for(var n,i,o=[],a=0;n=t.rangeBookmarks[a++];)(i=e.createRange(this.win)).moveToBookmark(n),o.push(i);t.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},te.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},te.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},te.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(D.toHtml(t))})),e.join("")},P.implementsTextRange&&(te.getNativeTextRange=function(){var n;if(n=this.docSelection){var i=n.createRange();if(d(i))return i;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),te.getName=function(){return"WrappedSelection"},te.inspect=function(){return w(this)},te.detach=function(){g(this.win,"delete"),m(this)},f.detachAll=function(){g(null,"deleteAll")},f.inspect=w,f.isDirectionBackward=n,e.Selection=f,e.selectionPrototype=te,e.addShimListener((function(e){void 0===e.getSelection&&(e.getSelection=function(){return Z(e)}),e=null}))}));var F=!1,M=function(e){F||(F=!0,!P.initialized&&P.config.autoInitialize&&d())};N&&("complete"==document.readyState?M():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",M,!1),v(window,"load",M))),rangy=P}(),rangy.createModule("SaveRestore",["WrappedRange"],(function(e,t){function n(e,t){return(t||document).getElementById(e)}function i(e,t){var n,i="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),o=u.getDocument(e.startContainer),a=e.cloneRange();return a.collapse(t),(n=o.createElement("span")).id=i,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(o.createTextNode(f)),a.insertNode(n),n}function o(e,i,o,a){var r=n(o,e);r?(i[a?"setStartBefore":"setEndBefore"](r),h(r)):t.warn("Marker element has been removed. Cannot restore selection.")}function a(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function r(t,n){var o,a=e.DomRange.getRangeDocument(t),r=t.toString(),s=p(n);return t.collapsed?{document:a,markerId:(o=i(t,!1)).id,collapsed:!0}:(o=i(t,!1),{document:a,startMarkerId:i(t,!0).id,endMarkerId:o.id,collapsed:!1,backward:s,toString:function(){return"original text: '"+r+"', new text: '"+t.toString()+"'"}})}function s(i,a){var r=i.document;void 0===a&&(a=!0);var s=e.createRange(r);if(i.collapsed){var l=n(i.markerId,r);if(l){l.style.display="inline";var c=l.previousSibling;c&&3==c.nodeType?(h(l),s.collapseToPoint(c,c.length)):(s.collapseBefore(l),h(l))}else t.warn("Marker element has been removed. Cannot restore selection.")}else o(r,s,i.startMarkerId,!0),o(r,s,i.endMarkerId,!1);return a&&s.normalizeBoundaries(),s}function l(t,i){var o,s,l=[],c=p(i);(t=t.slice(0)).sort(a);for(var d=0,u=t.length;u>d;++d)l[d]=r(t[d],c);for(d=u-1;d>=0;--d)o=t[d],s=e.DomRange.getRangeDocument(o),o.collapsed?o.collapseAfter(n(l[d].markerId,s)):(o.setEndBefore(n(l[d].endMarkerId,s)),o.setStartAfter(n(l[d].startMarkerId,s)));return l}function c(e){for(var t=[],n=e.length-1;n>=0;n--)t[n]=s(e[n],!0);return t}function d(e,t){var i=n(t,e);i&&h(i)}var u=e.dom,h=u.removeNode,p=e.Selection.isDirectionBackward,f="\ufeff";e.util.extend(e,{saveRange:r,restoreRange:s,saveRanges:l,restoreRanges:c,saveSelection:function(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var i=e.getSelection(n),o=i.getAllRanges(),a=1==o.length&&i.isBackward(),r=l(o,a);return a?i.setSingleRange(o[0],a):i.setRanges(o),{win:n,rangeInfos:r,restored:!1}},restoreSelection:function(t,n){if(!t.restored){var i=t.rangeInfos,o=e.getSelection(t.win),a=c(i);1==i.length&&n&&e.features.selectionHasExtend&&i[0].backward?(o.removeAllRanges(),o.addRange(a[0],!0)):o.setRanges(a),t.restored=!0}},removeMarkerElement:d,removeMarkers:function(e){for(var t,n=e.rangeInfos,i=0,o=n.length;o>i;++i)(t=n[i]).collapsed?d(e.doc,t.markerId):(d(e.doc,t.startMarkerId),d(e.doc,t.endMarkerId))}})})),rangy.createModule("TextRange",["WrappedSelection"],(function(e,t){function n(e,t){for(var n=e.slice(t.start,t.end),i={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},o=0,a=n.length;a>o;++o)n[o].token=i;return i}function i(e,t,i){for(var o,a=i(e,t),r=[],s=0;o=a[s++];)r.push(n(e,o));return r}function o(e,t){var n=O(e,t);return t.hasOwnProperty("wordOptions")&&(n.wordOptions=function(e){var t,n;return e?(t=e.language||H,R(n={},G[t]||G[H]),R(n,e),n):G[H]}(n.wordOptions)),t.hasOwnProperty("characterOptions")&&(n.characterOptions=O(n.characterOptions,V)),n}function a(e,t){var n=J(e,"display",t),i=e.tagName.toLowerCase();return"block"==n&&U&&Z.hasOwnProperty(i)?Z[i]:n}function r(e){for(var t=function(e){return function(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}(e).concat([e])}(e),n=0,i=t.length;i>n;++n)if(1==t[n].nodeType&&"none"==a(t[n]))return!0;return!1}function s(e,t){return!t&&e.hasChildNodes()?e.firstChild:function(e){for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}(e)}function l(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}var n=e.parentNode;return n&&1==n.nodeType?n:null}function c(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var i=J(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(i)||/^[\t\r ]+$/.test(t)&&"pre-line"==i}function d(e){return""===e.data||!!c(e)&&(!e.parentNode||!!r(e))}function u(e){var t=e.nodeType;return 7==t||8==t||r(e)||/^(script|style)$/i.test(e.nodeName)||function(e){var t;return 3==e.nodeType&&(t=e.parentNode)&&"hidden"==J(t,"visibility")}(e)||d(e)}function h(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==a(e,t)}function p(){this.store={}}function f(e,t,n){return function(i){var o=this.cache;if(o.hasOwnProperty(e))return o[e];0;var a=t.call(this,n?this[n]:this,i);return o[e]=a,a}}function m(e,t){this.node=e,this.session=t,this.cache=new p,this.positions=new p}function g(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new p}function v(){return ue||(b(),ue=new he)}function b(){ue&&ue.detach(),ue=null}function y(e,n,i,o){function a(){var e=null;return n?(e=s,l||(s=s.previousVisible(),l=!s||i&&s.equals(i))):l||(e=s=s.nextVisible(),l=!s||i&&s.equals(i)),l&&(s=null),e}i&&(n?u(i.node)&&(i=e.previousVisible()):u(i.node)&&(i=i.nextVisible()));var r,s=e,l=!1,c=!1;return{next:function(){if(c)return c=!1,r;for(var e;e=a();)if(e.getCharacter(o))return r=e,e;return null},rewind:function(){if(!r)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");c=!0},dispose:function(){e=i=null}}}function w(e,t,n){function o(e){for(var t,n,i=[],o=e?a:r,s=!1,l=!1;t=o.next();){if(n=t.character,B.test(n))l&&(l=!1,s=!0);else{if(s){o.rewind();break}l=!0}i.push(t)}return i}var a=y(e,!1,null,t),r=y(e,!0,null,t),s=n.tokenizer,l=o(!0),c=o(!1).reverse(),d=i(c.concat(l),n,s),u=l.length?d.slice(pe(d,l[0].token)):[],h=c.length?d.slice(0,pe(d,c.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==u.length&&!(e=u[0]).isWord&&(t=o(!0)).length>0;)u=i(e.chars.concat(t),n,s);return u.shift()},previousStartToken:function(){for(var e,t;1==h.length&&!(e=h[0]).isWord&&(t=o(!1)).length>0;)h=i(t.reverse().concat(e.chars),n,s);return h.pop()},dispose:function(){a.dispose(),r.dispose(),u=h=null}}}function x(e,t,n,i){var o=e.getRangeBoundaryPosition(t,!0),a=e.getRangeBoundaryPosition(t,!1);return y(i?a:o,!!i,i?o:a,n)}function C(t,n,i){var o=e.createRange(t.node);return o.setStartAndEnd(t.node,t.offset,n.node,n.offset),!o.expand("word",{wordOptions:i})}function S(e,t,n,i,o){function a(e,t){var n=m[e].previousVisible(),i=m[t-1];return{startPos:n,endPos:i,valid:!o.wholeWordsOnly||C(n,i,o.wordOptions)}}for(var r,s,l,c,d,u,h=j(o.direction),p=y(e,h,e.session.getRangeBoundaryPosition(i,h),o.characterOptions),f="",m=[],g=null;r=p.next();)if(s=r.character,n||o.caseSensitive||(s=s.toLowerCase()),h?(m.unshift(r),f=s+f):(m.push(r),f+=s),n){if(d=t.exec(f))if(c=(l=d.index)+d[0].length,u){if(!h&&c<f.length||h&&l>0){g=a(l,c);break}}else u=!0}else if(-1!=(l=f.indexOf(t))){g=a(l,l+t.length);break}return u&&(g=a(l,c)),p.dispose(),g}function _(e){return function(){var t=!!ue,n=[v()].concat(P.toArray(arguments)),i=e.apply(this,n);return t||b(),i}}function k(e,t){return _((function(n,i,a,r){typeof a==D&&(a=i,i=I),r=o(r,X);var s=e;t&&(s=a>=0,this.collapse(!s));var l=function(e,t,n,i,o){var a,r,s,l,c=0,d=e,u=Math.abs(n);if(0!==n){var h=0>n;switch(t){case I:for(r=y(e,h,null,i);(a=r.next())&&u>c;)++c,d=a;s=a,r.dispose();break;case N:for(var p=w(e,i,o),f=h?p.previousStartToken:p.nextEndToken;(l=f())&&u>c;)l.isWord&&(++c,d=h?l.chars[0]:l.chars[l.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}h?(d=d.previousVisible(),c=-c):d&&d.isLeadingSpace&&!d.isTrailingSpace&&(t==N&&(s=(r=y(e,!1,null,i)).next(),r.dispose()),s&&(d=s.previousVisible()))}return{position:d,unitsMoved:c}}(n.getRangeBoundaryPosition(this,s),i,a,r.characterOptions,r.wordOptions),c=l.position;return this[s?"setStart":"setEnd"](c.node,c.offset),l.unitsMoved}))}function T(e){return _((function(t,n){for(var i,o=x(t,this,n=O(n,V),!e),a=0;(i=o.next())&&B.test(i.character);)++a;o.dispose();var r=a>0;return r&&this[e?"moveStart":"moveEnd"]("character",e?a:-a,{characterOptions:n}),r}))}function E(e){return _((function(t,n){var i=!1;return this.changeEachRange((function(t){i=t[e](n)||i})),i}))}var D="undefined",I="character",N="word",A=e.dom,P=e.util,R=P.extend,O=P.createOptions,F=A.getBody,M=/^[ \t\f\r\n]+$/,L=/^[ \t\f\r]+$/,B=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,z=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,H="en",j=e.Selection.isDirectionBackward,$=!1,W=!1;!function(){var t=A.createTestElement(document,"<p>1 </p><p></p>",!0),n=t.firstChild,i=e.getSelection();i.collapse(n.lastChild,2),i.setStart(n.firstChild,0),1==(""+i).length,t.innerHTML="1 <br />",i.collapse(t,2),i.setStart(t.firstChild,0),$=1==(""+i).length,t.innerHTML="1 <p>1</p>",i.collapse(t,2),i.setStart(t.firstChild,0),W=1==(""+i).length,A.removeNode(t),i.removeAllRanges()}();var U,V={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},q={includeBlockContentTrailingSpace:!1,includeSpaceBeforeBr:!$,includeSpaceBeforeBlock:!W,includePreLineTrailingSpace:!0},G={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:function(e,t){function n(e,t,n){s.push({start:e,end:t,isWord:n})}for(var i,o,a,r=e.join(""),s=[],l=0;i=t.wordRegex.exec(r);){if(a=(o=i.index)+i[0].length,o>l&&n(l,o,!1),t.includeTrailingSpace)for(;z.test(e[a]);)++a;n(o,a,!0),l=a}return l<e.length&&n(l,e.length,!1),s}}},Y={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},X={wordOptions:null,characterOptions:null},Q={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},K={wordOptions:null,characterOptions:null,direction:"forward"},J=A.getComputedStyleProperty;!function(){var e=document.createElement("table"),t=F(document);t.appendChild(e),U="block"==J(e,"display"),t.removeChild(e)}();var Z={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};p.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};var ee={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new g(this,e))},toString:function(){return"[NodeWrapper("+A.inspectNode(this.node)+")]"}};m.prototype=ee;var te="EMPTY",ne="NON_SPACE",ie="UNCOLLAPSIBLE_SPACE",oe="COLLAPSIBLE_SPACE",ae="TRAILING_SPACE_BEFORE_BLOCK",re="TRAILING_SPACE_IN_BLOCK",se="TRAILING_SPACE_BEFORE_BR",le="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",ce="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";R(ee,{isCharacterDataNode:f("isCharacterDataNode",A.isCharacterDataNode,"node"),getNodeIndex:f("nodeIndex",A.getNodeIndex,"node"),getLength:f("nodeLength",A.getNodeLength,"node"),containsPositions:f("containsPositions",(function(e){return A.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)}),"node"),isWhitespace:f("isWhitespace",c,"node"),isCollapsedWhitespace:f("isCollapsedWhitespace",d,"node"),getComputedDisplay:f("computedDisplay",a,"node"),isCollapsed:f("collapsed",u,"node"),isIgnored:f("ignored",h,"node"),next:f("nextPos",s,"node"),previous:f("previous",l,"node"),getTextNodeInfo:f("textNodeInfo",(function(e){var t=null,n=!1,i=J(e.parentNode,"whiteSpace"),o="pre-line"==i;return o?(t=L,n=!0):("normal"==i||"nowrap"==i)&&(t=M,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:o}}),"node"),hasInnerText:f("hasInnerText",(function(e,t){for(var n=this.session,i=n.getPosition(e.parentNode,this.getNodeIndex()+1),o=n.getPosition(e,0),a=t?i:o,r=t?o:i;a!==r;){if(a.prepopulateChar(),a.isDefinitelyNonEmpty())return!0;a=t?a.previousVisible():a.nextVisible()}return!1}),"node"),isRenderedBlock:f("isRenderedBlock",(function(e){for(var t=e.getElementsByTagName("br"),n=0,i=t.length;i>n;++n)if(!u(t[n]))return!0;return this.hasInnerText()}),"node"),getTrailingSpace:f("trailingSpace",(function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!h(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""}),"node"),getLeadingSpace:f("leadingSpace",(function(e){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""}),"node")});var de={character:"",characterType:te,isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,i="",o=te,a=!1;if(n>0)if(3==t.nodeType){var r=t.data,s=r.charAt(n-1),l=e.nodeWrapper.getTextNodeInfo(),c=l.spaceRegex;l.collapseSpaces?c.test(s)?n>1&&c.test(r.charAt(n-2))||(l.preLine&&"\n"===r.charAt(n)?(i=" ",o=le):(i=" ",o=oe)):(i=s,o=ne,a=!0):(i=s,o=ie,a=!0)}else{var d=t.childNodes[n-1];if(d&&1==d.nodeType&&!u(d)&&("br"==d.tagName.toLowerCase()?(i="\n",e.isBr=!0,o=oe,a=!1):e.checkForTrailingSpace=!0),!i){var h=t.childNodes[n];h&&1==h.nodeType&&!u(h)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0,e.character=i,e.characterType=o,e.isCharInvariant=a}},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==ne||e==ie},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();e&&(this.isTrailingSpace=!0,this.character=e,this.characterType=oe),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=oe),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){for(var t=this;t=t.previousVisible();)if(""!==t.getCharacter(e))return t;return null},getCharacter:function(e){function t(){return u||(l=h.getPrecedingUncollapsedPosition(e),u=!0),l}this.resolveLeadingAndTrailingSpaces();var n=this.character,i=function(e){var t=e||"",n="string"==typeof t?t.split(""):t;return n.sort((function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)})),n.join("").replace(/(.)\1+/g,"$1")}(e.ignoreCharacters),o=""!==n&&i.indexOf(n)>-1;if(this.isCharInvariant)return o?"":n;var a=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,i].join("_"),r=this.cache.get(a);if(null!==r)return r;var s,l,c="",d=this.characterType==oe,u=!1,h=this;return d&&(this.type==ce?c="\n":" "==n&&(!t()||l.isTrailingSpace||"\n"==l.character||" "==l.character&&l.characterType==oe)||("\n"==n&&this.isLeadingSpace?t()&&"\n"!=l.character&&(c="\n"):(s=this.nextUncollapsed())&&(s.isBr?this.type=se:s.isTrailingSpace&&"\n"==s.character?this.type=re:s.isLeadingSpace&&"\n"==s.character&&(this.type=ae),"\n"==s.character?(this.type!=se||e.includeSpaceBeforeBr)&&(this.type!=ae||e.includeSpaceBeforeBlock)&&(this.type==re&&s.isTrailingSpace&&!e.includeBlockContentTrailingSpace||(this.type!=le||s.type!=ne||e.includePreLineTrailingSpace)&&("\n"==n?s.isTrailingSpace?this.isTrailingSpace||this.isBr&&(s.type="TRAILING_LINE_BREAK_AFTER_BR",t()&&l.isLeadingSpace&&!l.isTrailingSpace&&"\n"==l.character?s.character="":s.type=ce):c="\n":" "==n&&(c=" "))):c=n))),i.indexOf(c)>-1&&(c=""),this.cache.set(a,c),c},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:function(){return"[Position("+A.inspectNode(this.node)+":"+this.offset+")]"},toString:function(){return this.character}};g.prototype=de,R(de,{next:f("nextPos",(function(e){var t,n,i,o=e.nodeWrapper,a=e.node,r=e.offset,s=o.session;return a?(r==o.getLength()?n=(t=a.parentNode)?o.getNodeIndex()+1:0:o.isCharacterDataNode()?(t=a,n=r+1):(i=a.childNodes[r],s.getNodeWrapper(i).containsPositions()?(t=i,n=0):(t=a,n=r+1)),t?s.getPosition(t,n):null):null})),previous:f("previous",(function(e){var t,n,i,o=e.nodeWrapper,a=e.node,r=e.offset,s=o.session;return 0==r?n=(t=a.parentNode)?o.getNodeIndex():0:o.isCharacterDataNode()?(t=a,n=r-1):(i=a.childNodes[r-1],s.getNodeWrapper(i).containsPositions()?(t=i,n=A.getNodeLength(i)):(t=a,n=r-1)),t?s.getPosition(t,n):null})),nextVisible:f("nextVisible",(function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,i=t.node,o=t;return n.isCollapsed()&&(o=n.session.getPosition(i.parentNode,n.getNodeIndex()+1)),o})),nextUncollapsed:f("nextUncollapsed",(function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null})),previousVisible:f("previousVisible",(function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,i=t.node,o=t;return n.isCollapsed()&&(o=n.session.getPosition(i.parentNode,n.getNodeIndex())),o}))});var ue=null,he=function(){function e(e){var t=new p;return{get:function(n){var i=t.get(n[e]);if(i)for(var o,a=0;o=i[a++];)if(o.node===n)return o;return null},set:function(n){var i=n.node[e];(t.get(i)||t.set(i,[])).push(n)}}}function t(){this.initCaches()}var n=P.isHostProperty(document.documentElement,"uniqueID");return t.prototype={initCaches:function(){this.elementCache=n?function(){var e=new p;return{get:function(t){return e.get(t.uniqueID)},set:function(t){e.set(t.node.uniqueID,t)}}}():e("tagName"),this.textNodeCache=e("data"),this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new m(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},t}();R(A,{nextNode:s,previousNode:l});var pe=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;i>n;++n)if(e[n]===t)return n;return-1};R(e.rangePrototype,{moveStart:k(!0,!1),moveEnd:k(!1,!1),move:k(!0,!0),trimStart:T(!0),trimEnd:T(!1),trim:_((function(e,t){var n=this.trimStart(t),i=this.trimEnd(t);return n||i})),expand:_((function(e,t,n){var i=!1,a=(n=o(n,Q)).characterOptions;if(t||(t=I),t==N){var r,s,l=n.wordOptions,c=e.getRangeBoundaryPosition(this,!0),d=e.getRangeBoundaryPosition(this,!1),u=w(c,a,l).nextEndToken(),h=u.chars[0].previousVisible();if(this.collapsed)r=u;else r=w(d,a,l).previousStartToken();return s=r.chars[r.chars.length-1],h.equals(c)||(this.setStart(h.node,h.offset),i=!0),s&&!s.equals(d)&&(this.setEnd(s.node,s.offset),i=!0),n.trim&&(n.trimStart&&(i=this.trimStart(a)||i),n.trimEnd&&(i=this.trimEnd(a)||i)),i}return this.moveEnd(I,1,n)})),text:_((function(e,t){return this.collapsed?"":function(e,t,n){for(var i,o=[],a=x(e,t,n);i=a.next();)o.push(i);return a.dispose(),o}(e,this,O(t,V)).join("")})),selectCharacters:_((function(e,t,n,i,o){var a={characterOptions:o};t||(t=F(this.getDocument())),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,a),this.collapse(!0),this.moveEnd("character",i-n,a)})),toCharacterRange:_((function(e,t,n){t||(t=F(this.getDocument()));var i,o=t.parentNode,a=A.getNodeIndex(t),r=-1==A.comparePoints(this.startContainer,this.endContainer,o,a),s=this.cloneRange();return r?(s.setStartAndEnd(this.startContainer,this.startOffset,o,a),i=-s.text(n).length):(s.setStartAndEnd(o,a,this.startContainer,this.startOffset),i=s.text(n).length),{start:i,end:i+this.text(n).length}})),findText:_((function(t,n,i){(i=o(i,Y)).wholeWordsOnly&&(i.wordOptions.includeTrailingSpace=!1);var a=j(i.direction),r=i.withinRange;r||(r=e.createRange()).selectNodeContents(this.getDocument());var s=n,l=!1;"string"==typeof s?i.caseSensitive||(s=s.toLowerCase()):l=!0;var c=t.getRangeBoundaryPosition(this,!a),d=r.comparePoint(c.node,c.offset);-1===d?c=t.getRangeBoundaryPosition(r,!0):1===d&&(c=t.getRangeBoundaryPosition(r,!1));for(var u,h=c,p=!1;;)if(u=S(h,s,l,r,i)){if(u.valid)return this.setStartAndEnd(u.startPos.node,u.startPos.offset,u.endPos.node,u.endPos.offset),!0;h=a?u.startPos:u.endPos}else{if(!i.wrap||p)return!1;r=r.cloneRange(),h=t.getRangeBoundaryPosition(r,!a),r.setBoundary(c.node,c.offset,a),p=!0}})),pasteHtml:function(e){if(this.deleteContents(),e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t),this.collapseAfter(n)}}}),R(e.selectionPrototype,{expand:_((function(e,t,n){this.changeEachRange((function(e){e.expand(t,n)}))})),move:_((function(e,t,n,i){var o=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var a=this.getRangeAt(0);i||(i={}),i.characterOptions=O(i.characterOptions,q),o=a.move(t,n,i),this.setSingleRange(a)}return o})),trimStart:E("trimStart"),trimEnd:E("trimEnd"),trim:E("trim"),selectCharacters:_((function(t,n,i,o,a,r){var s=e.createRange(n);s.selectCharacters(n,i,o,r),this.setSingleRange(s,a)})),saveCharacterRanges:_((function(e,t,n){for(var i=this.getAllRanges(),o=[],a=1==i.length&&this.isBackward(),r=0,s=i.length;s>r;++r)o[r]={characterRange:i[r].toCharacterRange(t,n),backward:a,characterOptions:n};return o})),restoreCharacterRanges:_((function(t,n,i){this.removeAllRanges();for(var o,a,r,s=0,l=i.length;l>s;++s)r=(a=i[s]).characterRange,(o=e.createRange(n)).selectCharacters(n,r.start,r.end,a.characterOptions),this.addRange(o,a.backward)})),text:_((function(e,t){for(var n=[],i=0,o=this.rangeCount;o>i;++i)n[i]=this.getRangeAt(i).text(t);return n.join("")}))}),e.innerText=function(t,n){var i=e.createRange(t);return i.selectNodeContents(t),i.text(n)},e.createWordIterator=function(e,t,n){var i=v();n=o(n,K);var a=w(i.getPosition(e,t),n.characterOptions,n.wordOptions),r=j(n.direction);return{next:function(){return r?a.previousStartToken():a.nextEndToken()},dispose:function(){a.dispose(),this.next=function(){}}}},e.noMutation=function(e){e(v()),b()},e.noMutation.createEntryPointFunction=_,e.textRange={isBlockNode:function(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(a(e))||9==e.nodeType||11==e.nodeType)},isCollapsedWhitespaceNode:d,createPosition:_((function(e,t,n){return e.getPosition(t,n)}))}})),wysihtml.browser=function(){function e(e,t){var n,i=-1;return"Microsoft Internet Explorer"==navigator.appName?n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"==navigator.appName&&(navigator.userAgent.indexOf("Trident")>-1?n=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"):/Edge\/(\d+)./i.test(navigator.userAgent)&&(n=/Edge\/(\d+)./i)),n&&null!=n.exec(navigator.userAgent)&&(i=parseFloat(RegExp.$1)),-1!==i&&(!e||(t?"<"===t?i>e:">"===t?e>i:"<="===t?i>=e:">="===t?e>=i:void 0:e===i))}var t=navigator.userAgent,n=document.createElement("div"),i=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML")&&!e(),o=-1!==t.indexOf("AppleWebKit/")&&!e(),a=-1!==t.indexOf("Chrome/")&&!e(),r=-1!==t.indexOf("Opera/")&&!e();return{USER_AGENT:t,supported:function(){var e=this.USER_AGENT.toLowerCase(),t="contentEditable"in n,i=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,o=document.querySelector&&document.querySelectorAll,a=this.isIos()&&function(e){return+(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}(e)<5||this.isAndroid()&&function(e){return+(e.match(/android (\d+)/)||[void 0,0])[1]}(e)<4||-1!==e.indexOf("opera mobi")||-1!==e.indexOf("hpwos/");return t&&i&&o&&!a},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return e()},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return e(12,">")},hasCurrentStyleProperty:function(){return"currentStyle"in n},insertsLineBreaksOnReturn:function(){return i},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in n||(n.setAttribute("on"+e,"return;"),"function"==typeof n["on"+e])},supportsEventsInIframeCorrectly:function(){return!r},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";return t.innerHTML=n,t.innerHTML.toLowerCase()===n},supportsCommand:function(){var t={formatBlock:e(10,"<="),insertUnorderedList:e(),insertOrderedList:e()},n={insertHTML:i};return function(e,i){if(!t[i]){try{return e.queryCommandSupported(i)}catch(e){}try{return e.queryCommandEnabled(i)}catch(e){return!!n[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return e()},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return i||r||o},supportsGetAttributeCorrectly:function(){return"1"!=document.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return i||e()||r},autoScrollsToCaret:function(){return!o},autoClosesUnclosedTags:function(){var e,t,i=n.cloneNode(!1);return i.innerHTML="<p><div></div>",t=i.innerHTML.toLowerCase(),e="<p></p><div></div>"===t||"<p><div></div></p>"===t,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return r},supportsSpeechApiOn:function(e){return(t.match(/Chrome\/(\d+)/)||[void 0,0])[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(t){return e(9)&&("XMLHttpRequest"===t||"XDomainRequest"===t)},doesAsyncFocus:function(){return e(12,">")},hasProblemsSettingCaretAfterImg:function(){return e()},hasLiDeletingProblem:function(){return e()},hasUndoInContextMenu:function(){return i||a||r},hasInsertNodeIssue:function(){return r},hasIframeFocusIssue:function(){return e()},createsNestedInvalidMarkupAfterPaste:function(){return o},hasCaretBlockElementIssue:function(){return o},supportsMutationEvents:function(){return"MutationEvent"in window},supportsModernPaste:function(){return!e()},fixStyleKey:function(e){return"cssFloat"===e?"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat":e},usesControlRanges:function(){return document.body&&"createControlRange"in document.body},hasCaretAtLinkEndInsertionProblems:function(){return o}}}(),wysihtml.lang.array=function(e){return{contains:function(t){if(Array.isArray(t)){for(var n=t.length;n--;)if(-1!==wysihtml.lang.array(e).indexOf(t[n]))return!0;return!1}return-1!==wysihtml.lang.array(e).indexOf(t)},indexOf:function(t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},without:function(t){t=wysihtml.lang.array(t);for(var n=[],i=0,o=e.length;o>i;i++)t.contains(e[i])||n.push(e[i]);return n},get:function(){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i},map:function(t,n){if(Array.prototype.map)return e.map(t,n);for(var i=e.length>>>0,o=new Array(i),a=0;i>a;a++)o[a]=t.call(n,e[a],a,e);return o},unique:function(){for(var t=[],n=e.length,i=0;n>i;)wysihtml.lang.array(t).contains(e[i])||t.push(e[i]),i++;return t}}},wysihtml.lang.Dispatcher=Base.extend({on:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},off:function(e,t){this.events=this.events||{};var n,i,o=0;if(e){for(n=this.events[e]||[],i=[];o<n.length;o++)n[o]!==t&&t&&i.push(n[o]);this.events[e]=i}else this.events={};return this},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}}),wysihtml.lang.object=function(e){return{merge:function(t,n){for(var i in t)n&&wysihtml.lang.object(t[i]).isPlainObject()&&(void 0===e[i]||wysihtml.lang.object(e[i]).isPlainObject())?void 0===e[i]?e[i]=wysihtml.lang.object(t[i]).clone(!0):wysihtml.lang.object(e[i]).merge(wysihtml.lang.object(t[i]).clone(!0)):e[i]=wysihtml.lang.object(t[i]).isPlainObject()?wysihtml.lang.object(t[i]).clone(!0):t[i];return this},difference:function(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||(n[i]=e[i]));for(var o in t)t.hasOwnProperty(o)&&(e.hasOwnProperty(o)&&e[o]===t[o]||(n[0]=e[0]));return n},get:function(){return e},clone:function(t){var n,i={};if(null===e||!wysihtml.lang.object(e).isPlainObject())return e;for(n in e)e.hasOwnProperty(n)&&(i[n]=t?wysihtml.lang.object(e[n]).clone(t):e[n]);return i},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(e)},isPlainObject:function(){return e&&"[object Object]"===Object.prototype.toString.call(e)&&!("Node"in window?e instanceof Node:e instanceof Element||e instanceof Text)},isEmpty:function(){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}}},function(){var e=/^\s+/,t=/\s+$/,n=/[&<>\t"]/g,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","\t":"&nbsp; "};wysihtml.lang.string=function(o){return o=String(o),{trim:function(){return o.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)o=this.replace("#{"+t+"}").by(e[t]);return o},replace:function(e){return{by:function(t){return o.split(e).join(t)}}},escapeHTML:function(e,t){var a=o.replace(n,(function(e){return i[e]}));return e&&(a=a.replace(/(?:\r\n|\r|\n)/g,"<br />")),t&&(a=a.replace(/  /gi,"&nbsp; ")),a}}}}(),function(e){function t(t){var n=t.parentNode,i=e.lang.string(t.data).escapeHTML(),o=function(e){var t=e._wysihtml_tempElement;return t||(t=e._wysihtml_tempElement=e.createElement("div")),t}(n.ownerDocument);for(o.innerHTML="<span></span>"+function(e){return e.replace(a,(function(e,t){var n=(t.match(r)||[])[1]||"",i=l[n];(t=t.replace(r,"")).split(i).length>t.split(n).length&&(t+=n,n="");var o=t,a=t;return t.length>s&&(a=a.substr(0,s)+"..."),"www."===o.substr(0,4)&&(o="http://"+o),'<a href="'+o+'">'+a+"</a>"+n}))}(i),o.removeChild(o.firstChild);o.firstChild;)n.insertBefore(o.firstChild,t);n.removeChild(t)}function n(t,n){for(var i;t.parentNode;){if(i=(t=t.parentNode).nodeName,t.className&&e.lang.array(t.className.split(" ")).contains(n))return!0;if(o.contains(i))return!0;if("body"===i)return!1}return!1}function i(n,r){if(!(o.contains(n.nodeName)||n.className&&e.lang.array(n.className.split(" ")).contains(r))){if(n.nodeType===e.TEXT_NODE&&n.data.match(a))return void t(n);for(var s=e.lang.array(n.childNodes).get(),l=s.length,c=0;l>c;c++)i(s[c],r);return n}}var o=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),a=/((https?:\/\/|www\.)[^\s<]{3,})/gi,r=/([^\w\/\-](,?))$/i,s=100,l={")":"(","]":"[","}":"{"};e.dom.autoLink=function(e,t){return n(e,t)?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),i(e,t))},e.dom.autoLink.URL_REG_EXP=a}(wysihtml),function(e){var t=wysihtml.dom;t.addClass=function(e,n){var i=e.classList;return i?i.add(n):void(t.hasClass(e,n)||(e.className+=" "+n))},t.removeClass=function(e,t){var n=e.classList;return n?n.remove(t):void(e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))},t.hasClass=function(e,t){var n=e.classList;if(n)return n.contains(t);var i=e.className;return i.length>0&&(i==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(i))}}(),wysihtml.dom.compareDocumentPosition=document.documentElement.compareDocumentPosition?function(e,t){return e.compareDocumentPosition(t)}:function(e,t){var n,i;if(n=9===e.nodeType?e:e.ownerDocument,i=9===t.nodeType?t:t.ownerDocument,e===t)return 0;if(e===t.ownerDocument)return 20;if(e.ownerDocument===t)return 10;if(n!==i)return 1;if(2===e.nodeType&&e.childNodes&&-1!==wysihtml.lang.array(e.childNodes).indexOf(t))return 20;if(2===t.nodeType&&t.childNodes&&-1!==wysihtml.lang.array(t.childNodes).indexOf(e))return 10;for(var o=e,a=[],r=null;o;){if(o==t)return 10;a.push(o),o=o.parentNode}for(o=t,r=null;o;){if(o==e)return 20;var s=wysihtml.lang.array(a).indexOf(o);if(-1!==s){var l=a[s];return wysihtml.lang.array(l.childNodes).indexOf(a[s-1])>wysihtml.lang.array(l.childNodes).indexOf(r)?2:4}r=o,o=o.parentNode}return 1},wysihtml.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){if(t.nodeType!==wysihtml.ELEMENT_NODE){if(t.parentNode===e)return!0;t=t.parentNode}return e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),function(e){var t=document;e.dom.ContentEditableArea=Base.extend({getContentEditable:function(){return this.element},getWindow:function(){return this.element.ownerDocument.defaultView||this.element.ownerDocument.parentWindow},getDocument:function(){return this.element.ownerDocument},constructor:function(t,n,i){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.config.className||(this.config.className="wysihtml-sandbox"),this.element=i?this._bindElement(i):this._createElement()},destroy:function(){},_createElement:function(){var e=t.createElement("div");return e.className=this.config.className,this._loadElement(e),e},_bindElement:function(e){return e.className=e.className?e.className+" wysihtml-sandbox":"wysihtml-sandbox",this._loadElement(e,!0),e},_loadElement:function(e,t){var n=this;if(!t){var i=this._getHtml();e.innerHTML=i}this.loaded=!0,setTimeout((function(){n.callback(n)}),0)},_getHtml:function(e){return""}})}(wysihtml),wysihtml.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");return t.appendChild(n),n}return function(t,n,i){if("UL"===t.nodeName||"OL"===t.nodeName||"MENU"===t.nodeName)return t;var o,a,r,s,l,c,d,u,h,p=t.ownerDocument,f=function(e,t){return e.createElement(t)}(p,n),m=t.querySelectorAll("br"),g=m.length;for(h=0;g>h;h++)for(s=m[h];(l=s.parentNode)&&l!==t&&l.lastChild===s;){if("block"===wysihtml.dom.getStyle("display").from(l)){l.removeChild(s);break}wysihtml.dom.insert(s).after(s.parentNode)}for(a=(o=wysihtml.lang.array(t.childNodes).get()).length,h=0;a>h;h++)u=u||e(p,f),r=o[h],c="block"===wysihtml.dom.getStyle("display").from(r),d="BR"===r.nodeName,!c||i&&wysihtml.dom.hasClass(r,i)?d?u=u.firstChild?null:u:u.appendChild(r):((u=u.firstChild?e(p,f):u).appendChild(r),u=null);return 0===o.length&&e(p,f),t.parentNode.replaceChild(f,t),f}}(),wysihtml.dom.copyAttributes=function(e){return{from:function(t){return{to:function n(i){for(var o,a=0,r=e.length;r>a;a++)o=e[a],void 0!==t[o]&&""!==t[o]&&(i[o]=t[o]);return{andTo:n}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(t){return!!i(t)&&parseInt(e.getStyle("width").from(t),10)<t.offsetWidth},i=function(n){for(var i=0,o=t.length;o>i;i++)if("border-box"===e.getStyle(t[i]).from(n))return t[i]};e.copyStyles=function(i){return{from:function(o){n(o)&&(i=wysihtml.lang.array(i).without(t));for(var a,r="",s=i.length,l=0;s>l;l++)a=i[l],r+=a+":"+e.getStyle(a).from(o)+";";return{to:function t(n){return e.setStyles(r).on(n),{andTo:t}}}}}}}(wysihtml.dom),wysihtml.dom.delegate=function(e,t,n,i){var o=function(n){for(var o=n.target,a=3===o.nodeType?o.parentNode:o,r=e.querySelectorAll(t),s=0,l=r.length;l>s;s++)r[s].contains(a)&&i.call(r[s],n)};return e.addEventListener(n,o,!1),{stop:function(){e.removeEventListener(n,o,!1)}}},function(e){function t(e,t){for(var n=[e],i=e;t&&i&&i!==t||!t&&i;)n.unshift(i),i=i.parentNode;return n}e.dom.domNode=function(n){var i=[e.ELEMENT_NODE,e.TEXT_NODE];return{is:{emptyTextNode:function(t){var i=t?/^\s*$/g:/^[\r\n]*$/g;return n&&n.nodeType===e.TEXT_NODE&&i.test(n.data)},rangyBookmark:function(){return n&&1===n.nodeType&&n.classList.contains("rangySelectionBoundary")},visible:function(){var t=!/^\s*$/g.test(e.dom.getTextContent(n));return t||1===n.nodeType&&n.querySelector("img, br, hr, object, embed, canvas, input, textarea")&&(t=!0),t},lineBreak:function(){return n&&1===n.nodeType&&"BR"===n.nodeName},block:function(){return n&&1===n.nodeType&&"block"===n.ownerDocument.defaultView.getComputedStyle(n).display},voidElement:function(){return e.dom.domNode(n).test({query:e.VOID_ELEMENTS})}},prev:function(t){var o=n.previousSibling,a=t&&t.nodeTypes?t.nodeTypes:i;return o?e.dom.domNode(o).is.rangyBookmark()||!e.lang.array(a).contains(o.nodeType)||t&&t.ignoreBlankTexts&&e.dom.domNode(o).is.emptyTextNode(!0)?e.dom.domNode(o).prev(t):o:null},next:function(t){var o=n.nextSibling,a=t&&t.nodeTypes?t.nodeTypes:i;return o?e.dom.domNode(o).is.rangyBookmark()||!e.lang.array(a).contains(o.nodeType)||t&&t.ignoreBlankTexts&&e.dom.domNode(o).is.emptyTextNode(!0)?e.dom.domNode(o).next(t):o:null},commonAncestor:function(e,i){var o=t(n,i),a=t(e,i);if(o[0]!=a[0])return null;for(var r=0;r<o.length;r++)if(o[r]!=a[r])return o[r-1];return null},lastLeafNode:function(t){var i;if(1!==n.nodeType)return n;if(!(i=n.lastChild))return n;if(t&&t.leafClasses)for(var o=t.leafClasses.length;o--;)if(e.dom.hasClass(n,t.leafClasses[o]))return n;return e.dom.domNode(i).lastLeafNode(t)},escapeParent:function(t,i){var o,a,r,s=n;if(!e.dom.contains(t,n))throw new Error("Child is not a descendant of node.");do{for(a=(o=s.parentNode).cloneNode(!1);o.lastChild&&o.lastChild!==s;)a.insertBefore(o.lastChild,a.firstChild);if(o!==t&&((r=o.cloneNode(!1)).appendChild(s),s=r),o.parentNode.insertBefore(s,o.nextSibling),""!==a.innerHTML)if(/^\s+$/.test(a.innerHTML))for(;a.lastChild;)o.parentNode.insertBefore(a.lastChild,s.nextSibling);else o.parentNode.insertBefore(a,s.nextSibling);if(""===o.innerHTML)o.parentNode.removeChild(o);else if(/^\s+$/.test(o.innerHTML)){for(;o.firstChild;)o.parentNode.insertBefore(o.firstChild,o);o.parentNode.removeChild(o)}}while(o&&o!==t);i&&s&&(s.parentNode.insertBefore(i,s),i.appendChild(s))},transferContentTo:function(t,i){if(1===n.nodeType){if(e.dom.domNode(t).is.voidElement()||3===t.nodeType)for(;n.lastChild;)t.parentNode.insertBefore(n.lastChild,t.nextSibling);else for(;n.firstChild;)t.appendChild(n.firstChild);i&&n.parentNode.removeChild(n)}else(3===n.nodeType||8===n.nodeType)&&(e.dom.domNode(t).is.voidElement()?t.parentNode.insertBefore(n,t.nextSibling):t.appendChild(n))},test:function(t){var i;if(!t)return!1;if(1!==n.nodeType)return!1;if(t.query&&!n.matches(t.query))return!1;if(t.nodeName&&n.nodeName.toLowerCase()!==t.nodeName.toLowerCase())return!1;if(t.className&&!n.classList.contains(t.className))return!1;if(t.classRegExp&&0===((n.className||"").match(t.classRegExp)||[]).length)return!1;if(t.styleProperty&&t.styleProperty.length>0)for(var o=!1,a=Array.isArray(t.styleProperty)?t.styleProperty:[t.styleProperty],r=0,s=a.length;s>r;r++){if(i=e.browser.fixStyleKey(a[r]),n.style[i]){if(!t.styleValue){o=!0;break}if(t.styleValue instanceof RegExp){if(n.style[i].trim().match(t.styleValue).length>0){o=!0;break}}else if(Array.isArray(t.styleValue)){if(t.styleValue.indexOf(n.style[i].trim())){o=!0;break}}else if(t.styleValue===n.style[i].trim().replace(/, /g,",")){o=!0;break}}if(!o)return!1}if(t.attribute){var l=e.dom.getAttributes(n),c=[],d=!1;for(var u in Array.isArray(t.attribute)?c=t.attribute:c[t.attribute]=t.attributeValue,c)if(c.hasOwnProperty(u))if(void 0===c[u]){if(void 0!==l[u]){d=!0;break}}else if(l[u]===c[u]){d=!0;break}if(!d)return!1}return!0}}}}(wysihtml),wysihtml.dom.getAsDom=function(){var e=function(e){if(!e._wysihtml_supportsHTML5Tags){for(var n=0,i=t.length;i>n;n++)e.createElement(t[n]);e._wysihtml_supportsHTML5Tags=!0}},t=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(t,n){var i;return n=n||document,"object"==typeof t&&t.nodeType?(i=n.createElement("div")).appendChild(t):wysihtml.browser.supportsHTML5Tags(n)?(i=n.createElement("div")).innerHTML=t:(e(n),i=function(e,t){var n=t.createElement("div");n.style.display="none",t.body.appendChild(n);try{n.innerHTML=e}catch(e){}return t.body.removeChild(n),n}(t,n)),i}}(),wysihtml.dom.getAttribute=function(e,t){var n=!wysihtml.browser.supportsGetAttributeCorrectly();return t=t.toLowerCase(),"IMG"==e.nodeName&&"src"==t&&!0===wysihtml.dom.isLoadedImage(e)?e.src:n&&"outerHTML"in e?-1!=e.outerHTML.toLowerCase().indexOf(" "+t+"=")?e.getAttribute(t):null:e.getAttribute(t)},wysihtml.dom.getAttributes=function(e){var t,n=!wysihtml.browser.supportsGetAttributeCorrectly(),i=e.nodeName,o=[];for(t in e.attributes)(e.attributes.hasOwnProperty&&e.attributes.hasOwnProperty(t)||!e.attributes.hasOwnProperty&&Object.prototype.hasOwnProperty.call(e.attributes,t))&&e.attributes[t].specified&&("IMG"==i&&"src"==e.attributes[t].name.toLowerCase()&&!0===wysihtml.dom.isLoadedImage(e)?o.src=e.src:wysihtml.lang.array(["rowspan","colspan"]).contains(e.attributes[t].name.toLowerCase())&&n?1!==e.attributes[t].value&&(o[e.attributes[t].name]=e.attributes[t].value):o[e.attributes[t].name]=e.attributes[t].value);return o},wysihtml.dom.getParentElement=function(e,t,n,i){for(n=n||50;n--&&e&&"BODY"!==e.nodeName&&(!i||e!==i);){if(wysihtml.dom.domNode(e).test(t))return e;e=e.parentNode}return null},wysihtml.dom.getPastedHtml=function(e){var t;return wysihtml.browser.supportsModernPaste()&&e.clipboardData&&(wysihtml.lang.array(e.clipboardData.types).contains("text/html")?t=e.clipboardData.getData("text/html"):wysihtml.lang.array(e.clipboardData.types).contains("text/plain")&&(t=wysihtml.lang.string(e.clipboardData.getData("text/plain")).escapeHTML(!0,!0))),t},wysihtml.dom.getPastedHtmlWithDiv=function(e,t){var n=e.selection.getBookmark(),i=e.element.ownerDocument,o=i.createElement("DIV"),a=e.getScrollPos();i.body.appendChild(o),o.style.width="1px",o.style.height="1px",o.style.overflow="hidden",o.style.position="absolute",o.style.top=a.y+"px",o.style.left=a.x+"px",o.setAttribute("contenteditable","true"),o.focus(),setTimeout((function(){var i;e.selection.setBookmark(n),(i=o.innerHTML)&&/^<br\/?>$/i.test(i.trim())&&(i=!1),t(i),o.parentNode.removeChild(o)}),0)},wysihtml.dom.getStyle=function(){function e(e){return e.replace(n,(function(e){return e.charAt(1).toUpperCase()}))}var t={float:"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){if(i.nodeType===wysihtml.ELEMENT_NODE){var o=i.ownerDocument,a=t[n]||e(n),r=i.style,s=i.currentStyle,l=r[a];if(l)return l;if(s)try{return s[a]}catch(e){}var c,d,u=o.defaultView||o.parentWindow,h=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName;return u.getComputedStyle?(h&&(c=r.overflow,r.overflow="hidden"),d=u.getComputedStyle(i,null).getPropertyValue(n),h&&(r.overflow=c||""),d):void 0}}}}}(),wysihtml.dom.getTextNodes=function(e,t){var n=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t&&/^\s*$/.test(e.innerText||e.textContent)||n.push(e):n=n.concat(wysihtml.dom.getTextNodes(e,t));return n},function(e){function t(e){return e._wysihtml_identifier||(e._wysihtml_identifier=i++)}var n={},i=1;e.dom.hasElementWithClassName=function(i,o){if(!e.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+o);var a=t(i)+":"+o,r=n[a];return r||(r=n[a]=i.getElementsByClassName(o)),r.length>0}}(wysihtml),wysihtml.dom.hasElementWithTagName=function(){function e(e){return e._wysihtml_identifier||(e._wysihtml_identifier=n++)}var t={},n=1;return function(n,i){var o=e(n)+":"+i,a=t[o];return a||(a=t[o]=n.getElementsByTagName(i)),a.length>0}}(),wysihtml.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},wysihtml.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n=t.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e));var i=t.querySelector("head link");if(i)i.parentNode.insertBefore(n,i);else{var o=t.querySelector("head");o&&o.appendChild(n)}}}},wysihtml.dom.isLoadedImage=function(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}},function(e){e.dom.lineBreaks=function(t){function n(e){return"BR"===e.nodeName}function i(t){return!!n(t)||"block"===e.dom.getStyle("display").from(t)}return{add:function(n){var o=t.ownerDocument,a=e.dom.domNode(t).next({ignoreBlankTexts:!0}),r=e.dom.domNode(t).prev({ignoreBlankTexts:!0});a&&!i(a)&&e.dom.insert(o.createElement("br")).after(t),r&&!i(r)&&e.dom.insert(o.createElement("br")).before(t)},remove:function(i){var o=e.dom.domNode(t).next({ignoreBlankTexts:!0}),a=e.dom.domNode(t).prev({ignoreBlankTexts:!0});o&&n(o)&&o.parentNode.removeChild(o),a&&n(a)&&a.parentNode.removeChild(a)}}}}(wysihtml),wysihtml.dom.observe=function(e,t,n){for(var i,o,a=0,r=(t="string"==typeof t?[t]:t).length;r>a;a++)o=t[a],e.addEventListener?e.addEventListener(o,n,!1):(i=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+o,i));return{stop:function(){for(var o,a=0,r=t.length;r>a;a++)o=t[a],e.removeEventListener?e.removeEventListener(o,n,!1):e.detachEvent("on"+o,i)}}},wysihtml.dom.parse=function(e,t){function n(e,t,i,o){var a,r,s,d,u=e.nodeType,h=e.childNodes,f=h.length,m=l[u],g=0;if(o&&1===u&&wysihtml.dom.hasClass(e,o))return e;if(!(r=m&&m(e,i))){if(!1===r){for(a=e.ownerDocument.createDocumentFragment(),g=f;g--;)h[g]&&((s=n(h[g],t,i,o))&&(h[g]===s&&g--,a.insertBefore(s,a.firstChild)));return""===(d=wysihtml.dom.getStyle("display").from(e))&&(d=wysihtml.lang.array(p).contains(e.tagName)?"block":""),wysihtml.lang.array(["block","flex","table"]).contains(d)&&a.appendChild(e.ownerDocument.createElement("br")),wysihtml.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(e.nodeName.toLowerCase())&&e.parentNode.lastChild!==e&&(e.nextSibling&&3===e.nextSibling.nodeType&&/^\s/.test(e.nextSibling.nodeValue)||a.appendChild(e.ownerDocument.createTextNode(" "))),a.normalize&&a.normalize(),a}return null}for(g=0;f>g;g++)h[g]&&((s=n(h[g],t,i,o))&&(h[g]===s&&g--,r.appendChild(s)));if(t&&r.nodeName.toLowerCase()===c&&(!r.childNodes.length||/^\s*$/gi.test(r.innerHTML)&&(i||"_wysihtml-temp-placeholder"!==e.className&&"rangySelectionBoundary"!==e.className)||!r.attributes.length)){for(a=r.ownerDocument.createDocumentFragment();r.firstChild;)a.appendChild(r.firstChild);return a.normalize&&a.normalize(),a}return r.normalize&&r.normalize(),r}function i(e,t,n,i){var a;if("SPAN"===e.nodeName&&!i&&("_wysihtml-temp-placeholder"===e.className||"rangySelectionBoundary"===e.className))return!0;for(a in n)if(n.hasOwnProperty(a)&&t.type_definitions&&t.type_definitions[a]&&o(e,t.type_definitions[a]))return!0;return!1}function o(e,t){var n,i,o,a,r,s=e.getAttribute("class"),l=e.getAttribute("style");if(t.methods)for(var c in t.methods)if(t.methods.hasOwnProperty(c)&&v[c]&&v[c](e))return!0;if(s&&t.classes){n=(s=s.replace(/^\s+/g,"").replace(/\s+$/g,"").split(d)).length;for(var u=0;n>u;u++)if(t.classes[s[u]])return!0}if(l&&t.styles)for(i in l=l.split(";"),t.styles)if(t.styles.hasOwnProperty(i))for(var h=l.length;h--;)if((r=l[h].split(":"))[0].replace(/\s/g,"").toLowerCase()===i&&(!0===t.styles[i]||1===t.styles[i]||wysihtml.lang.array(t.styles[i]).contains(r[1].replace(/\s/g,"").toLowerCase())))return!0;if(t.attrs)for(o in t.attrs)if(t.attrs.hasOwnProperty(o)&&("string"==typeof(a=wysihtml.dom.getAttribute(e,o))&&a.search(t.attrs[o])>-1))return!0;return!1}function a(e,t){var n=[];for(var i in t)t.hasOwnProperty(i)&&0===i.indexOf(e)&&n.push(i);return n}function r(e,t,n,i){var o,a=wysihtml.lang.object(n).isFunction()?n:f[n];return!(!a||(o=a(t,i),"string"!=typeof o))&&o}function s(e,t){var n,i,o,s=wysihtml.lang.object(h.attributes||{}).clone(),l=wysihtml.lang.object(s).merge(wysihtml.lang.object(t||{}).clone()).get(),c={},d=wysihtml.dom.getAttributes(e);for(n in l)if(/\*$/.test(n))for(var u=0,p=(o=a(n.slice(0,-1),d)).length;p>u;u++)!1!==(i=r(o[u],d[o[u]],l[n],e.nodeName))&&(c[o[u]]=i);else!1!==(i=r(0,d[n],l[n],e.nodeName))&&(c[n]=i);return c}var l={1:function(e,t){var n,o,a,r=h.tags,l=e.nodeName.toLowerCase(),u=e.scopeName;if(e._wysihtml)return null;if(e._wysihtml=1,"wysihtml-temp"===e.className)return null;if(u&&"HTML"!=u&&(l=u+":"+l),"outerHTML"in e&&(wysihtml.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(l="div")),l in r){if(!(n=r[l])||n.remove)return null;if(n.unwrap)return!1;n="string"==typeof n?{rename_tag:n}:n}else{if(!e.firstChild)return null;n={rename_tag:c}}if(n.one_of_type&&!i(e,h,n.one_of_type,t)){if(!n.remove_action)return null;if("unwrap"===n.remove_action)return!1;if("rename"!==n.remove_action)return null;a=n.remove_action_rename_to||c}return o=e.ownerDocument.createElement(a||n.rename_tag||l),function(e,t,n,i){var o,a,r,l,c,u={},p=n.set_class,f=n.add_class,v=n.add_style,b=n.set_attributes,y=h.classes,w=0,x=[],C=[],S=[],_=[];if(b&&(u=wysihtml.lang.object(b).clone()),u=wysihtml.lang.object(u).merge(s(e,n.check_attributes)).get(),p&&x.push(p),f)for(l in f)(c=g[f[l]])&&"string"==typeof(r=c(wysihtml.dom.getAttribute(e,l)))&&x.push(r);if(v)for(l in v)(c=m[v[l]])&&(newStyle=c(wysihtml.dom.getAttribute(e,l)),"string"==typeof newStyle&&C.push(newStyle));if("string"==typeof y&&"any"===y)if(e.getAttribute("class"))if(h.classes_blacklist){for((_=e.getAttribute("class"))&&(x=x.concat(_.split(d))),o=x.length;o>w;w++)a=x[w],h.classes_blacklist[a]||S.push(a);S.length&&(u.class=wysihtml.lang.array(S).unique().join(" "))}else u.class=e.getAttribute("class");else x&&x.length>0&&(u.class=wysihtml.lang.array(x).unique().join(" "));else{for(i||(y["_wysihtml-temp-placeholder"]=1,y._rangySelectionBoundary=1,y["wysiwyg-tmp-selected-cell"]=1),(_=e.getAttribute("class"))&&(x=x.concat(_.split(d))),o=x.length;o>w;w++)y[a=x[w]]&&S.push(a);S.length&&(u.class=wysihtml.lang.array(S).unique().join(" "))}for(l in u.class&&i&&(u.class=u.class.replace("wysiwyg-tmp-selected-cell",""),/^\s*$/g.test(u.class)&&delete u.class),C.length&&(u.style=wysihtml.lang.array(C).unique().join(" ")),u)try{t.setAttribute(l,u[l])}catch(e){}u.src&&(void 0!==u.width&&t.setAttribute("width",u.width),void 0!==u.height&&t.setAttribute("height",u.height))}(e,o,n,t),function(e,t,n){var i,o;if(n&&n.keep_styles)for(i in n.keep_styles)if(n.keep_styles.hasOwnProperty(i)){if(o="float"===i?e.style.styleFloat||e.style.cssFloat:e.style[i],n.keep_styles[i]instanceof RegExp&&!n.keep_styles[i].test(o))continue;"float"===i?t.style[e.style.styleFloat?"styleFloat":"cssFloat"]=o:e.style[i]&&(t.style[i]=o)}}(e,o,n),e=null,o.normalize&&o.normalize(),o},3:function(e){var t=e.nextSibling;if(!t||t.nodeType!==wysihtml.TEXT_NODE){var n=e.data.replace(wysihtml.INVISIBLE_SPACE_REG_EXP,"");return e.ownerDocument.createTextNode(n)}t.data=e.data.replace(wysihtml.INVISIBLE_SPACE_REG_EXP,"")+t.data.replace(wysihtml.INVISIBLE_SPACE_REG_EXP,"")},8:function(e){return h.comments?e.ownerDocument.createComment(e.nodeValue):void 0}},c="span",d=/\s+/,u={tags:{},classes:{}},h={},p=["ADDRESS","BLOCKQUOTE","CENTER","DIR","DIV","DL","FIELDSET","FORM","H1","H2","H3","H4","H5","H6","ISINDEX","MENU","NOFRAMES","NOSCRIPT","OL","P","PRE","TABLE","UL"],f={url:function(){var e=/^https?:\/\//i;return function(t){return t&&t.match(e)?t.replace(e,(function(e){return e.toLowerCase()})):null}}(),src:function(){var e=/^(\/|https?:\/\/)/i;return function(t){return t&&t.match(e)?t.replace(e,(function(e){return e.toLowerCase()})):null}}(),href:function(){var e=/^(#|\/|https?:\/\/|mailto:|tel:)/i;return function(t){return t&&t.match(e)?t.replace(e,(function(e){return e.toLowerCase()})):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t,n){return t?t.replace(e,""):"IMG"===n?"":null}}(),numbers:function(){var e=/\D/g;return function(t){return(t=(t||"").replace(e,""))||null}}(),dimension:function(){var e=/\D*(\d+)(\.\d+)?\s?(%)?\D*/;return function(t){return(t=(t||"").replace(e,"$1$2$3"))||null}}(),any:function(e){return e||null}},m={align_text:function(){var e={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"};return function(t){return e[String(t).toLowerCase()]}}()},g={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[String(t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[String(t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[String(t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[String(t).charAt(0)]}}()},v={has_visible_contet:function(){var e,t=["img","video","picture","br","script","noscript","style","table","iframe","object","embed","audio","svg","input","button","select","textarea","canvas"];return function(n){if((e=(n.innerText||n.textContent).replace(/\s/g,""))&&e.length>0)return!0;for(var i=t.length;i--;)if(n.querySelector(t[i]))return!0;return!!(n.offsetWidth&&n.offsetWidth>0&&n.offsetHeight&&n.offsetHeight>0)}}()},b={unwrap:function(e){wysihtml.dom.unwrap(e)},remove:function(e){e.parentNode.removeChild(e)}};return function(e,t){wysihtml.lang.object(h).merge(u).merge(t.rules).get();var i,o,a,r=t.context||e.ownerDocument||document,s=r.createDocumentFragment(),l="string"==typeof e,c=!1;for(!0===t.clearInternals&&(c=!0),i=l?wysihtml.dom.getAsDom(e,r):e,h.selectors&&function(e,t){var n,i,o;for(n in t)if(t.hasOwnProperty(n)){wysihtml.lang.object(t[n]).isFunction()?i=t[n]:"string"==typeof t[n]&&b[t[n]]&&(i=b[t[n]]);for(var a=(o=e.querySelectorAll(n)).length;a--;)i(o[a])}}(i,h.selectors);i.firstChild;)(o=n(a=i.firstChild,t.cleanUp,c,t.uneditableClass))&&s.appendChild(o),a!==o&&i.removeChild(a);if(t.unjoinNbsps)for(var d=wysihtml.dom.getTextNodes(s),p=d.length;p--;)d[p].nodeValue=d[p].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");return i.innerHTML="",i.appendChild(s),l?wysihtml.quirks.getCorrectInnerHTML(i):i}(e,t)},wysihtml.dom.query=function(e,t){var n,i=[];e.nodeType&&(e=[e]);for(var o=0,a=e.length;a>o;o++)if(n=e[o].querySelectorAll(t))for(var r=n.length;r--;i.unshift(n[r]));return i},wysihtml.dom.removeEmptyTextNodes=function(e){for(var t,n=wysihtml.lang.array(e.childNodes).get(),i=n.length,o=0;i>o;o++)(t=n[o]).nodeType===wysihtml.TEXT_NODE&&/^[\n\r]*$/.test(t.data)&&t.parentNode.removeChild(t)},wysihtml.dom.removeInvisibleSpaces=function(e){for(var t=wysihtml.dom.getTextNodes(e),n=t.length;n--;)t[n].nodeValue=t[n].nodeValue.replace(wysihtml.INVISIBLE_SPACE_REG_EXP,"")},wysihtml.dom.renameElement=function(e,t){for(var n,i=e.ownerDocument.createElement(t);n=e.firstChild;)i.appendChild(n);return wysihtml.dom.copyAttributes(["align","className"]).from(e).to(i),e.parentNode&&e.parentNode.replaceChild(i,e),i},wysihtml.dom.replaceWithChildNodes=function(e){if(e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}},function(e){function t(t){return"block"===e.getStyle("display").from(t)}function n(e){return"BR"===e.nodeName}function i(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}e.resolveList=function(e,o){if(e.nodeName.match(/^(MENU|UL|OL)$/)){var a,r,s,l,c,d,u,h=e.ownerDocument,p=h.createDocumentFragment(),f=wysihtml.dom.domNode(e).prev({ignoreBlankTexts:!0}),m=wysihtml.dom.domNode(e).next({ignoreBlankTexts:!0}),g=e.lastElementChild||e.lastChild;if(o)for(!f||t(f)||n(f)||i(p);d=e.firstElementChild||e.firstChild;){for(r=d.lastChild,u=d===g;a=d.firstChild;)s=a===r,l=(!u||m&&!t(m))&&s&&!t(a)&&!n(a),p.appendChild(a),l&&i(p);d.parentNode.removeChild(d)}else for(;d=e.firstElementChild||e.firstChild;){if(d.querySelector&&d.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;a=d.firstChild;)p.appendChild(a);else{for(c=h.createElement("p");a=d.firstChild;)c.appendChild(a);p.appendChild(c)}d.parentNode.removeChild(d)}e.parentNode.replaceChild(p,e)}}}(wysihtml.dom),function(e){var t=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],i=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],o=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.config.className||(this.config.className="wysihtml-sandbox"),this.editableArea=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.editableArea)},getIframe:function(){return this.editableArea},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=t.createElement("iframe");return i.className=this.config.className,e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(a){if(e.dom.contains(t.documentElement,a)){var r=this,s=a.contentWindow,l=a.contentWindow.document,c=t.characterSet||t.charset||"utf-8",d=this._getHtml({charset:c,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(d),l.close(),this.getWindow=function(){return a.contentWindow},this.getDocument=function(){return a.contentWindow.document},s.onerror=function(e,t,n){throw new Error("wysihtml.Sandbox: "+e,t,n)},!e.browser.supportsSandboxedIframes()){var u,h;for(u=0,h=n.length;h>u;u++)this._unset(s,n[u]);for(u=0,h=i.length;h>u;u++)this._unset(s,i[u],e.EMPTY_FUNCTION);for(u=0,h=o.length;h>u;u++)this._unset(l,o[u]);this._unset(l,"cookie","",!0)}e.polyfills&&e.polyfills(s,l).apply(),this.loaded=!0,setTimeout((function(){r.callback(r)}),0)}},_getHtml:function(t){var n,i=t.stylesheets,o="",a=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>a;a++)o+='<link rel="stylesheet" href="'+i[a]+'">';return t.stylesheets=o,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,i,o){try{t[n]=i}catch(e){}try{t.__defineGetter__(n,(function(){return i}))}catch(e){}if(o)try{t.__defineSetter__(n,(function(){}))}catch(e){}if(!e.browser.crashesWhenDefineProperty(n))try{var a={get:function(){return i}};o&&(a.set=function(){}),Object.defineProperty(t,n,a)}catch(e){}}})}(wysihtml),function(){var e={className:"class"};wysihtml.dom.setAttributes=function(t){return{on:function(n){for(var i in t)n.setAttribute(e[i]||i,t[i])}}}}(),wysihtml.dom.setStyles=function(e){return{on:function(t){var n=t.style;if("string"!=typeof e)for(var i in e)"float"===i?(n.cssFloat=e[i],n.styleFloat=e[i]):n[i]=e[i];else n.cssText+=";"+e}}},function(e){e.simulatePlaceholder=function(t,n,i,o){var a=o||"wysihtml-placeholder",r=function(){var t=n.element.offsetWidth>0&&n.element.offsetHeight>0;n.hasPlaceholderSet()&&(n.clear(),n.element.focus(),t&&setTimeout((function(){var e=n.selection.getSelection();e.focusNode&&e.anchorNode||n.selection.selectNode(n.element.firstChild||n.element)}),0)),n.placeholderSet=!1,e.removeClass(n.element,a)},s=function(){n.isEmpty()&&!n.placeholderSet&&(n.placeholderSet=!0,n.setValue(i,!1),e.addClass(n.element,a))};t.on("set_placeholder",s).on("unset_placeholder",r).on("focus:composer",r).on("paste:composer",r).on("blur:composer",s),s()}}(wysihtml.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(wysihtml.dom),wysihtml.dom.unwrap=function(e){var t=[];if(e.parentNode){for(;e.lastChild;)t.unshift(e.lastChild),wysihtml.dom.insert(e.lastChild).after(e);e.parentNode.removeChild(e)}return t},wysihtml.quirks.cleanPastedHTML=function(){var e=function(e){var t=wysihtml.lang.string(e).trim().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return new RegExp("^((?!^"+t+"$).)*$","i")},t=function(t,n){var i,o,a=wysihtml.lang.object(t).clone(!0);for(i in a.tags)if(a.tags.hasOwnProperty(i)&&a.tags[i].keep_styles)for(o in a.tags[i].keep_styles)a.tags[i].keep_styles.hasOwnProperty(o)&&n[o]&&(a.tags[i].keep_styles[o]=e(n[o]));return a};return function(e,n){var i={color:wysihtml.dom.getStyle("color").from(n.referenceNode),fontSize:wysihtml.dom.getStyle("font-size").from(n.referenceNode)},o=t(function(e,t){var n;if(!e)return null;for(var i=0,o=e.length;o>i;i++)if(e[i].condition||(n=e[i].set),e[i].condition&&e[i].condition.test(t))return e[i].set;return n}(n.rules,e)||{},i);return wysihtml.dom.parse(e,{rules:o,cleanUp:!0,context:n.referenceNode.ownerDocument,uneditableClass:n.uneditableClass,clearInternals:!0,unjoinNbsps:!0})}}(),wysihtml.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout((function(){var t=e.innerHTML.toLowerCase();("<p>&nbsp;</p>"==t||"<p>&nbsp;</p><p>&nbsp;</p>"==t)&&(e.innerHTML="")}),0)};return function(t){wysihtml.dom.observe(t.element,["cut","keydown"],e)}}(),function(e){e.quirks.getCorrectInnerHTML=function(t){var n=t.innerHTML;if(-1===n.indexOf("%7E"))return n;var i,o,a,r,s=t.querySelectorAll("[href*='~'], [src*='~']");for(r=0,a=s.length;a>r;r++)i=s[r].href||s[r].src,o=e.lang.string(i).replace("~").by("%7E"),n=e.lang.string(n).replace(o).by(i);return n}}(wysihtml),function(e){var t="wysihtml-quirks-redraw";e.quirks.redraw=function(n){e.dom.addClass(n,t),e.dom.removeClass(n,t);try{var i=n.ownerDocument;i.execCommand("italic",!1,null),i.execCommand("italic",!1,null)}catch(e){}}}(wysihtml),function(e){function t(e){var t,i;for(t in n)if(n.hasOwnProperty(t)&&(i=n[t]).regex.test(e))return i}var n={rgba:{regex:/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,name:"rgba"},rgb:{regex:/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,name:"rgb"},hex6:{regex:/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,name:"hex",radix:16},hex3:{regex:/^#([0-9a-f])([0-9a-f])([0-9a-f])/i,name:"hex",radix:16}},i=function(e){return new RegExp("(^|\\s|;)"+e+"\\s*:\\s*[^;$]+","gi")};e.quirks.styleParser={getColorParseMethod:t,getColorFormat:function(e){var n=t(e);return n?n.name:void 0},parseColor:function(o,a){var r,s,l,c,d,u=o;if(a){if(r=i(a),!(s=o.match(r)))return!1;s=s.pop().split(":")[1],u=e.lang.string(s).trim()}return!(!(l=t(u))||!(c=u.match(l.regex)))&&(d=l.radix||10,l===n.hex3?(c.shift(),c.push(1),e.lang.array(c).map((function(e,t){return 3>t?parseInt(e,d)*d+parseInt(e,d):parseFloat(e)}))):(c.shift(),c[3]||c.push(1),e.lang.array(c).map((function(e,t){return 3>t?parseInt(e,d):parseFloat(e)}))))},unparseColor:function(e,t){var n=16;return"hex"===t?(e[0].toString(n)+e[1].toString(n)+e[2].toString(n)).toUpperCase():"hash"===t?"#"+(e[0].toString(n)+e[1].toString(n)+e[2].toString(n)).toUpperCase():"rgb"===t?"rgb("+e[0]+","+e[1]+","+e[2]+")":"rgba"===t?"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")":"csv"===t?e[0]+","+e[1]+","+e[2]+","+e[3]:e[3]&&1!==e[3]?"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")":"rgb("+e[0]+","+e[1]+","+e[2]+")"},parseFontSize:function(t){var n=t.match(i("font-size"));return!!n&&e.lang.string(n[n.length-1].split(":")[1]).trim()}}}(wysihtml),function(e){function t(e,t){for(var n=0;t!==e;)if(n++,!(t=t.parentNode))throw new Error("not a descendant of ancestor!");return n}function n(e,t){return 3===e.nodeType?e:e.childNodes[t]||e}function i(t){var n=document.createElement("span"),i=function(e){t.removeEventListener("mouseup",i),t.removeEventListener("keydown",i),t.removeEventListener("touchstart",i),t.removeEventListener("focus",i),t.removeEventListener("blur",i),t.removeEventListener("paste",o),t.removeEventListener("drop",o),t.removeEventListener("beforepaste",o),n&&n.parentNode&&n.parentNode.removeChild(n)},o=function(e){n&&n.parentNode&&setTimeout(i,0)};return n.appendChild(t.ownerDocument.createTextNode(e.INVISIBLE_SPACE)),n.className="_wysihtml-temp-caret-fix",n.style.display="block",n.style.minWidth="1px",n.style.height="0px",t.addEventListener("mouseup",i),t.addEventListener("keydown",i),t.addEventListener("touchstart",i),t.addEventListener("focus",i),t.addEventListener("blur",i),t.addEventListener("paste",o),t.addEventListener("drop",o),t.addEventListener("beforepaste",o),n}var o=e.dom;e.Selection=Base.extend({constructor:function(e,t,n){rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc,this.win=this.composer.win,this.contain=t,this.unselectableClass=n||!1},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},createTemporaryCaretSpaceAfter:function(t){var n=this.doc.createElement("span"),i=this.doc.createTextNode(e.INVISIBLE_SPACE),o=function(t){var i;this.contain.removeEventListener("mouseup",o),this.contain.removeEventListener("keydown",r),this.contain.removeEventListener("touchstart",o),this.contain.removeEventListener("focus",o),this.contain.removeEventListener("blur",o),this.contain.removeEventListener("paste",a),this.contain.removeEventListener("drop",a),this.contain.removeEventListener("beforepaste",a),n&&n.parentNode&&(n.innerHTML=n.innerHTML.replace(e.INVISIBLE_SPACE_REG_EXP,""),/[^\s]+/.test(n.innerHTML)?(i=n.lastChild,e.dom.unwrap(n),this.setAfter(i)):n.parentNode.removeChild(n))}.bind(this),a=function(e){n&&n.parentNode&&setTimeout(o,0)},r=function(e){8===e.which||91===e.which||17===e.which||86===e.which&&(e.ctrlKey||e.metaKey)||o()};return n.className="_wysihtml-temp-caret-fix",n.style.position="absolute",n.style.display="block",n.style.minWidth="1px",n.style.zIndex="99999",n.appendChild(i),t.parentNode.insertBefore(n,t.nextSibling),this.setBefore(i),this.contain.addEventListener("mouseup",o),this.contain.addEventListener("keydown",r),this.contain.addEventListener("touchstart",o),this.contain.addEventListener("focus",o),this.contain.addEventListener("blur",o),this.contain.addEventListener("paste",a),this.contain.addEventListener("drop",a),this.contain.addEventListener("beforepaste",a),n},setAfter:function(t,n,i){var o,a=this.win,r=rangy.createRange(this.doc),s=function(){var i=t.parentNode,r=i?i.childNodes[i.childNodes.length-1]:null;if(!o||r===t&&1===t.nodeType&&"block"===a.getComputedStyle(t).display)if(n){var s=this.doc.createTextNode(e.INVISIBLE_SPACE);t.parentNode.insertBefore(s,t.nextSibling),this.selectNode(s),setTimeout((function(){s&&s.parentNode&&s.parentNode.removeChild(s)}),0)}else this.createTemporaryCaretSpaceAfter(t)}.bind(this);if(r.setStartAfter(t),r.setEndAfter(t),document.activeElement&&document.activeElement===this.composer.element)o=this.setSelection(r),s(),i&&i(o);else{var l=this.composer.getScrollPos();this.composer.element.focus(),this.composer.setScrollPos(l),setTimeout(function(){o=this.setSelection(r),s(),i&&i(o)}.bind(this),0)}},selectNode:function(t,n){var i=rangy.createRange(this.doc),a=t.nodeType===e.ELEMENT_NODE,r="canHaveHTML"in t?t.canHaveHTML:"IMG"!==t.nodeName,s=a?t.innerHTML:t.data,l=""===s||s===e.INVISIBLE_SPACE,c=o.getStyle("display").from(t),d="block"===c||"list-item"===c;if(l&&a&&r&&!n)try{t.innerHTML=e.INVISIBLE_SPACE}catch(e){}r?i.selectNodeContents(t):i.selectNode(t),r&&l&&a?i.collapse(d):r&&l&&(i.setStartAfter(t),i.setEndAfter(t)),this.setSelection(i)},getSelectedNode:function(e){var t,n;return e&&this.doc.selection&&"Control"===this.doc.selection.type&&((n=this.doc.selection.createRange())&&n.length)?n.item(0):(t=this.getSelection(this.doc)).focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc))?n.commonAncestorContainer:this.doc.body},fixSelBorders:function(){var e=this.getRange();(function(e){if(!e.canSurroundContents())for(var n=e.commonAncestorContainer,i=t(n,e.startContainer),o=t(n,e.endContainer);!e.canSurroundContents();)i>o?(e.setStartBefore(e.startContainer),i=t(n,e.startContainer)):(e.setEndAfter(e.endContainer),o=t(n,e.endContainer))})(e),this.setSelection(e)},getSelectedOwnNodes:function(e){for(var t=this.getOwnRanges(),n=[],i=0,o=t.length;o>i;i++)n.push(t[i].commonAncestorContainer||this.doc.body);return n},findNodesInSelection:function(t){for(var n,i=this.getOwnRanges(),o=[],a=0,r=i.length;r>a;a++)n=i[a].getNodes([1],(function(n){return e.lang.array(t).contains(n.nodeName)})),o=o.concat(n);return o},filterElements:function(e){for(var t,n=this.getOwnRanges(),i=[],o=0,a=n.length;a>o;o++)t=n[o].getNodes([1],(function(t){return e(t,n[o])})),i=i.concat(t);return i},containsUneditable:function(){for(var e=this.getOwnUneditables(),t=this.getSelection(),n=0,i=e.length;i>n;n++)if(t.containsNode(e[n]))return!0;return!1},deleteContents:function(){var e=this.getRange();this.deleteRangeContents(e),this.setSelection(e)},deleteRangeContents:function(t){var n,i,o,a;if(this.unselectableClass){(n=e.dom.getParentElement(t.startContainer,{query:"."+this.unselectableClass},!1,this.contain))&&t.setStartBefore(n),(i=e.dom.getParentElement(t.endContainer,{query:"."+this.unselectableClass},!1,this.contain))&&t.setEndAfter(i);for(var r=(o=t.getNodes([1],function(t){return e.dom.hasClass(t,this.unselectableClass)}.bind(this))).length;r--;)try{a=new CustomEvent("wysihtml:uneditable:delete"),o[r].dispatchEvent(a)}catch(e){}}t.deleteContents()},getCaretNode:function(){var e=this.getSelection();return e&&e.anchorNode?n(e.anchorNode,e.anchorOffset):null},getPreviousNode:function(t,i){var o;if(!t){var a=this.getSelection();t=a&&a.anchorNode?n(a.anchorNode,a.anchorOffset):null}if(t===this.contain)return!1;var r,s=t.previousSibling;return s!==this.contain&&(s&&3!==s.nodeType&&1!==s.nodeType||s&&3===s.nodeType&&/^\s*$/.test(s.textContent)?s=this.getPreviousNode(s,i):i&&s&&1===s.nodeType?(o=e.dom.getStyle("display").from(s),e.lang.array(["BR","HR","IMG"]).contains(s.nodeName)||e.lang.array(["block","inline-block","flex","list-item","table"]).contains(o)||!/^[\s]*$/.test(s.innerHTML)||(s=this.getPreviousNode(s,i))):s||t===this.contain||(r=t.parentNode)!==this.contain&&(s=this.getPreviousNode(r,i)),s!==this.contain&&s)},getNodesNearCaret:function(){if(!this.isCollapsed())throw"Selection must be caret when using selection.getNodesNearCaret()";var e,t,n,i,o=this.getOwnRanges();return o&&o.length>0?(1===o[0].startContainer.nodeType?(e=o[0].startContainer.childNodes[o[0].startOffset-1])||0!==o[0].startOffset?e&&(t=e.previousSibling,n=e.nextSibling):n=o[0].startContainer.childNodes[0]:(0===o[0].startOffset&&o[0].startContainer.previousSibling?3===(e=o[0].startContainer.previousSibling).nodeType&&(i=e.data.length):(e=o[0].startContainer,i=o[0].startOffset),t=e.previousSibling,n=e.nextSibling),{caretNode:e,prevNode:t,nextNode:n,textOffset:i}):null},getSelectionParentsByTag:function(t){for(var n,i=this.getSelectedOwnNodes(),o=[],a=0,r=i.length;r>a;a++)(n=i[a].nodeName&&"LI"===i[a].nodeName?i[a]:e.dom.getParentElement(i[a],{query:"li"},!1,this.contain))&&o.push(n);return o.length?o:null},getRangeToNodeEnd:function(){if(this.isCollapsed()){var e,t,n,i=this.getRange();if(i)return e=i.startContainer,t=i.startOffset,(n=rangy.createRange(this.doc)).selectNodeContents(e),n.setStart(e,t),n}},getRangeToNodeBeginning:function(){if(this.isCollapsed()){var e=this.getRange(),t=e.startContainer,n=e.startOffset,i=rangy.createRange(this.doc);return i.selectNodeContents(t),i.setEnd(t,n),i}},caretIsInTheEndOfNode:function(e){var t,n,i=(rangy.createRange(this.doc),this.getSelection(),this.getRangeToNodeEnd());return!!i&&(t=i.cloneContents().textContent,!!/^\s*$/.test(t)&&(!e||(n=this.getRangeToNodeBeginning().cloneContents().textContent,!/[\u00A0 ][\s\uFEFF]*$/.test(n))))},caretIsFirstInSelection:function(t){var i=rangy.createRange(this.doc),o=this.getSelection(),a=this.getRange(),r=n(a.startContainer,a.startOffset);if(r){if(r.nodeType===e.TEXT_NODE){if(!r.parentNode)return!1;if(!this.isCollapsed()||r.parentNode.firstChild!==r&&!e.dom.domNode(r.previousSibling).is.block())return!1;var s=this.win.getComputedStyle(r.parentNode).whiteSpace;return"pre"===s||"pre-wrap"===s?0===a.startOffset:/^\s*$/.test(r.data.substr(0,a.startOffset))}return!(!t||!e.dom.domNode(r).is.lineBreak())||(i.selectNodeContents(this.getRange().commonAncestorContainer),i.collapse(!0),this.isCollapsed()&&(i.startContainer===o.anchorNode||i.endContainer===o.anchorNode)&&i.startOffset===o.anchorOffset)}},caretIsInTheBeginnig:function(t){var n=this.getSelection(),i=n.anchorNode,o=n.anchorOffset;return t&&i?0===o&&(i.nodeName&&i.nodeName===t.toUpperCase()||e.dom.getParentElement(i.parentNode,{query:t},1)):i?0===o&&!this.getPreviousNode(i,!0):void 0},getBeforeSelection:function(t){var n,i,o=this.getSelection(),a=o.isBackwards()?o.focusNode:o.anchorNode,r=o.isBackwards()?o.focusOffset:o.anchorOffset,s=this.createRange();if(a&&3===a.nodeType&&/^\s*$/.test(a.data.slice(0,r))&&(r=0),(i=e.dom.getParentElement(a,{query:"._wysihtml-temp-caret-fix"},1))&&(a=i.parentNode,r=Array.prototype.indexOf.call(a.childNodes,i)),a){if(r>0)return 3===a.nodeType?(s.setStart(a,0),s.setEnd(a,r),{type:"text",range:s,offset:r,node:a}):(s.setStartBefore(a.childNodes[0]),n=a.childNodes[r-1],s.setEndAfter(n),{type:"element",range:s,offset:r,node:n});if(s.setStartAndEnd(a,0),t){var l=this.getPreviousNode(a,!0),c=null;if(l&&(c=1===l.nodeType&&e.dom.hasClass(l,this.unselectableClass)?l:e.dom.domNode(l).lastLeafNode()),c)return{type:"leafnode",range:s,offset:r,node:c}}return{type:"none",range:s,offset:r,node:a}}return null},executeAndRestoreRangy:function(e,t){var n=rangy.saveSelection(this.win);if(n)try{e()}catch(e){setTimeout((function(){throw e}),0)}else e();rangy.restoreSelection(n)},executeAndRestore:function(t,n){var i,a,r,s,l,c,d,u,h=this.doc.body,p=n&&h.scrollTop,f=n&&h.scrollLeft,m="_wysihtml-temp-placeholder",g='<span class="'+m+'">'+e.INVISIBLE_SPACE+"</span>",v=this.getRange(!0);if(v){v.collapsed||(c=(d=v.cloneRange()).createContextualFragment(g),d.collapse(!1),d.insertNode(c),d.detach()),l=v.createContextualFragment(g),v.insertNode(l),c&&(i=this.contain.querySelectorAll("."+m),v.setStartBefore(i[0]),v.setEndAfter(i[i.length-1])),this.setSelection(v);try{t(v.startContainer,v.endContainer)}catch(e){setTimeout((function(){throw e}),0)}if((i=this.contain.querySelectorAll("."+m))&&i.length){u=rangy.createRange(this.doc),r=i[0].nextSibling,i.length>1&&(s=i[i.length-1].previousSibling),s&&r?(u.setStartBefore(r),u.setEndAfter(s)):(a=this.doc.createTextNode(e.INVISIBLE_SPACE),o.insert(a).after(i[0]),u.setStartBefore(a),u.setEndAfter(a)),this.setSelection(u);for(var b=i.length;b--;)i[b].parentNode.removeChild(i[b])}else this.contain.focus();n&&(h.scrollTop=p,h.scrollLeft=f);try{i.parentNode.removeChild(i)}catch(e){}}else t(h,h)},set:function(e,t){var n=rangy.createRange(this.doc);n.setStart(e,t||0),this.setSelection(n)},insertHTML:function(e){var t,n,i=this.getRange(),o=this.doc.createElement("DIV"),a=this.doc.createDocumentFragment();if(i){for(i.deleteContents(),o.innerHTML=e,t=o.lastChild;o.firstChild;)a.appendChild(o.firstChild);for(i.insertNode(a),n=this.contain.lastChild;n&&3===n.nodeType&&n.previousSibling&&/^\s*$/.test(n.data);)n=n.previousSibling;t&&(n&&t===n&&1===t.nodeType&&this.contain.appendChild(this.doc.createElement("br")),this.setAfter(t))}},insertNode:function(e){var t=this.getRange();t&&(t.deleteContents(),t.insertNode(e))},canAppendChild:function(e){var t,n,i=this.getRange();return(t=e||i.startContainer)&&(n=(t.tagName||t.nodeName).toLowerCase()),-1===["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(n)},splitElementAtCaret:function(t,n){var i,o,a,r,s,l=this.getSelection();if(l.rangeCount>0){(i=l.getRangeAt(0).cloneRange()).setEndAfter(t);for(var c=(s=(o=i.extractContents()).childNodes).length;c--;)e.dom.domNode(s[c]).is.visible()||o.removeChild(s[c]);t.parentNode.insertBefore(o,t.nextSibling),n?(a=n.firstChild||n,r=n.lastChild||n,t.parentNode.insertBefore(n,t.nextSibling),a&&r&&(i.setStartBefore(a),i.setEndAfter(r),this.setSelection(i))):(i.setStartAfter(t),i.setEndAfter(t)),e.dom.domNode(t).is.visible()||(""===e.dom.getTextContent(t)?t.parentNode.removeChild(t):t.parentNode.replaceChild(this.doc.createTextNode(" "),t))}},surround:function(e){var t,n=this.getOwnRanges(),i=[];if(0==n.length)return i;for(var o=n.length;o--;){t=this.doc.createElement(e.nodeName),i.push(t),e.className&&(t.className=e.className),e.cssStyle&&t.setAttribute("style",e.cssStyle);try{n[o].surroundContents(t),this.selectNode(t)}catch(e){t.appendChild(n[o].extractContents()),n[o].insertNode(t)}}return i},scrollIntoView:function(){var t,n=this.doc,i=n.documentElement.scrollHeight>n.documentElement.offsetHeight,o=n._wysihtmlScrollIntoViewElement=n._wysihtmlScrollIntoViewElement||function(){var t=n.createElement("span");return t.innerHTML=e.INVISIBLE_SPACE,t}();i&&(this.insertNode(o),t=function(e){var t=0;if(e.parentNode)do{t+=e.offsetTop||0,e=e.offsetParent}while(e);return t}(o),o.parentNode.removeChild(o),t>=n.body.scrollTop+n.documentElement.offsetHeight-5&&(n.body.scrollTop=t))},selectLine:function(){var t=rangy.createRange();e.browser.supportsSelectionModify()?this._selectLine_W3C():t.nativeRange&&t.nativeRange.getBoundingClientRect&&this._selectLineUniversal()},includeRangyRangeHelpers:function(){var e=this.getSelection(),t=e.getRangeAt(0),n=function(e){return e&&1===e.nodeType&&e.classList.contains("rangySelectionBoundary")},i=1===e.anchorNode.nodeType?e.anchorNode.childNodes[e.anchorOffset]:e.anchorNode,o=1===e.focusNode.nodeType?e.focusNode.childNodes[e.focusOffset]:e.focusNode;o&&e.focusOffset===function(e){return 1===e.nodeType?e.childNodes&&e.childNodes.length||0:e.data&&e.data.length||0}(o)&&o.nextSibling&&n(o.nextSibling)&&t.setEndAfter(o.nextSibling),i&&0===e.anchorOffset&&i.previousSibling&&n(i.previousSibling)&&t.setStartBefore(i.previousSibling),t.select()},_selectLine_W3C:function(){var e=this.win.getSelection(),t=[e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset];e.modify("move","left","lineboundary"),e.modify("extend","right","lineboundary"),e.anchorNode===t[0]&&e.anchorOffset===t[1]&&e.focusNode===t[2]&&e.focusOffset===t[3]?this._selectLineUniversal():this.includeRangyRangeHelpers()},toLineBoundary:function(t,n){if(n=void 0!==n&&n,e.browser.supportsSelectionModify()){var i=this.win.getSelection();i.modify("extend",t,"lineboundary"),n&&("left"===t?i.collapseToStart():"right"===t&&i.collapseToEnd())}},getRangeRect:function(e){var t,n=(this.doc.createTextNode("i"),this.doc.createTextNode("i"));return e.collapsed?(e.insertNode(n),e.selectNode(n),t=e.nativeRange.getBoundingClientRect(),e.deleteContents()):t=e.nativeRange.getBoundingClientRect(),t},_selectLineUniversal:function(){var t,n,i,o,a=this.getSelection().getRangeAt(0),r=0,s=this;a.cloneRange(),a.cloneRange(),a.collapsed&&(3===a.startContainer.nodeType&&a.startOffset<a.startContainer.data.length||1===a.startContainer.nodeType&&a.startContainer.childNodes[a.startOffset]&&3===a.startContainer.childNodes[a.startOffset].nodeType&&a.startContainer.childNodes[a.startOffset].data.length>0?a.moveEnd("character",1):a.startOffset>0&&(3===a.startContainer.nodeType||1===a.startContainer.nodeType&&!function(t){return t&&1===t.nodeType&&("block"===s.win.getComputedStyle(t).display||e.lang.array(["BR","HR"]).contains(t.nodeName))}(function(e){var t=e;if(t)for(;t&&(1===t.nodeType&&t.classList.contains("rangySelectionBoundary")||3===t.nodeType&&/^\s*$/.test(t.data));)t=t.previousSibling;return t}(a.startContainer.childNodes[a.startOffset-1])))&&a.moveStart("character",-1)),a.collapsed||a.insertNode(this.doc.createTextNode(e.INVISIBLE_SPACE)),t=a.nativeRange.getBoundingClientRect();do{n=a.moveStart("character",-1),(i=a.nativeRange.getBoundingClientRect())&&Math.floor(i.top)===Math.floor(t.top)||(a.moveStart("character",1),o=!0),r++}while(0!==n&&!o&&2e3>r);if(r=0,o=!1,t=a.nativeRange.getBoundingClientRect(),a.endContainer!==this.contain||this.contain.lastChild&&this.contain.childNodes[a.endOffset]!==this.contain.lastChild)do{n=a.moveEnd("character",1),(i=a.nativeRange.getBoundingClientRect())&&Math.floor(i.bottom)===Math.floor(t.bottom)||(a.moveEnd("character",-1),a.endContainer&&1===a.endContainer.nodeType&&a.endContainer.childNodes[a.endOffset]&&1===a.endContainer.childNodes[a.endOffset].nodeType&&"BR"===a.endContainer.childNodes[a.endOffset].nodeName&&a.endContainer.childNodes[a.endOffset].previousSibling&&(1===a.endContainer.childNodes[a.endOffset].previousSibling.nodeType?a.setEnd(a.endContainer.childNodes[a.endOffset].previousSibling,a.endContainer.childNodes[a.endOffset].previousSibling.childNodes.length):3===a.endContainer.childNodes[a.endOffset].previousSibling.nodeType&&a.setEnd(a.endContainer.childNodes[a.endOffset].previousSibling,a.endContainer.childNodes[a.endOffset].previousSibling.data.length)),o=!0),r++}while(0!==n&&!o&&2e3>r);a.select(),this.includeRangyRangeHelpers()},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes(Array.isArray(e)?e:[e],t):[]},getOwnNodes:function(e,t,n){for(var i=this.getOwnRanges(),o=[],a=0,r=i.length;r>a;a++)i[a]&&(n&&i[a].splitBoundaries(),o=o.concat(i[a].getNodes(Array.isArray(e)?e:[e],t)));return o},fixRangeOverflow:function(e){if(this.contain&&this.contain.firstChild&&e){var t=e.compareNode(this.contain);if(2!==t)1===t&&e.setStartBefore(this.contain.firstChild),0===t&&e.setEndAfter(this.contain.lastChild),3===t&&(e.setStartBefore(this.contain.firstChild),e.setEndAfter(this.contain.lastChild));else if(this._detectInlineRangeProblems(e)){var n=e.endContainer.previousElementSibling;n&&e.setEnd(n,this._endOffsetForNode(n))}}},_endOffsetForNode:function(e){var t=document.createRange();return t.selectNodeContents(e),t.endOffset},_detectInlineRangeProblems:function(e){var t=o.compareDocumentPosition(e.startContainer,e.endContainer);return 0==e.endOffset&&4&t},getRange:function(e){var t=this.getSelection(),n=t&&t.rangeCount&&t.getRangeAt(0);return!0!==e&&this.fixRangeOverflow(n),n},getOwnUneditables:function(){var t=o.query(this.contain,"."+this.unselectableClass),n=o.query(t,"."+this.unselectableClass);return e.lang.array(t).without(n)},getOwnRanges:function(){var e,t=[],n=this.getRange();if(n&&t.push(n),this.unselectableClass&&this.contain&&n){var i,o=this.getOwnUneditables();if(o.length>0)for(var a=0,r=o.length;r>a;a++){e=[];for(var s=0,l=t.length;l>s;s++){if(t[s])switch(t[s].compareNode(o[a])){case 2:break;case 3:(i=t[s].cloneRange()).setEndBefore(o[a]),e.push(i),(i=t[s].cloneRange()).setStartAfter(o[a]),e.push(i);break;default:e.push(t[s])}t=e}}}return t},getSelection:function(){return rangy.getSelection(this.win)},setSelection:function(e){var t=rangy.getSelection(this.win);return t.setSingleRange(e),t&&t.anchorNode&&t.focusNode?t:null},selectAll:function(){var t,n=this.createRange(),o=this.composer,a=this,r=i(this.composer.element),s=i(this.composer.element),l=function(){n.setStart(o.element,0),n.setEnd(o.element,o.element.childNodes.length),t=a.setSelection(n)},c=function(){return!t||t.nativeSelection&&t.nativeSelection.type&&("Caret"===t.nativeSelection.type||"None"===t.nativeSelection.type)};e.dom.removeInvisibleSpaces(this.composer.element),l(),this.composer.element.firstChild&&c()&&(this.composer.element.appendChild(r),l(),c()&&(r.parentNode.removeChild(r),this.composer.element.insertBefore(s,this.composer.element.firstChild),l(),c()&&(this.composer.element.appendChild(r),l())))},createRange:function(){return rangy.createRange(this.doc)},isCollapsed:function(){return this.getSelection().isCollapsed},getHtml:function(){return this.getSelection().toHtml()},getPlainText:function(){return this.getSelection().toString()},isEndToEndInNode:function(t){var n=this.getRange(),i=n.commonAncestorContainer,o=n.startContainer,a=n.endContainer;if(i.nodeType===e.TEXT_NODE&&(i=i.parentNode),o.nodeType===e.TEXT_NODE&&!/^\s*$/.test(o.data.substr(n.startOffset)))return!1;if(a.nodeType===e.TEXT_NODE&&!/^\s*$/.test(a.data.substr(n.endOffset)))return!1;for(;o&&o!==i;){if(o.nodeType!==e.TEXT_NODE&&!e.dom.contains(i,o))return!1;if(e.dom.domNode(o).prev({ignoreBlankTexts:!0}))return!1;o=o.parentNode}for(;a&&a!==i;){if(a.nodeType!==e.TEXT_NODE&&!e.dom.contains(i,a))return!1;if(e.dom.domNode(a).next({ignoreBlankTexts:!0}))return!1;a=a.parentNode}return!!e.lang.array(t).contains(i.nodeName)&&i},isInThisEditable:function(){var t=this.getSelection(),n=t.focusNode,i=t.anchorNode;return n&&1!==n.nodeType&&(n=n.parentNode),i&&1!==i.nodeType&&(i=i.parentNode),i&&n&&(e.dom.contains(this.composer.element,n)||this.composer.element===n)&&(e.dom.contains(this.composer.element,i)||this.composer.element===i)},deselect:function(){var e=this.getSelection();e&&e.removeAllRanges()}})}(wysihtml),wysihtml.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml.commands[e],i=wysihtml.lang.array(arguments).get(),o=n&&n.exec,a=null;if(this.composer.hasPlaceholderSet()&&!wysihtml.lang.array(["styleWithCSS","enableObjectResizing","enableInlineTableEditing"]).contains(e)&&(this.composer.element.innerHTML="",this.composer.selection.selectNode(this.composer.element)),this.editor.fire("beforecommand:composer"),o)i.unshift(this.composer),a=o.apply(n,i);else try{a=this.doc.execCommand(e,!1,t)}catch(e){}return this.editor.fire("aftercommand:composer"),a},remove:function(e,t){var n=wysihtml.commands[e],i=wysihtml.lang.array(arguments).get(),o=n&&n.remove;return o?(i.unshift(this.composer),o.apply(n,i)):void 0},state:function(e,t){var n=wysihtml.commands[e],i=wysihtml.lang.array(arguments).get(),o=n&&n.state;if(o)return i.unshift(this.composer),o.apply(n,i);try{return this.doc.queryCommandState(e)}catch(e){return!1}},stateValue:function(e){var t=wysihtml.commands[e],n=wysihtml.lang.array(arguments).get(),i=t&&t.stateValue;return!!i&&(n.unshift(this.composer),i.apply(t,n))}}),function(e){function t(t){return e.lang.object({}).merge(n).merge({attribute:t}).get()}var n={nodeName:"A",toggle:!1};e.commands.createLink={exec:function(n,i,o){var a=t(o);if(n.selection.isCollapsed()&&!this.state(n,i)){var r=n.doc.createTextNode(a.attribute.href);n.selection.insertNode(r),n.selection.selectNode(r)}e.commands.formatInline.exec(n,i,a)},state:function(t,i){return e.commands.formatInline.state(t,i,n)}}}(wysihtml),function(e){function t(e,t){return 3===e.nodeType?e:e.childNodes[t]||e}function n(e){return e&&1===e.nodeType&&"BR"===e.nodeName}function i(e){return e&&1===e.nodeType&&e.classList.contains("rangySelectionBoundary")}function o(e,t){return n(e)||function(e,t){return e&&1===e.nodeType&&"block"===t.win.getComputedStyle(e).display}(e,t)}function a(t,n){e.dom.removeInvisibleSpaces(t.element);for(var i,o=t.element,a=o.querySelectorAll(E),r=t.config.classNames.uneditableContainer+[""].concat(E.split(",")).join(", "+t.config.classNames.uneditableContainer+" "),s=o.querySelectorAll(r),l=e.lang.array(a).without(s),c=l.length;c--;)""!==l[c].innerHTML.replace(/[\uFEFF]/g,"")||0!==n.length&&l[c]===n[n.length-1]||((i=e.lang.array(n).indexOf(l[c]))>-1&&n.splice(i,1),l[c].parentNode.removeChild(l[c]));return n}function r(e){return e.config.useLineBreaks?"DIV":"P"}function s(e,t,n){for(var i=e,o=null;i&&t&&i!==t;)1===i.nodeType&&i.matches(n?E:T)&&(o=i),i=i.parentNode;return o}function l(t,n,i){return t||(t=i.doc.createElement(n.nodeName||r(i))).appendChild(i.doc.createTextNode(e.INVISIBLE_SPACE)),n.nodeName&&t.nodeName!==n.nodeName&&(t=k.renameElement(t,n.nodeName)),n.classRegExp&&(t.className=t.className.replace(n.classRegExp,"")),n.className&&t.classList.add(n.className),n.styleProperty&&void 0!==n.styleValue&&(t.style[e.browser.fixStyleKey(n.styleProperty)]=n.styleValue),t}function c(t,n,i){var o,a=t.previousSibling,s=t.nextSibling,l=!1;n.styleProperty&&(t.style[e.browser.fixStyleKey(n.styleProperty)]=""),n.className&&t.classList.remove(n.className),n.classRegExp&&(t.className=t.className.replace(n.classRegExp,"")),null!==t.getAttribute("class")&&""===t.getAttribute("class").trim()&&t.removeAttribute("class"),n.nodeName&&t.nodeName.toLowerCase()===n.nodeName.toLowerCase()&&((o=t.getAttribute("style"))&&""!==o.trim()?t=k.renameElement(t,r(i)):(k.unwrap(t),l=!0)),null!==t.getAttribute("style")&&""===t.getAttribute("style").trim()&&t.removeAttribute("style"),l&&v(a,s,i)}function d(t){for(var n,i=t.querySelectorAll(E)||[],o=i.length;o--;)n=e.dom.domNode(i[o]).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),e.dom.domNode(i[o]).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),n&&1!==n.nodeType&&"BR"!==n.nodeName&&""!==(i[o].innerHTML||i[o].nodeValue||"").trim()&&i[o].parentNode.insertBefore(i[o].ownerDocument.createElement("BR"),n),n&&1!==n.nodeType&&"BR"!==n.nodeName&&""!==(i[o].innerHTML||i[o].nodeValue||"").trim()&&i[o].parentNode.insertBefore(i[o].ownerDocument.createElement("BR"),n),e.dom.unwrap(i[o])}function u(e,t){var n,i=e.startContainer,o=e.endContainer;return i&&1===i.nodeType&&i===o?void(i.firstChild===i.lastChild&&1===e.endOffset&&i!==t.element&&"LI"!==i.nodeName&&"TD"!==i.nodeName&&(e.setStartBefore(i),e.setEndAfter(o))):i&&1===i.nodeType&&3===o.nodeType?void(i.firstChild===o&&e.endOffset===o.data.length&&i!==t.element&&"LI"!==i.nodeName&&"TD"!==i.nodeName&&e.setEndAfter(i)):o&&1===o.nodeType&&3===i.nodeType?void(o.firstChild===i&&0===e.startOffset&&o!==t.element&&"LI"!==o.nodeName&&"TD"!==o.nodeName&&e.setStartBefore(o)):i&&3===i.nodeType&&i===o&&1===i.parentNode.childNodes.length?void(e.endOffset==o.data.length&&0===e.startOffset&&(n=i.parentNode,n!==t.element&&"LI"!==n.nodeName&&"TD"!==n.nodeName&&(e.setStartBefore(n),e.setEndAfter(n)))):void 0}function h(t){for(var n,i,o,a,r,s,l=[],c=0,d=t.length;d>c;c++)if(1===t[c].startContainer.nodeType&&t[c].startContainer.matches("ul, ol")&&t[c].setStart(t[c].startContainer.childNodes[t[c].startOffset],0),1===t[c].endContainer.nodeType&&t[c].endContainer.matches("ul, ol")&&((s=t[c].endContainer.childNodes[Math.max(t[c].endOffset-1,0)]).childNodes&&t[c].setEnd(s,s.childNodes.length)),n=t[c].getNodes([1],(function(e){return"LI"===e.nodeName})),n.length>0){for(i=0,o=n.length;o>i;i++)((r=t[c].compareNode(n[i]))===t[c].NODE_AFTER||r===t[c].NODE_INSIDE)&&(a=t[c].cloneRange(),(s=e.dom.domNode(n[i]).prev({nodeTypes:[1]}))?a.setEnd(s,s.childNodes.length):n[i].closest("ul, ol")?a.setEndBefore(n[i].closest("ul, ol")):a.setEndBefore(n[i]),l.push(a),t[c].setStart(n[i],0)),(r===t[c].NODE_BEFORE||r===t[c].NODE_INSIDE)&&((a=t[c].cloneRange()).setEnd(n[i],n[i].childNodes.length),l.push(a),(s=e.dom.domNode(n[i]).next({nodeTypes:[1]}))?t[c].setStart(s,0):n[i].closest("ul, ol")?t[c].setStartAfter(n[i].closest("ul, ol")):t[c].setStartAfter(n[i]));l.push(t[c])}else l.push(t[c]);return l}function p(t,n,i){var o=t?e.lang.object(t).clone(!0):null;return o&&(o.nodeName=o.nodeName||n||r(i)),o}function f(t,n,i,a){var r,l,c,d,u,h=n.startContainer;if(a=a||s(h,i.element,!0))l=t.firstChild,c=t.lastChild,i.selection.splitElementAtCaret(a,t),u=e.dom.domNode(c).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),d=e.dom.domNode(l).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),l&&!o(l,i)&&d&&!o(d,i)&&l.parentNode.insertBefore(i.doc.createElement("br"),l),c&&!o(c,i)&&u&&!o(u,i)&&u.parentNode.insertBefore(i.doc.createElement("br"),u);else if(r=function(e,t){for(var n,i,o,a=e,r=null;a&&t&&a!==t;)1===a.nodeType&&a.matches(D)&&(i=a,null===r?n=r=a.cloneNode(!1):((o=a.cloneNode(!1)).appendChild(r),r=o)),a=a.parentNode;return{parent:i,outerNode:r,innerNode:n}}(h,i.element),r.outerNode&&r.innerNode&&r.parent){if(1===t.childNodes.length){for(;t.firstChild.firstChild;)r.innerNode.appendChild(t.firstChild.firstChild);t.firstChild.appendChild(r.outerNode)}i.selection.splitElementAtCaret(r.parent,t)}else{var p=t.firstChild,f=t.lastChild;n.insertNode(t),n.setStartBefore(p),n.setEndAfter(f)}}function m(n,i,a){for(var r,s,l=n.cloneRange(),c=t(l.startContainer,l.startOffset).previousSibling,u=t(l.endContainer,l.endOffset).nextSibling,h=l.extractContents(),p=a.doc.createDocumentFragment();h.firstChild;){if(1===h.firstChild.nodeType&&h.firstChild.matches(E)){d(h.firstChild),(r=e.dom.unwrap(h.firstChild)).length>0&&(p.lastChild&&(1!==p.lastChild.nodeType||!o(p.lastChild,a))||!p.lastChild&&c&&(1!==c.nodeType||o(c,a)))&&p.appendChild(a.doc.createElement("BR"));for(var m=0,g=r.length;g>m;m++)p.appendChild(r[m]);r.length>0&&(1===p.lastChild.nodeType&&o(p.lastChild,a)||(u||p.lastChild!==h.lastChild)&&p.appendChild(a.doc.createElement("BR")))}else p.appendChild(h.firstChild);!1}return s=e.lang.array(p.childNodes).get(),f(p,l,a),s}function g(t,i,o){var a=t&&e.dom.domNode(t).prev({nodeTypes:[1,3],ignoreBlankTexts:!0});n(i)&&i.parentNode.removeChild(i),!n(t)||a&&1===a.nodeType&&"block"===o.win.getComputedStyle(a).display||t.parentNode.removeChild(t)}function v(e,t,o){e&&i(e)&&(e=e.previousSibling),t&&i(t)&&(t=t.nextSibling),e&&e.previousSibling,e&&(1!==e.nodeType||"block"!==o.win.getComputedStyle(e).display&&!n(e))&&e.parentNode&&e.parentNode.insertBefore(o.doc.createElement("br"),e.nextSibling),t&&(1!==t.nodeType||"block"!==o.win.getComputedStyle(t).display)&&t.parentNode&&t.parentNode.insertBefore(o.doc.createElement("br"),t)}function b(n,i,o,a){var r,c,u=i?function(e){return{nodeName:e.nodeName||null,className:e.classRegExp?null:e.className||null,classRegExp:e.classRegExp||null,styleProperty:e.styleProperty||null}}(i):null,h=n.cloneRange(),m=h.startContainer,v=t(h.startContainer,h.startOffset),b=t(h.endContainer,h.endOffset),y=h.startContainer!==v||3!==v.nodeType||I(v,h.startOffset)?e.dom.domNode(v).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}):v,w=1===h.endContainer.nodeType&&h.endContainer.childNodes[h.endOffset]===b&&(1===b.nodeType||!N(b,h.endOffset)&&!e.dom.domNode(b).is.rangyBookmark())||h.endContainer===b&&3===b.nodeType&&!N(b,h.endOffset)?b:e.dom.domNode(b).next({nodeTypes:[1,3],ignoreBlankTexts:!0}),x=h.extractContents(),C=a.doc.createDocumentFragment(),S=u?e.dom.getParentElement(m,u,null,a.element):null,_=!o||!i||"BLOCKQUOTE"===i.nodeName&&"BLOCKQUOTE"===o,k=S||s(m,a.element,_);if(e.dom.domNode(w).is.rangyBookmark()&&(w=(b=w).nextSibling),A(x),i&&"BLOCKQUOTE"===i.nodeName){var D=l(null,i,a);D.appendChild(x),C.appendChild(D),c=[D]}else{if(x.firstChild)for(;x.firstChild;)if(1==x.firstChild.nodeType&&x.firstChild.matches(E))l(x.firstChild,i,a),x.firstChild.matches(T)&&d(x.firstChild),C.appendChild(x.firstChild);else{for(r=l(null,p(i,o,a),a);x.firstChild&&(1!==x.firstChild.nodeType||!x.firstChild.matches(E));)1==x.firstChild.nodeType&&r.matches(T)&&d(x.firstChild),r.appendChild(x.firstChild);C.appendChild(r)}else C.appendChild(l(null,i,a));c=e.lang.array(C.childNodes).get()}return f(C,h,a,k),g(y,w,a),c.length>0&&(void 0===c[c.length-1].lastChild||e.dom.domNode(c[c.length-1].lastChild).is.rangyBookmark())&&c[c.length-1].appendChild(a.doc.createElement("br")),c}function y(t,n){var i=e.dom.getParentElement(t,{query:E},null,n.element);return i?i.nodeName:null}function w(t,n){var i,o=e.dom.getParentElement(t.selection.getOwnRanges()[0].startContainer,{query:T+", "+(n?n.toLowerCase():"div")},null,t.element);o?((i=t.selection.createRange()).selectNode(o),t.selection.setSelection(i)):t.isEmpty()||t.selection.selectLine()}function x(e,t){var n=t.selection.createRange(),i=e[e.length-1],o=1===i.nodeType&&i.childNodes?0|i.childNodes.length:i.length||0;n.setStart(e[0],0),n.setEnd(i,o),n.select()}function C(e,t,n){for(var i,o=t.selection.getOwnRanges(),a=[],r=(o=h(o)).length;r--;)u(o[r],t),i=y(o[r].startContainer,t),a="remove"===e?a.concat(m(o[r],0,t)):a.concat(b(o[r],n,i,t));return a}function S(e){return"string"==typeof e&&(e={nodeName:e.toUpperCase()}),e}function _(t){var n;return!!(t.selection.isCollapsed()&&(n=t.selection.getNodesNearCaret(),n&&n.caretNode&&(e.dom.domNode(n.caretNode).is.lineBreak()||3===n.caretNode.nodeType&&0===n.textOffset&&(!n.prevNode||e.dom.domNode(n.prevNode).is.lineBreak())||1===n.caretNode.nodeType&&n.caretNode.classList.contains("rangySelectionBoundary")&&(!n.prevNode||e.dom.domNode(n.prevNode).is.lineBreak()||e.dom.domNode(n.prevNode).is.block())&&(!n.nextNode||e.dom.domNode(n.nextNode).is.lineBreak()||e.dom.domNode(n.nextNode).is.block()))))}var k=e.dom,T="h1, h2, h3, h4, h5, h6, p, pre",E="h1, h2, h3, h4, h5, h6, p, pre, div, blockquote",D="b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u",I=function(e,t){var n=e.data?e.data.slice(0,t):"";return/^\s*$/.test(n)},N=function(e,t){var n=e.data?e.data.slice(t):"";return/^\s*$/.test(n)},A=function(e){if(e){for(;e.firstChild&&3===e.firstChild.nodeType&&/^\s*$/.test(e.firstChild.data)&&e.lastChild!==e.firstChild;)e.removeChild(e.firstChild);for(;e.lastChild&&3===e.lastChild.nodeType&&/^\s*$/.test(e.lastChild.data)&&e.lastChild!==e.firstChild;)e.removeChild(e.lastChild);e.firstChild&&1===e.firstChild.nodeType&&"BR"===e.firstChild.nodeName&&e.lastChild!==e.firstChild&&e.removeChild(e.firstChild),e.lastChild&&1===e.lastChild.nodeType&&"BR"===e.lastChild.nodeName&&e.lastChild!==e.firstChild&&e.removeChild(e.lastChild)}};e.commands.formatBlock={exec:function(e,t,n){var i,o,r=[];if((n=S(n))&&n.toggle&&(o=this.state(e,t,n)),o){i=rangy.saveSelection(e.win);for(var s=0,l=o.length;l>s;s++)c(o[s],n,e)}else e.selection.isCollapsed()&&(i=rangy.saveSelection(e.win),_(e)?e.selection.selectLine():w(e,n&&n.nodeName?n.nodeName.toUpperCase():void 0)),r=n?C("apply",e,n):C("remove",e);r=a(e,r),i?rangy.restoreSelection(i):x(r,e)},remove:function(e,t,n){var i,o;n=S(n),e.selection.isCollapsed()&&(o=rangy.saveSelection(e.win),w(e,n&&n.nodeName?n.nodeName.toUpperCase():void 0)),i=a(e,i=C("remove",e)),o?rangy.restoreSelection(o):x(i,e)},state:function(t,n,i){i=S(i);for(var o,a=t.selection.filterElements(function(t){return e.dom.domNode(t).test(i||{query:E})}.bind(this)),r=t.selection.getSelectedOwnNodes(),s=0,l=r.length;l>s;s++)(o=k.getParentElement(r[s],i||{query:E},null,t.element))&&-1===a.indexOf(o)&&a.push(o);return 0!==a.length&&a}}}(wysihtml),function(e){function t(e){return/^\s*$/.test(e.className)}function n(e){return!e.getAttribute("style")||/^\s*$/.test(e.getAttribute("style"))}function i(t,n){var i,o,a,r;return 1===t.nodeType&&1===n.nodeType&&(t.nodeName===n.nodeName&&(i=t.className.trim().replace(/\s+/g," ").split(" "),o=n.className.trim().replace(/\s+/g," ").split(" "),!(e.lang.array(i).without(o).length>0)&&(a=e.dom.getAttributes(t),r=e.dom.getAttributes(n),!(a.length!==r.length||!e.lang.object(e.lang.object(a).difference(r)).isEmpty()))))}function o(t,n){var i=n&&n.nodeName||E,o=t.ownerDocument.createElement(i);if(n.classRegExp&&(o.className=o.className.replace(n.classRegExp,"")),n.className&&o.classList.add(n.className),n.styleProperty&&void 0!==n.styleValue&&(o.style[e.browser.fixStyleKey(n.styleProperty)]=n.styleValue),n.attribute)if("object"==typeof n.attribute)for(var a in n.attribute)n.attribute.hasOwnProperty(a)&&o.setAttribute(a,n.attribute[a]);else void 0!==n.attributeValue&&o.setAttribute(n.attribute,n.attributeValue);return o}function a(t,n,i){var o,a=e.dom.getAttributes(t),r=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&(void 0===typeof t[n]||t[n]!==e[n]))return!1;return!0}(n,a);if(e.lang.object(a).difference(n),r&&!1!==i)for(o in n)n.hasOwnProperty(o)&&t.removeAttribute(o);else for(o in n)n.hasOwnProperty(o)&&t.setAttribute(o,n[o])}function r(i,o){var r,s,l;o.className&&(!1!==o.toggle&&i.classList.contains(o.className)?i.classList.remove(o.className):(o.classRegExp&&(i.className=i.className.replace(o.classRegExp,"")),i.classList.add(o.className)),t(i)&&i.removeAttribute("class")),o.styleProperty&&(!1!==o.toggle&&i.style[e.browser.fixStyleKey(o.styleProperty)].trim().replace(/, /g,",")===o.styleValue?i.style[e.browser.fixStyleKey(o.styleProperty)]="":i.style[e.browser.fixStyleKey(o.styleProperty)]=o.styleValue),n(i)&&i.removeAttribute("style"),o.attribute&&("object"==typeof o.attribute?r=o.attribute:(r={})[o.attribute]=o.attributeValue||"",a(i,r,o.toggle)),l=!!(s=o.nodeName?I[o.nodeName.toLowerCase()]||o.nodeName.toLowerCase():null)&&e.dom.domNode(i).test({query:s}),(!o.nodeName||o.nodeName===E||l)&&(!1!==o.toggle&&l||!o.nodeName&&i.nodeName===E)&&t(i)&&n(i)&&function(t){var n=e.dom.getAttributes(t);return e.lang.object(n).isEmpty()}(i)&&e.dom.unwrap(i)}function s(t,n){var i=[];return t.isCollapsed()||(i=i.concat(t.getOwnNodes([3],(function(t){return!e.dom.domNode(t).is.emptyTextNode()}),n))),i}function l(e,t,n,i){var o=e,a=i?t:function(e){return{nodeName:e.nodeName||null,className:e.classRegExp?null:e.className||null,classRegExp:e.classRegExp||null,styleProperty:e.styleProperty||null}}(t);do{if(1===o.nodeType&&c(o,a))return o;o=o.parentNode}while(o&&o!==n);return null}function c(t,n){var i;if(n.nodeName){var o=I[n.nodeName.toLowerCase()]||n.nodeName.toLowerCase();return e.dom.domNode(t).test({query:o})}return(i=e.lang.object(n).clone()).query=D,e.dom.domNode(t).test(i)}function d(t,n){var i=document.documentElement||document.body,o=i.scrollTop,a=i.scrollLeft;rangy.getSelection(t.win),rangy.getSelection(t.win).removeAllRanges();try{rangy.getSelection(t.win).addRange(n)}catch(e){}t.doc.activeElement&&e.dom.contains(t.element,t.doc.activeElement)||(t.element.focus(),i.scrollTop=o,i.scrollLeft=a,rangy.getSelection(t.win).addRange(n))}function u(e,t){var n=rangy.createRange(t.doc),i=e[e.length-1];e[0]&&i&&(n.setStart(e[0],0),n.setEnd(i,i.length),d(t,n))}function h(e,t,n,i){var o=rangy.createRange(e.doc);t&&(o.setStart(t,n),o.setEnd(t,void 0!==i?i:n),d(e,o))}function p(e,t,n){var i,o,a,r=s(e.selection),c=[],d=!1;if(e.selection.isInThisEditable()){if(0===r.length&&e.selection.isCollapsed()){if(!(a=e.selection.getSelection().anchorNode))return{nodes:[],partial:!1};3===a.nodeType&&(r=[a])}r.length||(o=e.selection.getOwnRanges()[0])&&(r=[o.endContainer]);for(var u=0,h=r.length;h>u;u++)(i=l(r[u],t,e.element,n))?c.push(i):d=!0}return{nodes:c,partial:d}}function f(e){var t,n,i,o;return!!(e&&(t=e.anchorNode,n=e.anchorOffset,t&&3===t.nodeType&&n>0&&n<t.data.length))&&(i=t.data[n-1],o=t.data[n],/\w/.test(i)&&/\w/.test(o))}function m(t){var n,i,o,a,r,s,l=[];if(t&&(n=t.anchorNode,i=r=s=t.anchorOffset,o=n.ownerDocument,a=rangy.createRange(o),n&&3===n.nodeType)){for(;r>0&&/\w/.test(n.data[r-1]);)r--;for(;s<n.data.length&&/\w/.test(n.data[s]);)s++;return a.setStartAndEnd(n,r,s),a.splitBoundaries(),l=a.getNodes([3],(function(t){return!e.dom.domNode(t).is.emptyTextNode()})),{wordOffset:i-r,range:a,textNode:l[0]}}return!1}function g(e,t){for(;t.firstChild;)e.appendChild(t.firstChild);t.parentNode.removeChild(t)}function v(e){for(var t=e.length;t--;)e[t]&&e[t].parentNode&&(e[t].nextSibling&&i(e[t],e[t].nextSibling)&&g(e[t],e[t].nextSibling),e[t].previousSibling&&i(e[t],e[t].previousSibling)&&g(e[t].previousSibling,e[t]))}function b(e,t,n){t.length>0&&u(t,e),v(p(e,n).nodes),t.length>0&&u(t,e)}function y(e,t,n,i){h(e,t,n),v(p(e,i).nodes),h(e,t,n)}function w(e,t){var n=o(e,t);e.parentNode.insertBefore(n,e),n.appendChild(e)}function x(t,n,i){var o,a=l(t,i,n.element);a&&(o=a.cloneNode(!1),e.dom.domNode(t).escapeParent(a,o),r(o,i))}function C(t,n,i){var o=l(t,i,n.element);o&&e.dom.domNode(t).escapeParent(o)}function S(e,t,n){var i=o(e.endContainer,n);e.surroundContents(i),t.selection.selectNode(i)}function _(t,n,i,o){var a,s,c,d,u=p(t,o,!0),h=t.selection.getSelection();if(n.length){if(u.partial||!1===o.toggle)for(d=n.length;d--;)l(n[d],o,t.element)&&x(n[d],t,o),l(n[d],o,t.element)||w(n[d],o);else for(d=n.length;d--;)x(n[d],t,o);b(t,n,o)}else if(!1!==o.toggle)if(f(h))s=(a=m(h)).textNode,x(a.textNode,t,o),y(t,a.textNode,a.wordOffset,o);else{s=t.doc.createTextNode(e.INVISIBLE_SPACE),(c=i.nodes[0].cloneNode(!1)).appendChild(s),t.selection.splitElementAtCaret(i.nodes[0],c),r(c,o),b(t,[s],o);var g=t.selection.getSelection();if(g.anchorNode&&g.focusNode)try{g.collapseToEnd()}catch(e){}}else for(d=i.nodes.length;d--;)r(i.nodes[d],o)}function k(t,n,i,o){var a,r,s,l=t.selection.getSelection();if(n.length){for(s=n.length;s--;)C(n[s],t,o);b(t,n,o)}else{for(a=l.anchorNode,r=l.anchorOffset,s=i.nodes.length;s--;)e.dom.unwrap(i.nodes[s]);y(t,a,r,o)}}function T(e){return(e="string"==typeof e?{nodeName:e}:e).nodeName&&(e.nodeName=e.nodeName.toUpperCase()),e}var E="SPAN",D="b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u",I={b:"b, strong",strong:"b, strong",em:"em, i",i:"em, i"};e.commands.formatInline={exec:function(e,t,n){n=T(n),e.element.normalize();var i=s(e.selection,!0),o=p(e,n);o.nodes.length>0?_(e,i,o,n):function(e,t,n){var i,o,a=e.selection.getSelection();if(t.length){for(o=t.length;o--;)w(t[o],n);b(e,t,n)}else if(f(a))w((i=m(a)).textNode,n),y(e,i.textNode,i.wordOffset,n);else{var r=e.selection.getOwnRanges()[0];r&&S(r,e,n)}}(e,i,n),e.element.normalize()},remove:function(e,t,n){n=T(n),e.element.normalize();var i=s(e.selection,!0),o=p(e,n);o.nodes.length>0&&k(e,i,o,n),e.element.normalize()},state:function(e,t,n){var i=p(e,n=T(n),!0).nodes;return 0!==i.length&&i}}}(wysihtml),function(e){e.commands.indentList={exec:function(e,t,n){var i=e.selection.getSelectionParentsByTag("LI");return!!i&&this.tryToPushLiLevel(i,e.selection)},state:function(e,t){return!1},tryToPushLiLevel:function(t,n){var i,o,a,r,s,l=!1;return n.executeAndRestoreRangy((function(){for(var n=t.length;n--;)r=t[n],i="OL"===r.parentNode.nodeName?"OL":"UL",o=r.ownerDocument.createElement(i),a=e.dom.domNode(r).prev({nodeTypes:[e.ELEMENT_NODE]}),s=a?a.querySelector("ul, ol"):null,a&&(s?s.appendChild(r):(o.appendChild(r),a.appendChild(o)),l=!0)})),l}}}(wysihtml),wysihtml.commands.insertHTML={exec:function(e,t,n){e.selection.insertHTML(n)},state:function(){return!1}},function(e){var t="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(e,n){e.selection.insertHTML(t)},state:function(){return!1}}}(wysihtml),wysihtml.commands.insertList=function(e){var t=function(e,t){if(e&&e.nodeName){"string"==typeof t&&(t=[t]);for(var n=t.length;n--;)if(e.nodeName===t[n])return!0}return!1},n=function(n,i,o){var a={el:null,other:!1};if(n){var r=e.dom.getParentElement(n,{query:"li"},!1,o.element),s="UL"===i?"OL":"UL";t(n,i)?a.el=n:t(n,s)?a={el:n,other:!0}:r&&(t(r.parentNode,i)?a.el=r.parentNode:t(r.parentNode,s)&&(a={el:r.parentNode,other:!0}))}return a.el&&!o.element.contains(a.el)&&(a.el=null),a},i=function(t,n,i){var o,r,s="UL"===n?"OL":"UL";i.selection.executeAndRestoreRangy((function(){if((o=a(s,i)).length)for(var l=o.length;l--;)e.dom.renameElement(o[l],n.toLowerCase());else{for(var c=(r=a(["OL","UL"],i)).length;c--;)e.dom.resolveList(r[c],i.config.useLineBreaks);0===r.length&&e.dom.resolveList(t,i.config.useLineBreaks)}}))},o=function(t,n,i){var o="UL"===n?"OL":"UL";i.selection.executeAndRestoreRangy((function(){for(var r=[t].concat(a(o,i)),s=r.length;s--;)e.dom.renameElement(r[s],n.toLowerCase())}))},a=function(e,n){for(var i=n.selection.getOwnRanges(),o=[],a=i.length;a--;)o=o.concat(i[a].getNodes([1],(function(n){return t(n,e)})));return o};return{exec:function(t,a,r){var s,l,c=t.doc,d="OL"===r?"insertOrderedList":"insertUnorderedList",u=t.selection.getSelection(),h=1===u.anchorNode.nodeType&&u.anchorNode.firstChild?u.anchorNode.childNodes[u.anchorOffset]:u.anchorNode,p=1===u.focusNode.nodeType&&u.focusNode.firstChild?u.focusNode.childNodes[u.focusOffset]||u.focusNode.lastChild:u.focusNode;u.isBackwards()&&(h=[p,p=h][0]),e.dom.domNode(p).is.emptyTextNode(!0)&&p&&(p=e.dom.domNode(p).prev({nodeTypes:[1,3],ignoreBlankTexts:!0})),e.dom.domNode(h).is.emptyTextNode(!0)&&h&&(h=e.dom.domNode(h).next({nodeTypes:[1,3],ignoreBlankTexts:!0})),s=h&&p?h===p?h:e.dom.domNode(h).commonAncestor(p,t.element):t.selection.getSelectedNode(),(l=n(s,r,t)).el?l.other?o(l.el,r,t):i(l.el,r,t):t.commands.support(d)?c.execCommand(d,!1,null):function(t,n){var i,o,a=rangy.saveSelection(n.win),r="_wysihtml-temp-"+(new Date).getTime();n.commands.exec("formatBlock",{nodeName:"div",className:r});var s=n.element.querySelector("."+r);s.innerHTML=s.innerHTML.replace(e.INVISIBLE_SPACE_REG_EXP,""),s&&(i=/^(\s|(<br>))+$/i.test(s.innerHTML),o=e.dom.convertToList(s,t.toLowerCase(),n.parent.config.classNames.uneditableContainer),a&&rangy.restoreSelection(a),i&&n.selection.selectNode(o.querySelector("li"),!0))}(r,t)},state:function(e,t,i){var o=e.selection.getSelectedNode(),a=n(o,i,e);return!(!a.el||a.other)&&a.el}}}(wysihtml),function(e){e.commands.outdentList={exec:function(e,t,n){var i=e.selection.getSelectionParentsByTag("LI");return!!i&&this.tryToPullLiLevel(i,e)},state:function(e,t){return!1},tryToPullLiLevel:function(t,n){var i,o,a,r,s,l=!1,c=this;return n.selection.executeAndRestoreRangy((function(){for(var d=t.length;d--;)if((r=t[d]).parentNode&&("OL"===(i=r.parentNode).tagName||"UL"===i.tagName)){if(l=!0,o=e.dom.getParentElement(i.parentNode,{query:"ol, ul"},!1,n.element),a=e.dom.getParentElement(i.parentNode,{query:"li"},!1,n.element),o&&a)r.nextSibling&&(s=c.getAfterList(i,r),r.appendChild(s)),o.insertBefore(r,a.nextSibling);else{r.nextSibling&&(s=c.getAfterList(i,r),r.appendChild(s));for(var u=r.childNodes.length;u--;)i.parentNode.insertBefore(r.childNodes[u],i.nextSibling);i.parentNode.insertBefore(document.createElement("br"),i.nextSibling),r.parentNode.removeChild(r)}0===i.childNodes.length&&i.parentNode.removeChild(i)}})),l},getAfterList:function(e,t){for(var n=e.nodeName,i=document.createElement(n);t.nextSibling;)i.appendChild(t.nextSibling);return i}}}(wysihtml),wysihtml.commands.redo={exec:function(e){return e.undoManager.redo()},state:function(e){return!1}},function(e){var t={nodeName:"A"};e.commands.removeLink={exec:function(n,i){e.commands.formatInline.remove(n,i,t)},state:function(n,i){return e.commands.formatInline.state(n,i,t)}}}(wysihtml),wysihtml.commands.undo={exec:function(e){return e.undoManager.undo()},state:function(e){return!1}},function(e){var t="data-wysihtml-selection-node",n="data-wysihtml-selection-offset",i=(e.INVISIBLE_SPACE,e.INVISIBLE_SPACE,e.dom);e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.position=0,this.historyStr=[],this.historyDom=[],this.transact(),this._observe()},_observe:function(){var e,t=this;this.composer.sandbox.getDocument(),i.observe(this.element,"keydown",(function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var n=e.keyCode,i=90===n&&!e.shiftKey,o=90===n&&e.shiftKey||89===n;i?(t.undo(),e.preventDefault()):o&&(t.redo(),e.preventDefault())}})),i.observe(this.element,"keydown",(function(n){var i=n.keyCode;i!==e&&(e=i,(8===i||46===i)&&t.transact())})),this.editor.on("newword:composer",(function(){t.transact()})).on("beforecommand:composer",(function(){t.transact()}))},transact:function(){var i,o,a,r,s,l=this.historyStr[this.position-1],c=this.composer.getValue(!1,!1),d=this.element.offsetWidth>0&&this.element.offsetHeight>0;if(c!==l){(this.historyStr.length=this.historyDom.length=this.position)>25&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++,d&&(o=(i=this.composer.selection.getRange())&&i.startContainer?i.startContainer:this.element,a=i&&i.startOffset?i.startOffset:0,o.nodeType===e.ELEMENT_NODE?r=o:(r=o.parentNode,s=this.getChildNodeIndex(r,o)),r.setAttribute(n,a),void 0!==s&&r.setAttribute(t,s));var u=this.element.cloneNode(!!c);this.historyDom.push(u),this.historyStr.push(c),r&&(r.removeAttribute(n),r.removeAttribute(t))}},undo:function(){this.transact(),this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(e){this.element.innerHTML="";for(var i=0,o=e.childNodes,a=e.childNodes.length;a>i;i++)this.element.appendChild(o[i].cloneNode(!0));var r,s,l;e.hasAttribute(n)?(r=e.getAttribute(n),l=e.getAttribute(t),s=this.element):(r=(s=this.element.querySelector("["+n+"]")||this.element).getAttribute(n),l=s.getAttribute(t),s.removeAttribute(n),s.removeAttribute(t)),null!==l&&(s=this.getChildNodeByIndex(s,+l)),this.composer.selection.set(s,r)},getChildNodeIndex:function(e,t){for(var n=0,i=e.childNodes,o=i.length;o>n;n++)if(i[n]===t)return n},getChildNodeByIndex:function(e,t){return e.childNodes[t]}})}(wysihtml),wysihtml.views.View=Base.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this.config.noTextarea||this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.on("beforeload",(function(){e.parent.on("change_view",(function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout((function(){e.focus()}),0)):e.hide()}))}))},focus:function(){if(!this.element||!this.element.ownerDocument||this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element&&this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",constructor:function(e,t,n){this.base(e,t,n),this.config.noTextarea?this.editableArea=t:this.textarea=this.parent.textarea,this.config.contentEditableMode?this._initContentEditableArea():this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":"<br>"},getValue:function(t,n){var i=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return!1!==t&&(i=this.parent.parse(i,!1!==n)),i},setValue:function(e,t){!1!==t&&(e=this.parent.parse(e));try{this.element.innerHTML=e}catch(t){this.element.innerText=e}},cleanUp:function(e){var t;this.selection&&this.selection.isInThisEditable()&&(t=rangy.saveSelection(this.win)),this.parent.parse(this.element,void 0,e),t&&rangy.restoreSelection(t)},show:function(){this.editableArea.style.display=this._displayStyle||"",this.config.noTextarea||this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=t.getStyle("display").from(this.editableArea),"none"===this._displayStyle&&(this._displayStyle=null),this.editableArea.style.display="none"},disable:function(){this.parent.fire("disable:composer"),this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer"),this.element.setAttribute("contentEditable","true")},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;t&&n&&this.selection&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getScrollPos:function(){if(this.doc&&this.win){var e={};return void 0!==this.win.pageYOffset?e.y=this.win.pageYOffset:e.y=(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollTop,void 0!==this.win.pageXOffset?e.x=this.win.pageXOffset:e.x=(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollLeft,e}},setScrollPos:function(e){e&&void 0!==e.x&&void 0!==e.y&&this.win.scrollTo(e.x,e.y)},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==(this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet},isEmpty:function(){var e=this.element.innerHTML.toLowerCase();return/^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(e)||""===e||"<br>"===e||"<p></p>"===e||"<p><br></p>"===e||this.hasPlaceholderSet()},_initContentEditableArea:function(){var e=this;this.config.noTextarea?this.sandbox=new t.ContentEditableArea((function(){e._create()}),{className:this.config.classNames.sandbox},this.editableArea):(this.sandbox=new t.ContentEditableArea((function(){e._create()}),{className:this.config.classNames.sandbox}),this.editableArea=this.sandbox.getContentEditable(),t.insert(this.editableArea).after(this.textarea.element),this._createWysiwygFormField())},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox((function(){e._create()}),{stylesheets:this.config.stylesheets,className:this.config.classNames.sandbox}),this.editableArea=this.sandbox.getIframe();var n=this.textarea.element;t.insert(this.editableArea).after(n),this._createWysiwygFormField()},_createWysiwygFormField:function(){if(this.textarea.element.form){var e=document.createElement("input");e.type="hidden",e.name="_wysihtml_mode",e.value=1,t.insert(e).after(this.textarea.element)}},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),this.win=this.sandbox.getWindow(),this.element=this.config.contentEditableMode?this.sandbox.getContentEditable():this.doc.body,this.config.noTextarea?this.cleanUp():(this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0,!1)),this.selection=new e.Selection(this.parent,this.element,this.config.classNames.uneditableContainer),this.commands=new e.Commands(this.parent),this.config.noTextarea||t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),this._initAutoLinking(),t.addClass(this.element,this.config.classNames.composer),this.config.style&&!this.config.contentEditableMode&&this.style(),this.observe();var o=this.config.name;o&&(t.addClass(this.element,o),this.config.contentEditableMode||t.addClass(this.editableArea,o)),this.enable(),!this.config.noTextarea&&this.textarea.element.disabled&&this.disable();var a="string"==typeof this.config.placeholder?this.config.placeholder:this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder");a&&t.simulatePlaceholder(this.parent,this,a,this.config.classNames.placeholder),this.commands.exec("styleWithCSS",!1),this._initObjectResizing(),this._initUndoManager(),this._initLineBreaking(),this.config.noTextarea||!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||n.isIos()||setTimeout((function(){i.focus(!0)}),100),n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),this.initSync&&this.config.sync&&this.initSync(),this.config.noTextarea||this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,o=n.canDisableAutoLinking(),a=n.doesAutoLinkingInContentEditable();if(o&&this.commands.exec("AutoUrlDetect",!1,!1),this.config.autoLink){(!a||a&&o)&&(this.parent.on("newword:composer",(function(){if(t.getTextContent(i.element).match(t.autoLink.URL_REG_EXP)){for(var n=i.selection.getSelectedNode(),o=i.element.querySelectorAll("."+i.config.classNames.uneditableContainer),a=!1,r=o.length;r--;)e.dom.contains(o[r],n)&&(a=!0);a||t.autoLink(n,[i.config.classNames.uneditableContainer])}})),t.observe(this.element,"blur",(function(){t.autoLink(i.element,[i.config.classNames.uneditableContainer])})));var r=this.sandbox.getDocument().getElementsByTagName("a"),s=t.autoLink.URL_REG_EXP,l=function(n){var i=e.lang.string(t.getTextContent(n)).trim();return"www."===i.substr(0,4)&&(i="http://"+i),i};t.observe(this.element,"keydown",(function(e){if(r.length){var n,o=i.selection.getSelectedNode(e.target.ownerDocument),a=t.getParentElement(o,{query:"a"},4);a&&(n=l(a),setTimeout((function(){var e=l(a);e!==n&&e.match(s)&&a.setAttribute("href",e)}),0))}}))}},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),n.supportsEvent("resizeend")){var i=["width","height"],o=i.length,a=this.element;t.observe(a,"resizeend",(function(t){var n,r=t.target||t.srcElement,s=r.style,l=0;if("IMG"===r.nodeName){for(;o>l;l++)s[n=i[l]]&&(r.setAttribute(n,parseInt(s[n],10)),s[n]="");e.quirks.redraw(a)}}))}},_initUndoManager:function(){this.undoManager=new e.UndoManager(this.parent)},_initLineBreaking:function(){function i(e){var n=t.getParentElement(e,{query:"p, div"},2);n&&t.contains(o.element,n)&&o.selection.executeAndRestoreRangy((function(){o.config.useLineBreaks?((!n.firstChild||n.firstChild===n.lastChild&&1===n.firstChild.nodeType&&n.firstChild.classList.contains("rangySelectionBoundary"))&&n.appendChild(o.doc.createElement("br")),t.replaceWithChildNodes(n)):"P"!==n.nodeName&&t.renameElement(n,"p")}))}var o=this;this.config.useLineBreaks||t.observe(this.element,["focus"],(function(){o.isEmpty()&&setTimeout((function(){var e=o.doc.createElement("P");o.element.innerHTML="",o.element.appendChild(e),n.displaysCaretInEmptyContentEditableCorrectly()?o.selection.selectNode(e,!0):(e.innerHTML="<br>",o.selection.setBefore(e.firstChild))}),0)})),t.observe(this.element,"keydown",(function(n){var a=n.keyCode;if(!(n.shiftKey||n.ctrlKey||n.defaultPrevented||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY)){var r=t.getParentElement(o.selection.getSelectedNode(),{query:"li, p, h1, h2, h3, h4, h5, h6"},4);return r?void setTimeout((function(){var n=o.selection.getSelectedNode();if("LI"===r.nodeName){if(!n)return;t.getParentElement(n,{query:"ul, ol, menu"},2)||i(n)}a===e.ENTER_KEY&&r.nodeName.match(/^H[1-6]$/)&&i(n)}),0):void(o.config.useLineBreaks&&a===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()&&(n.preventDefault(),o.commands.exec("insertLineBreak")))}}))}})}(wysihtml),function(e){var t=e.dom,n=document,i=window,o=n.createElement("div"),a=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],r=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],s=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml-temp     { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],l=function(e){if(e.setActive)try{e.setActive()}catch(e){}else{var o=e.style,a=n.documentElement.scrollTop||n.body.scrollTop,r=n.documentElement.scrollLeft||n.body.scrollLeft,s={position:o.position,top:o.top,left:o.left,WebkitUserSelect:o.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(s).on(e),i.scrollTo&&i.scrollTo(r,a)}};e.views.Composer.prototype.style=function(){var i,c=this,d=n.querySelector(":focus"),u=this.textarea.element,h=u.hasAttribute("placeholder"),p=h&&u.getAttribute("placeholder"),f=u.style.display,m=u.disabled;this.focusStylesHost=o.cloneNode(!1),this.blurStylesHost=o.cloneNode(!1),this.disabledStylesHost=o.cloneNode(!1),h&&u.removeAttribute("placeholder"),u===d&&u.blur(),u.disabled=!1,u.style.display=i="none",(u.getAttribute("rows")&&"auto"===t.getStyle("height").from(u)||u.getAttribute("cols")&&"auto"===t.getStyle("width").from(u))&&(u.style.display=i=f),t.copyStyles(r).from(u).to(this.editableArea).andTo(this.blurStylesHost),t.copyStyles(a).from(u).to(this.element).andTo(this.blurStylesHost),t.insertCSS(s).into(this.element.ownerDocument),u.disabled=!0,t.copyStyles(r).from(u).to(this.disabledStylesHost),t.copyStyles(a).from(u).to(this.disabledStylesHost),u.disabled=m,u.style.display=f,l(u),u.style.display=i,t.copyStyles(r).from(u).to(this.focusStylesHost),t.copyStyles(a).from(u).to(this.focusStylesHost),u.style.display=f,t.copyStyles(["display"]).from(u).to(this.editableArea);var g=e.lang.array(r).without(["display"]);return d?l(d):u.blur(),h&&u.setAttribute("placeholder",p),this.parent.on("focus:composer",(function(){t.copyStyles(g).from(c.focusStylesHost).to(c.editableArea),t.copyStyles(a).from(c.focusStylesHost).to(c.element)})),this.parent.on("blur:composer",(function(){t.copyStyles(g).from(c.blurStylesHost).to(c.editableArea),t.copyStyles(a).from(c.blurStylesHost).to(c.element)})),this.parent.observe("disable:composer",(function(){t.copyStyles(g).from(c.disabledStylesHost).to(c.editableArea),t.copyStyles(a).from(c.disabledStylesHost).to(c.element)})),this.parent.observe("enable:composer",(function(){t.copyStyles(g).from(c.blurStylesHost).to(c.editableArea),t.copyStyles(a).from(c.blurStylesHost).to(c.element)})),this}}(wysihtml),function(e){var t=e.dom,n=t.domNode,i=e.browser,o={66:"bold",73:"italic",85:"underline"},a={addListeners:function(e,t,n){for(var i=0,o=t.length;o>i;i++)e.addEventListener(t[i],n,!1)},removeListeners:function(e,t,n){for(var i=0,o=t.length;o>i;i++)e.removeEventListener(t[i],n,!1)},fixLastBrDeletionInTable:function(t,n){if(t.selection.caretIsInTheEndOfNode()){var i=t.selection.getSelection(),o=i.anchorNode;if(o&&1===o.nodeType&&(e.dom.getParentElement(o,{query:"td, th"},!1,t.element)||n)){var a=o.childNodes[i.anchorOffset];if(a&&1===a.nodeType&"BR"===a.nodeName)return a.parentNode.removeChild(a),!0}}return!1},handleUneditableDeletion:function(e){var t=e.selection.getBeforeSelection(!0);if(t&&("element"===t.type||"leafnode"===t.type)&&1===t.node.nodeType&&t.node.classList.contains(e.config.classNames.uneditableContainer)){if(a.fixLastBrDeletionInTable(e,!0))return!0;try{var n=new CustomEvent("wysihtml:uneditable:delete",{bubbles:!0,cancelable:!1});t.node.dispatchEvent(n)}catch(e){}return t.node.parentNode.removeChild(t.node),!0}return!1},fixDeleteInTheBeginningOfBlock:function(t){var i=t.selection,o=i.getPreviousNode();if(i.caretIsFirstInSelection(e.browser.usesControlRanges())&&o&&1===o.nodeType&&e.dom.domNode(o).is.block()&&!n(o).test({query:"ol, ul, table, tr, dl"})){if(/^\s*$/.test(o.textContent||o.innerText))return o.parentNode.removeChild(o),!0;if(o.lastChild){var a=o.lastChild,r=i.getSelectedNode(),s=n(o).commonAncestor(r,t.element),l=e.dom.getParentElement(r,{query:"h1, h2, h3, h4, h5, h6, p, pre, div, blockquote"},!1,s||t.element);if(l)return n(l).transferContentTo(o,!0),i.setAfter(a),!0;if(e.browser.usesControlRanges())return r=i.getCaretNode(),n(r).transferContentTo(o,!0),i.setAfter(a),!0}}return!1},fixDeleteInTheBeginningOfLi:function(t){if(e.browser.hasLiDeletingProblem()){var i,o,a,r=t.selection.getSelection(),s=r.anchorNode,l=t.selection.caretIsFirstInSelection();if(3===s.nodeType&&0===r.anchorOffset&&s===s.parentNode.firstChild&&(s=s.parentNode,l=!0),l&&s&&1===s.nodeType&&"LI"===s.nodeName&&((o=n(s).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}))||!s.parentNode||"UL"!==s.parentNode.nodeName&&"OL"!==s.parentNode.nodeName||(o=n(s.parentNode).prev({nodeTypes:[1,3],ignoreBlankTexts:!0}),a=s.parentNode),o))return i=s.firstChild,n(s).transferContentTo(o,!0),a&&0===a.children.length&&a.remove(),i?t.selection.setBefore(i):o&&(1===o.nodeType?o.lastChild?t.selection.setAfter(o.lastChild):t.selection.selectNode(o):t.selection.setAfter(o)),!0}return!1},fixDeleteInTheBeginningOfControlSelection:function(e){var t,i=e.selection,o=i.getPreviousNode(),a=i.getSelectedNode();return!!i.caretIsFirstInSelection()&&(3===a.nodeType&&(a=a.parentNode),t=a.firstChild,n(a).transferContentTo(o,!0),t&&e.selection.setBefore(t),!0)},doLineBreaksModeEnterWithCaret:function(i){var o,a,r=!1;if((o=i.selection.getNodesNearCaret())&&((o.caretNode||o.nextNode)&&((a=t.getParentElement(o.caretNode||o.nextNode,{query:"p, pre, div, blockquote"},2))===i.element&&(a=void 0)),a&&o.caretNode))if(n(o.caretNode).is.lineBreak()){if(i.config.doubleLineBreakEscapesBlock){r=!0,o.caretNode.parentNode.removeChild(o.caretNode),n(o.nextNode).is.lineBreak()&&o.nextNode.parentNode.removeChild(o.nextNode);var s=i.doc.createElement("br");n(o.nextNode).is.lineBreak()&&o.nextNode===a.lastChild?a.parentNode.insertBefore(s,a.nextSibling):i.selection.splitElementAtCaret(a,s),o.nextNode&&3===o.nextNode.nodeType&&(o.nextNode.data=o.nextNode.data.replace(/^ *[\r\n]+/,"")),i.selection.setBefore(s)}}else if(3===o.caretNode.nodeType&&e.browser.hasCaretBlockElementIssue()&&o.textOffset===o.caretNode.data.length&&!o.nextNode){r=!0;var l=i.doc.createElement("br"),c=i.doc.createElement("br"),d=i.doc.createDocumentFragment();d.appendChild(l),d.appendChild(c),i.selection.insertNode(d),i.selection.setBefore(c)}return r}},r=function(t,n){var i=n.selection;if(n.element,i.isCollapsed()){if(n.isEmpty()&&!n.config.useLineBreaks)return void t.preventDefault();if(a.handleUneditableDeletion(n))return void t.preventDefault();if(a.fixDeleteInTheBeginningOfLi(n))return void t.preventDefault();if(a.fixDeleteInTheBeginningOfBlock(n))return void t.preventDefault();if(a.fixLastBrDeletionInTable(n))return void t.preventDefault();if(e.browser.usesControlRanges()&&a.fixDeleteInTheBeginningOfControlSelection(n))return void t.preventDefault()}else i.containsUneditable()&&(t.preventDefault(),i.deleteContents())},s=function(e,t){if(!t.config.useLineBreaks||e.shiftKey||e.ctrlKey||t.selection.isCollapsed()&&a.doLineBreaksModeEnterWithCaret(t)&&e.preventDefault(),i.hasCaretAtLinkEndInsertionProblems()&&t.selection.caretIsInTheEndOfNode()){var n=t.selection.getSelectedNode(!0),o=n&&3===n.nodeType?n.parentNode:n;o&&o.closest("a")&&3===n.nodeType&&n===o.lastChild&&t.selection.setAfter(o)}},l=function(e){this.domNodeRemovedInterval&&clearInterval(domNodeRemovedInterval),this.parent.fire("destroy:composer")},c=function(e){this.parent.fire("beforeinteraction",e).fire("beforeinteraction:composer",e),setTimeout(function(){this.parent.fire("interaction",e).fire("interaction:composer",e)}.bind(this),0)},d=function(e){this.parent.fire("focus",e).fire("focus:composer",e),setTimeout(function(){this.focusState=this.getValue(!1,!1)}.bind(this),0)},u=function(e){if(this.focusState!==this.getValue(!1,!1)){var t=e;"function"==typeof Object.create&&(t=Object.create(e,{type:{value:"change"}})),this.parent.fire("change",t).fire("change:composer",t)}this.parent.fire("blur",e).fire("blur:composer",e)},h=function(e){this.parent.fire(e.type,e).fire(e.type+":composer",e),"paste"===e.type&&setTimeout(function(){this.parent.fire("newword:composer")}.bind(this),0)},p=function(t){this.config.copyedFromMarking&&(e.browser.supportsModernPaste()&&(t.clipboardData.setData("text/html",this.config.copyedFromMarking+this.selection.getHtml()),t.clipboardData.setData("text/plain",this.selection.getPlainText()),t.preventDefault()),this.parent.fire(t.type,t).fire(t.type+":composer",t))},f=function(t){var n=t.keyCode;(n===e.SPACE_KEY||n===e.ENTER_KEY)&&this.parent.fire("newword:composer")},m=function(t){if(!i.canSelectImagesInContentEditable()){var n=t.target,o=this.element.querySelectorAll("img"),a=this.element.querySelectorAll("."+this.config.classNames.uneditableContainer+" img"),r=e.lang.array(o).without(a);"IMG"===n.nodeName&&e.lang.array(r).contains(n)&&this.selection.selectNode(n)}e.browser.usesControlRanges()&&(this.selection.lastMouseDownPos={x:t.clientX,y:t.clientY},setTimeout(function(){delete this.selection.lastMouseDownPos}.bind(this),0))},g=function(e){var t=(e.target,this.selection.lastMouseDownPos);if(t){var n=document.body.createTextRange();setTimeout(function(){try{n.moveToPoint(t.x,t.y),n.select()}catch(e){}}.bind(this),0)}},v=function(t){if(this.config.classNames.uneditableContainer){var n=e.dom.getParentElement(t.target,{query:"."+this.config.classNames.uneditableContainer},!1,this.element);n&&this.selection.setAfter(n)}},b=function(e){i.canSelectImagesInContentEditable()||setTimeout(function(){this.selection.getSelection().removeAllRanges()}.bind(this),0)},y=function(t){var n,i=t.keyCode,a=o[i],l=this.selection.getSelectedNode(!0);return l&&3===l.nodeType&&l.parentNode,!t.ctrlKey&&!t.metaKey||t.altKey||65!==i?((t.ctrlKey||t.metaKey)&&!t.altKey&&a&&(this.commands.exec(a),t.preventDefault()),i===e.BACKSPACE_KEY&&r(t,this),(i===e.BACKSPACE_KEY||i===e.DELETE_KEY)&&l&&"IMG"===l.nodeName&&(t.preventDefault(),(n=l.parentNode).removeChild(l),"A"!==n.nodeName||n.firstChild||n.parentNode.removeChild(n),setTimeout(function(){e.quirks.redraw(this.element)}.bind(this),0)),this.config.handleTabKey&&i===e.TAB_KEY&&(t.preventDefault(),function(e,t,n){if(e.selection.isCollapsed()){if(e.selection.caretIsInTheBeginnig("li"))if(n){if(e.commands.exec("outdentList"))return}else if(e.commands.exec("indentList"))return}else e.selection.deleteContents();e.commands.exec("insertHTML","&emsp;")}(this,this.element,t.shiftKey)),void(i===e.ENTER_KEY&&s(t,this))):(this.selection.selectAll(),void t.preventDefault())},w=function(t){if(0!==t.which&&this.selection.caretIsInTheEndOfNode()){var n,o,a=this.selection.getSelectedNode(!0),r=a&&3===a.nodeType?a.parentNode:a;r&&r.closest("a")&&a===r.lastChild&&(32!==t.which||this.selection.caretIsInTheEndOfNode(!0)&&i.hasCaretAtLinkEndInsertionProblems()?(n=this.doc.createTextNode(e.INVISIBLE_SPACE),this.selection.insertNode(n),this.selection.setBefore(n),setTimeout(function(){n.textContent.length>1?(n.textContent=n.textContent.replace(e.INVISIBLE_SPACE_REG_EXP,""),this.selection.setAfter(n)):n.remove()}.bind(this),0)):32===t.which&&3===a.nodeType&&/[\u00A0 ]$/.test(a.textContent)&&(a.textContent=a.textContent.replace(/[\u00A0 ]$/,""),o=this.doc.createTextNode(" "),r.parentNode.insertBefore(o,r.nextSibling),this.selection.setAfter(o,!1),t.preventDefault()))}};e.views.Composer.prototype.observeActions=a,e.views.Composer.prototype.observe=function(){var n=this.sandbox.getIframe?this.sandbox.getIframe():this.sandbox.getContentEditable(),o=(this.element,i.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable?this.element:this.sandbox.getWindow());this.focusState=this.getValue(!1,!1),this.actions=a,n.addEventListener(["DOMNodeRemoved"],l.bind(this),!1),i.supportsMutationEvents()||(this.domNodeRemovedInterval=setInterval((function(){t.contains(document.documentElement,n)||l.call(this)}),250)),a.addListeners(o,["drop","paste","mouseup","focus","keyup"],c.bind(this)),o.addEventListener("focus",d.bind(this),!1),o.addEventListener("blur",u.bind(this),!1),a.addListeners(this.element,["drop","paste","beforepaste"],h.bind(this),!1),this.element.addEventListener("copy",p.bind(this),!1),this.element.addEventListener("mousedown",m.bind(this),!1),this.element.addEventListener("click",v.bind(this),!1),this.element.addEventListener("drop",b.bind(this),!1),this.element.addEventListener("keyup",f.bind(this),!1),this.element.addEventListener("keydown",y.bind(this),!1),this.element.addEventListener("keypress",w.bind(this),!1),e.browser.usesControlRanges()&&this.element.addEventListener("mscontrolselect",g.bind(this),!1),this.element.addEventListener("dragenter",function(){this.parent.fire("unset_placeholder")}.bind(this),!1)}}(wysihtml),function(e){e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue(!1,!1)).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue(!1,!1);t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var t,n=this,i=this.textarea.element.form,o=function(){t=setInterval((function(){n.fromComposerToTextarea()}),400)},a=function(){clearInterval(t),t=null};o(),i&&(e.dom.observe(i,"submit",(function(){n.sync(!0)})),e.dom.observe(i,"reset",(function(){setTimeout((function(){n.fromTextareaToComposer()}),0)}))),this.editor.on("change_view",(function(e){"composer"!==e||t?"textarea"===e&&(n.fromComposerToTextarea(!0),a()):(n.fromTextareaToComposer(!0),o())})),this.editor.on("destroy:composer",a)}})}(wysihtml),wysihtml.views.SourceView=Base.extend({constructor:function(e,t){this.editor=e,this.composer=t,this._observe()},switchToTextarea:function(e){var t=this.composer.win.getComputedStyle(this.composer.element),n=parseFloat(t.width),i=Math.max(parseFloat(t.height),100);this.textarea||(this.textarea=this.composer.doc.createElement("textarea"),this.textarea.className="wysihtml-source-view"),this.textarea.style.width=n+"px",this.textarea.style.height=i+"px",this.textarea.value=this.editor.getValue(e,!0),this.composer.element.parentNode.insertBefore(this.textarea,this.composer.element),this.editor.currentView="source",this.composer.element.style.display="none"},switchToComposer:function(e){var t=this.textarea.value;t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder")),this.textarea.parentNode.removeChild(this.textarea),this.editor.currentView=this.composer,this.composer.element.style.display=""},_observe:function(){this.editor.on("change_view",function(e){"composer"===e?this.switchToComposer(!0):"textarea"===e&&this.switchToTextarea(!0)}.bind(this))}}),wysihtml.views.Textarea=wysihtml.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return!1!==e&&(t=this.parent.parse(t)),t},setValue:function(e,t){!1!==t&&(e=this.parent.parse(e)),this.element.value=e},cleanUp:function(e){var t=this.parent.parse(this.element.value,void 0,e);this.element.value=t},hasPlaceholderSet:function(){var e=wysihtml.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value;return e&&!n||n===t},isEmpty:function(){return!wysihtml.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.on("beforeload",(function(){wysihtml.dom.observe(e,i,(function(e){var i=n[e.type]||e.type;t.fire(i).fire(i+":textarea")})),wysihtml.dom.observe(e,["paste","drop"],(function(){setTimeout((function(){t.fire("paste").fire("paste:textarea")}),0)}))}))}}),function(e){var t;e.Editor=e.lang.Dispatcher.extend({defaults:{name:t,style:!0,autoLink:!0,handleTabKey:!0,parserRules:{tags:{br:{},span:{},div:{},p:{},b:{},i:{},u:{}},classes:{}},pasteParserRulesets:null,parser:e.dom.parse,useLineBreaks:!0,doubleLineBreakEscapesBlock:!0,stylesheets:[],placeholderText:t,supportTouchDevices:!0,cleanUp:!0,contentEditableMode:!1,classNames:{composer:"wysihtml-editor",body:"wysihtml-supported",sandbox:"wysihtml-sandbox",placeholder:"wysihtml-placeholder",uneditableContainer:"wysihtml-uneditable-container"},copyedFromMarking:'<meta name="copied-from" content="wysihtml">'},constructor:function(t,n){if(this.editableElement="string"==typeof t?document.getElementById(t):t,this.config=e.lang.object({}).merge(this.defaults).merge(n).get(),this._isCompatible=e.browser.supported(),n&&n.classNames&&e.lang.object(this.config.classNames).merge(n.classNames),"textarea"!=this.editableElement.nodeName.toLowerCase()&&(this.config.contentEditableMode=!0,this.config.noTextarea=!0),this.config.noTextarea||(this.textarea=new e.views.Textarea(this,this.editableElement,this.config),this.currentView=this.textarea),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var i=this;setTimeout((function(){i.fire("beforeload").fire("load")}),0)}else e.dom.addClass(document.body,this.config.classNames.body),this.composer=new e.views.Composer(this,this.editableElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.on("beforeload",this.handleBeforeLoad)},handleBeforeLoad:function(){this.config.noTextarea?this.sourceView=new e.views.SourceView(this,this.composer):this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer),this.runEditorExtenders()},runEditorExtenders:function(){e.editorExtenders.forEach(function(e){e(this)}.bind(this))},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e,t){return this.currentView.getValue(e,t)},setValue:function(e,t){return this.fire("unset_placeholder"),e?(this.currentView.setValue(e,t),this):this.clear()},cleanUp:function(e){this.currentView.cleanUp(e)},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},destroy:function(){this.composer&&this.composer.sandbox&&this.composer.sandbox.destroy(),this.fire("destroy:composer"),this.off()},parse:function(t,n,i){var o=this.config.contentEditableMode?document:this.composer?this.composer.sandbox.getDocument():null,a=this.config.parser(t,{rules:i||this.config.parserRules,cleanUp:this.config.cleanUp,context:o,uneditableClass:this.config.classNames.uneditableContainer,clearInternals:n});return"object"==typeof t&&e.quirks.redraw(t),a},_initParser:function(){var t;e.browser.supportsModernPaste()?this.on("paste:composer",function(n){n.preventDefault(),(t=e.dom.getPastedHtml(n))&&this._cleanAndPaste(t)}.bind(this)):this.on("beforepaste:composer",function(t){t.preventDefault();var n=this.composer.getScrollPos();e.dom.getPastedHtmlWithDiv(this.composer,function(e){e&&this._cleanAndPaste(e),this.composer.setScrollPos(n)}.bind(this))}.bind(this))},_cleanAndPaste:function(t){var n=e.quirks.cleanPastedHTML(t,{referenceNode:this.composer.element,rules:this.config.pasteParserRulesets||[{set:this.config.parserRules}],uneditableClass:this.config.classNames.uneditableContainer});this.composer.selection.deleteContents(),this.composer.selection.insertHTML(n)}})}(wysihtml),function(e,t){"use strict";var n={"font-styles":"<li class='dropdown'><a class='btn dropdown-toggle' data-toggle='dropdown' href='#'><i class='icon-font'></i>&nbsp;<span class='current-font'>Normal text</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div'>Normal text</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1'>Heading 1</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2'>Heading 2</a></li></ul></li>",emphasis:"<li><div class='btn-group'><a class='btn' data-wysihtml5-command='bold' title='CTRL+B'>Bold</a><a class='btn' data-wysihtml5-command='italic' title='CTRL+I'>Italic</a></div></li>",lists:"<li><div class='btn-group'><a class='btn' data-wysihtml5-command='insertUnorderedList' title='Unordered List'><i class='icon-list'></i></a><a class='btn' data-wysihtml5-command='insertOrderedList' title='Ordered List'><i class='icon-th-list'></i></a><a class='btn' data-wysihtml5-command='Outdent' title='Outdent'><i class='icon-indent-right'></i></a><a class='btn' data-wysihtml5-command='Indent' title='Indent'><i class='icon-indent-left'></i></a></div></li>",link:"<li><div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>×</a><h3>Insert Link</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'></div><div class='modal-footer'><a href='#' class='btn' data-dismiss='modal'>Cancel</a><a href='#' class='btn btn-primary' data-dismiss='modal'>Insert link</a></div></div><a class='btn' data-wysihtml5-command='createLink' title='Link'><i class='icon-share'></i></a></li>",image:"<li><div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>×</a><h3>Insert Image</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'></div><div class='modal-footer'><a href='#' class='btn' data-dismiss='modal'>Cancel</a><a href='#' class='btn btn-primary' data-dismiss='modal'>Insert image</a></div></div><a class='btn' data-wysihtml5-command='insertImage' title='Insert image'><i class='icon-picture'></i></a></li>",html:"<li><div class='btn-group'><a class='btn' data-wysihtml5-action='change_view' title='Edit HTML'><i class='icon-pencil'></i></a></div></li>"},i={"font-styles":!0,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url"}}}}},o=function(t,n){this.el=t,this.toolbar=this.createToolbar(t,n||i),this.editor=this.createEditor(n),window.editor=this.editor,e("iframe.wysihtml5-sandbox").each((function(t,n){e(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){e("li.dropdown").removeClass("open")}})}))};o.prototype={constructor:o,createEditor:function(e){var n=i.parserRules;e&&e.parserRules&&(n=e.parserRules);var o=new t.Editor(this.el.attr("id"),{toolbar:this.toolbar.attr("id"),parserRules:n});if(e&&e.events)for(var a in e.events)o.on(a,e.events[a]);return o},createToolbar:function(t,o){var a=e("<ul/>",{id:t.attr("id")+"-wysihtml5-toolbar",class:"wysihtml5-toolbar",style:"display:none"});for(var r in i){var s=!1;null!=o[r]?1==o[r]&&(s=!0):s=i[r],1==s&&(a.append(n[r]),"html"==r&&this.initHtml(a),"link"==r&&this.initInsertLink(a),"image"==r&&this.initInsertImage(a))}var l=this;return a.find("a[data-wysihtml5-command='formatBlock']").click((function(t){var n=e(t.srcElement);l.toolbar.find(".current-font").text(n.html())})),this.el.before(a),a},initHtml:function(e){var t="a[data-wysihtml5-action='change_view']";e.find(t).click((function(n){e.find("a.btn").not(t).toggleClass("disabled")}))},initInsertImage:function(e){var t=this,n=e.find(".bootstrap-wysihtml5-insert-image-modal"),i=n.find(".bootstrap-wysihtml5-insert-image-url"),o=n.find("a.btn-primary"),a=i.val(),r=function(){var e=i.val();i.val(a),t.editor.composer.commands.exec("insertImage",e)};i.keypress((function(e){13==e.which&&(r(),n.modal("hide"))})),o.click(r),n.on("shown",(function(){i.focus()})),n.on("hide",(function(){t.editor.currentView.element.focus()})),e.find("a[data-wysihtml5-command=insertImage]").click((function(){n.modal("show")}))},initInsertLink:function(e){var t=this,n=e.find(".bootstrap-wysihtml5-insert-link-modal"),i=n.find(".bootstrap-wysihtml5-insert-link-url"),o=n.find("a.btn-primary"),a=i.val(),r=function(){var e=i.val();i.val(a),t.editor.composer.commands.exec("createLink",{href:e,target:"_blank",rel:"nofollow"})};i.keypress((function(e){13==e.which&&(r(),n.modal("hide"))})),o.click(r),n.on("shown",(function(){i.focus()})),n.on("hide",(function(){t.editor.currentView.element.focus()})),e.find("a[data-wysihtml5-command=createLink]").click((function(){n.modal("show")}))}},e.fn.wysihtml5=function(t){return this.each((function(){var n=e(this);n.data("wysihtml5",new o(n,t))}))},e.fn.wysihtml5.Constructor=o}(window.jQuery,window.wysihtml5),function(e){var t=function(t,n){t=e(t);var i=this,o=[],a=e.extend({},e.fn.bootstrapWizard.defaults,n),r=null,s=null;this.rebindClick=function(e,t){e.unbind("click",t).bind("click",t)},this.fixNavigationButtons=function(){if(r.length||(s.find("a:first").tab("show"),r=s.find('li:has([data-toggle="tab"]):first')),e(a.previousSelector,t).toggleClass("disabled",i.firstIndex()>=i.currentIndex()),e(a.nextSelector,t).toggleClass("disabled",i.currentIndex()>=i.navigationLength()),e(a.nextSelector,t).toggleClass("hidden",i.currentIndex()>=i.navigationLength()&&0<e(a.finishSelector,t).length),e(a.lastSelector,t).toggleClass("hidden",i.currentIndex()>=i.navigationLength()&&0<e(a.finishSelector,t).length),e(a.finishSelector,t).toggleClass("hidden",i.currentIndex()<i.navigationLength()),e(a.backSelector,t).toggleClass("disabled",0==o.length),e(a.backSelector,t).toggleClass("hidden",i.currentIndex()>=i.navigationLength()&&0<e(a.finishSelector,t).length),i.rebindClick(e(a.nextSelector,t),i.next),i.rebindClick(e(a.previousSelector,t),i.previous),i.rebindClick(e(a.lastSelector,t),i.last),i.rebindClick(e(a.firstSelector,t),i.first),i.rebindClick(e(a.finishSelector,t),i.finish),i.rebindClick(e(a.backSelector,t),i.back),a.onTabShow&&"function"==typeof a.onTabShow&&!1===a.onTabShow(r,s,i.currentIndex()))return!1},this.next=function(e){if(t.hasClass("last")||a.onNext&&"function"==typeof a.onNext&&!1===a.onNext(r,s,i.nextIndex()))return!1;e=i.currentIndex();var n=i.nextIndex();n>i.navigationLength()||(o.push(e),s.find('li:has([data-toggle="tab"])'+(a.withVisible?":visible":"")+":eq("+n+") a").tab("show"))},this.previous=function(e){if(t.hasClass("first")||a.onPrevious&&"function"==typeof a.onPrevious&&!1===a.onPrevious(r,s,i.previousIndex()))return!1;e=i.currentIndex();var n=i.previousIndex();0>n||(o.push(e),s.find('li:has([data-toggle="tab"])'+(a.withVisible?":visible":"")+":eq("+n+") a").tab("show"))},this.first=function(e){if(a.onFirst&&"function"==typeof a.onFirst&&!1===a.onFirst(r,s,i.firstIndex())||t.hasClass("disabled"))return!1;o.push(i.currentIndex()),s.find('li:has([data-toggle="tab"]):eq(0) a').tab("show")},this.last=function(e){if(a.onLast&&"function"==typeof a.onLast&&!1===a.onLast(r,s,i.lastIndex())||t.hasClass("disabled"))return!1;o.push(i.currentIndex()),s.find('li:has([data-toggle="tab"]):eq('+i.navigationLength()+") a").tab("show")},this.finish=function(e){a.onFinish&&"function"==typeof a.onFinish&&a.onFinish(r,s,i.lastIndex())},this.back=function(){if(0==o.length)return null;var e=o.pop();if(a.onBack&&"function"==typeof a.onBack&&!1===a.onBack(r,s,e))return o.push(e),!1;t.find('li:has([data-toggle="tab"]):eq('+e+") a").tab("show")},this.currentIndex=function(){return s.find('li:has([data-toggle="tab"])'+(a.withVisible?":visible":"")).index(r)},this.firstIndex=function(){return 0},this.lastIndex=function(){return i.navigationLength()},this.getIndex=function(e){return s.find('li:has([data-toggle="tab"])'+(a.withVisible?":visible":"")).index(e)},this.nextIndex=function(){var e,t=this.currentIndex();do{t++,e=s.find('li:has([data-toggle="tab"])'+(a.withVisible?":visible":"")+":eq("+t+")")}while(e&&e.hasClass("disabled"));return t},this.previousIndex=function(){var e,t=this.currentIndex();do{t--,e=s.find('li:has([data-toggle="tab"])'+(a.withVisible?":visible":"")+":eq("+t+")")}while(e&&e.hasClass("disabled"));return t},this.navigationLength=function(){return s.find('li:has([data-toggle="tab"])'+(a.withVisible?":visible":"")).length-1},this.activeTab=function(){return r},this.nextTab=function(){return s.find('li:has([data-toggle="tab"]):eq('+(i.currentIndex()+1)+")").length?s.find('li:has([data-toggle="tab"]):eq('+(i.currentIndex()+1)+")"):null},this.previousTab=function(){return 0>=i.currentIndex()?null:s.find('li:has([data-toggle="tab"]):eq('+parseInt(i.currentIndex()-1)+")")},this.show=function(e){0<(e=isNaN(e)?t.find('li:has([data-toggle="tab"]) a[href="#'+e+'"]'):t.find('li:has([data-toggle="tab"]):eq('+e+") a")).length&&(o.push(i.currentIndex()),e.tab("show"))},this.disable=function(e){s.find('li:has([data-toggle="tab"]):eq('+e+")").addClass("disabled")},this.enable=function(e){s.find('li:has([data-toggle="tab"]):eq('+e+")").removeClass("disabled")},this.hide=function(e){s.find('li:has([data-toggle="tab"]):eq('+e+")").hide()},this.display=function(e){s.find('li:has([data-toggle="tab"]):eq('+e+")").show()},this.remove=function(t){var n=void 0!==t[1]&&t[1];t=s.find('li:has([data-toggle="tab"]):eq('+t[0]+")"),n&&(n=t.find("a").attr("href"),e(n).remove()),t.remove()};var l=function(t){var n=s.find('li:has([data-toggle="tab"])');if(t=n.index(e(t.currentTarget).parent('li:has([data-toggle="tab"])')),n=e(n[t]),a.onTabClick&&"function"==typeof a.onTabClick&&!1===a.onTabClick(r,s,i.currentIndex(),t,n))return!1},c=function(t){t=e(t.target).parent();var n=s.find('li:has([data-toggle="tab"])').index(t);if(t.hasClass("disabled")||a.onTabChange&&"function"==typeof a.onTabChange&&!1===a.onTabChange(r,s,i.currentIndex(),n))return!1;r=t,i.fixNavigationButtons()};this.resetWizard=function(){e('a[data-toggle="tab"]',s).off("click",l),e('a[data-toggle="tab"]',s).off("show show.bs.tab",c),s=t.find("ul:first",t),r=s.find('li:has([data-toggle="tab"]).active',t),e('a[data-toggle="tab"]',s).on("click",l),e('a[data-toggle="tab"]',s).on("show show.bs.tab",c),i.fixNavigationButtons()},s=t.find("ul:first",t),r=s.find('li:has([data-toggle="tab"]).active',t),s.hasClass(a.tabClass)||s.addClass(a.tabClass),a.onInit&&"function"==typeof a.onInit&&a.onInit(r,s,0),a.onShow&&"function"==typeof a.onShow&&a.onShow(r,s,i.nextIndex()),e('a[data-toggle="tab"]',s).on("click",l),e('a[data-toggle="tab"]',s).on("show show.bs.tab",c)};e.fn.bootstrapWizard=function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1);return 1===i.length&&i.toString(),this.data("bootstrapWizard")[n](i)}return this.each((function(i){if(!(i=e(this)).data("bootstrapWizard")){var o=new t(i,n);i.data("bootstrapWizard",o),o.fixNavigationButtons()}}))},e.fn.bootstrapWizard.defaults={withVisible:!0,tabClass:"nav nav-pills",nextSelector:".wizard li.next",previousSelector:".wizard li.previous",firstSelector:".wizard li.first",lastSelector:".wizard li.last",finishSelector:".wizard li.finish",backSelector:".wizard li.back",onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onFinish:null,onBack:null,onTabChange:null,onTabClick:null,onTabShow:null}}(jQuery),function(e){function t(t){var n=t||window.event,i=[].slice.call(arguments,1),o=0,a=0,r=0;return(t=e.event.fix(n)).type="mousewheel",n.wheelDelta&&(o=n.wheelDelta/120),n.detail&&(o=-n.detail/3),r=o,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(r=0,a=-1*o),void 0!==n.wheelDeltaY&&(r=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(a=-1*n.wheelDeltaX/120),i.unshift(t,o,a,r),(e.event.dispatch||e.event.handle).apply(this,i)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var i=n.length;i;)e.event.fixHooks[n[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),jQuery.plot.plugins.push({init:function(e){var t,n,i,o,a=1,r=!1;function s(e,t){for(var n=new Array,i=0;i<e.length;i++)n[0]=e[i].data[0][t],n[1]=e[i].data[e[i].data.length-1][t];return n}function l(e,t){var n=e.bars.order,i=t.bars.order;return n<i?-1:n>i?1:0}function c(e,t,n){for(var i=0,a=t;a<=n;a++)i+=e[a].bars.barWidth+2*o;return i}e.hooks.processDatapoints.push((function(e,d,u){var h,p=null;if(function(e){return null!=e.bars&&e.bars.show&&null!=e.bars.order}(d)&&(function(e){e.bars.horizontal&&(r=!0)}(d),function(e){var t=r?e.getPlaceholder().innerHeight():e.getPlaceholder().innerWidth(),n=s(e.getData(),r?1:0),i=n[1]-n[0];a=i/t}(e),function(e){t=function(e){for(var t=new Array,n=0;n<e.length;n++)null!=e[n].bars.order&&e[n].bars.show&&t.push(e[n]);return t.sort(l)}(e.getData()),n=t.length}(e),function(e){i=e.bars.lineWidth?e.bars.lineWidth:2,o=i*a}(d),n>=2)){var f=function(e){for(var n=0,i=0;i<t.length;++i)if(e==t[i]){n=i;break}return n+1}(d),m=(h=0,n%2!=0&&(h=t[Math.ceil(n/2)].bars.barWidth/2),h);p=function(e,t,n){for(var i=e.pointsize,o=e.points,a=0,s=r?1:0;s<o.length;s+=i)o[s]+=n,t.data[a][3]=o[s],a++;return o}(u,d,function(e){return e<=Math.ceil(n/2)}(f)?-1*c(t,f-1,Math.floor(n/2)-1)-m:c(t,Math.ceil(n/2),f-2)+m+2*o),u.points=p}return p}))},options:{series:{bars:{order:null}}},name:"orderBars",version:"0.2"}),function(e){var t={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(e,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+e+"<br/>"+Math.round(t.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};e.plot.plugins.push({init:function(t){var n=null,i=null,o=null,a=null,r=null,s=null,l=!1,c=null,d=[];function u(t,a,r){l||(l=!0,n=t.getCanvas(),i=e(n).parent(),o=t.getOptions(),t.setData(function(t){for(var n=0,i=0,a=0,r=o.series.pie.combine.color,s=[],l=0;l<t.length;++l){var c=t[l].data;e.isArray(c)&&1==c.length&&(c=c[0]),e.isArray(c)?!isNaN(parseFloat(c[1]))&&isFinite(c[1])?c[1]=+c[1]:c[1]=0:c=!isNaN(parseFloat(c))&&isFinite(c)?[1,+c]:[1,0],t[l].data=[c]}for(l=0;l<t.length;++l)n+=t[l].data[0][1];for(l=0;l<t.length;++l){(c=t[l].data[0][1])/n<=o.series.pie.combine.threshold&&(i+=c,a++,r||(r=t[l].color))}for(l=0;l<t.length;++l){c=t[l].data[0][1];(a<2||c/n>o.series.pie.combine.threshold)&&s.push(e.extend(t[l],{data:[[1,c]],color:t[l].color,label:t[l].label,angle:c*Math.PI*2/n,percent:c/(n/100)}))}a>1&&s.push({data:[[1,i]],color:r,label:o.series.pie.combine.label,angle:i*Math.PI*2/n,percent:i/(n/100)});return s}(t.getData())))}function h(t,n){if(i){var d=t.getPlaceholder().width(),u=t.getPlaceholder().height(),h=i.children().filter(".legend").children().width()||0;c=n,l=!1,a=Math.min(d,u/o.series.pie.tilt)/2,s=u/2+o.series.pie.offset.top,r=d/2,"auto"==o.series.pie.offset.left?(o.legend.position.match("w")?r+=h/2:r-=h/2,r<a?r=a:r>d-a&&(r=d-a)):r+=o.series.pie.offset.left;var f=t.getData(),m=0;do{m>0&&(a*=.95),m+=1,g(),o.series.pie.tilt<=.8&&v()}while(!b()&&m<10);m>=10&&(g(),i.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),t.setSeries&&t.insertLegend&&(t.setSeries(f),t.insertLegend())}function g(){c.clearRect(0,0,d,u),i.children().filter(".pieLabel, .pieLabelBackground").remove()}function v(){var e=o.series.pie.shadow.left,t=o.series.pie.shadow.top,n=o.series.pie.shadow.alpha,i=o.series.pie.radius>1?o.series.pie.radius:a*o.series.pie.radius;if(!(i>=d/2-e||i*o.series.pie.tilt>=u/2-t||i<=10)){c.save(),c.translate(e,t),c.globalAlpha=n,c.fillStyle="#000",c.translate(r,s),c.scale(1,o.series.pie.tilt);for(var l=1;l<=10;l++)c.beginPath(),c.arc(0,0,i,0,2*Math.PI,!1),c.fill(),i-=l;c.restore()}}function b(){var t=Math.PI*o.series.pie.startAngle,n=o.series.pie.radius>1?o.series.pie.radius:a*o.series.pie.radius;c.save(),c.translate(r,s),c.scale(1,o.series.pie.tilt),c.save();for(var l=t,h=0;h<f.length;++h)f[h].startAngle=l,m(f[h].angle,f[h].color,!0);if(c.restore(),o.series.pie.stroke.width>0){c.save(),c.lineWidth=o.series.pie.stroke.width,l=t;for(h=0;h<f.length;++h)m(f[h].angle,o.series.pie.stroke.color,!1);c.restore()}return p(c),c.restore(),!o.series.pie.label.show||function(){for(var n=t,l=o.series.pie.label.radius>1?o.series.pie.label.radius:a*o.series.pie.label.radius,c=0;c<f.length;++c){if(f[c].percent>=100*o.series.pie.label.threshold&&!h(f[c],n,c))return!1;n+=f[c].angle}return!0;function h(t,n,a){if(0==t.data[0][1])return!0;var c,h=o.legend.labelFormatter,p=o.series.pie.label.formatter;c=h?h(t.label,t):t.label,p&&(c=p(c,t));var f=(n+t.angle+n)/2,m=r+Math.round(Math.cos(f)*l),g=s+Math.round(Math.sin(f)*l)*o.series.pie.tilt,v="<span class='pieLabel' id='pieLabel"+a+"' style='position:absolute;top:"+g+"px;left:"+m+"px;'>"+c+"</span>";i.append(v);var b=i.children("#pieLabel"+a),y=g-b.height()/2,w=m-b.width()/2;if(b.css("top",y),b.css("left",w),0-y>0||0-w>0||u-(y+b.height())<0||d-(w+b.width())<0)return!1;if(0!=o.series.pie.label.background.opacity){var x=o.series.pie.label.background.color;null==x&&(x=t.color);var C="top:"+y+"px;left:"+w+"px;";e("<div class='pieLabelBackground' style='position:absolute;width:"+b.width()+"px;height:"+b.height()+"px;"+C+"background-color:"+x+";'></div>").css("opacity",o.series.pie.label.background.opacity).insertBefore(b)}return!0}}();function m(e,t,i){e<=0||isNaN(e)||(i?c.fillStyle=t:(c.strokeStyle=t,c.lineJoin="round"),c.beginPath(),Math.abs(e-2*Math.PI)>1e-9&&c.moveTo(0,0),c.arc(0,0,n,l,l+e/2,!1),c.arc(0,0,n,l+e/2,l+e,!1),c.closePath(),l+=e,i?c.fill():c.stroke())}}}function p(e){if(o.series.pie.innerRadius>0){e.save();var t=o.series.pie.innerRadius>1?o.series.pie.innerRadius:a*o.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=o.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=o.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore()}}function f(e,t){for(var n=!1,i=-1,o=e.length,a=o-1;++i<o;a=i)(e[i][1]<=t[1]&&t[1]<e[a][1]||e[a][1]<=t[1]&&t[1]<e[i][1])&&t[0]<(e[a][0]-e[i][0])*(t[1]-e[i][1])/(e[a][1]-e[i][1])+e[i][0]&&(n=!n);return n}function m(e){v("plothover",e)}function g(e){v("plotclick",e)}function v(e,n){var l=t.offset(),u=function(e,n){for(var i,o,l=t.getData(),d=t.getOptions(),u=d.series.pie.radius>1?d.series.pie.radius:a*d.series.pie.radius,h=0;h<l.length;++h){var p=l[h];if(p.pie.show){if(c.save(),c.beginPath(),c.moveTo(0,0),c.arc(0,0,u,p.startAngle,p.startAngle+p.angle/2,!1),c.arc(0,0,u,p.startAngle+p.angle/2,p.startAngle+p.angle,!1),c.closePath(),i=e-r,o=n-s,c.isPointInPath){if(c.isPointInPath(e-r,n-s))return c.restore(),{datapoint:[p.percent,p.data],dataIndex:0,series:p,seriesIndex:h}}else if(f([[0,0],[u*Math.cos(p.startAngle),u*Math.sin(p.startAngle)],[u*Math.cos(p.startAngle+p.angle/4),u*Math.sin(p.startAngle+p.angle/4)],[u*Math.cos(p.startAngle+p.angle/2),u*Math.sin(p.startAngle+p.angle/2)],[u*Math.cos(p.startAngle+p.angle/1.5),u*Math.sin(p.startAngle+p.angle/1.5)],[u*Math.cos(p.startAngle+p.angle),u*Math.sin(p.startAngle+p.angle)]],[i,o]))return c.restore(),{datapoint:[p.percent,p.data],dataIndex:0,series:p,seriesIndex:h};c.restore()}}return null}(parseInt(n.pageX-l.left),parseInt(n.pageY-l.top));if(o.grid.autoHighlight)for(var h=0;h<d.length;++h){var p=d[h];p.auto!=e||u&&p.series==u.series||b(p.series)}u&&function(e,n){var i=y(e);-1==i?(d.push({series:e,auto:n}),t.triggerRedrawOverlay()):n||(d[i].auto=!1)}(u.series,e);var m={pageX:n.pageX,pageY:n.pageY};i.trigger(e,[m,u])}function b(e){null==e&&(d=[],t.triggerRedrawOverlay());var n=y(e);-1!=n&&(d.splice(n,1),t.triggerRedrawOverlay())}function y(e){for(var t=0;t<d.length;++t){if(d[t].series==e)return t}return-1}t.hooks.processOptions.push((function(e,t){t.series.pie.show&&(t.grid.show=!1,"auto"==t.series.pie.label.show&&(t.legend.show?t.series.pie.label.show=!1:t.series.pie.label.show=!0),"auto"==t.series.pie.radius&&(t.series.pie.label.show?t.series.pie.radius=3/4:t.series.pie.radius=1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))})),t.hooks.bindEvents.push((function(e,t){var n=e.getOptions();n.series.pie.show&&(n.grid.hoverable&&t.unbind("mousemove").mousemove(m),n.grid.clickable&&t.unbind("click").click(g))})),t.hooks.processDatapoints.push((function(e,t,n,i){e.getOptions().series.pie.show&&u(e,t,n)})),t.hooks.drawOverlay.push((function(e,t){e.getOptions().series.pie.show&&function(e,t){var n=e.getOptions(),i=n.series.pie.radius>1?n.series.pie.radius:a*n.series.pie.radius;t.save(),t.translate(r,s),t.scale(1,n.series.pie.tilt);for(var o=0;o<d.length;++o)l(d[o].series);function l(e){e.angle<=0||isNaN(e.angle)||(t.fillStyle="rgba(255, 255, 255, "+n.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(e.angle-2*Math.PI)>1e-9&&t.moveTo(0,0),t.arc(0,0,i,e.startAngle,e.startAngle+e.angle/2,!1),t.arc(0,0,i,e.startAngle+e.angle/2,e.startAngle+e.angle,!1),t.closePath(),t.fill())}p(t),t.restore()}(e,t)})),t.hooks.draw.push((function(e,t){e.getOptions().series.pie.show&&h(e,t)}))},options:t,name:"pie",version:"1.1"})}(jQuery),function(e,t,n){"use strict";function i(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function o(e,t,n){var i,o;for(i in n)n.hasOwnProperty(i)&&(o=i.replace(/ |$/g,t.eventNamespace),e.bind(o,n[i]))}function a(e,t,n){o(e,n,{focus:function(){t.addClass(n.focusClass)},blur:function(){t.removeClass(n.focusClass),t.removeClass(n.activeClass)},mouseenter:function(){t.addClass(n.hoverClass)},mouseleave:function(){t.removeClass(n.hoverClass),t.removeClass(n.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(n.activeClass)},"mouseup touchend":function(){t.removeClass(n.activeClass)}})}function r(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function s(e,t,n){n?e.addClass(t):e.removeClass(t)}function l(e,t,n){setTimeout((function(){var i="checked",o=t.is(":"+i);t.attr("readonly")||(t.prop?t.prop(i,o):o?t.attr(i,i):t.removeAttr(i)),s(e,n.checkedClass,o)}),1)}function c(e,t,n){s(e,n.disabledClass,t.is(":disabled"))}function d(e,t,n){switch(n){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function u(e,n,o){var a,r,s;return o||(o={}),o=t.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},o),a=t("<div />"),r=t("<span />"),n.autoHide&&e.is(":hidden")&&"none"===e.css("display")&&a.hide(),o.divClass&&a.addClass(o.divClass),n.wrapperClass&&a.addClass(n.wrapperClass),o.spanClass&&r.addClass(o.spanClass),s=i(e,"id"),n.useID&&s&&i(a,"id",n.idPrefix+"-"+s),o.spanHtml&&r.html(o.spanHtml),a=d(e,a,o.divWrap),r=d(e,r,o.spanWrap),c(a,e,n),{div:a,span:r}}function h(e,n){return n.wrapperClass?d(e,t("<span />").addClass(n.wrapperClass),"wrap"):null}function p(e){return e?t("<span />").text(e).html():""}function f(){return navigator.cpuClass&&!navigator.product}function m(e){var t;return!(!e[0].multiple&&(t=i(e,"size"),!t||t<=1))}function g(){return!1}function v(e,t){var n="none";o(e,t,{"selectstart dragstart mousedown":g}),e.css({MozUserSelect:n,msUserSelect:n,webkitUserSelect:n,userSelect:n})}function b(e,n,i){var o=t.map(e[0].files,(function(e){return e.name})).join(", ");""===o?o=i.fileDefaultHtml:o=(o=o.split(/[\/\\]+/))[o.length-1],n.text(o)}function y(e,t,n){var i,o;for(i=[],e.each((function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])})),n();i.length;)(o=i.pop()).el.style[o.name]=o.old}function w(e,t){var n;(n=e.parents()).push(e[0]),y(n=n.not(":visible"),{visibility:"hidden",display:"block",position:"absolute"},t)}function x(e,t){return function(){e.unwrap().unwrap().unbind(t.eventNamespace)}}var C=!0,S=!1,_=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(t,n){var s,l,d,h,f;return l=n.submitDefaultHtml,t.is(":reset")&&(l=n.resetDefaultHtml),h=t.is("a, button")?function(){return t.html()||l}:function(){return p(i(t,"value"))||l},d=u(t,n,{divClass:n.buttonClass,spanHtml:h()}),s=d.div,a(t,s,n),f=!1,o(s,n,{"click touchend":function(){var n,o,a,r;return!f&&!t.is(":disabled")&&(f=!0,t[0].dispatchEvent?((n=document.createEvent("MouseEvents")).initEvent("click",!0,!0),o=t[0].dispatchEvent(n),t.is("a")&&o&&(a=i(t,"target"),r=i(t,"href"),a&&"_self"!==a?e.open(r,a):document.location.href=r)):t.click(),void(f=!1))}}),v(s,n),{remove:function(){return s.after(t),s.remove(),t.unbind(n.eventNamespace),t},update:function(){r(s,n),c(s,t,n),t.detach(),d.span.html(h()).append(t)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var n,i,s;return n=u(e,t,{divClass:t.checkboxClass}),i=n.div,s=n.span,a(e,i,t),o(e,t,{"click touchend":function(){l(s,e,t)}}),l(s,e,t),{remove:x(e,t),update:function(){r(i,t),s.removeClass(t.checkedClass),l(s,e,t),c(i,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(e,n){function s(){b(e,p,n)}var l,h,p,m,g=void 0!==e.attr("multiple");return l=u(e,n,{divClass:n.fileClass,spanClass:n.fileButtonClass,spanHtml:g?n.filesButtonHtml:n.fileButtonHtml,spanWrap:"after"}),h=l.div,m=l.span,(p=t("<span />").html(n.fileDefaultHtml)).addClass(n.filenameClass),p=d(e,p,"after"),i(e,"size")||i(e,"size",h.width()/10),a(e,h,n),s(),f()?o(e,n,{click:function(){e.trigger("change"),setTimeout(s,0)}}):o(e,n,{change:s}),v(p,n),v(m,n),{remove:function(){return p.remove(),m.remove(),e.unwrap().unbind(n.eventNamespace)},update:function(){r(h,n),b(e,p,n),c(h,e,n)}}}},{match:function(e){if(e.is("input")){var t=(" "+i(e,"type")+" ").toLowerCase();return" color date datetime datetime-local email month number password search tel text time url week ".indexOf(t)>=0}return!1},apply:function(e,t){var n,o;return n=i(e,"type"),e.addClass(t.inputClass),o=h(e,t),a(e,e,t),t.inputAddTypeAsClass&&e.addClass(n),{remove:function(){e.removeClass(t.inputClass),t.inputAddTypeAsClass&&e.removeClass(n),o&&e.unwrap()},update:g}}},{match:function(e){return e.is(":radio")},apply:function(e,n){var s,d,h;return s=u(e,n,{divClass:n.radioClass}),d=s.div,h=s.span,a(e,d,n),o(e,n,{"click touchend":function(){void 0!==e.attr("name")?t.uniform.update(t(':radio[name="'+i(e,"name")+'"]')):t.uniform.update(e)}}),l(h,e,n),{remove:x(e,n),update:function(){r(d,n),l(h,e,n),c(d,e,n)}}}},{match:function(e){return!(!e.is("select")||m(e))},apply:function(e,n){var i,s,l,d;return n.selectAutoWidth&&w(e,(function(){d=e.width()})),i=u(e,n,{divClass:n.selectClass,spanHtml:(e.find(":selected:first")||e.find("option:first")).html(),spanWrap:"before"}),s=i.div,l=i.span,n.selectAutoWidth?w(e,(function(){y(t([l[0],s[0]]),{display:"block"},(function(){var e;e=l.outerWidth()-l.width(),s.width(d+e),l.width(d)}))})):s.addClass("fixedWidth"),a(e,s,n),o(e,n,{change:function(){l.html(e.find(":selected").html()),s.removeClass(n.activeClass)},"click touchend":function(){var t=e.find(":selected").html();l.html()!==t&&e.trigger("change")},keyup:function(){l.html(e.find(":selected").html())}}),v(l,n),{remove:function(){return l.remove(),e.unwrap().unbind(n.eventNamespace),e},update:function(){n.selectAutoWidth?(t.uniform.restore(e),e.uniform(n)):(r(s,n),e[0].selectedIndex=e[0].selectedIndex,l.html(e.find(":selected").html()),c(s,e,n))}}}},{match:function(e){return!(!e.is("select")||!m(e))},apply:function(e,t){var n;return e.addClass(t.selectMultiClass),n=h(e,t),a(e,e,t),{remove:function(){e.removeClass(t.selectMultiClass),n&&e.unwrap()},update:g}}},{match:function(e){return e.is("textarea")},apply:function(e,t){var n;return e.addClass(t.textareaClass),n=h(e,t),a(e,e,t),{remove:function(){e.removeClass(t.textareaClass),n&&e.unwrap()},update:g}}}];f()&&!(void 0!==e.XMLHttpRequest)&&(C=!1),t.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",filesButtonHtml:"Choose Files",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},t.fn.uniform=function(n){var i=this;return n=t.extend({},t.uniform.defaults,n),S||(S=!0,function(){var n,i,o,a;return i=t('<div style="width:0;height:0;color:'+(a="rgb(120,2,153)")+'">'),t("body").append(i),o=i.get(0),n=e.getComputedStyle?e.getComputedStyle(o,"").color:(o.currentStyle||o.style||{}).color,i.remove(),n.replace(/ /g,"")!==a}()&&(C=!1)),C?(n.resetSelector&&t(n.resetSelector).mouseup((function(){e.setTimeout((function(){t.uniform.update(i)}),10)})),this.each((function(){var e,i,o,a=t(this);if(a.data("uniformed"))t.uniform.update(a);else for(e=0;e<_.length;e+=1)if((i=_[e]).match(a,n))return o=i.apply(a,n),a.data("uniformed",o),void t.uniform.elements.push(a.get(0))}))):this},t.uniform.restore=t.fn.uniform.restore=function(e){e===n&&(e=t.uniform.elements),t(e).each((function(){var e,n,i=t(this);(n=i.data("uniformed"))&&(n.remove(),(e=t.inArray(this,t.uniform.elements))>=0&&t.uniform.elements.splice(e,1),i.removeData("uniformed"))}))},t.uniform.update=t.fn.uniform.update=function(e){e===n&&(e=t.uniform.elements),t(e).each((function(){var e,n=t(this);(e=n.data("uniformed"))&&e.update(n,e.options)}))}}(this,jQuery),function(e,t){function n(t){e.extend(!0,he,t)}function i(n,i,c){function d(){i.theme?"ui":"fc",n.addClass("fc"),i.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),i.theme&&n.addClass("ui-widget"),z=e("<div class='fc-content' style='position:relative'/>").prependTo(n),L=new o(M,i),(B=L.render())&&n.prepend(B),g(i.defaultView),i.handleWindowResize&&e(window).resize(k),f()||u()}function u(){setTimeout((function(){!H.start&&f()&&b()}),0)}function p(){return n.is(":visible")}function f(){return e("body").is(":visible")}function g(e){H&&e==H.name||v(e)}function v(t){Y++,H&&(F("viewDestroy",H,H,H.element),A(),H.triggerEventDestroy(),P(),H.element.remove(),L.deactivateButton(H.name)),L.activateButton(t),H=new me[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(z),M),b(),O(),Y--}function b(e){(!H.start||e||H.start>X||X>=H.end)&&p()&&x(e)}function x(e){Y++,H.start&&(F("viewDestroy",H,H,H.element),A(),D()),P(),H.render(X,e||0),_(),O(),(H.afterRender||R)(),L.updateTitle(H.title),function(){var e=new Date;e>=H.start&&H.end>e?L.disableButton("today"):L.enableButton("today")}(),F("viewRender",H,H,H.element),H.trigger("viewDisplay",q),Y--,!i.lazyFetching||U(H.visStart,H.visEnd)?N():E()}function C(){p()&&(A(),D(),S(),_(),E())}function S(){$=i.contentHeight?i.contentHeight:i.height?i.height-(B?B.height():0)-I(z):Math.round(z.width()/Math.max(i.aspectRatio,.5))}function _(){$===t&&S(),Y++,H.setHeight($),H.setWidth(z.width()),Y--,j=n.outerWidth()}function k(){if(!Y)if(H.start){var e=++G;setTimeout((function(){e==G&&!Y&&p()&&j!=(j=n.outerWidth())&&(Y++,C(),H.trigger("windowResize",q),Y--)}),200)}else u()}function T(e){D(),E(e)}function E(e){p()&&(H.setEventData(Q),H.renderEvents(Q,e),H.trigger("eventAfterAllRender"))}function D(){H.triggerEventDestroy(),H.clearEvents(),H.clearEventData()}function N(){V(H.visStart,H.visEnd)}function A(){H&&H.unselect()}function P(){z.css({width:"100%",height:z.height(),overflow:"hidden"})}function O(){z.css({width:"",height:"",overflow:""})}function F(e,n){return i[e]?i[e].apply(n||q,Array.prototype.slice.call(arguments,2)):t}var M=this;M.options=i,M.render=function(e){z?p()&&(S(),x(e)):d()},M.destroy=function(){H&&(F("viewDestroy",H,H,H.element),H.triggerEventDestroy()),e(window).unbind("resize",k),L.destroy(),z.remove(),n.removeClass("fc fc-rtl ui-widget")},M.refetchEvents=function(){D(),N()},M.reportEvents=function(e){Q=e,E()},M.reportEventChange=function(e){T(e)},M.rerenderEvents=T,M.changeView=g,M.select=function(e,n,i){H.select(e,n,i===t||i)},M.unselect=A,M.prev=function(){b(-1)},M.next=function(){b(1)},M.prevYear=function(){r(X,-1),b()},M.nextYear=function(){r(X,1),b()},M.today=function(){X=new Date,b()},M.gotoDate=function(e,t,n){e instanceof Date?X=h(e):m(X,e,t,n),b()},M.incrementDate=function(e,n,i){e!==t&&r(X,e),n!==t&&s(X,n),i!==t&&l(X,i),b()},M.formatDate=function(e,t){return y(e,t,i)},M.formatDates=function(e,t,n){return w(e,t,n,i)},M.getDate=function(){return h(X)},M.getView=function(){return H},M.option=function(e,n){return n===t?i[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(i[e]=n,C()),t)},M.trigger=F,a.call(M,i,c);var L,B,z,H,j,$,W,U=M.isFetchNeeded,V=M.fetchEvents,q=n[0],G=0,Y=0,X=new Date,Q=[];m(X,i.year,i.month,i.date),i.droppable&&e(document).bind("dragstart",(function(t,n){var o=t.target,a=e(o);if(!a.parents(".fc").length){var r=i.dropAccept;(e.isFunction(r)?r.call(o,a):a.is(r))&&(W=o,H.dragStart(W,t,n))}})).bind("dragstop",(function(e,t){W&&(H.dragStop(W,e,t),W=null)}))}function o(n,i){function o(t){var o=e("<td class='fc-header-"+t+"'/>"),a=i.header[t];return a&&e.each(a.split(" "),(function(t){var a;t>0&&o.append("<span class='fc-header-space'/>"),e.each(this.split(","),(function(t,s){var l;if("title"==s)o.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),a&&a.addClass(r+"-corner-right"),a=null;else if(n[s]?l=n[s]:me[s]&&(l=function(){u.removeClass(r+"-state-hover"),n.changeView(s)}),l){var c=i.theme?L(i.buttonIcons,s):null,d=L(i.buttonText,s),u=e("<span class='fc-button fc-button-"+s+" "+r+"-state-default'>"+(c?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+c+"'/></span>":d)+"</span>").click((function(){u.hasClass(r+"-state-disabled")||l()})).mousedown((function(){u.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-down")})).mouseup((function(){u.removeClass(r+"-state-down")})).hover((function(){u.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-hover")}),(function(){u.removeClass(r+"-state-hover").removeClass(r+"-state-down")})).appendTo(o);z(u),a||u.addClass(r+"-corner-left"),a=u}})),a&&a.addClass(r+"-corner-right")})),o}var a=this;a.render=function(){return r=i.theme?"ui":"fc",i.header?s=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(o("left")).append(o("center")).append(o("right"))):t},a.destroy=function(){s.remove()},a.updateTitle=function(e){s.find("h2").html(e)},a.activateButton=function(e){s.find("span.fc-button-"+e).addClass(r+"-state-active")},a.deactivateButton=function(e){s.find("span.fc-button-"+e).removeClass(r+"-state-active")},a.disableButton=function(e){s.find("span.fc-button-"+e).addClass(r+"-state-disabled")},a.enableButton=function(e){s.find("span.fc-button-"+e).removeClass(r+"-state-disabled")};var r,s=e([])}function a(n,i){function o(t,i){a(t,(function(o){if(i==C){if(o){n.eventDataTransform&&(o=e.map(o,n.eventDataTransform)),t.eventDataTransform&&(o=e.map(o,t.eventDataTransform));for(var a=0;o.length>a;a++)o[a].source=t,c(o[a]);k=k.concat(o)}--S||y(k)}}))}function a(i,o){var r,c,d=fe.sourceFetchers;for(r=0;d.length>r;r++){if(!0===(c=d[r](i,f,m,o)))return;if("object"==typeof c)return a(c,o),t}var u=i.events;if(u)e.isFunction(u)?(s(),u(h(f),h(m),(function(e){o(e),l()}))):e.isArray(u)?o(u):o();else if(i.url){var p,g=i.success,v=i.error,b=i.complete;p=e.isFunction(i.data)?i.data():i.data;var y=e.extend({},p||{}),w=W(i.startParam,n.startParam),x=W(i.endParam,n.endParam);w&&(y[w]=Math.round(+f/1e3)),x&&(y[x]=Math.round(+m/1e3)),s(),e.ajax(e.extend({},ge,i,{data:y,success:function(t){t=t||[];var n=$(g,this,arguments);e.isArray(n)&&(t=n),o(t)},error:function(){$(v,this,arguments),o()},complete:function(){$(b,this,arguments),l()}}))}else o()}function r(n){return e.isFunction(n)||e.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(function(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=fe.sourceNormalizers,n=0;t.length>n;n++)t[n](e)}(n),x.push(n),n):t}function s(){_++||v("loading",null,!0,b())}function l(){--_||v("loading",null,!1,b())}function c(e){var i=e.source||{},o=W(i.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+ve++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=h(e.start=g(e.start,o)),e.end=g(e.end,o),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?h(e.end):null,e.allDay===t&&(e.allDay=W(i.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function d(e,t){return e&&t&&u(e)==u(t)}function u(e){return("object"==typeof e?e.events||e.url:"")||e}var p=this;p.isFetchNeeded=function(e,t){return!f||f>e||t>m},p.fetchEvents=function(e,t){f=e,m=t,k=[];var n=++C,i=x.length;S=i;for(var a=0;i>a;a++)o(x[a],n)},p.addEventSource=function(e){(e=r(e))&&(S++,o(e,C))},p.removeEventSource=function(t){x=e.grep(x,(function(e){return!d(e,t)})),k=e.grep(k,(function(e){return!d(e.source,t)})),y(k)},p.updateEvent=function(e){var t,n,i=k.length,o=b().defaultEventEnd,a=e.start-e._start,r=e.end?e.end-(e._end||o(e)):0;for(t=0;i>t;t++)(n=k[t])._id==e._id&&n!=e&&(n.start=new Date(+n.start+a),n.end=e.end?n.end?new Date(+n.end+r):new Date(+o(n)+r):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,c(n));c(e),y(k)},p.renderEvent=function(e,t){c(e),e.source||(t&&(w.events.push(e),e.source=w),k.push(e)),y(k)},p.removeEvents=function(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}k=e.grep(k,t,!0);for(var i=0;x.length>i;i++)e.isArray(x[i].events)&&(x[i].events=e.grep(x[i].events,t,!0))}else{k=[];for(i=0;x.length>i;i++)e.isArray(x[i].events)&&(x[i].events=[])}y(k)},p.clientEvents=function(t){return e.isFunction(t)?e.grep(k,t):t?(t+="",e.grep(k,(function(e){return e._id==t}))):k},p.normalizeEvent=c;for(var f,m,v=p.trigger,b=p.getView,y=p.reportEvents,w={events:[]},x=[w],C=0,S=0,_=0,k=[],T=0;i.length>T;T++)r(i[T])}function r(e,t,n){return e.setFullYear(e.getFullYear()+t),n||u(e),e}function s(e,t,n){if(+e){var i=e.getMonth()+t,o=h(e);for(o.setDate(1),o.setMonth(i),e.setMonth(i),n||u(e);e.getMonth()!=o.getMonth();)e.setDate(e.getDate()+(o>e?1:-1))}return e}function l(e,t,n){if(+e){var i=e.getDate()+t,o=h(e);o.setHours(9),o.setDate(i),e.setDate(i),n||u(e),c(e,o)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*we)}function d(e,t){return e.setMinutes(e.getMinutes()+t),e}function u(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function h(e,t){return t?u(new Date(+e)):new Date(+e)}function p(){var e,t=0;do{e=new Date(1970,t++,1)}while(e.getHours());return e}function f(e,t){return Math.round((h(e,!0)-h(t,!0))/ye)}function m(e,n,i,o){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),i!==t&&i!=e.getMonth()&&(e.setDate(1),e.setMonth(i)),o!==t&&e.setDate(o)}function g(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),v(e,n)||(e?new Date(e):null)):null}function v(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var i=new Date(n[1],0,1);if(t||!n[13]){var o=new Date(n[1],0,1,9,0);n[3]&&(i.setMonth(n[3]-1),o.setMonth(n[3]-1)),n[5]&&(i.setDate(n[5]),o.setDate(n[5])),c(i,o),n[7]&&i.setHours(n[7]),n[8]&&i.setMinutes(n[8]),n[10]&&i.setSeconds(n[10]),n[12]&&i.setMilliseconds(1e3*Number("0."+n[12])),c(i,o)}else if(i.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),i.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var a=60*Number(n[16])+(n[18]?Number(n[18]):0);a*="-"==n[15]?1:-1,i=new Date(+i+6e4*a)}return i}function b(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function y(e,t,n){return w(e,null,t,n)}function w(e,t,n,i){i=i||he;var o,a,r,s,l=e,c=t,d=n.length,u="";for(o=0;d>o;o++)if("'"==(a=n.charAt(o))){for(r=o+1;d>r;r++)if("'"==n.charAt(r)){l&&(u+=r==o+1?"'":n.substring(o+1,r),o=r);break}}else if("("==a){for(r=o+1;d>r;r++)if(")"==n.charAt(r)){var h=y(l,n.substring(o+1,r),i);parseInt(h.replace(/\D/,""),10)&&(u+=h),o=r;break}}else if("["==a){for(r=o+1;d>r;r++)if("]"==n.charAt(r)){var p=n.substring(o+1,r);(h=y(l,p,i))!=y(c,p,i)&&(u+=h),o=r;break}}else if("{"==a)l=t,c=e;else if("}"==a)l=e,c=t;else{for(r=d;r>o;r--)if(s=Ce[n.substring(o,r)]){l&&(u+=s(l,i)),o=r-1;break}r==o&&l&&(u+=a)}return u}function x(e){return e.end?function(e,t){return e=h(e),t||e.getHours()||e.getMinutes()?l(e,1):u(e)}(e.end,e.allDay):l(h(e.start),1)}function C(n,i,o){n.unbind("mouseover").mouseover((function(n){for(var a,r,s,l=n.target;l!=this;)a=l,l=l.parentNode;(r=a._fci)!==t&&(a._fci=t,s=i[r],o(s.event,s.element,s),e(n.target).trigger(n)),n.stopPropagation()}))}function S(t,n,i){for(var o,a=0;t.length>a;a++)(o=e(t[a])).width(Math.max(0,n-k(o,i)))}function _(t,n,i){for(var o,a=0;t.length>a;a++)(o=e(t[a])).height(Math.max(0,n-I(o,i)))}function k(e,t){return T(e)+D(e)+(t?E(e):0)}function T(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function E(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function D(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function I(e,t){return N(e)+P(e)+(t?A(e):0)}function N(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function A(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function P(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function R(){}function O(e,t){return e-t}function F(e){return Math.max.apply(Math,e)}function M(e){return(10>e?"0":"")+e}function L(e,n){if(e[n]!==t)return e[n];for(var i,o=n.split(/(?=[A-Z])/),a=o.length-1;a>=0;a--)if((i=e[o[a].toLowerCase()])!==t)return i;return e[""]}function B(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function z(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",(function(){return!1}))}function H(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function j(e,t){var n=e.source||{},i=e.color,o=n.color,a=t("eventColor"),r=e.backgroundColor||i||n.backgroundColor||o||t("eventBackgroundColor")||a,s=e.borderColor||i||n.borderColor||o||t("eventBorderColor")||a,l=e.textColor||n.textColor||t("eventTextColor"),c=[];return r&&c.push("background-color:"+r),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function $(t,n,i){if(e.isFunction(t)&&(t=[t]),t){var o,a;for(o=0;t.length>o;o++)a=t[o].apply(n,i)||a;return a}}function W(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function U(t,n,i){function o(){T=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function a(){var n=function(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var e,t,n=j+"-widget-header",i="";for(i+="<thead><tr>",W&&(i+="<th class='fc-week-number "+n+"'>"+B(U)+"</th>"),e=0;P>e;e++)t=J(0,e),i+="<th class='fc-day-header fc-"+be[t.getDay()]+" "+n+"'>"+B(ne(t,$))+"</th>";return i+"</tr></thead>"}()+function(){var e,t,n,i=j+"-widget-content",o="";for(o+="<tbody>",e=0;A>e;e++){for(o+="<tr class='fc-week'>",W&&(n=J(e,0),o+="<td class='fc-week-number "+i+"'><div>"+B(ne(n,q))+"</div></td>"),t=0;P>t;t++)o+=r(n=J(e,t));o+="</tr>"}return o+"</tbody>"}()+"</table>";return e}();m&&m.remove(),m=e(n).appendTo(t),g=m.find("thead"),b=g.find(".fc-day-header"),y=m.find("tbody"),w=y.find("tr"),x=y.find(".fc-day"),C=w.find("td:first-child"),_=w.eq(0).find(".fc-day > div"),k=w.eq(0).find(".fc-day-content > div"),H(g.add(g.find("tr"))),H(w),w.eq(0).addClass("fc-first"),w.filter(":last").addClass("fc-last"),x.each((function(t,n){var i=J(Math.floor(t/P),t%P);Y("dayRender",f,i,e(n))})),s(x)}function r(e){var t=j+"-widget-content",n=f.start.getMonth(),i=u(new Date),o="",a=["fc-day","fc-"+be[e.getDay()],t];return e.getMonth()!=n&&a.push("fc-other-month"),+e==+i?a.push("fc-today",j+"-state-highlight"):i>e?a.push("fc-past"):a.push("fc-future"),o+="<td class='"+a.join(" ")+"' data-date='"+ne(e,"yyyy-MM-dd")+"'><div>",R&&(o+="<div class='fc-day-number'>"+e.getDate()+"</div>"),o+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function s(e){e.click(c).mousedown(K)}function c(t){if(!G("selectable")){var n=v(e(this).data("date"));Y("dayClick",this,n,!0,t)}}function d(e,t,n){n&&O.build();for(var i=ee(e,t),o=0;i.length>o;o++){var a=i[o];s(p(a.row,a.leftCol,a.row,a.rightCol))}}function p(e,n,i,o){var a=O.rect(e,n,i,o,t);return X(a,t)}var f=this;f.renderBasic=function(e,t,n){A=e,P=t,R=n,j=G("theme")?"ui":"fc",$=G("columnFormat"),W=G("weekNumbers"),U=G("weekNumberTitle"),q="iso"!=G("weekNumberCalculation")?"w":"W",y||o(),a()},f.setHeight=function(t){var n,i,o,a=t-g.height();"variable"==G("weekMode")?n=i=Math.floor(a/(1==A?2:6)):(n=Math.floor(a/A),i=a-n*(A-1)),C.each((function(t,a){A>t&&(o=e(a)).find("> div").css("min-height",(t==A-1?i:n)-I(o))}))},f.setWidth=function(e){E=e,M.clear(),L.clear(),N=0,W&&(N=g.find("th.fc-week-number").outerWidth()),D=Math.floor((E-N)/P),S(b.slice(0,-1),D)},f.renderDayOverlay=d,f.defaultSelectionEnd=function(e){return h(e)},f.renderSelection=function(e,t){d(e,l(h(t),1),!0)},f.clearSelection=function(){Q()},f.reportDayClick=function(e,t,n){var i=Z(e),o=x[i.row*P+i.col];Y("dayClick",o,e,t,n)},f.dragStart=function(e,t){F.start((function(e){Q(),e&&p(e.row,e.col,e.row,e.col)}),t)},f.dragStop=function(e,t,n){var i=F.stop();if(Q(),i){var o=J(i);Y("drop",e,o,!0,t,n)}},f.defaultEventEnd=function(e){return h(e.start)},f.getHoverListener=function(){return F},f.colLeft=function(e){return M.left(e)},f.colRight=function(e){return M.right(e)},f.colContentLeft=function(e){return L.left(e)},f.colContentRight=function(e){return L.right(e)},f.getIsCellAllDay=function(){return!0},f.allDayRow=function(e){return w.eq(e)},f.getRowCnt=function(){return A},f.getColCnt=function(){return P},f.getColWidth=function(){return D},f.getDaySegmentContainer=function(){return T},te.call(f,t,n,i),se.call(f),re.call(f),V.call(f);var m,g,b,y,w,x,C,_,k,T,E,D,N,A,P,R,O,F,M,L,j,$,W,U,q,G=f.opt,Y=f.trigger,X=f.renderOverlay,Q=f.clearOverlays,K=f.daySelectionMousedown,J=f.cellToDate,Z=f.dateToCell,ee=f.rangeToSegments,ne=n.formatDate;z(t.addClass("fc-grid")),O=new le((function(t,n){var i,o,a;b.each((function(t,r){i=e(r),o=i.offset().left,t&&(a[1]=o),a=[o],n[t]=a})),a[1]=o+i.outerWidth(),w.each((function(n,r){A>n&&(i=e(r),o=i.offset().top,n&&(a[1]=o),a=[o],t[n]=a)})),a[1]=o+i.outerHeight()})),F=new ce(O),M=new ue((function(e){return _.eq(e)})),L=new ue((function(e){return k.eq(e)}))}function V(){var e=this;e.renderEvents=function(t,n){e.renderDayEvents(t,n)},e.clearEvents=function(){e.getDaySegmentContainer().empty()},ne.call(e)}function q(n,i,o){function a(){var t,i,o,a,l,u=we+"-widget-header",f=we+"-widget-content",m=0==De("slotMinutes")%15;for(r(),W=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),De("allDaySlot")?(U=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(W),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+u+" fc-agenda-axis'>"+De("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+u+" fc-agenda-gutter'>&nbsp;</th></tr></table>",V=e(t).appendTo(W),s((q=V.find("tr")).find("td")),W.append("<div class='fc-agenda-divider "+u+"'><div class='fc-agenda-divider-inner'/></div>")):U=e([]),Y=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(W),X=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(Y),Q=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(X),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=d(h(i=p()),Se),d(i,Ce),fe=0,o=0;a>i;o++)t+="<tr class='fc-slot"+o+" "+((l=i.getMinutes())?"fc-minor":"")+"'><th class='fc-agenda-axis "+u+"'>"+(m&&l?"&nbsp;":ze(i,De("axisFormat")))+"</th><td class='"+f+"'><div style='position:relative'>&nbsp;</div></td></tr>",d(i,De("slotMinutes")),fe++;c((K=e(t+="</tbody></table>").appendTo(X)).find("td"))}function r(){var t=function(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var e,t,n,i=we+"-widget-header",o="";for(o+="<thead><tr>",ke?(e=Me(0,0),t=ze(e,Ee),xe?t+=Te:t=Te+t,o+="<th class='fc-agenda-axis fc-week-number "+i+"'>"+B(t)+"</th>"):o+="<th class='fc-agenda-axis "+i+"'>&nbsp;</th>",n=0;pe>n;n++)e=Me(0,n),o+="<th class='fc-"+be[e.getDay()]+" fc-col"+n+" "+i+"'>"+B(ze(e,_e))+"</th>";return o+"<th class='fc-agenda-gutter "+i+"'>&nbsp;</th></tr></thead>"}()+function(){var e,t,n,i,o,a=we+"-widget-header",r=we+"-widget-content",s=u(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n="",t=0;pe>t;t++)e=Me(0,t),o=["fc-col"+t,"fc-"+be[e.getDay()],r],+e==+s?o.push(we+"-state-highlight","fc-today"):s>e?o.push("fc-past"):o.push("fc-future"),i="<td class='"+o.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=i;return l+=n,l+"<td class='fc-agenda-gutter "+r+"'>&nbsp;</td></tr></tbody>"}()+"</table>";return e}();N&&N.remove(),N=e(t).appendTo(n),A=N.find("thead"),P=A.find("th").slice(1,-1),R=N.find("tbody"),F=R.find("td").slice(0,-1),M=F.find("> div"),L=F.find(".fc-day-content > div"),j=F.eq(0),$=M.eq(0),H(A.add(A.find("tr"))),H(R.add(R.find("tr")))}function s(e){e.click(f).mousedown(Oe)}function c(e){e.click(f).mousedown(T)}function f(e){if(!De("selectable")){var t=Math.min(pe-1,Math.floor((e.pageX-N.offset().left-ee)/ne)),n=Me(0,t),i=this.parentNode.className.match(/fc-slot(\d+)/);if(i){var o=parseInt(i[1])*De("slotMinutes"),a=Math.floor(o/60);n.setHours(a),n.setMinutes(o%60+Ce),Ie("dayClick",F[t],n,!1,e)}else Ie("dayClick",F[t],n,!0,e)}}function m(e,t,n){n&&me.build();for(var i=Be(e,t),o=0;i.length>o;o++){var a=i[o];s(g(a.row,a.leftCol,a.row,a.rightCol))}}function g(e,t,n,i){var o=me.rect(e,t,n,i,W);return Ne(o,W)}function v(e,t){for(var n=0;pe>n;n++){var i=Me(0,n),o=l(h(i),1),a=new Date(Math.max(i,e)),r=new Date(Math.min(o,t));if(r>a){var s=me.rect(0,n,0,n,X),d=x(i,a),u=x(i,r);s.top=d,s.height=u-d,c(Ne(s,X))}}}function y(e){return De("allDaySlot")&&!e.row}function w(e){var t=Me(0,e.col),n=e.row;return De("allDaySlot")&&n--,n>=0&&d(t,Ce+n*ae),t}function x(e,n){if(e=h(e,!0),d(h(e),Ce)>n)return 0;if(n>=d(h(e),Se))return K.height();var i=De("slotMinutes"),o=60*n.getHours()+n.getMinutes()-Ce,a=Math.floor(o/i),r=He[a];return r===t&&(r=He[a]=K.find("tr").eq(a).find("td div")[0].offsetTop),Math.max(0,Math.round(r-1+oe*(o%i/i)))}function C(t,n){var i=De("selectHelper");if(me.build(),i){var o=Le(t).col;if(o>=0&&pe>o){var a=me.rect(0,o,0,o,X),r=x(t,t),s=x(t,n);if(s>r){if(a.top=r,a.height=s-r,a.left+=2,a.width-=5,e.isFunction(i)){var l=i(t,n);l&&(a.position="absolute",J=e(l).css(a).appendTo(X))}else a.isStart=!0,a.isEnd=!0,(J=e(Fe({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},a))).css("opacity",De("dragOpacity"));J&&(c(J),X.append(J),S(J,a.width,!0),_(J,a.height,!0))}}}else v(t,n)}function k(){Ae(),J&&(J.remove(),J=null)}function T(t){var n;1==t.which&&De("selectable")&&(Re(t),ge.start((function(e,t){if(k(),e&&e.col==t.col&&!y(e)){var i=w(t),o=w(e);C((n=[i,d(h(i),ae),o,d(h(o),ae)].sort(O))[0],n[3])}else n=null}),t),e(document).one("mouseup",(function(e){ge.stop(),n&&(+n[0]==+n[1]&&E(n[0],!1,e),Pe(n[0],n[3],!1,e))})))}function E(e,t,n){Ie("dayClick",F[Le(e).col],e,t,n)}var D=this;D.renderAgenda=function(e){pe=e,we=De("theme")?"ui":"fc",xe=De("isRTL"),Ce=b(De("minTime")),Se=b(De("maxTime")),_e=De("columnFormat"),ke=De("weekNumbers"),Te=De("weekNumberTitle"),Ee="iso"!=De("weekNumberCalculation")?"w":"W",ae=De("snapMinutes")||De("slotMinutes"),N?r():a()},D.setWidth=function(t){t,ve.clear(),ye.clear();var n=A.find("th:first");V&&(n=n.add(V.find("th:first"))),n=n.add(K.find("th:first")),ee=0,S(n.width("").each((function(t,n){ee=Math.max(ee,e(n).outerWidth())})),ee);var i=N.find(".fc-agenda-gutter");V&&(i=i.add(V.find("th.fc-agenda-gutter")));var o=Y[0].clientWidth;(ie=Y.width()-o)?(S(i,ie),i.show().prev().removeClass("fc-last")):i.hide().prev().addClass("fc-last"),ne=Math.floor((o-ee)/pe),S(P.slice(0,-1),ne)},D.setHeight=function(e){e===t&&(e=Z),Z=e,He={};var n=R.position().top,i=Y.position().top,o=Math.min(e-n,K.height()+i+1);$.height(o-I(j)),W.css("top",n),Y.height(o-i-1),oe=K.find("tr:first").height()+1,de=De("slotMinutes")/ae,he=oe/de},D.afterRender=function(){!function(){function e(){Y.scrollTop(i)}var t=p(),n=h(t);n.setHours(De("firstHour"));var i=x(t,n)+1;e(),setTimeout(e,0)}()},D.defaultEventEnd=function(e){var t=h(e.start);return e.allDay?t:d(t,De("defaultEventMinutes"))},D.timePosition=x,D.getIsCellAllDay=y,D.allDayRow=function(){return q},D.getCoordinateGrid=function(){return me},D.getHoverListener=function(){return ge},D.colLeft=function(e){return ve.left(e)},D.colRight=function(e){return ve.right(e)},D.colContentLeft=function(e){return ye.left(e)},D.colContentRight=function(e){return ye.right(e)},D.getDaySegmentContainer=function(){return U},D.getSlotSegmentContainer=function(){return Q},D.getMinMinute=function(){return Ce},D.getMaxMinute=function(){return Se},D.getSlotContainer=function(){return X},D.getRowCnt=function(){return 1},D.getColCnt=function(){return pe},D.getColWidth=function(){return ne},D.getSnapHeight=function(){return he},D.getSnapMinutes=function(){return ae},D.defaultSelectionEnd=function(e,t){return t?h(e):d(h(e),De("slotMinutes"))},D.renderDayOverlay=m,D.renderSelection=function(e,t,n){n?De("allDaySlot")&&m(e,l(h(t),1),!0):C(e,t)},D.clearSelection=k,D.reportDayClick=E,D.dragStart=function(e,t){ge.start((function(e){if(Ae(),e)if(y(e))g(e.row,e.col,e.row,e.col);else{var t=w(e);v(t,d(h(t),De("defaultEventMinutes")))}}),t)},D.dragStop=function(e,t,n){var i=ge.stop();Ae(),i&&Ie("drop",e,w(i),y(i),t,n)},te.call(D,n,i,o),se.call(D),re.call(D),G.call(D);var N,A,P,R,F,M,L,j,$,W,U,V,q,Y,X,Q,K,J,Z,ee,ne,ie,oe,ae,de,he,pe,fe,me,ge,ve,ye,we,xe,Ce,Se,_e,ke,Te,Ee,De=D.opt,Ie=D.trigger,Ne=D.renderOverlay,Ae=D.clearOverlays,Pe=D.reportSelection,Re=D.unselect,Oe=D.daySelectionMousedown,Fe=D.slotSegHtml,Me=D.cellToDate,Le=D.dateToCell,Be=D.rangeToSegments,ze=i.formatDate,He={};z(n.addClass("fc-agenda")),me=new le((function(t,n){function i(e){return Math.max(l,Math.min(c,e))}var o,a,r;P.each((function(t,i){o=e(i),a=o.offset().left,t&&(r[1]=a),r=[a],n[t]=r})),r[1]=a+o.outerWidth(),De("allDaySlot")&&(a=(o=q).offset().top,t[0]=[a,a+o.outerHeight()]);for(var s=X.offset().top,l=Y.offset().top,c=l+Y.outerHeight(),d=0;fe*de>d;d++)t.push([i(s+he*d),i(s+he*(d+1))])})),ge=new ce(me),ve=new ue((function(e){return M.eq(e)})),ye=new ue((function(e){return L.eq(e)}))}function G(){function n(t){var n,a,r,s,l,c=F(),u=D(),p=E(),f=e.map(t,o),m=[];for(a=0;c>a;a++)for(d(n=O(0,a),u),l=Y(l=i(t,f,n,d(h(n),p-u))),r=0;l.length>r;r++)(s=l[r]).col=a,m.push(s);return m}function i(e,t,n,i){var o,a,r,s,l,c,d,u,p=[],f=e.length;for(o=0;f>o;o++)r=(a=e[o]).start,(s=t[o])>n&&i>r&&(n>r?(l=h(n),d=!1):(l=r,d=!0),s>i?(c=h(i),u=!1):(c=s,u=!0),p.push({event:a,start:l,end:c,isStart:d,isEnd:u}));return p.sort(ee)}function o(e){return e.end?h(e.end):d(h(e.start),u("defaultEventMinutes"))}function a(n,i){var o,a,l,c,d,h,f,m,g,v,b,y,w,x,_,T,E=n.length,D="",A=S(),O=u("isRTL");for(o=0;E>o;o++)l=(a=n[o]).event,c=N(a.start,a.start),d=N(a.start,a.end),h=P(a.col),f=R(a.col),g=(m=(f-=.025*(m=f-h))-h)*(a.forwardCoord-a.backwardCoord),u("slotEventOverlap")&&(g=Math.max(2*(g-10),g)),O?v=(b=f-a.backwardCoord*m)-g:b=(v=h+a.backwardCoord*m)+g,v=Math.max(v,h),g=(b=Math.min(b,f))-v,a.top=c,a.left=v,a.outerWidth=g,a.outerHeight=d-c,D+=r(l,a);for(A[0].innerHTML=D,y=A.children(),o=0;E>o;o++)l=(a=n[o]).event,w=e(y[o]),!1===(x=p("eventRender",l,l,w))?w.remove():(x&&!0!==x&&(w.remove(),w=e(x).css({position:"absolute",top:a.top,left:a.left}).appendTo(A)),a.element=w,l._id===i?s(l,w,a):w[0]._fci=o,$(l,w));for(C(A,n,s),o=0;E>o;o++)(w=(a=n[o]).element)&&(a.vsides=I(w,!0),a.hsides=k(w,!0),(_=w.find(".fc-event-title")).length&&(a.contentTop=_[0].offsetTop));for(o=0;E>o;o++)(w=(a=n[o]).element)&&(w[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px",T=Math.max(0,a.outerHeight-a.vsides),w[0].style.height=T+"px",l=a.event,a.contentTop!==t&&10>T-a.contentTop&&(w.find("div.fc-event-time").text(J(l.start,u("timeFormat"))+" - "+l.title),w.find("div.fc-event-title").remove()),p("eventAfterRender",l,l,w))}function r(e,t){var n="<",i=e.url,o=j(e,u),a=["fc-event","fc-event-vert"];return m(e)&&a.push("fc-event-draggable"),t.isStart&&a.push("fc-event-start"),t.isEnd&&a.push("fc-event-end"),a=a.concat(e.className),e.source&&(a=a.concat(e.source.className||[])),n+=i?"a href='"+B(e.url)+"'":"div",n+=" class='"+a.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+o+"'><div class='fc-event-inner'><div class='fc-event-time'>"+B(Z(e.start,e.end,u("timeFormat")))+"</div><div class='fc-event-title'>"+B(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&g(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+"</"+(i?"a":"div")+">"}function s(e,t,n){var i=t.find("div.fc-event-time");m(e)&&function(e,t,n){function i(){X(),s&&(g?(n.hide(),t.draggable("option","grid",null),G(l(h(e.start),w),l(x(e),w))):(o(C),n.css("display",""),t.draggable("option","grid",[T,E])))}function o(t){var i,o=d(h(e.start),t);e.end&&(i=d(h(e.end),t)),n.text(Z(o,i,u("timeFormat")))}var a,r,s,m,g,v,b,y,w,C,S,_=c.getCoordinateGrid(),k=F(),T=M(),E=L(),D=z();t.draggable({scroll:!1,grid:[T,E],axis:1==k&&"y",opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(n,i){p("eventDragStart",t,e,n,i),U(e,t),_.build(),a=t.position(),r=_.cell(n.pageX,n.pageY),s=m=!0,g=v=A(r),b=y=0,w=0,C=S=0},drag:function(e,n){var o=_.cell(e.pageX,e.pageY);if(s=!!o){if(g=A(o),(b=Math.round((n.position.left-a.left)/T))!=y){var l=O(0,r.col),c=r.col+b;c=Math.max(0,c),c=Math.min(k-1,c);var d=O(0,c);w=f(d,l)}g||(C=Math.round((n.position.top-a.top)/E)*D)}(s!=m||g!=v||b!=y||C!=S)&&(i(),m=s,v=g,y=b,S=C),t.draggable("option","revert",!s)},stop:function(n,o){X(),p("eventDragStop",t,e,n,o),s&&(g||w||C)?V(this,e,w,g?0:C,g,n,o):(s=!0,g=!1,b=0,w=0,C=0,i(),t.css("filter",""),t.css(a),W(e,t))}})}(e,t,i),n.isEnd&&g(e)&&function(e,t,n){var i,o,a=L(),r=z();t.resizable({handles:{s:".ui-resizable-handle"},grid:a,start:function(n,a){i=o=0,U(e,t),p("eventResizeStart",this,e,n,a)},resize:function(s,l){(i=Math.round((Math.max(a,t.height())-l.originalSize.height)/a))!=o&&(n.text(Z(e.start,i||e.end?d(v(e),r*i):null,u("timeFormat"))),o=i)},stop:function(n,o){p("eventResizeStop",this,e,n,o),i?q(this,e,0,r*i,n,o):W(e,t)}})}(e,t,i),b(e,t)}var c=this;c.renderEvents=function(e,t){var i,o=e.length,r=[],s=[];for(i=0;o>i;i++)e[i].allDay?r.push(e[i]):s.push(e[i]);u("allDaySlot")&&(Q(r,t),y()),a(n(s),t)},c.clearEvents=function(){w().empty(),S().empty()},c.slotSegHtml=r,ne.call(c);var u=c.opt,p=c.trigger,m=c.isEventDraggable,g=c.isEventResizable,v=c.eventEnd,b=c.eventElementHandlers,y=c.setHeight,w=c.getDaySegmentContainer,S=c.getSlotSegmentContainer,T=c.getHoverListener,E=c.getMaxMinute,D=c.getMinMinute,N=c.timePosition,A=c.getIsCellAllDay,P=c.colContentLeft,R=c.colContentRight,O=c.cellToDate,F=c.getColCnt,M=c.getColWidth,L=c.getSnapHeight,z=c.getSnapMinutes,H=c.getSlotContainer,$=c.reportEventElement,W=c.showEvents,U=c.hideEvents,V=c.eventDrop,q=c.eventResize,G=c.renderDayOverlay,X=c.clearOverlays,Q=c.renderDayEvents,K=c.calendar,J=K.formatDate,Z=K.formatDates;c.draggableDayEvent=function(e,t,n){function i(){c||(t.width(o).height("").draggable("option","grid",null),c=!0)}var o,a,r,s=n.isStart,c=!0,d=T(),m=M(),g=L(),v=z(),b=D();t.draggable({opacity:u("dragOpacity","month"),revertDuration:u("dragRevertDuration"),start:function(n,b){p("eventDragStart",t,e,n,b),U(e,t),o=t.width(),d.start((function(n,o){if(X(),n){a=!1;var d=O(0,o.col),p=O(0,n.col);r=f(p,d),n.row?s?c&&(t.width(m-10),_(t,g*Math.round((e.end?(e.end-e.start)/xe:u("defaultEventMinutes"))/v)),t.draggable("option","grid",[m,1]),c=!1):a=!0:(G(l(h(e.start),r),l(x(e),r)),i()),a=a||c&&!r}else i(),a=!0;t.draggable("option","revert",a)}),n,"drag")},stop:function(n,o){if(d.stop(),X(),p("eventDragStop",t,e,n,o),a)i(),t.css("filter",""),W(e,t);else{var s=0;c||(s=Math.round((t.offset().top-H().offset().top)/g)*v+b-(60*e.start.getHours()+e.start.getMinutes())),V(this,e,r,s,c,n,o)}}})}}function Y(e){var t,n=function(e){var t,n,i,o=[];for(t=0;e.length>t;t++){for(n=e[t],i=0;o.length>i&&K(n,o[i]).length;i++);(o[i]||(o[i]=[])).push(n)}return o}(e),i=n[0];if(function(e){var t,n,i,o,a;for(t=0;e.length>t;t++)for(n=e[t],i=0;n.length>i;i++)for((o=n[i]).forwardSegs=[],a=t+1;e.length>a;a++)K(o,e[a],o.forwardSegs)}(n),i){for(t=0;i.length>t;t++)X(i[t]);for(t=0;i.length>t;t++)Q(i[t],0,0)}return function(e){var t,n,i,o=[];for(t=0;e.length>t;t++)for(n=e[t],i=0;n.length>i;i++)o.push(n[i]);return o}(n)}function X(e){var n,i,o=e.forwardSegs,a=0;if(e.forwardPressure===t){for(n=0;o.length>n;n++)X(i=o[n]),a=Math.max(a,1+i.forwardPressure);e.forwardPressure=a}}function Q(e,n,i){var o,a=e.forwardSegs;if(e.forwardCoord===t)for(a.length?(a.sort(Z),Q(a[0],n+1,i),e.forwardCoord=a[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-i)/(n+1),o=0;a.length>o;o++)Q(a[o],0,e.forwardCoord)}function K(e,t,n){n=n||[];for(var i=0;t.length>i;i++)J(e,t[i])&&n.push(t[i]);return n}function J(e,t){return e.end>t.start&&e.start<t.end}function Z(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||ee(e,t)}function ee(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function te(n,i,o){function a(t,n){var i=D[t];return e.isPlainObject(i)?L(i,n||o):i}function r(e,t){return i.trigger.apply(i,[e,t||x].concat(Array.prototype.slice.call(arguments,2),[x]))}function s(e){return e.end?h(e.end):C(e)}function c(e,t,n){var i,o=T[e._id],a=o.length;for(i=0;a>i;i++)t&&o[i][0]==t[0]||o[i][n]()}function u(e,n,i,o){i=i||0;for(var a,r=e.length,s=0;r>s;s++)a=e[s],o!==t&&(a.allDay=o),d(l(a.start,n,!0),i),a.end&&(a.end=d(l(a.end,n,!0),i)),S(a,D)}function p(e,t,n){n=n||0;for(var i,o=e.length,a=0;o>a;a++)(i=e[a]).end=d(l(s(i),t,!0),n),S(i,D)}function m(e,t){var n=x.getColCnt(),i=O?-1:1,o=O?n-1:0;return"object"==typeof e&&(t=e.col,e=e.row),e*n+(t*i+o)}function g(e){var t=x.visStart.getDay();return e+=P[t],7*Math.floor(e/I)+R[(e%I+I)%I]-t}function v(e){var t=h(x.visStart);return l(t,e),t}function b(e){return f(e,x.visStart)}function y(e){var t=x.visStart.getDay();return e+=t,Math.floor(e/7)*I+P[(e%7+7)%7]-P[t]}function w(e){var t=x.getColCnt(),n=O?-1:1,i=O?t-1:0;return{row:Math.floor(e/t),col:(e%t+t)%t*n+i}}var x=this;x.element=n,x.calendar=i,x.name=o,x.opt=a,x.trigger=r,x.isEventDraggable=function(e){var t=e.source||{};return W(e.startEditable,t.startEditable,a("eventStartEditable"),e.editable,t.editable,a("editable"))&&!a("disableDragging")},x.isEventResizable=function(e){var t=e.source||{};return W(e.durationEditable,t.durationEditable,a("eventDurationEditable"),e.editable,t.editable,a("editable"))&&!a("disableResizing")},x.setEventData=function(e){k={};var t,n,i=e.length;for(t=0;i>t;t++)n=e[t],k[n._id]?k[n._id].push(n):k[n._id]=[n]},x.clearEventData=function(){k={},T={},E=[]},x.eventEnd=s,x.reportEventElement=function(e,t){E.push({event:e,element:t}),T[e._id]?T[e._id].push(t):T[e._id]=[t]},x.triggerEventDestroy=function(){e.each(E,(function(e,t){x.trigger("eventDestroy",t.event,t.event,t.element)}))},x.eventElementHandlers=function(e,n){n.click((function(i){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?t:r("eventClick",this,e,i)})).hover((function(t){r("eventMouseover",this,e,t)}),(function(t){r("eventMouseout",this,e,t)}))},x.showEvents=function(e,t){c(e,t,"show")},x.hideEvents=function(e,t){c(e,t,"hide")},x.eventDrop=function(e,t,n,i,o,a,s){var l=t.allDay,c=t._id;u(k[c],n,i,o),r("eventDrop",e,t,n,i,o,(function(){u(k[c],-n,-i,l),_(c)}),a,s),_(c)},x.eventResize=function(e,t,n,i,o,a){var s=t._id;p(k[s],n,i),r("eventResize",e,t,n,i,(function(){p(k[s],-n,-i),_(s)}),o,a),_(s)};var C=x.defaultEventEnd,S=i.normalizeEvent,_=i.reportEventChange,k={},T={},E=[],D=i.options;x.isHiddenDay=function(e){return"object"==typeof e&&(e=e.getDay()),A[e]},x.skipHiddenDays=function(e,t,n){for(t=t||1;A[(e.getDay()+(n?t:0)+7)%7];)l(e,t)},x.getCellsPerWeek=function(){return I},x.dateToCell=function(e){return w(y(b(e)))},x.dateToDayOffset=b,x.dayOffsetToCellOffset=y,x.cellOffsetToCell=w,x.cellToDate=function(){return v(g(m.apply(null,arguments)))},x.cellToCellOffset=m,x.cellOffsetToDayOffset=g,x.dayOffsetToDate=v,x.rangeToSegments=function(e,t){for(var n=x.getRowCnt(),i=x.getColCnt(),o=[],a=b(e),r=b(t),s=y(a),l=y(r)-1,c=0;n>c;c++){var d=c*i,u=d+i-1,h=Math.max(s,d),p=Math.min(l,u);if(p>=h){var f=w(h),m=w(p),v=[f.col,m.col].sort(),C=g(h)==a,S=g(p)+1==r;o.push({row:c,leftCol:v[0],rightCol:v[1],isStart:C,isEnd:S})}}return o};var I,N=a("hiddenDays")||[],A=[],P=[],R=[],O=a("isRTL");!function(){!1===a("weekends")&&N.push(0,6);for(var t=0,n=0;7>t;t++)P[t]=n,A[t]=-1!=e.inArray(t,N),A[t]||(R[n]=t,n++);if(!(I=n))throw"invalid hiddenDays"}()}function ne(){function t(e,t,i){var o=n([e],!0,!1),a=[];return oe(o,(function(e,n){e.row===t&&n.css("top",i),a.push(n[0])})),a}function n(t,n,o){var r,l,c=M(),d=n?e("<div/>"):c,u=i(t);return function(e){for(var t=p("isRTL"),n=0;e.length>n;n++){var i=e[n],o=(t?i.isEnd:i.isStart)?R:A,a=(t?i.isStart:i.isEnd)?O:P,r=o(i.leftCol),s=a(i.rightCol);i.left=r,i.outerWidth=s-r}}(u),r=a(u),d[0].innerHTML=r,l=d.children(),n&&c.append(l),function(t,n){for(var i=0;t.length>i;i++){var o=t[i],a=o.event,r=n.eq(i),s=m("eventRender",a,a,r);!1===s?r.remove():(s&&!0!==s&&(s=e(s).css({position:"absolute",left:o.left}),r.replaceWith(s),r=s),o.element=r)}}(u,l),oe(u,(function(e,t){e.hsides=k(t,!0)})),oe(u,(function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))})),oe(u,(function(e,t){e.outerHeight=t.outerHeight(!0)})),s(u,o),u}function i(e){for(var t=[],n=0;e.length>n;n++){var i=o(e[n]);t.push.apply(t,i)}return t}function o(e){for(var t=e.start,n=x(e),i=V(t,n),o=0;i.length>o;o++)i[o].event=e;return i}function a(e){for(var t="",n=0;e.length>n;n++)t+=r(e[n]);return t}function r(e){var t="",n=p("isRTL"),i=e.event,o=i.url,a=["fc-event","fc-event-hori"];g(i)&&a.push("fc-event-draggable"),e.isStart&&a.push("fc-event-start"),e.isEnd&&a.push("fc-event-end"),a=a.concat(i.className),i.source&&(a=a.concat(i.source.className||[]));var r=j(i,p);return t+=o?"<a href='"+B(o)+"'":"<div",t+=" class='"+a.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+r+"'><div class='fc-event-inner'>",!i.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+B(L(i.start,i.end,p("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+B(i.title||"")+"</span></div>",e.isEnd&&v(i)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+"</"+(o?"a":"div")+">"}function s(e,t){var n=function(e){for(var t=D(),n=I(),i=[],o=function(e){var t,n,i,o=D(),a=[];for(t=0;e.length>t;t++)n=e[t],i=n.row,n.element&&(a[i]?a[i].push(n):a[i]=[n]);for(i=0;o>i;i++)a[i]=c(a[i]||[]);return a}(e),a=0;t>a;a++){for(var r=o[a],s=[],l=0;n>l;l++)s.push(0);for(var d=0;r.length>d;d++){var u=r[d];u.top=F(s.slice(u.leftCol,u.rightCol+1));for(l=u.leftCol;u.rightCol>=l;l++)s[l]=u.top+u.outerHeight}i.push(F(s))}return i}(e),i=function(){var e,t=D(),n=[];for(e=0;t>e;e++)n[e]=N(e).find("div.fc-day-content > div");return n}(),o=[];if(t)for(var a=0;i.length>a;a++)i[a].height(n[a]);for(a=0;i.length>a;a++)o.push(i[a].position().top);oe(e,(function(e,t){t.css("top",o[e.row]+e.top)}))}function c(e){for(var t=[],n=function(e){e.sort(ae);for(var t=[],n=0;e.length>n;n++){for(var i=e[n],o=0;t.length>o&&ie(i,t[o]);o++);t[o]?t[o].push(i):t[o]=[i]}return t}(e),i=0;n.length>i;i++)t.push.apply(t,n[i]);return t}function d(e,t,n){g(e)&&u.draggableDayEvent(e,t,n),n.isEnd&&v(e)&&u.resizableDayEvent(e,t,n),w(e,t)}var u=this;u.renderDayEvents=function(e,t){var i=n(e,!1,!0);oe(i,(function(e,t){y(e.event,t)})),function(e,t){var n=M();oe(e,(function(e,n,i){var o=e.event;o._id===t?d(o,n,e):n[0]._fci=i})),C(n,e,d)}(i,t),oe(i,(function(e,t){m("eventAfterRender",e.event,e.event,t)}))},u.draggableDayEvent=function(e,t){var n,i=U();t.draggable({delay:50,opacity:p("dragOpacity"),revertDuration:p("dragRevertDuration"),start:function(o,a){m("eventDragStart",t,e,o,a),_(e,t),i.start((function(i,o,a,r){if(t.draggable("option","revert",!i||!a&&!r),$(),i){var s=q(o),c=q(i);n=f(c,s),H(l(h(e.start),n),l(x(e),n))}else n=0}),o,"drag")},stop:function(o,a){i.stop(),$(),m("eventDragStop",t,e,o,a),n?T(this,e,n,0,e.allDay,o,a):(t.css("filter",""),S(e,t))}})},u.resizableDayEvent=function(n,i,o){var a=p("isRTL")?"w":"e",r=i.find(".ui-resizable-"+a),s=!1;z(i),i.mousedown((function(e){e.preventDefault()})).click((function(e){s&&(e.preventDefault(),e.stopImmediatePropagation())})),r.mousedown((function(r){if(1==r.which){s=!0;var c=U();D(),I();var d,u,h=i.css("top"),p=e.extend({},n),f=Q(X(n.start));W(),e("body").css("cursor",a+"-resize").one("mouseup",(function(t){m("eventResizeStop",this,n,t),e("body").css("cursor",""),c.stop(),$(),d&&E(this,n,d,0,t),setTimeout((function(){s=!1}),0)})),m("eventResizeStart",this,n,r),c.start((function(i,r){if(i){var s=G(r),c=G(i);if(c=Math.max(c,f),d=Y(c)-Y(s)){p.end=l(b(n),d,!0);var m=u;u=t(p,o.row,h),(u=e(u)).find("*").css("cursor",a+"-resize"),m&&m.remove(),_(n)}else u&&(S(n),u.remove(),u=null);$(),H(n.start,l(x(n),d))}}),r)}}))};var p=u.opt,m=u.trigger,g=u.isEventDraggable,v=u.isEventResizable,b=u.eventEnd,y=u.reportEventElement,w=u.eventElementHandlers,S=u.showEvents,_=u.hideEvents,T=u.eventDrop,E=u.eventResize,D=u.getRowCnt,I=u.getColCnt;u.getColWidth;var N=u.allDayRow,A=u.colLeft,P=u.colRight,R=u.colContentLeft,O=u.colContentRight;u.dateToCell;var M=u.getDaySegmentContainer,L=u.calendar.formatDates,H=u.renderDayOverlay,$=u.clearOverlays,W=u.clearSelection,U=u.getHoverListener,V=u.rangeToSegments,q=u.cellToDate,G=u.cellToCellOffset,Y=u.cellOffsetToDayOffset,X=u.dateToDayOffset,Q=u.dayOffsetToCellOffset}function ie(e,t){for(var n=0;t.length>n;n++){var i=t[n];if(i.leftCol<=e.rightCol&&i.rightCol>=e.leftCol)return!0}return!1}function oe(e,t){for(var n=0;e.length>n;n++){var i=e[n],o=i.element;o&&t(i,o,n)}}function ae(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function re(){function t(e){c&&(c=!1,l(),a("unselect",null,e))}function n(e,t,n,i){c=!0,a("select",null,e,t,n,i)}var i=this;i.select=function(e,i,o){t(),i||(i=r(e,o)),s(e,i,o),n(e,i,o)},i.unselect=t,i.reportSelection=n,i.daySelectionMousedown=function(a){var r,c=i.cellToDate,d=i.getIsCellAllDay,u=i.getHoverListener(),h=i.reportDayClick;1==a.which&&o("selectable")&&(t(a),u.start((function(e,t){l(),e&&d(e)?(r=[c(t),c(e)].sort(O),s(r[0],r[1],!0)):r=null}),a),e(document).one("mouseup",(function(e){u.stop(),r&&(+r[0]==+r[1]&&h(r[0],!0,e),n(r[0],r[1],!0,e))})))};var o=i.opt,a=i.trigger,r=i.defaultSelectionEnd,s=i.renderSelection,l=i.clearSelection,c=!1;o("selectable")&&o("unselectAuto")&&e(document).mousedown((function(n){var i=o("unselectCancel");i&&e(n.target).parents(i).length||t(n)}))}function se(){this.renderOverlay=function(i,o){var a=n.shift();return a||(a=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),a[0].parentNode!=o[0]&&a.appendTo(o),t.push(a.css(i).show()),a},this.clearOverlays=function(){for(var e;e=t.shift();)n.push(e.hide().unbind())};var t=[],n=[]}function le(e){var t,n,i=this;i.build=function(){e(t=[],n=[])},i.cell=function(e,i){var o,a=t.length,r=n.length,s=-1,l=-1;for(o=0;a>o;o++)if(i>=t[o][0]&&t[o][1]>i){s=o;break}for(o=0;r>o;o++)if(e>=n[o][0]&&n[o][1]>e){l=o;break}return s>=0&&l>=0?{row:s,col:l}:null},i.rect=function(e,i,o,a,r){var s=r.offset();return{top:t[e][0]-s.top,left:n[i][0]-s.left,width:n[a][1]-n[i][0],height:t[o][1]-t[e][0]}}}function ce(t){function n(e){de(e);var n=t.cell(e.pageX,e.pageY);(!n!=!r||n&&(n.row!=r.row||n.col!=r.col))&&(n?(a||(a=n),o(n,a,n.row-a.row,n.col-a.col)):o(n,a),r=n)}var i,o,a,r;this.start=function(s,l,c){o=s,a=r=null,t.build(),n(l),i=c||"mousemove",e(document).bind(i,n)},this.stop=function(){return e(document).unbind(i,n),r}}function de(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function ue(e){function n(t){return o[t]=o[t]||e(t)}var i=this,o={},a={},r={};i.left=function(e){return a[e]=a[e]===t?n(e).position().left:a[e]},i.right=function(e){return r[e]=r[e]===t?i.left(e)+n(e).width():r[e]},i.clear=function(){o={},a={},r={}}}var he={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},pe={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},fe=e.fullCalendar={version:"1.6.4"},me=fe.views={};e.fn.fullCalendar=function(n){if("string"==typeof n){var o,a=Array.prototype.slice.call(arguments,1);return this.each((function(){var i=e.data(this,"fullCalendar");if(i&&e.isFunction(i[n])){var r=i[n].apply(i,a);o===t&&(o=r),"destroy"==n&&e.removeData(this,"fullCalendar")}})),o!==t?o:this}var r=(n=n||{}).eventSources||[];return delete n.eventSources,n.events&&(r.push(n.events),delete n.events),n=e.extend(!0,{},he,n.isRTL||n.isRTL===t&&he.isRTL?pe:{},n),this.each((function(t,o){var a=e(o),s=new i(a,n,r);a.data("fullCalendar",s),s.render()})),this},fe.sourceNormalizers=[],fe.sourceFetchers=[];var ge={dataType:"json",cache:!1},ve=1;fe.addDays=l,fe.cloneDate=h,fe.parseDate=g,fe.parseISO8601=v,fe.parseTime=b,fe.formatDate=y,fe.formatDates=w;var be=["sun","mon","tue","wed","thu","fri","sat"],ye=864e5,we=36e5,xe=6e4,Ce={s:function(e){return e.getSeconds()},ss:function(e){return M(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return M(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return M(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return M(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return M(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return M(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return y(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}(e)}};fe.dateFormatters=Ce,fe.applyAll=$,me.month=function(e,t){var n=this;n.render=function(e,t){t&&(s(e,t),e.setDate(1));var d=i("firstDay"),u=h(e,!0);u.setDate(1);var p=s(h(u),1),m=h(u);l(m,-(m.getDay()-d+7)%7),a(m);var g=h(p);l(g,(7-g.getDay()+d)%7),a(g,-1,!0);var v=r(),b=Math.round(f(g,m)/7);"fixed"==i("weekMode")&&(l(g,7*(6-b)),b=6),n.title=c(u,i("titleFormat")),n.start=u,n.end=p,n.visStart=m,n.visEnd=g,o(b,v,!0)},U.call(n,e,t,"month");var i=n.opt,o=n.renderBasic,a=n.skipHiddenDays,r=n.getCellsPerWeek,c=t.formatDate},me.basicWeek=function(e,t){var n=this;n.render=function(e,t){t&&l(e,7*t);var c=l(h(e),-(e.getDay()-i("firstDay")+7)%7),d=l(h(c),7),u=h(c);a(u);var p=h(d);a(p,-1,!0);var f=r();n.start=c,n.end=d,n.visStart=u,n.visEnd=p,n.title=s(u,l(h(p),-1),i("titleFormat")),o(1,f,!1)},U.call(n,e,t,"basicWeek");var i=n.opt,o=n.renderBasic,a=n.skipHiddenDays,r=n.getCellsPerWeek,s=t.formatDates},me.basicDay=function(e,t){var n=this;n.render=function(e,t){t&&l(e,t),a(e,0>t?-1:1);var s=h(e,!0),c=l(h(s),1);n.title=r(e,i("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=c,o(1,1,!1)},U.call(n,e,t,"basicDay");var i=n.opt,o=n.renderBasic,a=n.skipHiddenDays,r=t.formatDate},n({weekMode:"fixed"}),me.agendaWeek=function(e,t){var n=this;n.render=function(e,t){t&&l(e,7*t);var c=l(h(e),-(e.getDay()-i("firstDay")+7)%7),d=l(h(c),7),u=h(c);a(u);var p=h(d);a(p,-1,!0);var f=r();n.title=s(u,l(h(p),-1),i("titleFormat")),n.start=c,n.end=d,n.visStart=u,n.visEnd=p,o(f)},q.call(n,e,t,"agendaWeek");var i=n.opt,o=n.renderAgenda,a=n.skipHiddenDays,r=n.getCellsPerWeek,s=t.formatDates},me.agendaDay=function(e,t){var n=this;n.render=function(e,t){t&&l(e,t),a(e,0>t?-1:1);var s=h(e,!0),c=l(h(s),1);n.title=r(e,i("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=c,o(1)},q.call(n,e,t,"agendaDay");var i=n.opt,o=n.renderAgenda,a=n.skipHiddenDays,r=t.formatDate},n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(e){"use strict";e.fn.bootstrapSwitch=function(t){var n='input[type!="hidden"]',i={init:function(){return this.each((function(){var t,i,o,a,r,s,l=e(this),c=l.closest("form"),d="",u=l.attr("class"),h="ON",p="OFF",f=!1,m=!1;e.each(["switch-mini","switch-small","switch-large"],(function(e,t){u.indexOf(t)>=0&&(d=t)})),l.addClass("has-switch"),void 0!==l.data("on")&&(r="switch-"+l.data("on")),void 0!==l.data("on-label")&&(h=l.data("on-label")),void 0!==l.data("off-label")&&(p=l.data("off-label")),void 0!==l.data("label-icon")&&(f=l.data("label-icon")),void 0!==l.data("text-label")&&(m=l.data("text-label")),i=e("<span>").addClass("switch-left").addClass(d).addClass(r).html(h),r="",void 0!==l.data("off")&&(r="switch-"+l.data("off")),o=e("<span>").addClass("switch-right").addClass(d).addClass(r).html(p),a=e("<label>").html("&nbsp;").addClass(d).attr("for",l.find(n).attr("id")),f&&a.html('<i class="icon '+f+'"></i>'),m&&a.html(""+m),t=l.find(n).wrap(e("<div>")).parent().data("animated",!1),!1!==l.data("animated")&&t.addClass("switch-animate").data("animated",!0),t.append(i).append(a).append(o),l.find(">div").addClass(l.find(n).is(":checked")?"switch-on":"switch-off"),l.find(n).is(":disabled")&&e(this).addClass("deactivate");l.on("keydown",(function(t){var n;32===t.keyCode&&(t.stopImmediatePropagation(),t.preventDefault(),n=e(t.target).find("span:first"),l.parent("label").is(".label-change-switch")||n.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click"))})),l.find(n).on("change",(function(t,n){var i=e(this),o=i.parent(),a=i.is(":checked"),r=o.is(".switch-off");if(t.preventDefault(),o.css("left",""),r===a){if(a?o.removeClass("switch-off").addClass("switch-on"):o.removeClass("switch-on").addClass("switch-off"),!1!==o.data("animated")&&o.addClass("switch-animate"),"boolean"==typeof n&&n)return;o.parent().trigger("switch-change",{el:i,value:a})}})),l.find("label").on("mousedown touchstart",(function(t){var n=e(this);s=!1,t.preventDefault(),t.stopImmediatePropagation(),n.closest("div").removeClass("switch-animate"),n.closest(".has-switch").is(".deactivate")||n.closest(".switch-on").parent().is(".radio-no-uncheck")?n.unbind("click"):(n.on("mousemove touchmove",(function(t){var n=e(this).closest(".make-switch"),i=((t.pageX||t.originalEvent.targetTouches[0].pageX)-n.offset().left)/n.width()*100;s=!0,i<25?i=25:i>75&&(i=75),n.find(">div").css("left",i-75+"%")})),n.on("click touchend",(function(t){var n=e(this),i=e(t.target).siblings("input");t.stopImmediatePropagation(),t.preventDefault(),n.unbind("mouseleave"),s?i.prop("checked",!(parseInt(n.parent().css("left"))<-25)):i.prop("checked",!i.is(":checked")),s=!1,i.trigger("change")})),n.on("mouseleave",(function(t){var n=e(this),i=n.siblings("input");t.preventDefault(),t.stopImmediatePropagation(),n.unbind("mouseleave"),n.trigger("mouseup"),i.prop("checked",!(parseInt(n.parent().css("left"))<-25)).trigger("change")})),n.on("mouseup",(function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).unbind("mousemove")})))})),"injected"!==c.data("bootstrapSwitch")&&(c.bind("reset",(function(){setTimeout((function(){c.find(".make-switch").each((function(){var t=e(this).find(n);t.prop("checked",t.is(":checked")).trigger("change")}))}),1)})),c.data("bootstrapSwitch","injected"))}))},toggleActivation:function(){var t=e(this);t.toggleClass("deactivate"),t.find(n).prop("disabled",t.is(".deactivate"))},isActive:function(){return!e(this).hasClass("deactivate")},setActive:function(t){var i=e(this);t?(i.removeClass("deactivate"),i.find(n).removeAttr("disabled")):(i.addClass("deactivate"),i.find(n).attr("disabled","disabled"))},toggleState:function(t){var n=e(this).find(":checkbox");n.prop("checked",!n.is(":checked")).trigger("change",t)},toggleRadioState:function(t){var n=e(this).find(":radio");n.not(":checked").prop("checked",!n.is(":checked")).trigger("change",t)},toggleRadioStateAllowUncheck:function(t,n){var i=e(this).find(":radio");t?i.not(":checked").trigger("change",n):i.not(":checked").prop("checked",!i.is(":checked")).trigger("change",n)},setState:function(t,i){e(this).find(n).prop("checked",t).trigger("change",i)},setOnLabel:function(t){e(this).find(".switch-left").html(t)},setOffLabel:function(t){e(this).find(".switch-right").html(t)},setOnClass:function(t){var n=e(this).find(".switch-left"),i="";void 0!==t&&(void 0!==e(this).attr("data-on")&&(i="switch-"+e(this).attr("data-on")),n.removeClass(i),i="switch-"+t,n.addClass(i))},setOffClass:function(t){var n=e(this).find(".switch-right"),i="";void 0!==t&&(void 0!==e(this).attr("data-off")&&(i="switch-"+e(this).attr("data-off")),n.removeClass(i),i="switch-"+t,n.addClass(i))},setAnimated:function(t){var i=e(this).find(n).parent();void 0===t&&(t=!1),i.data("animated",t),i.attr("data-animated",t),!1!==i.data("animated")?i.addClass("switch-animate"):i.removeClass("switch-animate")},setSizeClass:function(t){var n=e(this),i=n.find(".switch-left"),o=n.find(".switch-right"),a=n.find("label");e.each(["switch-mini","switch-small","switch-large"],(function(e,n){n!==t?(i.removeClass(n),o.removeClass(n),a.removeClass(n)):(i.addClass(n),o.addClass(n),a.addClass(n))}))},status:function(){return e(this).find(n).is(":checked")},destroy:function(){var t,n=e(this),i=n.find("div"),o=n.closest("form");return i.find(":not(input)").remove(),(t=i.children()).unwrap().unwrap(),t.unbind("change"),o&&(o.unbind("reset"),o.removeData("bootstrapSwitch")),t}};return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist!"):i.init.apply(this,arguments)}}(jQuery),function(e){e.extend(e.fn,{validate:function(t){if(this.length){var n=e.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",(function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(t.target).hasClass("cancel")&&(n.cancelSubmit=!0)})),this.submit((function(t){function i(){var i;return!n.settings.submitHandler||(n.submitButton&&(i=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&i.remove(),!1)}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)}))),n)}t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each((function(){t&=n.element(this)})),t},removeAttrs:function(t){var n={},i=this;return e.each(t.split(/\s/),(function(e,t){n[t]=i.attr(t),i.removeAttr(t)})),n},rules:function(t,n){var i=this[0];if(t){var o=e.data(i.form,"validator").settings,a=o.rules,r=e.validator.staticRules(i);switch(t){case"add":e.extend(r,e.validator.normalizeRule(n)),a[i.name]=r,n.messages&&(o.messages[i.name]=e.extend(o.messages[i.name],n.messages));break;case"remove":if(!n)return delete a[i.name],r;var s={};return e.each(n.split(/\s/),(function(e,t){s[t]=r[t],delete r[t]})),s}}var l=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(i),e.validator.classRules(i),e.validator.attributeRules(i),e.validator.staticRules(i)),i);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,(function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),n)})),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(i):e(t).addClass(n).removeClass(i)},unhighlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(i):e(t).removeClass(n).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this[0].form,"validator"),i="on"+t.type.replace(/^validate/,"");n.settings[i]&&n.settings[i].call(n,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};e.each(this.settings.groups,(function(t,i){e.each(i.split(/\s/),(function(e,i){n[i]=t}))}));var i=this.settings.rules;e.each(i,(function(t,n){i[t]=e.validator.normalizeRule(n)})),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=!1!==this.check(t);return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){for(var n in e.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,(function(e){return!(e.name in t)}))}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,(function(e){return e.element.name===t.name})).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter((function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in n||!t.objectLength(e(this).rules()))&&(n[this.name]=!0,!0)}))},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n=e(t).attr("type"),i=e(t).val();return"radio"===n||"checkbox"===n?e('input[name="'+e(t).attr("name")+'"]:checked').val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var n,i=e(t).rules(),o=!1,a=this.elementValue(t);for(var r in i){var s={method:r,parameters:i[r]};try{if("dependency-mismatch"===(n=e.validator.methods[r].call(this,a,t,s.parameters))){o=!0;continue}if(o=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,s),!1}catch(e){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",e),e}}if(!o)return this.objectLength(i)&&this.successList.push(t),!0},customMetaMessage:function(t,n){if(e.metadata){var i=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return i&&i.messages&&i.messages[n]}},customDataMessage:function(t,n){return e(t).data("msg-"+n.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+n.toLowerCase())},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),this.customMetaMessage(t,n),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var i=this.defaultMessage(t,n.method),o=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,t):o.test(i)&&(i=e.validator.format(i.replace(o,"{$1}"),n.parameters)),this.errorList.push({message:i,element:t}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var n=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map((function(){return this.element}))},showLabel:function(t,n){var i=this.errorsFor(t);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.attr("generated")&&i.html(n)):(i=e("<"+this.settings.errorElement+"/>").attr({for:this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t))),!n&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i,t)),this.toShow=this.toShow.add(i)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter((function(){return e(this).attr("for")===n}))},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find('[name="'+t+'"]')},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e,t){return e},string:function(t,n){return!!e(t,n.form).length},function:function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),(function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])})),n},attributeRules:function(t){var n={},i=e(t);for(var o in e.validator.methods){var a;"required"===o?(""===(a=i.get(0).getAttribute(o))&&(a=!0),a=!!a):a=i.attr(o),a?n[o]=a:i[0].getAttribute("type")===o&&(n[o]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(t){if(!e.metadata)return{};var n=e.data(t.form,"validator").settings.meta;return n?e(t).metadata()[n]:e(t).metadata()},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,(function(i,o){if(!1!==o){if(o.param||o.depends){var a=!0;switch(typeof o.depends){case"string":a=!!e(o.depends,n.form).length;break;case"function":a=o.depends.call(n,n)}a?t[i]=void 0===o.param||o.param:delete t[i]}}else delete t[i]})),e.each(t,(function(i,o){t[i]=e.isFunction(o)?o(n):o})),e.each(["minlength","maxlength","min","max"],(function(){t[this]&&(t[this]=Number(t[this]))})),e.each(["rangelength","range"],(function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])})),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),(function(){n[this]=!0})),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==i?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var o=e(n).val();return o&&o.length>0}return this.checkable(n)?this.getLength(t,n)>0:e.trim(t).length>0},remote:function(t,n,i){if(this.optional(n))return"dependency-mismatch";var o=this.previousValue(n);if(this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,i="string"==typeof i&&{url:i}||i,this.pending[n.name])return"pending";if(o.old===t)return o.valid;o.old=t;var a=this;this.startRequest(n);var r={};return r[n.name]=t,e.ajax(e.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:r,success:function(i){a.settings.messages[n.name].remote=o.originalMessage;var r=!0===i||"true"===i;if(r){var s=a.formSubmitted;a.prepareElement(n),a.formSubmitted=s,a.successList.push(n),delete a.invalid[n.name],a.showErrors()}else{var l={},c=i||a.defaultMessage(n,"remote");l[n.name]=o.message=e.isFunction(c)?c(t):c,a.invalid[n.name]=!0,a.showErrors(l)}o.valid=r,a.stopRequest(n,r)}},i)),"pending"},minlength:function(t,n,i){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||o>=i},maxlength:function(t,n,i){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||o<=i},rangelength:function(t,n,i){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||o>=i[0]&&o<=i[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;for(var n=0,i=0,o=!1,a=(e=e.replace(/\D/g,"")).length-1;a>=0;a--){var r=e.charAt(a);i=parseInt(r,10),o&&(i*=2)>9&&(i-=9),n+=i,o=!o}return n%10==0},equalTo:function(t,n,i){var o=e(i);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",(function(){e(n).valid()})),t===o.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter((function(e,n,i){var o=e.port;"abort"===e.mode&&(t[o]&&t[o].abort(),t[o]=i)}));else{var n=e.ajax;e.ajax=function(i){var o=("mode"in i?i:e.ajaxSettings).mode,a=("port"in i?i:e.ajaxSettings).port;return"abort"===o?(t[a]&&t[a].abort(),t[a]=n.apply(this,arguments)):n.apply(this,arguments)}}}(jQuery),function(e){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&e.each({focus:"focusin",blur:"focusout"},(function(t,n){function i(t){return(t=e.event.fix(t)).type=n,e.event.handle.call(this,t)}e.event.special[n]={setup:function(){this.addEventListener(t,i,!0)},teardown:function(){this.removeEventListener(t,i,!0)},handler:function(t){var i=arguments;return i[0]=e.event.fix(t),i[0].type=n,e.event.handle.apply(this,i)}}})),e.extend(e.fn,{validateDelegate:function(t,n,i){return this.bind(n,(function(n){var o=e(n.target);if(o.is(t))return i.apply(o,arguments)}))}})}(jQuery),function(){function e(t,n,i){var o=e.resolve(t);if(null==o){i=i||t,n=n||"root";var a=new Error('Failed to require "'+i+'" from "'+n+'"');throw a.path=i,a.parent=n,a.require=!0,a}var r=e.modules[o];return r.exports||(r.exports={},r.client=r.component=!0,r.call(this,r.exports,e.relative(o),r)),r.exports}e.modules={},e.aliases={},e.resolve=function(t){"/"===t.charAt(0)&&(t=t.slice(1));for(var n=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"],i=0;i<n.length;i++){t=n[i];if(e.modules.hasOwnProperty(t))return t;if(e.aliases.hasOwnProperty(t))return e.aliases[t]}},e.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var i=0;i<t.length;++i)".."==t[i]?e.pop():"."!=t[i]&&""!=t[i]&&n.push(t[i]);return e.concat(n).join("/")},e.register=function(t,n){e.modules[t]=n},e.alias=function(t,n){if(!e.modules.hasOwnProperty(t))throw new Error('Failed to alias "'+t+'", it does not exist');e.aliases[n]=t},e.relative=function(t){function n(i){return e(n.resolve(i),t,i)}var i=e.normalize(t,"..");return n.resolve=function(n){var o=n.charAt(0);if("/"==o)return n.slice(1);if("."==o)return e.normalize(i,n);var a=t.split("/"),r=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}(a,"deps")+1;return r||(r=0),a.slice(0,r+1).join("/")+"/deps/"+n},n.exists=function(t){return e.modules.hasOwnProperty(n.resolve(t))},n},e.register("component-emitter/index.js",(function(e,t,n){function i(e){return e?function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e):void 0}n.exports=i,i.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},t._off=n,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var i=n.indexOf(t._off||t);return~i&&n.splice(i,1),this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var i=0,o=(n=n.slice(0)).length;o>i;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}})),e.register("dropzone/index.js",(function(e,t,n){n.exports=t("./lib/dropzone.js")})),e.register("dropzone/lib/dropzone.js",(function(e,t,n){(function(){var e,i,o,a,r,s,l={}.hasOwnProperty,c=[].slice;i="undefined"!=typeof Emitter&&null!==Emitter?Emitter:t("emitter"),r=function(){},e=function(e){function t(e,i){var o,a,r;if(this.element=e,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(this),e.dropzone=this,o=null!=(r=t.optionsForElement(this.element))?r:{},this.options=n({},this.defaultOptions,o,null!=i?i:{}),this.options.forceFallback||!t.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(a=this.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),this.previewsContainer=this.options.previewsContainer?t.getElement(this.options.previewsContainer,"previewsContainer"):this.element,this.options.clickable&&(this.clickableElements=!0===this.options.clickable?[this.element]:t.getElements(this.options.clickable,"clickable")),this.init()}var n;return function(e,t){function n(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","selectedfiles","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded"],t.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can only upload {{maxFiles}} files.",accept:function(e,t){return t()},init:function(){return r},forceFallback:!1,fallback:function(){var e,n,i,o,a,r;for(this.element.className=this.element.className+" dz-browser-not-supported",o=0,a=(r=this.element.getElementsByTagName("div")).length;a>o;o++)e=r[o],/(^| )dz-message($| )/.test(e.className)&&(n=e,e.className="dz-message");return n||(n=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),(i=n.getElementsByTagName("span")[0])&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,i;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,i=this.options.thumbnailWidth/this.options.thumbnailHeight,e.height<this.options.thumbnailHeight||e.width<this.options.thumbnailWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>i?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*i):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/i),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:r,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},selectedfiles:function(){return this.element===this.previewsContainer?this.element.classList.add("dz-started"):void 0},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var n=this;return e.previewElement=t.createElement(this.options.previewTemplate),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),e.previewElement.querySelector("[data-dz-name]").textContent=e.name,e.previewElement.querySelector("[data-dz-size]").innerHTML=this.filesize(e.size),this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;">'+this.options.dictRemoveFile+"</a>"),e._removeLink.addEventListener("click",(function(i){return i.preventDefault(),i.stopPropagation(),e.status===t.UPLOADING?t.confirm(n.options.dictCancelUploadConfirmation,(function(){return n.removeFile(e)})):n.options.dictRemoveFileConfirmation?t.confirm(n.options.dictRemoveFileConfirmation,(function(){return n.removeFile(e)})):n.removeFile(e)})),e.previewElement.appendChild(e._removeLink)),this._updateMaxFilesReachedClass()},removedfile:function(e){var t;return null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n;return e.previewElement.classList.remove("dz-file-preview"),e.previewElement.classList.add("dz-image-preview"),(n=e.previewElement.querySelector("[data-dz-thumbnail]")).alt=e.name,n.src=t},error:function(e,t){return e.previewElement.classList.add("dz-error"),e.previewElement.querySelector("[data-dz-errormessage]").textContent=t},errormultiple:r,processing:function(e){return e.previewElement.classList.add("dz-processing"),e._removeLink?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:r,uploadprogress:function(e,t){return e.previewElement.querySelector("[data-dz-uploadprogress]").style.width=t+"%"},totaluploadprogress:r,sending:r,sendingmultiple:r,success:function(e){return e.previewElement.classList.add("dz-success")},successmultiple:r,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:r,complete:function(e){return e._removeLink?e._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:r,maxfilesexceeded:r,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},n=function(){var e,t,n,i,o,a,r;for(i=arguments[0],a=0,r=(n=2<=arguments.length?c.call(arguments,1):[]).length;r>a;a++)for(e in t=n[a])o=t[e],i[e]=o;return i},t.prototype.getAcceptedFiles=function(){var e,t,n,i,o;for(o=[],t=0,n=(i=this.files).length;n>t;t++)(e=i[t]).accepted&&o.push(e);return o},t.prototype.getRejectedFiles=function(){var e,t,n,i,o;for(o=[],t=0,n=(i=this.files).length;n>t;t++)(e=i[t]).accepted||o.push(e);return o},t.prototype.getQueuedFiles=function(){var e,n,i,o,a;for(a=[],n=0,i=(o=this.files).length;i>n;n++)(e=o[n]).status===t.QUEUED&&a.push(e);return a},t.prototype.getUploadingFiles=function(){var e,n,i,o,a;for(a=[],n=0,i=(o=this.files).length;i>n;n++)(e=o[n]).status===t.UPLOADING&&a.push(e);return a},t.prototype.init=function(){var e,n,i,o,a,r,s,l=this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(){return l.hiddenFileInput&&document.body.removeChild(l.hiddenFileInput),l.hiddenFileInput=document.createElement("input"),l.hiddenFileInput.setAttribute("type","file"),l.hiddenFileInput.setAttribute("multiple","multiple"),null!=l.options.acceptedFiles&&l.hiddenFileInput.setAttribute("accept",l.options.acceptedFiles),l.hiddenFileInput.style.visibility="hidden",l.hiddenFileInput.style.position="absolute",l.hiddenFileInput.style.top="0",l.hiddenFileInput.style.left="0",l.hiddenFileInput.style.height="0",l.hiddenFileInput.style.width="0",document.body.appendChild(l.hiddenFileInput),l.hiddenFileInput.addEventListener("change",(function(){var e;return(e=l.hiddenFileInput.files).length&&(l.emit("selectedfiles",e),l.handleFiles(e)),i()}))},i()),this.URL=null!=(r=window.URL)?r:window.webkitURL,o=0,a=(s=this.events).length;a>o;o++)e=s[o],this.on(e,this.options[e]);return this.on("uploadprogress",(function(){return l.updateTotalUploadProgress()})),this.on("removedfile",(function(){return l.updateTotalUploadProgress()})),this.on("canceled",(function(e){return l.emit("complete",e)})),n=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return l.emit("dragstart",e)},dragenter:function(e){return n(e),l.emit("dragenter",e)},dragover:function(e){return n(e),l.emit("dragover",e)},dragleave:function(e){return l.emit("dragleave",e)},drop:function(e){return n(e),l.drop(e)},dragend:function(e){return l.emit("dragend",e)}}}],this.clickableElements.forEach((function(e){return l.listeners.push({element:e,events:{click:function(n){return e!==l.element||n.target===l.element||t.elementInside(n.target,l.element.querySelector(".dz-message"))?l.hiddenFileInput.click():void 0}}})})),this.enable(),this.options.init.call(this)},t.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone},t.prototype.updateTotalUploadProgress=function(){var e,t,n,i,o,a,r;if(n=0,t=0,this.getAcceptedFiles().length){for(o=0,a=(r=this.getAcceptedFiles()).length;a>o;o++)n+=(e=r[o]).upload.bytesSent,t+=e.upload.total;i=100*n/t}else i=100;return this.emit("totaluploadprogress",i,t,n)},t.prototype.getFallbackForm=function(){var e,n,i,o;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><button type="submit">Upload!</button></div>',n=t.createElement(i),"FORM"!==this.element.tagName?(o=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(n):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=o?o:n)},t.prototype.getExistingFallback=function(){var e,t,n,i,o,a;for(t=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},i=0,o=(a=["div","form"]).length;o>i;i++)if(n=a[i],e=t(this.element.getElementsByTagName(n)))return e},t.prototype.setupEventListeners=function(){var e,t,n,i,o,a,r;for(r=[],i=0,o=(a=this.listeners).length;o>i;i++)e=a[i],r.push(function(){var i,o;for(t in o=[],i=e.events)n=i[t],o.push(e.element.addEventListener(t,n,!1));return o}());return r},t.prototype.removeEventListeners=function(){var e,t,n,i,o,a,r;for(r=[],i=0,o=(a=this.listeners).length;o>i;i++)e=a[i],r.push(function(){var i,o;for(t in o=[],i=e.events)n=i[t],o.push(e.element.removeEventListener(t,n,!1));return o}());return r},t.prototype.disable=function(){var e,t,n,i,o;for(this.clickableElements.forEach((function(e){return e.classList.remove("dz-clickable")})),this.removeEventListeners(),o=[],t=0,n=(i=this.files).length;n>t;t++)e=i[t],o.push(this.cancelUpload(e));return o},t.prototype.enable=function(){return this.clickableElements.forEach((function(e){return e.classList.add("dz-clickable")})),this.setupEventListeners()},t.prototype.filesize=function(e){var t;return e>=1e11?(e/=1e11,t="TB"):e>=1e8?(e/=1e8,t="GB"):e>=1e5?(e/=1e5,t="MB"):e>=100?(e/=100,t="KB"):(e*=10,t="b"),"<strong>"+Math.round(e)/10+"</strong> "+t},t.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?this.element.classList.add("dz-max-files-reached"):this.element.classList.remove("dz-max-files-reached")},t.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("selectedfiles",t),t.length&&((n=e.dataTransfer.items)&&n.length&&(null!=n[0].webkitGetAsEntry||null!=n[0].getAsEntry)?this.handleItems(n):this.handleFiles(t)))},t.prototype.handleFiles=function(e){var t,n,i,o;for(o=[],n=0,i=e.length;i>n;n++)t=e[n],o.push(this.addFile(t));return o},t.prototype.handleItems=function(e){var t,n,i,o;for(i=0,o=e.length;o>i;i++)null!=(n=e[i]).webkitGetAsEntry?(t=n.webkitGetAsEntry()).isFile?this.addFile(n.getAsFile()):t.isDirectory&&this.addDirectory(t,t.name):this.addFile(n.getAsFile())},t.prototype.accept=function(e,n){return e.size>1048576*this.options.maxFilesize?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,n):n(this.options.dictInvalidFileType)},t.prototype.addFile=function(e){var n=this;return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1048576*this.options.maxThumbnailFilesize&&this.createThumbnail(e),this.accept(e,(function(t){return t?(e.accepted=!1,n._errorProcessing([e],t)):n.enqueueFile(e)}))},t.prototype.enqueueFiles=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=e[n],this.enqueueFile(t);return null},t.prototype.enqueueFile=function(e){var n=this;if(e.accepted=!0,e.status!==t.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=t.QUEUED,this.options.autoProcessQueue?setTimeout((function(){return n.processQueue()}),1):void 0},t.prototype.addDirectory=function(e,t){var n,i=this;return n=function(n){var o,a;for(o=0,a=n.length;a>o;o++)(e=n[o]).isFile?e.file((function(e){return i.options.ignoreHiddenFiles&&"."===e.name.substring(0,1)?void 0:(e.fullPath=t+"/"+e.name,i.addFile(e))})):e.isDirectory&&i.addDirectory(e,t+"/"+e.name)},e.createReader().readEntries(n,(function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0}))},t.prototype.removeFile=function(e){return e.status===t.UPLOADING&&this.cancelUpload(e),this.files=s(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},t.prototype.removeAllFiles=function(e){var n,i,o,a;for(null==e&&(e=!1),i=0,o=(a=this.files.slice()).length;o>i;i++)((n=a[i]).status!==t.UPLOADING||e)&&this.removeFile(n);return null},t.prototype.createThumbnail=function(e){var t,n=this;return(t=new FileReader).onload=function(){var i;return(i=new Image).onload=function(){var t,o,a,r,s,l,c,d;return e.width=i.width,e.height=i.height,null==(a=n.options.resize.call(n,e)).trgWidth&&(a.trgWidth=n.options.thumbnailWidth),null==a.trgHeight&&(a.trgHeight=n.options.thumbnailHeight),o=(t=document.createElement("canvas")).getContext("2d"),t.width=a.trgWidth,t.height=a.trgHeight,o.drawImage(i,null!=(s=a.srcX)?s:0,null!=(l=a.srcY)?l:0,a.srcWidth,a.srcHeight,null!=(c=a.trgX)?c:0,null!=(d=a.trgY)?d:0,a.trgWidth,a.trgHeight),r=t.toDataURL("image/png"),n.emit("thumbnail",e,r)},i.src=t.result},t.readAsDataURL(e)},t.prototype.processQueue=function(){var e,t,n,i;if(t=this.options.parallelUploads,e=n=this.getUploadingFiles().length,!(n>=t)&&(i=this.getQueuedFiles()).length>0){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-n));for(;t>e;){if(!i.length)return;this.processFile(i.shift()),e++}}},t.prototype.processFile=function(e){return this.processFiles([e])},t.prototype.processFiles=function(e){var n,i,o;for(i=0,o=e.length;o>i;i++)(n=e[i]).processing=!0,n.status=t.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},t.prototype._getFilesWithXhr=function(e){var t;return function(){var n,i,o,a;for(a=[],n=0,i=(o=this.files).length;i>n;n++)(t=o[n]).xhr===e&&a.push(t);return a}.call(this)},t.prototype.cancelUpload=function(e){var n,i,o,a,r,s,l;if(e.status===t.UPLOADING){for(o=0,r=(i=this._getFilesWithXhr(e.xhr)).length;r>o;o++)(n=i[o]).status=t.CANCELED;for(e.xhr.abort(),a=0,s=i.length;s>a;a++)n=i[a],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((l=e.status)===t.ADDED||l===t.QUEUED)&&(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},t.prototype.uploadFile=function(e){return this.uploadFiles([e])},t.prototype.uploadFiles=function(e){var i,o,a,r,s,l,c,d,u,h,p,f,m,g,v,b,y,w,x,C,S,_,k,T,E,D,I=this;for(g=new XMLHttpRequest,v=0,x=e.length;x>v;v++)(i=e[v]).xhr=g;for(r in g.open(this.options.method,this.options.url,!0),g.withCredentials=!!this.options.withCredentials,p=null,a=function(){var t,n,o;for(o=[],t=0,n=e.length;n>t;t++)i=e[t],o.push(I._errorProcessing(e,p||I.options.dictResponseError.replace("{{statusCode}}",g.status),g));return o},f=function(t){var n,o,a,r,s,l,c,d,u;if(null!=t)for(o=100*t.loaded/t.total,a=0,l=e.length;l>a;a++)(i=e[a]).upload={progress:o,total:t.total,bytesSent:t.loaded};else{for(n=!0,o=100,r=0,c=e.length;c>r;r++)(100!==(i=e[r]).upload.progress||i.upload.bytesSent!==i.upload.total)&&(n=!1),i.upload.progress=o,i.upload.bytesSent=i.upload.total;if(n)return}for(u=[],s=0,d=e.length;d>s;s++)i=e[s],u.push(I.emit("uploadprogress",i,o,i.upload.bytesSent));return u},g.onload=function(n){var i;if(e[0].status!==t.CANCELED&&4===g.readyState){if(p=g.responseText,g.getResponseHeader("content-type")&&~g.getResponseHeader("content-type").indexOf("application/json"))try{p=JSON.parse(p)}catch(e){n=e,p="Invalid JSON response from server."}return f(),200<=(i=g.status)&&300>i?I._finished(e,p,n):a()}},g.onerror=function(){return e[0].status!==t.CANCELED?a():void 0},(null!=(k=g.upload)?k:g).onprogress=f,l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(l,this.options.headers),l)s=l[r],g.setRequestHeader(r,s);if(o=new FormData,this.options.params)for(h in T=this.options.params)m=T[h],o.append(h,m);for(b=0,C=e.length;C>b;b++)i=e[b],this.emit("sending",i,g,o);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,g,o),"FORM"===this.element.tagName)for(y=0,S=(E=this.element.querySelectorAll("input, textarea, select, button")).length;S>y;y++)d=(c=E[y]).getAttribute("name"),(!(u=c.getAttribute("type"))||"checkbox"!==(D=u.toLowerCase())&&"radio"!==D||c.checked)&&o.append(d,c.value);for(w=0,_=e.length;_>w;w++)i=e[w],o.append(this.options.paramName+(this.options.uploadMultiple?"[]":""),i,i.name);return g.send(o)},t.prototype._finished=function(e,n,i){var o,a,r;for(a=0,r=e.length;r>a;a++)(o=e[a]).status=t.SUCCESS,this.emit("success",o,n,i),this.emit("complete",o);return this.options.uploadMultiple&&(this.emit("successmultiple",e,n,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},t.prototype._errorProcessing=function(e,n,i){var o,a,r;for(a=0,r=e.length;r>a;a++)(o=e[a]).status=t.ERROR,this.emit("error",o,n,i),this.emit("complete",o);return this.options.uploadMultiple&&(this.emit("errormultiple",e,n,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},t}(i),e.version="3.7.1",e.options={},e.optionsForElement=function(t){return t.id?e.options[o(t.id)]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,n,i,o,a,r;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],t=function(e){var t,n,o,a;for(a=[],n=0,o=e.length;o>n;n++)t=e[n],/(^| )dropzone($| )/.test(t.className)?a.push(i.push(t)):a.push(void 0);return a},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),r=[],o=0,a=i.length;a>o;o++)n=i[o],!1!==e.optionsForElement(n)?r.push(new e(n)):r.push(void 0);return r},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,i,o;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(n=0,i=(o=e.blacklistedBrowsers).length;i>n;n++)o[n].test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},s=function(e,t){var n,i,o,a;for(a=[],i=0,o=e.length;o>i;i++)(n=e[i])!==t&&a.push(n);return a},o=function(e){return e.replace(/[\-_](\w)/g,(function(e){return e[1].toUpperCase()}))},e.createElement=function(e){var t;return(t=document.createElement("div")).innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(e,t){var n,i,o,a,r,s,l;if(e instanceof Array){i=[];try{for(o=0,r=e.length;r>o;o++)n=e[o],i.push(this.getElement(n,t))}catch(e){e,i=null}}else if("string"==typeof e)for(i=[],a=0,s=(l=document.querySelectorAll(e)).length;s>a;a++)n=l[a],i.push(n);else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i},e.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},e.isValidFile=function(e,t){var n,i,o,a,r;if(!t)return!0;for(t=t.split(","),n=(i=e.type).replace(/\/.*$/,""),a=0,r=t.length;r>a;a++)if("."===(o=(o=t[a]).trim()).charAt(0)){if(-1!==e.name.indexOf(o,e.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(n===o.replace(/\/.*$/,""))return!0}else if(i===o)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each((function(){return new e(this,t)}))}),null!=n?n.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",a=function(e,t){var n,i,o,a,r,s,l,c,d;if(o=!1,d=!0,i=e.document,c=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",s=i.addEventListener?"":"on",a=function(n){return"readystatechange"!==n.type||"complete"===i.readyState?(("load"===n.type?e:i)[l](s+n.type,a,!1),!o&&(o=!0)?t.call(e,n.type||n):void 0):void 0},r=function(){try{c.doScroll("left")}catch(e){return e,void setTimeout(r,50)}return a("poll")},"complete"!==i.readyState){if(i.createEventObject&&c.doScroll){try{d=!e.frameElement}catch(e){}d&&r()}return i[n](s+"DOMContentLoaded",a,!1),i[n](s+"readystatechange",a,!1),e[n](s+"load",a,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},a(window,e._autoDiscoverFunction)}).call(this)})),e.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),e.alias("component-emitter/index.js","emitter/index.js"),"object"==typeof exports?module.exports=e("dropzone"):"function"==typeof define&&define.amd?define((function(){return e("dropzone")})):this.Dropzone=e("dropzone")}(),function(){var e,t,n=0,i=[],o={},a={},r={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},s=/[<>&\"\']/g,l=window.setTimeout,c={};function d(){this.returnValue=!1}function u(){this.cancelBubble=!0}!function(e){var t,n,i,o="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe".split(/,/);for(t=0;t<o.length;t+=2)for(i=o[t+1].split(/ /),n=0;n<i.length;n++)a[i[n]]=o[t]}();var h,p,f,m,g,v,b={VERSION:"1.5.7",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:a,ua:(m=navigator,g=m.userAgent,v=m.vendor,f=(h=/WebKit/.test(g))&&-1!==v.indexOf("Apple"),p=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),android:/Android/.test(g),ie:!h&&!p&&/MSIE/gi.test(g)&&/Explorer/gi.test(m.appName),webkit:h,gecko:!h&&/Gecko/.test(g),safari:f,opera:!!p}),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){return b.each(arguments,(function(t,n){n>0&&b.each(t,(function(t,n){e[n]=t}))})),e},cleanName:function(e){var t,n;for(n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<n.length;t+=2)e=e.replace(n[t],n[t+1]);return e=(e=e.replace(/\s+/g,"_")).replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(e,t){return t.name=e,i[e]=t,i.push(t),t},guid:function(){var e,t=(new Date).getTime().toString(32);for(e=0;e<5;e++)t+=Math.floor(65535*Math.random()).toString(32);return(b.guidPrefix||"p")+t+(n++).toString(32)},buildUrl:function(e,t){var n="";return b.each(t,(function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)})),n&&(e+=(e.indexOf("?")>0?"&":"?")+n),e},each:function(t,n){var i,o,a;if(t)if((i=t.length)===e){for(o in t)if(t.hasOwnProperty(o)&&!1===n(t[o],o))return}else for(a=0;a<i;a++)if(!1===n(t[a],a))return},formatSize:function(t){return t===e||/\D/.test(t)?b.translate("N/A"):t>1073741824?Math.round(t/1073741824,1)+" GB":t>1048576?Math.round(t/1048576,1)+" MB":t>1024?Math.round(t/1024,1)+" KB":t+" b"},getPos:function(e,t){var n,i,o,a=0,r=0,s=document;function l(e){var t,n,i=0,o=0;return e&&(n=e.getBoundingClientRect(),t="CSS1Compat"===s.compatMode?s.documentElement:s.body,i=n.left+t.scrollLeft,o=n.top+t.scrollTop),{x:i,y:o}}if(t=t||s.body,e&&e.getBoundingClientRect&&b.ua.ie&&(!s.documentMode||s.documentMode<8))return i=l(e),o=l(t),{x:i.x-o.x,y:i.y-o.y};for(n=e;n&&n!=t&&n.nodeType;)a+=n.offsetLeft||0,r+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)a-=n.scrollLeft||0,r-=n.scrollTop||0,n=n.parentNode;return{x:a,y:r}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return"string"==typeof e&&(t=(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")))[2],e=+e[1],"g"==t&&(e*=1073741824),"m"==t&&(e*=1048576),"k"==t&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(s,(function(e){return r[e]?"&"+r[e]+";":e})):e},toArray:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n},inArray:function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1},addI18n:function(e){return b.extend(o,e)},translate:function(e){return o[e]||e},isEmptyObj:function(t){if(t===e)return!0;for(var n in t)return!1;return!0},hasClass:function(e,t){return""!=e.className&&new RegExp("(^|\\s+)"+t+"(\\s+|$)").test(e.className)},addClass:function(e,t){b.hasClass(e,t)||(e.className=""==e.className?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(n,(function(e,t,n){return" "===t&&" "===n?" ":""}))},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},addEvent:function(n,i,o){var a,r,s;s=arguments[3],i=i.toLowerCase(),t===e&&(t="Plupload_"+b.guid()),n.addEventListener?(a=o,n.addEventListener(i,a,!1)):n.attachEvent&&(a=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=d,e.stopPropagation=u,o(e)},n.attachEvent("on"+i,a)),n[t]===e&&(n[t]=b.guid()),c.hasOwnProperty(n[t])||(c[n[t]]={}),(r=c[n[t]]).hasOwnProperty(i)||(r[i]=[]),r[i].push({func:a,orig:o,key:s})},removeEvent:function(n,i){var o,a,r;if("function"==typeof arguments[2]?a=arguments[2]:r=arguments[2],i=i.toLowerCase(),n[t]&&c[n[t]]&&c[n[t]][i]){for(var s=(o=c[n[t]][i]).length-1;s>=0&&(o[s].key!==r&&o[s].orig!==a||(n.removeEventListener?n.removeEventListener(i,o[s].func,!1):n.detachEvent&&n.detachEvent("on"+i,o[s].func),o[s].orig=null,o[s].func=null,o.splice(s,1),a===e));s--);if(o.length||delete c[n[t]][i],b.isEmptyObj(c[n[t]])){delete c[n[t]];try{delete n[t]}catch(i){n[t]=e}}}},removeAllEvents:function(n){var i=arguments[1];n[t]!==e&&n[t]&&b.each(c[n[t]],(function(e,t){b.removeEvent(n,t,i)}))}};b.Uploader=function(t){var n,o,a={},r=[],s=!1;function c(){var e,t,n=0;if(this.state==b.STARTED){for(t=0;t<r.length;t++)e||r[t].status!=b.QUEUED?n++:((e=r[t]).status=b.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e));n==r.length&&(this.stop(),this.trigger("UploadComplete",r))}}function d(){var t,i;for(n.reset(),t=0;t<r.length;t++)(i=r[t]).size!==e?(n.size+=i.size,n.loaded+=i.loaded):n.size=e,i.status==b.DONE?n.uploaded++:i.status==b.FAILED?n.failed++:n.queued++;n.size===e?n.percent=r.length>0?Math.ceil(n.uploaded/r.length*100):0:(n.bytesPerSec=Math.ceil(n.loaded/((+new Date-o||1)/1e3)),n.percent=n.size>0?Math.ceil(n.loaded/n.size*100):0)}n=new b.QueueProgress,t=b.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},t),b.extend(this,{state:b.STOPPED,runtime:"",features:{},files:r,settings:t,total:n,id:b.guid(),init:function(){var n,a,s,u=this,h=0;if("function"==typeof t.preinit?t.preinit(u):b.each(t.preinit,(function(e,t){u.bind(t,e)})),t.page_url=t.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(t.url)||(t.url=t.page_url+t.url),t.chunk_size=b.parseSize(t.chunk_size),t.max_file_size=b.parseSize(t.max_file_size),u.bind("FilesAdded",(function(n,i){var o,a,s,c=0,d=t.filters;for(d&&d.length&&(s=[],b.each(d,(function(e){b.each(e.extensions.split(/,/),(function(e){/^\s*\*\s*$/.test(e)?s.push("\\.*"):s.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))}))})),s=new RegExp(s.join("|")+"$","i")),o=0;o<i.length;o++)(a=i[o]).loaded=0,a.percent=0,a.status=b.QUEUED,!s||s.test(a.name)?a.size!==e&&a.size>t.max_file_size?n.trigger("Error",{code:b.FILE_SIZE_ERROR,message:b.translate("File size error."),file:a}):(r.push(a),c++):n.trigger("Error",{code:b.FILE_EXTENSION_ERROR,message:b.translate("File extension error."),file:a});if(!c)return!1;l((function(){u.trigger("QueueChanged"),u.refresh()}),1)})),t.unique_names&&u.bind("UploadFile",(function(e,t){var n=t.name.match(/\.([^.]+)$/),i="tmp";n&&(i=n[1]),t.target_name=t.id+"."+i})),u.bind("UploadProgress",(function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,d()})),u.bind("StateChanged",(function(e){if(e.state==b.STARTED)o=+new Date;else if(e.state==b.STOPPED)for(n=e.files.length-1;n>=0;n--)e.files[n].status==b.UPLOADING&&(e.files[n].status=b.QUEUED,d())})),u.bind("QueueChanged",d),u.bind("Error",(function(e,t){t.file&&(t.file.status=b.FAILED,d(),e.state==b.STARTED&&l((function(){c.call(u)}),1))})),u.bind("FileUploaded",(function(e,t){t.status=b.DONE,t.loaded=t.size,e.trigger("UploadProgress",t),l((function(){c.call(u)}),1)})),t.runtimes)for(a=[],s=t.runtimes.split(/\s?,\s?/),n=0;n<s.length;n++)i[s[n]]&&a.push(i[s[n]]);else a=i;!function e(){var t,n,i,o=a[h++];if(o){if(t=o.getFeatures(),n=u.settings.required_features)for(n=n.split(","),i=0;i<n.length;i++)if(!t[n[i]])return void e();o.init(u,(function(n){n&&n.success?(u.features=t,u.runtime=o.name,u.trigger("Init",{runtime:o.name}),u.trigger("PostInit"),u.refresh()):e()}))}else u.trigger("Error",{code:b.INIT_ERROR,message:b.translate("Init error.")})}(),"function"==typeof t.init?t.init(u):b.each(t.init,(function(e,t){u.bind(t,e)}))},refresh:function(){this.trigger("Refresh")},start:function(){r.length&&this.state!=b.STARTED&&(this.state=b.STARTED,this.trigger("StateChanged"),c.call(this))},stop:function(){this.state!=b.STOPPED&&(this.state=b.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){s=arguments[0]===e||arguments[0],this.trigger("DisableBrowse",s)},getFile:function(e){var t;for(t=r.length-1;t>=0;t--)if(r[t].id===e)return r[t]},removeFile:function(e){var t;for(t=r.length-1;t>=0;t--)if(r[t].id===e.id)return this.splice(t,1)[0]},splice:function(t,n){var i;return i=r.splice(t===e?0:t,n===e?r.length:n),this.trigger("FilesRemoved",i),this.trigger("QueueChanged"),i},trigger:function(e){var t,n,i=a[e.toLowerCase()];if(i)for((n=Array.prototype.slice.call(arguments))[0]=this,t=0;t<i.length;t++)if(!1===i[t].func.apply(i[t].scope,n))return!1;return!0},hasEventListener:function(e){return!!a[e.toLowerCase()]},bind:function(e,t,n){var i;e=e.toLowerCase(),(i=a[e]||[]).push({func:t,scope:n||this}),a[e]=i},unbind:function(t){t=t.toLowerCase();var n,i=a[t],o=arguments[1];if(i){if(o!==e){for(n=i.length-1;n>=0;n--)if(i[n].func===o){i.splice(n,1);break}}else i=[];i.length||delete a[t]}},unbindAll:function(){var e=this;b.each(a,(function(t,n){e.unbind(n)}))},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},b.File=function(e,t,n){var i=this;i.id=e,i.name=t,i.size=n,i.loaded=0,i.percent=0,i.status=0},b.Runtime=function(){this.getFeatures=function(){},this.init=function(e,t){}},b.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},b.runtimes={},window.plupload=b}(),function(){if(!window.google||!google.gears){var e=null;if("undefined"!=typeof GearsFactory)e=new GearsFactory;else try{-1!=(e=new ActiveXObject("Gears.Factory")).getBuildInfo().indexOf("ie_mobile")&&e.privateSetGlobalObject(this)}catch(t){void 0!==navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&((e=document.createElement("object")).style.display="none",e.width=0,e.height=0,e.type="application/x-googlegears",document.documentElement.appendChild(e))}e&&(window.google||(window.google={}),google.gears||(google.gears={factory:e}))}}(),function(e,t,n,i){var o={};n.runtimes.Gears=n.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(i,a){var r,s,l=!1;if(!e.google||!google.gears)return a({success:!1});try{r=google.gears.factory.create("beta.desktop")}catch(e){return a({success:!1})}function c(e){var t,a,r,s=[];for(a=0;a<e.length;a++)t=e[a],r=n.guid(),o[r]=t.blob,s.push(new n.File(r,t.name,t.blob.length));i.trigger("FilesAdded",s)}i.bind("PostInit",(function(){var e=i.settings,o=t.getElementById(e.drop_element);o&&(n.addEvent(o,"dragover",(function(e){r.setDropEffect(e,"copy"),e.preventDefault()}),i.id),n.addEvent(o,"drop",(function(e){var t=r.getDragData(e,"application/x-gears-files");t&&c(t.files),e.preventDefault()}),i.id),o=0),n.addEvent(t.getElementById(e.browse_button),"click",(function(t){var n,i,o,a=[];if(t.preventDefault(),!l){e:for(n=0;n<e.filters.length;n++)for(o=e.filters[n].extensions.split(","),i=0;i<o.length;i++){if("*"===o[i]){a=[];break e}a.push("."+o[i])}r.openFiles(c,{singleFile:!e.multi_selection,filter:a})}}),i.id)})),i.bind("CancelUpload",(function(){s.abort&&s.abort()})),i.bind("UploadFile",(function(e,t){var i,a,r,l=0,c=0,d=e.settings.resize;d&&/\.(png|jpg|jpeg)$/i.test(t.name)&&(o[t.id]=function(e,t,n){var i,o;i=google.gears.factory.create("beta.canvas");try{if(i.decode(e),t.width||(t.width=i.width),t.height||(t.height=i.height),(o=Math.min(t.width/i.width,t.height/i.height))<1)i.resize(Math.round(i.width*o),Math.round(i.height*o));else if(!t.quality||"image/jpeg"!==n)return e;return t.quality?i.encode(n,{quality:t.quality/100}):i.encode(n)}catch(e){}return e}(o[t.id],d,/\.png$/i.test(t.name)?"image/png":"image/jpeg")),t.size=o[t.id].length,a=e.settings.chunk_size,r=a>0,i=Math.ceil(t.size/a),r||(a=t.size,i=1),function d(){var u,h,p,f,m,g,v,b,y=e.settings.multipart,w=0,x={name:t.target_name||t.name},C=e.settings.url;t.status!=n.DONE&&t.status!=n.FAILED&&e.state!=n.STOPPED&&(r&&(x.chunk=l,x.chunks=i),u=Math.min(a,t.size-l*a),y||(C=n.buildUrl(e.settings.url,x)),(s=google.gears.factory.create("beta.httprequest")).open("POST",C),y||(s.setRequestHeader("Content-Disposition",'attachment; filename="'+t.name+'"'),s.setRequestHeader("Content-Type","application/octet-stream")),n.each(e.settings.headers,(function(e,t){s.setRequestHeader(t,e)})),s.upload.onprogress=function(n){t.loaded=c+n.loaded-w,e.trigger("UploadProgress",t)},s.onreadystatechange=function(){var o;if(4==s.readyState&&e.state!==n.STOPPED)if(200==s.status){if(o={chunk:l,chunks:i,response:s.responseText,status:s.status},e.trigger("ChunkUploaded",t,o),o.cancelled)return void(t.status=n.FAILED);c+=u,++l>=i?(t.status=n.DONE,e.trigger("FileUploaded",t,{response:s.responseText,status:s.status})):d()}else e.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:t,chunk:l,chunks:i,status:s.status})},l<i&&(h=o[t.id].slice(l*a,u),g="----pluploadboundary"+n.guid(),v="--",b="\r\n",y&&(s.setRequestHeader("Content-Type","multipart/form-data; boundary="+g),p=google.gears.factory.create("beta.blobbuilder"),n.each(n.extend(x,e.settings.multipart_params),(function(e,t){p.append(v+g+b+'Content-Disposition: form-data; name="'+t+'"'+b+b),p.append(e+b)})),m=n.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",p.append(v+g+b+'Content-Disposition: form-data; name="'+e.settings.file_data_name+'"; filename="'+t.name+'"\r\nContent-Type: '+m+b+b),p.append(h),p.append(b+v+g+v+b),f=p.getAsBlob(),w=f.length-h.length,h=f),s.send(h)))}()})),i.bind("DisableBrowse",(function(e,t){l=t})),i.bind("Destroy",(function(e){var i,o,a={browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(i in a)(o=t.getElementById(a[i]))&&n.removeAllEvents(o,e.id)})),a({success:!0})}})}(window,document,plupload),function(e,t,n,i){var o={},a={};function r(e){var t,n,o,a,s=typeof e;if(e===i||null===e)return"null";if("string"===s)return t="\bb\tt\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,(function(e,n){var i=t.indexOf(n);return i+1?"\\"+t.charAt(i+1):(e=n.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)}))+'"';if("object"==s){if(n=e.length!==i,t="",n){for(o=0;o<e.length;o++)t&&(t+=","),t+=r(e[o]);t="["+t+"]"}else{for(a in e)e.hasOwnProperty(a)&&(t&&(t+=","),t+=r(a)+":"+r(e[a]));t="{"+t+"}"}return t}return""+e}n.silverlight={trigger:function(e,t){var i,a=o[e];a&&((i=n.toArray(arguments).slice(1))[0]="Silverlight:"+t,setTimeout((function(){a.trigger.apply(a,i)}),0))}},n.runtimes.Silverlight=n.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(i,s){var l,c,d="",u=i.settings.filters,h=t.body;if(!function(e){var t,n,i,o,a,r=!1,s=0;try{try{new ActiveXObject("AgControl.AgControl").IsVersionSupported(e)&&(r=!0)}catch(c){var l=navigator.plugins["Silverlight Plug-In"];if(l){for("1.0.30226.2"===(t=l.description)&&(t="2.0.30226.2"),n=t.split(".");n.length>3;)n.pop();for(;n.length<4;)n.push(0);for(i=e.split(".");i.length>4;)i.pop();do{o=parseInt(i[s],10),a=parseInt(n[s],10),s++}while(s<i.length&&o===a);o<=a&&!isNaN(o)&&(r=!0)}}}catch(e){r=!1}return r}("2.0.31005.0")||e.opera&&e.opera.buildNumber)s({success:!1});else{for(a[i.id]=!1,o[i.id]=i,(l=t.createElement("div")).id=i.id+"_silverlight_container",n.extend(l.style,{position:"absolute",top:"0px",background:i.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:i.settings.shim_bgcolor||t.documentMode>8?"":.01}),l.className="plupload silverlight",i.settings.container&&(h=t.getElementById(i.settings.container),"static"===n.getStyle(h,"position")&&(h.style.position="relative")),h.appendChild(l),c=0;c<u.length;c++)d+=(""!=d?"|":"")+u[c].title+" | *."+u[c].extensions.replace(/,/g,";*.");l.innerHTML='<object id="'+i.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+i.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+i.id+",filter="+d+",multiselect="+i.settings.multi_selection+'"/></object>',i.bind("Silverlight:Init",(function(){var e,l={};a[i.id]||(a[i.id]=!0,i.bind("Silverlight:StartSelectFiles",(function(t){e=[]})),i.bind("Silverlight:SelectFile",(function(t,i,o,a){var r;r=n.guid(),l[r]=i,l[i]=r,e.push(new n.File(r,o,a))})),i.bind("Silverlight:SelectSuccessful",(function(){e.length&&i.trigger("FilesAdded",e)})),i.bind("Silverlight:UploadChunkError",(function(e,t,o,a,r){i.trigger("Error",{code:n.IO_ERROR,message:"IO Error.",details:r,file:e.getFile(l[t])})})),i.bind("Silverlight:UploadFileProgress",(function(e,t,i,o){var a=e.getFile(l[t]);a.status!=n.FAILED&&(a.size=o,a.loaded=i,e.trigger("UploadProgress",a))})),i.bind("Refresh",(function(e){var i,o,a;(i=t.getElementById(e.settings.browse_button))&&(o=n.getPos(i,t.getElementById(e.settings.container)),a=n.getSize(i),n.extend(t.getElementById(e.id+"_silverlight_container").style,{top:o.y+"px",left:o.x+"px",width:a.w+"px",height:a.h+"px"}))})),i.bind("Silverlight:UploadChunkSuccessful",(function(e,t,i,o,a){var r,s=e.getFile(l[t]);r={chunk:i,chunks:o,response:a},e.trigger("ChunkUploaded",s,r),s.status!=n.FAILED&&e.state!==n.STOPPED&&p().UploadNextChunk(),i==o-1&&(s.status=n.DONE,e.trigger("FileUploaded",s,{response:a}))})),i.bind("Silverlight:UploadSuccessful",(function(e,t,i){var o=e.getFile(l[t]);o.status=n.DONE,e.trigger("FileUploaded",o,{response:i})})),i.bind("FilesRemoved",(function(e,t){var n;for(n=0;n<t.length;n++)p().RemoveFile(l[t[n].id])})),i.bind("UploadFile",(function(e,t){var i=e.settings,o=i.resize||{};p().UploadFile(l[t.id],e.settings.url,r({name:t.target_name||t.name,mime:n.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:i.chunk_size,image_width:o.width,image_height:o.height,image_quality:o.quality,multipart:!!i.multipart,multipart_params:i.multipart_params||{},file_data_name:i.file_data_name,headers:i.headers}))})),i.bind("CancelUpload",(function(){p().CancelUpload()})),i.bind("Silverlight:MouseEnter",(function(e){var o,a;o=t.getElementById(i.settings.browse_button),a=e.settings.browse_button_hover,o&&a&&n.addClass(o,a)})),i.bind("Silverlight:MouseLeave",(function(e){var o,a;o=t.getElementById(i.settings.browse_button),a=e.settings.browse_button_hover,o&&a&&n.removeClass(o,a)})),i.bind("Silverlight:MouseLeftButtonDown",(function(e){var o,a;o=t.getElementById(i.settings.browse_button),a=e.settings.browse_button_active,o&&a&&(n.addClass(o,a),n.addEvent(t.body,"mouseup",(function(){n.removeClass(o,a)})))})),i.bind("Sliverlight:StartSelectFiles",(function(e){var o,a;o=t.getElementById(i.settings.browse_button),a=e.settings.browse_button_active,o&&a&&n.removeClass(o,a)})),i.bind("DisableBrowse",(function(e,t){p().DisableBrowse(t)})),i.bind("Destroy",(function(e){var i;n.removeAllEvents(t.body,e.id),delete a[e.id],delete o[e.id],(i=t.getElementById(e.id+"_silverlight_container"))&&i.parentNode.removeChild(i)})),s({success:!0}))}))}function p(){return t.getElementById(i.id+"_silverlight").content.Upload}}})}(window,document,plupload),function(e,t,n,i){var o={},a={};n.flash={trigger:function(e,t,n){setTimeout((function(){var i=o[e];i&&i.trigger("Flash:"+t,n)}),0)}},n.runtimes.Flash=n.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,i){var r,s,l,c=0,d=t.body;(function(){var e;try{e=(e=navigator.plugins["Shockwave Flash"]).description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(t){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])})()<10?i({success:!1}):(a[e.id]=!1,o[e.id]=e,t.getElementById(e.settings.browse_button),(r=t.createElement("div")).id=e.id+"_flash_container",n.extend(r.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),r.className="plupload flash",e.settings.container&&(d=t.getElementById(e.settings.container),"static"===n.getStyle(d,"position")&&(d.style.position="relative")),d.appendChild(r),s='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ',n.ua.ie&&(s+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),s+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(e.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.ua.ie?(l=t.createElement("div"),r.appendChild(l),l.outerHTML=s,l=null):r.innerHTML=s,function t(){c++>5e3?i({success:!1}):!1===a[e.id]&&setTimeout(t,1)}(),r=null,e.bind("Destroy",(function(e){var i;n.removeAllEvents(t.body,e.id),delete a[e.id],delete o[e.id],(i=t.getElementById(e.id+"_flash_container"))&&i.parentNode.removeChild(i)})),e.bind("Flash:Init",(function(){var o={};try{u().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(e){return void i({success:!1})}a[e.id]||(a[e.id]=!0,e.bind("UploadFile",(function(t,i){var a=t.settings,r=e.settings.resize||{};u().uploadFile(o[i.id],a.url,{name:i.target_name||i.name,mime:n.mimeTypes[i.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:a.chunk_size,width:r.width,height:r.height,quality:r.quality,multipart:a.multipart,multipart_params:a.multipart_params||{},file_data_name:a.file_data_name,format:/\.(jpg|jpeg)$/i.test(i.name)?"jpg":"png",headers:a.headers,urlstream_upload:a.urlstream_upload})})),e.bind("CancelUpload",(function(){u().cancelUpload()})),e.bind("Flash:UploadProcess",(function(e,t){var i=e.getFile(o[t.id]);i.status!=n.FAILED&&(i.loaded=t.loaded,i.size=t.size,e.trigger("UploadProgress",i))})),e.bind("Flash:UploadChunkComplete",(function(e,t){var i,a=e.getFile(o[t.id]);i={chunk:t.chunk,chunks:t.chunks,response:t.text},e.trigger("ChunkUploaded",a,i),a.status!==n.FAILED&&e.state!==n.STOPPED&&u().uploadNextChunk(),t.chunk==t.chunks-1&&(a.status=n.DONE,e.trigger("FileUploaded",a,{response:t.text}))})),e.bind("Flash:SelectFiles",(function(t,i){var a,r,s,l=[];for(r=0;r<i.length;r++)a=i[r],s=n.guid(),o[s]=a.id,o[a.id]=s,l.push(new n.File(s,a.name,a.size));l.length&&e.trigger("FilesAdded",l)})),e.bind("Flash:SecurityError",(function(t,i){e.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),details:i.message,file:e.getFile(o[i.id])})})),e.bind("Flash:GenericError",(function(t,i){e.trigger("Error",{code:n.GENERIC_ERROR,message:n.translate("Generic error."),details:i.message,file:e.getFile(o[i.id])})})),e.bind("Flash:IOError",(function(t,i){e.trigger("Error",{code:n.IO_ERROR,message:n.translate("IO error."),details:i.message,file:e.getFile(o[i.id])})})),e.bind("Flash:ImageError",(function(t,i){e.trigger("Error",{code:parseInt(i.code,10),message:n.translate("Image error."),file:e.getFile(o[i.id])})})),e.bind("Flash:StageEvent:rollOver",(function(i){var o,a;o=t.getElementById(e.settings.browse_button),a=i.settings.browse_button_hover,o&&a&&n.addClass(o,a)})),e.bind("Flash:StageEvent:rollOut",(function(i){var o,a;o=t.getElementById(e.settings.browse_button),a=i.settings.browse_button_hover,o&&a&&n.removeClass(o,a)})),e.bind("Flash:StageEvent:mouseDown",(function(i){var o,a;o=t.getElementById(e.settings.browse_button),a=i.settings.browse_button_active,o&&a&&(n.addClass(o,a),n.addEvent(t.body,"mouseup",(function(){n.removeClass(o,a)}),i.id))})),e.bind("Flash:StageEvent:mouseUp",(function(i){var o,a;o=t.getElementById(e.settings.browse_button),a=i.settings.browse_button_active,o&&a&&n.removeClass(o,a)})),e.bind("Flash:ExifData",(function(t,n){e.trigger("ExifData",e.getFile(o[n.id]),n.data)})),e.bind("Flash:GpsData",(function(t,n){e.trigger("GpsData",e.getFile(o[n.id]),n.data)})),e.bind("QueueChanged",(function(t){e.refresh()})),e.bind("FilesRemoved",(function(e,t){var n;for(n=0;n<t.length;n++)u().removeFile(o[t[n].id])})),e.bind("StateChanged",(function(t){e.refresh()})),e.bind("Refresh",(function(i){var o,a,r;u().setFileFilters(e.settings.filters,e.settings.multi_selection),(o=t.getElementById(i.settings.browse_button))&&(a=n.getPos(o,t.getElementById(i.settings.container)),r=n.getSize(o),n.extend(t.getElementById(i.id+"_flash_container").style,{top:a.y+"px",left:a.x+"px",width:r.w+"px",height:r.h+"px"}))})),e.bind("DisableBrowse",(function(e,t){u().disableBrowse(t)})),i({success:!0}))})));function u(){return t.getElementById(e.id+"_flash")}}})}(window,document,plupload),function(e){e.runtimes.BrowserPlus=e.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(t,n){var i=window.BrowserPlus,o={},a=t.settings,r=a.resize;function s(n){var i,a,r,s=[];for(i=0;i<n.length;i++)a=n[i],r=e.guid(),o[r]=a,s.push(new e.File(r,a.name,a.size));i&&t.trigger("FilesAdded",s)}i?i.init((function(l){var c=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];r&&c.push({service:"ImageAlter",version:"4"}),l.success?i.require({services:c},(function(l){l.success?function(){var l=!1;t.bind("PostInit",(function(){var n,o=a.drop_element,r=t.id+"_droptarget",c=document.getElementById(o);function d(e,t){i.DragAndDrop.AddDropTarget({id:e},(function(n){i.DragAndDrop.AttachCallbacks({id:e,hover:function(e){!e&&t&&t()},drop:function(e){t&&t(),s(e)}},(function(){}))}))}c&&(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)?((n=document.createElement("div")).setAttribute("id",r),e.extend(n.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0}),document.body.appendChild(n),e.addEvent(c,"dragenter",(function(t){var n,i;n=document.getElementById(o),i=e.getPos(n),e.extend(document.getElementById(r).style,{top:i.y+"px",left:i.x+"px",width:n.offsetWidth+"px",height:n.offsetHeight+"px"})})),d(r,(function(){document.getElementById(r).style.top="-1000px"}))):d(o)),e.addEvent(document.getElementById(a.browse_button),"click",(function(t){var n,o,r,c,d=[],u=a.filters;if(t.preventDefault(),!l){e:for(n=0;n<u.length;n++)for(r=u[n].extensions.split(","),o=0;o<r.length;o++){if("*"===r[o]){d=[];break e}(c=e.mimeTypes[r[o]])&&-1===e.inArray(c,d)&&d.push(e.mimeTypes[r[o]])}i.FileBrowse.OpenBrowseDialog({mimeTypes:d},(function(e){e.success&&s(e.value)}))}})),c=n=null})),t.bind("CancelUpload",(function(){i.Uploader.cancel({},(function(){}))})),t.bind("DisableBrowse",(function(e,t){l=t})),t.bind("UploadFile",(function(t,n){var a,s=o[n.id],l={},c=t.settings.chunk_size,d=[];function u(o,r){var s;n.status!=e.FAILED&&(l.name=n.target_name||n.name,c&&(l.chunk=""+o,l.chunks=""+r),s=d.shift(),i.Uploader.upload({url:t.settings.url,files:{file:s},cookies:document.cookies,postvars:e.extend(l,t.settings.multipart_params),progressCallback:function(e){var i,r=0;for(a[o]=parseInt(e.filePercent*s.size/100,10),i=0;i<a.length;i++)r+=a[i];n.loaded=r,t.trigger("UploadProgress",n)}},(function(i){var a;i.success?(a=i.value.statusCode,c&&t.trigger("ChunkUploaded",n,{chunk:o,chunks:r,response:i.value.body,status:a}),d.length>0?u(++o,r):(n.status=e.DONE,t.trigger("FileUploaded",n,{response:i.value.body,status:a}),a>=400&&t.trigger("Error",{code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:n,status:a}))):t.trigger("Error",{code:e.GENERIC_ERROR,message:e.translate("Generic Error."),file:n,details:i.error})})))}function h(e){n.size=e.size,c?i.FileAccess.chunk({file:e,chunkSize:c},(function(e){if(e.success){var t=e.value,n=t.length;a=Array(n);for(var i=0;i<n;i++)a[i]=0,d.push(t[i]);u(0,n)}})):(a=Array(1),d.push(e),u(0,1))}r&&/\.(png|jpg|jpeg)$/i.test(n.name)?BrowserPlus.ImageAlter.transform({file:s,quality:r.quality||90,actions:[{scale:{maxwidth:r.width,maxheight:r.height}}]},(function(e){e.success&&h(e.value.file)})):h(s)})),n({success:!0})}():n()})):n()})):n()}})}(plupload),function(e,t,n,o){var a,r={};function s(e,n,i){var o=e.naturalWidth,a=e.naturalHeight,r=i.width,s=i.height,l=n.getContext("2d");l.save();var c=function(e){var n=e.naturalWidth;if(n*e.naturalHeight>1048576){var i=t.createElement("canvas");i.width=i.height=1;var o=i.getContext("2d");return o.drawImage(e,1-n,0),0===o.getImageData(0,0,1,1).data[3]}return!1}(e);c&&(o/=2,a/=2);var d=1024,u=t.createElement("canvas");u.width=u.height=d;for(var h=u.getContext("2d"),p=function(e,n,i){var o=t.createElement("canvas");o.width=1,o.height=i;var a=o.getContext("2d");a.drawImage(e,0,0);for(var r=a.getImageData(0,0,1,i).data,s=0,l=i,c=i;c>s;)0===r[4*(c-1)+3]?l=c:s=c,c=l+s>>1;var d=c/i;return 0===d?1:d}(e,0,a),f=0;f<a;){for(var m=f+d>a?a-f:d,g=0;g<o;){var v=g+d>o?o-g:d;h.clearRect(0,0,d,d),h.drawImage(e,-g,-f);var b=g*r/o<<0,y=Math.ceil(v*r/o),w=f*s/a/p<<0,x=Math.ceil(m*s/a/p);l.drawImage(u,0,0,v,m,b,w,y,x),g+=d}f+=d}l.restore(),u=h=null}function l(t,n){var i;if(!("FileReader"in e))return n(t.getAsBinary());(i=new FileReader).readAsBinaryString(t),i.onload=function(){n(i.result)}}function c(n,i,o,a){var l,c,d,p=this;!function(t,n){var i;if(!("FileReader"in e))return n(t.getAsDataURL());(i=new FileReader).readAsDataURL(t),i.onload=function(){n(i.result)}}(r[n.id],(function(e){(l=t.createElement("canvas")).style.display="none",t.body.appendChild(l),(c=new Image).onerror=c.onabort=function(){a({success:!1})},c.onload=function(){var t,r,f,m;if(i.width||(i.width=c.width),i.height||(i.height=c.height),(d=Math.min(i.width/c.width,i.height/c.height))<1)t=Math.round(c.width*d),r=Math.round(c.height*d);else{if(!i.quality||"image/jpeg"!==o)return void a({success:!1});t=c.width,r=c.height}if(l.width=t,l.height=r,s(c,l,{width:t,height:r}),"image/jpeg"===o&&(f=new u(atob(e.substring(e.indexOf("base64,")+7)))).headers&&f.headers.length&&(m=new h).init(f.get("exif")[0])&&(m.setExif("PixelXDimension",t),m.setExif("PixelYDimension",r),f.set("exif",m.getBinary()),p.hasEventListener("ExifData")&&p.trigger("ExifData",n,m.EXIF()),p.hasEventListener("GpsData")&&p.trigger("GpsData",n,m.GPS())),i.quality&&"image/jpeg"===o)try{e=l.toDataURL(o,i.quality/100)}catch(t){e=l.toDataURL(o)}else e=l.toDataURL(o);e=e.substring(e.indexOf("base64,")+7),e=atob(e),f&&f.headers&&f.headers.length&&(e=f.restore(e),f.purge()),l.parentNode.removeChild(l),a({success:!0,data:e})},c.src=e}))}function d(){var e,t=!1;function n(n,i){var o,a=t?0:-8*(i-1),r=0;for(o=0;o<i;o++)r|=e.charCodeAt(n+o)<<Math.abs(a+8*o);return r}function i(t,n,i){i=3===arguments.length?i:e.length-n-1;e=e.substr(0,n)+t+e.substr(i+n)}return{II:function(e){if(e===o)return t;t=e},init:function(n){t=!1,e=n},SEGMENT:function(t,n,o){switch(arguments.length){case 1:return e.substr(t,e.length-t-1);case 2:return e.substr(t,n);case 3:i(o,t,n);break;default:return e}},BYTE:function(e){return n(e,1)},SHORT:function(e){return n(e,2)},LONG:function(e,a){if(a===o)return n(e,4);!function(e,n,o){var a,r="",s=t?0:-8*(o-1);for(a=0;a<o;a++)r+=String.fromCharCode(n>>Math.abs(s+8*a)&255);i(r,e,o)}(e,a,4)},SLONG:function(e){var t=n(e,4);return t>2147483647?t-4294967296:t},STRING:function(e,t){var i="";for(t+=e;e<t;e++)i+=String.fromCharCode(n(e,1));return i}}}function u(e){var t,n,i,a={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},r=[],s=o,l=0;if((t=new d).init(e),65496===t.SHORT(0)){for(n=2,i=Math.min(1048576,e.length);n<=i;)if((s=t.SHORT(n))>=65488&&s<=65495)n+=2;else{if(65498===s||65497===s)break;l=t.SHORT(n+2)+2,a[s]&&t.STRING(n+4,a[s].signature.length)===a[s].signature&&r.push({hex:s,app:a[s].app.toUpperCase(),name:a[s].name.toUpperCase(),start:n,length:l,segment:t.SEGMENT(n,l)}),n+=l}return t.init(null),{headers:r,restore:function(e){t.init(e);var i=new u(e);if(!i.headers)return!1;for(var o=i.headers.length;o>0;o--){var a=i.headers[o-1];t.SEGMENT(a.start,a.length,"")}i.purge(),n=65504==t.SHORT(2)?4+t.SHORT(4):2;o=0;for(var s=r.length;o<s;o++)t.SEGMENT(n,0,r[o].segment),n+=r[o].length;return t.SEGMENT()},get:function(e){for(var t=[],n=0,i=r.length;n<i;n++)r[n].app===e.toUpperCase()&&t.push(r[n].segment);return t},set:function(e,t){var n=[];"string"==typeof t?n.push(t):n=t;for(var i=ii=0,o=r.length;i<o&&(r[i].app===e.toUpperCase()&&(r[i].segment=n[ii],r[i].length=n[ii].length,ii++),!(ii>=n.length));i++);},purge:function(){r=[],t.init(null)}}}}function h(){var e,t,a,r={};function s(t,n){var i,s,l,c,d,u,h,p=e.SHORT(t),f=[],m={};for(i=0;i<p;i++)if(u=t+12*i+2,(l=n[e.SHORT(u)])!==o){switch(c=e.SHORT(u+=2),d=e.LONG(u+=2),u+=4,f=[],c){case 1:case 7:for(d>4&&(u=e.LONG(u)+r.tiffHeader),s=0;s<d;s++)f[s]=e.BYTE(u+s);break;case 2:d>4&&(u=e.LONG(u)+r.tiffHeader),m[l]=e.STRING(u,d-1);continue;case 3:for(d>2&&(u=e.LONG(u)+r.tiffHeader),s=0;s<d;s++)f[s]=e.SHORT(u+2*s);break;case 4:for(d>1&&(u=e.LONG(u)+r.tiffHeader),s=0;s<d;s++)f[s]=e.LONG(u+4*s);break;case 5:for(u=e.LONG(u)+r.tiffHeader,s=0;s<d;s++)f[s]=e.LONG(u+4*s)/e.LONG(u+4*s+4);break;case 9:for(u=e.LONG(u)+r.tiffHeader,s=0;s<d;s++)f[s]=e.SLONG(u+4*s);break;case 10:for(u=e.LONG(u)+r.tiffHeader,s=0;s<d;s++)f[s]=e.SLONG(u+4*s)/e.SLONG(u+4*s+4);break;default:continue}h=1==d?f[0]:f,a.hasOwnProperty(l)&&"object"!=typeof h?m[l]=a[l][h]:m[l]=h}return m}return e=new d,t={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},a={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(n){return r={tiffHeader:10},!(n===o||!n.length)&&(e.init(n),65505===e.SHORT(0)&&"EXIF\0"===e.STRING(4,5).toUpperCase()&&function(){var n,i=r.tiffHeader;return e.II(18761==e.SHORT(i)),42===e.SHORT(i+=2)&&(r.IFD0=r.tiffHeader+e.LONG(i+=2),n=s(r.IFD0,t.tiff),r.exifIFD="ExifIFDPointer"in n?r.tiffHeader+n.ExifIFDPointer:o,r.gpsIFD="GPSInfoIFDPointer"in n?r.tiffHeader+n.GPSInfoIFDPointer:o,!0)}())},EXIF:function(){var e;if((e=s(r.exifIFD,t.exif)).ExifVersion&&"array"===n.typeOf(e.ExifVersion)){for(var i=0,o="";i<e.ExifVersion.length;i++)o+=String.fromCharCode(e.ExifVersion[i]);e.ExifVersion=o}return e},GPS:function(){var e;return(e=s(r.gpsIFD,t.gps)).GPSVersionID&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(n,o){return("PixelXDimension"===n||"PixelYDimension"===n)&&function(n,o,a){var s,l,c,d=0;if("string"==typeof o){var u=t[n.toLowerCase()];for(hex in u)if(u[hex]===o){o=hex;break}}for(s=r[n.toLowerCase()+"IFD"],l=e.SHORT(s),i=0;i<l;i++)if(c=s+12*i+2,e.SHORT(c)==o){d=c+8;break}return!!d&&(e.LONG(d,a),!0)}("exif",n,o)},getBinary:function(){return e.SEGMENT()}}}n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var i,o,r,s,l,c;return o=r=l=c=!1,e.XMLHttpRequest&&(r=!!(i=new XMLHttpRequest).upload,o=!(!i.sendAsBinary&&!i.upload)),o&&(s=!!(i.sendAsBinary||e.Uint8Array&&e.ArrayBuffer),l=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!s),c=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),a=n.ua.safari&&n.ua.windows,{html5:o,dragdrop:function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),jpgresize:l,pngresize:l,multipart:l||!!e.FileReader||!!e.FormData,canSendBinary:s,cantSendBlobInFormData:!(!(n.ua.gecko&&e.FormData&&e.FileReader)||FileReader.prototype.readAsArrayBuffer)||n.ua.android,progress:r,chunks:c,multi_selection:!(n.ua.safari&&n.ua.windows),triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(i,o){var s,d;function u(e){var t,o,a,s=[],l={};for(o=0;o<e.length;o++)l[(t=e[o]).name]&&n.ua.safari&&n.ua.windows||(l[t.name]=!0,a=n.guid(),r[a]=t,s.push(new n.File(a,t.fileName||t.name,t.fileSize||t.size)));s.length&&i.trigger("FilesAdded",s)}(s=this.getFeatures()).html5?(i.bind("Init",(function(e){var o,a,r,s,l,c,d,h=[],p=e.settings.filters,f=t.body;(o=t.createElement("div")).id=e.id+"_html5_container",n.extend(o.style,{position:"absolute",background:i.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:i.settings.shim_bgcolor?"":0}),o.className="plupload html5",i.settings.container&&(f=t.getElementById(i.settings.container),"static"===n.getStyle(f,"position")&&(f.style.position="relative")),f.appendChild(o);e:for(r=0;r<p.length;r++)for(l=p[r].extensions.split(/,/),s=0;s<l.length;s++){if("*"===l[s]){h=[];break e}(c=n.mimeTypes[l[s]])&&-1===n.inArray(c,h)&&h.push(c)}if(o.innerHTML='<input id="'+i.id+'_html5"  style="font-size:999px" type="file" accept="'+h.join(",")+'" '+(i.settings.multi_selection&&i.features.multi_selection?'multiple="multiple"':"")+" />",o.scrollTop=100,d=t.getElementById(i.id+"_html5"),e.features.triggerDialog?n.extend(d.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(d.style,{cssFloat:"right",styleFloat:"right"}),d.onchange=function(){u(this.files),this.value=""},a=t.getElementById(e.settings.browse_button)){var m=e.settings.browse_button_hover,g=e.settings.browse_button_active,v=e.features.triggerDialog?a:o;m&&(n.addEvent(v,"mouseover",(function(){n.addClass(a,m)}),e.id),n.addEvent(v,"mouseout",(function(){n.removeClass(a,m)}),e.id)),g&&(n.addEvent(v,"mousedown",(function(){n.addClass(a,g)}),e.id),n.addEvent(t.body,"mouseup",(function(){n.removeClass(a,g)}),e.id)),e.features.triggerDialog&&n.addEvent(a,"click",(function(n){var i=t.getElementById(e.id+"_html5");i&&!i.disabled&&i.click(),n.preventDefault()}),e.id)}})),i.bind("PostInit",(function(){var e=t.getElementById(i.settings.drop_element);if(e){if(a)return void n.addEvent(e,"dragenter",(function(o){var a,r;(a=t.getElementById(i.id+"_drop"))||((a=t.createElement("input")).setAttribute("type","file"),a.setAttribute("id",i.id+"_drop"),a.setAttribute("multiple","multiple"),n.addEvent(a,"change",(function(){u(this.files),n.removeEvent(a,"change",i.id),a.parentNode.removeChild(a)}),i.id),n.addEvent(a,"dragover",(function(e){e.stopPropagation()}),i.id),e.appendChild(a)),n.getPos(e,t.getElementById(i.settings.container)),r=n.getSize(e),"static"===n.getStyle(e,"position")&&n.extend(e.style,{position:"relative"}),n.extend(a.style,{position:"absolute",display:"block",top:0,left:0,width:r.w+"px",height:r.h+"px",opacity:0})}),i.id);n.addEvent(e,"dragover",(function(e){e.preventDefault()}),i.id),n.addEvent(e,"drop",(function(e){var t=e.dataTransfer;t&&t.files&&u(t.files),e.preventDefault()}),i.id)}})),i.bind("Refresh",(function(e){var o,a,r,s,l;(o=t.getElementById(i.settings.browse_button))&&(a=n.getPos(o,t.getElementById(e.settings.container)),r=n.getSize(o),s=t.getElementById(i.id+"_html5_container"),n.extend(s.style,{top:a.y+"px",left:a.x+"px",width:r.w+"px",height:r.h+"px"}),i.features.triggerDialog&&("static"===n.getStyle(o,"position")&&n.extend(o.style,{position:"relative"}),l=parseInt(n.getStyle(o,"zIndex"),10),isNaN(l)&&(l=0),n.extend(o.style,{zIndex:l}),n.extend(s.style,{zIndex:l-1})))})),i.bind("DisableBrowse",(function(e,n){var i=t.getElementById(e.id+"_html5");i&&(i.disabled=n)})),i.bind("CancelUpload",(function(){d&&d.abort&&d.abort()})),i.bind("UploadFile",(function(t,i){var o,a=t.settings;function u(o){var r=0,l=0;!function c(){var u,h,p,f,m,g,v,b=t.settings.url;function y(e){if(d.sendAsBinary)d.sendAsBinary(e);else if(t.features.canSendBinary){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=255&e.charCodeAt(i);d.send(n.buffer)}}function w(o){var a,v=0,w="----pluploadboundary"+n.guid(),x="--",C="\r\n",S="";if((d=new XMLHttpRequest).upload&&(d.upload.onprogress=function(e){i.loaded=Math.min(i.size,l+e.loaded-v),t.trigger("UploadProgress",i)}),d.onreadystatechange=function(){var e,s;if(4==d.readyState&&t.state!==n.STOPPED){try{e=d.status}catch(t){e=0}if(e>=400)t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:i,status:e});else{if(h){if(s={chunk:r,chunks:h,response:d.responseText,status:e},t.trigger("ChunkUploaded",i,s),l+=m,s.cancelled)return void(i.status=n.FAILED);i.loaded=Math.min(i.size,(r+1)*f)}else i.loaded=i.size;t.trigger("UploadProgress",i),o=u=a=S=null,!h||++r>=h?(i.status=n.DONE,t.trigger("FileUploaded",i,{response:d.responseText,status:e})):c()}}},t.settings.multipart&&s.multipart){if(p.name=i.target_name||i.name,d.open("post",b,!0),n.each(t.settings.headers,(function(e,t){d.setRequestHeader(t,e)})),"string"!=typeof o&&e.FormData)return a=new FormData,n.each(n.extend(p,t.settings.multipart_params),(function(e,t){a.append(t,e)})),a.append(t.settings.file_data_name,o),void d.send(a);if("string"==typeof o)return d.setRequestHeader("Content-Type","multipart/form-data; boundary="+w),n.each(n.extend(p,t.settings.multipart_params),(function(e,t){S+=x+w+C+'Content-Disposition: form-data; name="'+t+'"'+C+C,S+=unescape(encodeURIComponent(e))+C})),g=n.mimeTypes[i.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",S+=x+w+C+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(i.name))+'"'+"\r\nContent-Type: "+g+C+C+o+C+x+w+x+C,v=S.length-o.length,void y(o=S)}b=n.buildUrl(t.settings.url,n.extend(p,t.settings.multipart_params)),d.open("post",b,!0),d.setRequestHeader("Content-Type","application/octet-stream"),n.each(t.settings.headers,(function(e,t){d.setRequestHeader(t,e)})),"string"==typeof o?y(o):d.send(o)}i.status!=n.DONE&&i.status!=n.FAILED&&t.state!=n.STOPPED&&(p={name:i.target_name||i.name},a.chunk_size&&i.size>a.chunk_size&&(s.chunks||"string"==typeof o)?(f=a.chunk_size,h=Math.ceil(i.size/f),m=Math.min(f,i.size-r*f),u="string"==typeof o?o.substring(r*f,r*f+m):function(e,t,n){var i;if(!File.prototype.slice)return(i=File.prototype.webkitSlice||File.prototype.mozSlice)?i.call(e,t,n):null;try{return e.slice(),e.slice(t,n)}catch(i){return e.slice(t,n-t)}}(o,r*f,r*f+m),p.chunk=r,p.chunks=h):(m=i.size,u=o),t.settings.multipart&&s.multipart&&"string"!=typeof u&&e.FileReader&&s.cantSendBlobInFormData&&s.chunks&&t.settings.chunk_size?((v=new FileReader).onload=function(){w(v.result),v=null},v.readAsBinaryString(u)):w(u))}()}o=r[i.id],s.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(i.name)?c.call(t,i,t.settings.resize,/\.png$/i.test(i.name)?"image/png":"image/jpeg",(function(e){e.success?(i.size=e.data.length,u(e.data)):s.chunks?u(o):l(o,u)})):!s.chunks&&s.jpgresize?l(o,u):u(o)})),i.bind("Destroy",(function(e){var i,o,a=t.body,r={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(i in r)(o=t.getElementById(r[i]))&&n.removeAllEvents(o,e.id);n.removeAllEvents(t.body,e.id),e.settings.container&&(a=t.getElementById(e.settings.container)),a.removeChild(t.getElementById(r.inputContainer))})),o({success:!0})):o({success:!1})}})}(window,document,plupload),function(e,t,n,i){function o(e){return t.getElementById(e)}n.runtimes.Html4=n.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(i,a){i.bind("Init",(function(a){var r,s,l,c,d,u,h,p=t.body,f=[],m=/MSIE/.test(navigator.userAgent),g=[],v=a.settings.filters;e:for(c=0;c<v.length;c++)for(d=v[c].extensions.split(/,/),h=0;h<d.length;h++){if("*"===d[h]){g=[];break e}(u=n.mimeTypes[d[h]])&&-1===n.inArray(u,g)&&g.push(u)}g=g.join(","),a.settings.container&&(p=o(a.settings.container),"static"===n.getStyle(p,"position")&&(p.style.position="relative")),a.bind("UploadFile",(function(e,i){var a;i.status!=n.DONE&&i.status!=n.FAILED&&e.state!=n.STOPPED&&(a=o("form_"+i.id),o("input_"+i.id).setAttribute("name",e.settings.file_data_name),a.setAttribute("action",e.settings.url),n.each(n.extend({name:i.target_name||i.name},e.settings.multipart_params),(function(e,i){var o=t.createElement("input");n.extend(o,{type:"hidden",name:i,value:e}),a.insertBefore(o,a.firstChild)})),s=i,o("form_"+l).style.top="-1048575px",a.submit())})),a.bind("FileUploaded",(function(e){e.refresh()})),a.bind("StateChanged",(function(i){i.state==n.STARTED?function(){var i=t.createElement("div");i.innerHTML='<iframe id="'+a.id+'_iframe" name="'+a.id+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',r=i.firstChild,p.appendChild(r),n.addEvent(r,"load",(function(t){var i,o,r=t.target;if(s){try{i=r.contentWindow.document||r.contentDocument||e.frames[r.id].document}catch(e){return void a.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),file:s})}(o=i.documentElement.innerText||i.documentElement.textContent)&&(s.status=n.DONE,s.loaded=1025,s.percent=100,a.trigger("UploadProgress",s),a.trigger("FileUploaded",s,{response:o}))}}),a.id)}():i.state==n.STOPPED&&e.setTimeout((function(){n.removeEvent(r,"load",i.id),r.parentNode&&r.parentNode.removeChild(r)}),0),n.each(i.files,(function(e,t){if(e.status===n.DONE||e.status===n.FAILED){var i=o("form_"+e.id);i&&i.parentNode.removeChild(i)}}))})),a.bind("Refresh",(function(e){var i,a,r,s,c,d,u,h;(i=o(e.settings.browse_button))&&(c=n.getPos(i,o(e.settings.container)),d=n.getSize(i),u=o("form_"+l),o("input_"+l),n.extend(u.style,{top:c.y+"px",left:c.x+"px",width:d.w+"px",height:d.h+"px"}),e.features.triggerDialog&&("static"===n.getStyle(i,"position")&&n.extend(i.style,{position:"relative"}),h=parseInt(i.style.zIndex,10),isNaN(h)&&(h=0),n.extend(i.style,{zIndex:h}),n.extend(u.style,{zIndex:h-1})),r=e.settings.browse_button_hover,s=e.settings.browse_button_active,a=e.features.triggerDialog?i:u,r&&(n.addEvent(a,"mouseover",(function(){n.addClass(i,r)}),e.id),n.addEvent(a,"mouseout",(function(){n.removeClass(i,r)}),e.id)),s&&(n.addEvent(a,"mousedown",(function(){n.addClass(i,s)}),e.id),n.addEvent(t.body,"mouseup",(function(){n.removeClass(i,s)}),e.id)))})),i.bind("FilesRemoved",(function(e,t){var n,i;for(n=0;n<t.length;n++)(i=o("form_"+t[n].id))&&i.parentNode.removeChild(i)})),i.bind("DisableBrowse",(function(e,n){var i=t.getElementById("input_"+l);i&&(i.disabled=n)})),i.bind("Destroy",(function(e){var i,a,r,s={inputContainer:"form_"+l,inputFile:"input_"+l,browseButton:e.settings.browse_button};for(i in s)(a=o(s[i]))&&n.removeAllEvents(a,e.id);n.removeAllEvents(t.body,e.id),n.each(f,(function(e,t){(r=o("form_"+e))&&r.parentNode.removeChild(r)}))})),function e(){var r,s,c,d;l=n.guid(),f.push(l),(r=t.createElement("form")).setAttribute("id","form_"+l),r.setAttribute("method","post"),r.setAttribute("enctype","multipart/form-data"),r.setAttribute("encoding","multipart/form-data"),r.setAttribute("target",a.id+"_iframe"),r.style.position="absolute",(s=t.createElement("input")).setAttribute("id","input_"+l),s.setAttribute("type","file"),s.setAttribute("accept",g),s.setAttribute("size",1),d=o(a.settings.browse_button),a.features.triggerDialog&&d&&n.addEvent(o(a.settings.browse_button),"click",(function(e){s.disabled||s.click(),e.preventDefault()}),a.id),n.extend(s.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),n.extend(r.style,{overflow:"hidden"}),(c=a.settings.shim_bgcolor)&&(r.style.background=c),m&&n.extend(s.style,{filter:"alpha(opacity=0)"}),n.addEvent(s,"change",(function(t){var c,u=t.target,h=[];u.value&&(o("form_"+l).style.top="-1048575px",c=(c=u.value.replace(/\\/g,"/")).substring(c.length,c.lastIndexOf("/")+1),h.push(new n.File(l,c)),a.features.triggerDialog?n.removeEvent(d,"click",a.id):n.removeAllEvents(r,a.id),n.removeEvent(s,"change",a.id),e(),h.length&&i.trigger("FilesAdded",h))}),a.id),r.appendChild(s),p.appendChild(r),a.refresh()}()})),a({success:!0})}})}(window,document,plupload),function(e){var t={};function n(e){return plupload.translate(e)||e}e.fn.pluploadQueue=function(i){return i?(this.each((function(){var o,a,r;function s(t){var n;t.status==plupload.DONE&&(n="plupload_done"),t.status==plupload.FAILED&&(n="plupload_failed"),t.status==plupload.QUEUED&&(n="plupload_delete"),t.status==plupload.UPLOADING&&(n="plupload_uploading");var i=e("#"+t.id).attr("class",n).find("a").css("display","block");t.hint&&i.attr("title",t.hint)}function l(){e("span.plupload_total_status",a).html(o.total.percent+"%"),e("div.plupload_progress_bar",a).css("width",o.total.percent+"%"),e("span.plupload_upload_status",a).html(n("Uploaded %d/%d files").replace(/%d\/%d/,o.total.uploaded+"/"+o.files.length))}function c(){var t,i=e("ul.plupload_filelist",a).html(""),c=0;e.each(o.files,(function(n,a){t="",a.status==plupload.DONE&&(a.target_name&&(t+='<input type="hidden" name="'+r+"_"+c+'_tmpname" value="'+plupload.xmlEncode(a.target_name)+'" />'),t+='<input type="hidden" name="'+r+"_"+c+'_name" value="'+plupload.xmlEncode(a.name)+'" />',t+='<input type="hidden" name="'+r+"_"+c+'_status" value="'+(a.status==plupload.DONE?"done":"failed")+'" />',c++,e("#"+r+"_count").val(c)),i.append('<li id="'+a.id+'"><div class="plupload_file_name"><span>'+a.name+'</span></div><div class="plupload_file_action"><a href="#"></a></div><div class="plupload_file_status">'+a.percent+'%</div><div class="plupload_file_size">'+plupload.formatSize(a.size)+'</div><div class="plupload_clearer">&nbsp;</div>'+t+"</li>"),s(a),e("#"+a.id+".plupload_delete a").click((function(t){e("#"+a.id).remove(),o.removeFile(a),t.preventDefault()}))})),e("span.plupload_total_file_size",a).html(plupload.formatSize(o.total.size)),0===o.total.queued?e("span.plupload_add_text",a).html(n("Add files.")):e("span.plupload_add_text",a).html(o.total.queued+" files queued."),e("a.plupload_start",a).toggleClass("plupload_disabled",o.files.length==o.total.uploaded+o.total.failed),i[0].scrollTop=i[0].scrollHeight,l(),!o.files.length&&o.features.dragdrop&&o.settings.dragdrop&&e("#"+r+"_filelist").append('<li class="plupload_droptext">'+n("Drag files here.")+"</li>")}a=e(this),(r=a.attr("id"))||(r=plupload.guid(),a.attr("id",r)),o=new plupload.Uploader(e.extend({dragdrop:!0,container:r},i)),t[r]=o,o.bind("UploadFile",(function(t,n){e("#"+n.id).addClass("plupload_current_file")})),o.bind("Init",(function(t,s){!function(t,i){i.contents().each((function(t,n){(n=e(n)).is(".plupload")||n.remove()})),i.prepend('<div class="plupload_wrapper plupload_scroll"><div id="'+t+'_container" class="plupload_container"><div class="plupload"><div class="plupload_header"><div class="plupload_header_content"><div class="plupload_header_title">'+n("Select files")+'</div><div class="plupload_header_text">'+n("Add files to the upload queue and click the start button.")+'</div></div></div><div class="plupload_content"><div class="plupload_filelist_header"><div class="plupload_file_name">'+n("Filename")+'</div><div class="plupload_file_action">&nbsp;</div><div class="plupload_file_status"><span>'+n("Status")+'</span></div><div class="plupload_file_size">'+n("Size")+'</div><div class="plupload_clearer">&nbsp;</div></div><ul id="'+t+'_filelist" class="plupload_filelist"></ul><div class="plupload_filelist_footer"><div class="plupload_file_name"><div class="plupload_buttons"><a href="#" class="plupload_button plupload_add">'+n("Add files")+'</a><a href="#" class="plupload_button plupload_start">'+n("Start upload")+'</a></div><span class="plupload_upload_status"></span></div><div class="plupload_file_action"></div><div class="plupload_file_status"><span class="plupload_total_status">0%</span></div><div class="plupload_file_size"><span class="plupload_total_file_size">0 b</span></div><div class="plupload_progress"><div class="plupload_progress_container"><div class="plupload_progress_bar"></div></div></div><div class="plupload_clearer">&nbsp;</div></div></div></div></div><input type="hidden" id="'+t+'_count" name="'+t+'_count" value="0" /></div>')}(r,a),!i.unique_names&&i.rename&&a.on("click","#"+r+"_filelist div.plupload_file_name span",(function(n){var i,o,a,r=e(n.target),s="";a=(i=t.getFile(r.parents("li")[0].id)).name,(o=/^(.+)(\.[^.]+)$/.exec(a))&&(a=o[1],s=o[2]),r.hide().after('<input type="text" />'),r.next().val(a).focus().blur((function(){r.show().next().remove()})).keydown((function(t){var n=e(this);-1!==e.inArray(t.keyCode,[13,27])&&(t.preventDefault(),13===t.keyCode&&(i.name=n.val()+s,r.html(i.name)),n.blur())}))})),e("a.plupload_add",a).attr("id",r+"_browse"),t.settings.browse_button=r+"_browse",t.features.dragdrop&&t.settings.dragdrop&&(t.settings.drop_element=r+"_filelist",e("#"+r+"_filelist").append('<li class="plupload_droptext">'+n("Drag files here.")+"</li>")),e("#"+r+"_container").attr("title","Using runtime: "+s.runtime),e("a.plupload_start",a).click((function(t){e(this).hasClass("plupload_disabled")||o.start(),t.preventDefault()})),e("a.plupload_stop",a).click((function(e){e.preventDefault(),o.stop()})),e("a.plupload_start",a).addClass("plupload_disabled")})),o.init(),o.bind("Error",(function(t,i){var o,a=i.file;a&&(o=i.message,i.details&&(o+=" ("+i.details+")"),i.code==plupload.FILE_SIZE_ERROR&&alert(n("Error: File too large: ")+a.name),i.code==plupload.FILE_EXTENSION_ERROR&&alert(n("Error: Invalid file extension: ")+a.name),a.hint=o,e("#"+a.id).attr("class","plupload_failed").find("a").css("display","block").attr("title",o))})),o.bind("StateChanged",(function(){o.state===plupload.STARTED?(e("li.plupload_delete a,div.plupload_buttons",a).hide(),e("span.plupload_upload_status,div.plupload_progress,a.plupload_stop",a).css("display","block"),e("span.plupload_upload_status",a).html("Uploaded "+o.total.uploaded+"/"+o.files.length+" files"),i.multiple_queues&&e("span.plupload_total_status,span.plupload_total_file_size",a).show()):(c(),e("a.plupload_stop,div.plupload_progress",a).hide(),e("a.plupload_delete",a).css("display","block"))})),o.bind("QueueChanged",c),o.bind("FileUploaded",(function(e,t){s(t)})),o.bind("UploadProgress",(function(t,n){e("#"+n.id+" div.plupload_file_status",a).html(n.percent+"%"),s(n),l(),i.multiple_queues&&o.total.uploaded+o.total.failed==o.files.length&&(e(".plupload_buttons,.plupload_upload_status",a).css("display","inline"),e(".plupload_start",a).addClass("plupload_disabled"),e("span.plupload_total_status,span.plupload_total_file_size",a).hide())})),i.setup&&i.setup(o)})),this):t[e(this[0]).attr("id")]}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}((function(e){"use strict";var t=!1,n=!1,i=0,o=2e3,a=0,r=e,s=document,l=r(window),c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||!1,d=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||!1;if(c)window.cancelAnimationFrame||(d=function(e){});else{var u=0;c=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16-(n-u)),o=window.setTimeout((function(){e(n+i)}),i);return u=n+i,o},d=function(e){window.clearTimeout(e)}}var h=window.MutationObserver||window.WebKitMutationObserver||!1,p=Date.now||function(){return(new Date).getTime()},f={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,emulatetouch:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var e=s.currentScript||function(){var e=s.getElementsByTagName("script");return!!e.length&&e[e.length-1]}(),t=e?e.src.split("?")[0]:"";return t.split("/").length>0?t.split("/").slice(0,-1).join("/")+"/":""}(),preventmultitouchscrolling:!0,disablemutationobserver:!1,enableobserver:!0,scrollbarid:!1},m=!1,g=function(){if(m)return m;var e=s.createElement("DIV"),t=e.style,n=navigator.userAgent,i=navigator.platform,o={};return o.haspointerlock="pointerLockElement"in s||"webkitPointerLockElement"in s||"mozPointerLockElement"in s,o.isopera="opera"in window,o.isopera12=o.isopera&&"getUserMedia"in navigator,o.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),o.isie="all"in s&&"attachEvent"in e&&!o.isopera,o.isieold=o.isie&&!("msInterpolationMode"in t),o.isie7=o.isie&&!o.isieold&&(!("documentMode"in s)||7===s.documentMode),o.isie8=o.isie&&"documentMode"in s&&8===s.documentMode,o.isie9=o.isie&&"performance"in window&&9===s.documentMode,o.isie10=o.isie&&"performance"in window&&10===s.documentMode,o.isie11="msRequestFullscreen"in e&&s.documentMode>=11,o.ismsedge="msCredentials"in window,o.ismozilla="MozAppearance"in t,o.iswebkit=!o.ismsedge&&"WebkitAppearance"in t,o.ischrome=o.iswebkit&&"chrome"in window,o.ischrome38=o.ischrome&&"touchAction"in t,o.ischrome22=!o.ischrome38&&o.ischrome&&o.haspointerlock,o.ischrome26=!o.ischrome38&&o.ischrome&&"transition"in t,o.cantouch="ontouchstart"in s.documentElement||"ontouchstart"in window,o.hasw3ctouch=!!window.PointerEvent&&(navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0),o.hasmstouch=!o.hasw3ctouch&&(window.MSPointerEvent||!1),o.ismac=/^mac$/i.test(i),o.isios=o.cantouch&&/iphone|ipad|ipod/i.test(i),o.isios4=o.isios&&!("seal"in Object),o.isios7=o.isios&&"webkitHidden"in s,o.isios8=o.isios&&"hidden"in s,o.isios10=o.isios&&window.Proxy,o.isandroid=/android/i.test(n),o.haseventlistener="addEventListener"in e,o.trstyle=!1,o.hastransform=!1,o.hastranslate3d=!1,o.transitionstyle=!1,o.hastransition=!1,o.transitionend=!1,o.trstyle="transform",o.hastransform="transform"in t||function(){for(var e=["msTransform","webkitTransform","MozTransform","OTransform"],n=0,i=e.length;n<i;n++)if(void 0!==t[e[n]]){o.trstyle=e[n];break}o.hastransform=!!o.trstyle}(),o.hastransform&&(t[o.trstyle]="translate3d(1px,2px,3px)",o.hastranslate3d=/translate3d/.test(t[o.trstyle])),o.transitionstyle="transition",o.prefixstyle="",o.transitionend="transitionend",o.hastransition="transition"in t||function(){o.transitionend=!1;for(var e=["webkitTransition","msTransition","MozTransition","OTransition","OTransition","KhtmlTransition"],n=["-webkit-","-ms-","-moz-","-o-","-o","-khtml-"],i=["webkitTransitionEnd","msTransitionEnd","transitionend","otransitionend","oTransitionEnd","KhtmlTransitionEnd"],a=0,r=e.length;a<r;a++)if(e[a]in t){o.transitionstyle=e[a],o.prefixstyle=n[a],o.transitionend=i[a];break}o.ischrome26&&(o.prefixstyle=n[1]),o.hastransition=o.transitionstyle}(),o.cursorgrabvalue=function(){var e=["grab","-webkit-grab","-moz-grab"];(o.ischrome&&!o.ischrome38||o.isie)&&(e=[]);for(var n=0,i=e.length;n<i;n++){var a=e[n];if(t.cursor=a,t.cursor==a)return a}return"url(https://cdnjs.cloudflare.com/ajax/libs/slider-pro/1.3.0/css/images/openhand.cur),n-resize"}(),o.hasmousecapture="setCapture"in e,o.hasMutationObserver=!1!==h,e=null,m=o,o},v=function(e,u){function m(){var e=x.doc.css(T.trstyle);return!(!e||"matrix"!=e.substr(0,6))&&e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function v(e,t,n){var i=e.css(t),o=parseFloat(i);if(isNaN(o)){var a=3==(o=N[i]||0)?n?x.win.outerHeight()-x.win.innerHeight():x.win.outerWidth()-x.win.innerWidth():1;return x.isie8&&o&&(o+=1),a?o:0}return o}function y(e,t,n,i){x._bind(e,t,(function(i){var o={original:i=i||window.event,target:i.target||i.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==i.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return i.preventDefault?i.preventDefault():i.returnValue=!1,!1},stopImmediatePropagation:function(){i.stopImmediatePropagation?i.stopImmediatePropagation():i.cancelBubble=!0}};return"mousewheel"==t?(i.wheelDeltaX&&(o.deltaX=-.025*i.wheelDeltaX),i.wheelDeltaY&&(o.deltaY=-.025*i.wheelDeltaY),!o.deltaY&&!o.deltaX&&(o.deltaY=-.025*i.wheelDelta)):o.deltaY=i.detail,n.call(e,o)}),i)}function w(e,t,n){var i,o;if(0==e.deltaMode?(i=-Math.floor(e.deltaX*(x.opt.mousescrollstep/54)),o=-Math.floor(e.deltaY*(x.opt.mousescrollstep/54))):1==e.deltaMode&&(i=-Math.floor(e.deltaX*x.opt.mousescrollstep),o=-Math.floor(e.deltaY*x.opt.mousescrollstep)),t&&x.opt.oneaxismousemode&&0===i&&o&&(i=o,o=0,n&&(i<0?x.getScrollLeft()>=x.page.maxw:x.getScrollLeft()<=0)&&(o=i,i=0)),x.isrtlmode&&(i=-i),i){if(x.scrollmom)x.scrollmom.stop();else if(i<0){if(x.getScrollLeft()>=x.page.maxw)return!0}else if(x.getScrollLeft()<=0)return!0;x.lastdeltax+=i,x.debounced("mousewheelx",(function(){var e=x.lastdeltax;x.lastdeltax=0,x.rail.drag||x.doScrollLeftBy(e)}),15)}if(o){if(x.opt.nativeparentscrolling&&n&&!x.ispage&&!x.zoomactive)if(o<0){if(x.getScrollTop()>=x.page.maxh)return!0}else if(x.getScrollTop()<=0)return!0;x.scrollmom&&x.scrollmom.stop(),x.lastdeltay+=o,x.synched("mousewheely",(function(){var e=x.lastdeltay;x.lastdeltay=0,x.rail.drag||x.doScrollBy(e)}),15)}return e.stopImmediatePropagation(),e.preventDefault()}var x=this;this.version="3.7.3",this.name="nicescroll",this.me=u;var C=r("body");if(this.opt={doc:C,win:!1},r.extend(this.opt,f),this.opt.snapbackspeed=80,e)for(var S in x.opt)void 0!==e[S]&&(x.opt[S]=e[S]);if(x.opt.disablemutationobserver&&(h=!1),this.doc=x.opt.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(x.opt.win?x.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==x.opt.win,this.win=x.opt.win||(this.ispage?l:this.doc),this.docscroll=this.ispage&&!this.haswrapper?l:this.win,this.body=C,this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=x.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,"auto"==this.opt.rtlmode){var _=this.win[0]==window?this.body:this.win,k=_.css("writing-mode")||_.css("-webkit-writing-mode")||_.css("-ms-writing-mode")||_.css("-moz-writing-mode");"horizontal-tb"==k||"lr-tb"==k||""==k?(this.isrtlmode="rtl"==_.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==k||"tb"==k||"tb-rl"==k||"rl-tb"==k,this.isvertical="vertical-rl"==k||"tb"==k||"tb-rl"==k)}else this.isrtlmode=!0===this.opt.rtlmode,this.isvertical=!1;if(this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,this.observerbody=!1,!1===x.opt.scrollbarid)do{this.id="ascrail"+o++}while(s.getElementById(this.id));else this.id=x.opt.scrollbarid;this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=x.opt.overflowx,this.overflowy=x.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=g();var T=r.extend({},this.detected);this.canhwscroll=T.hastransform&&x.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&x.haswrapper,this.isrtlmode?this.isvertical?this.hasreversehr=!(T.iswebkit||T.isie||T.isie11):this.hasreversehr=!(T.iswebkit||T.isie&&!T.isie10&&!T.isie11):this.hasreversehr=!1,this.istouchcapable=!1,(T.cantouch||!T.hasw3ctouch&&!T.hasmstouch)&&(!T.cantouch||T.isios||T.isandroid||!T.iswebkit&&!T.ismozilla)||(this.istouchcapable=!0),x.opt.enablemouselockapi||(T.hasmousecapture=!1,T.haspointerlock=!1),this.debounced=function(e,t,n){x&&(x.delaylist[e]||(x.delaylist[e]={h:c((function(){x.delaylist[e].fn.call(x),x.delaylist[e]=!1}),n)},t.call(x)),x.delaylist[e].fn=t)};var E=!1;this.synched=function(e,t){return x.synclist[e]=t,E||(c((function(){if(x)for(var e in E=!1,x.synclist){var t=x.synclist[e];t&&t.call(x),x.synclist[e]=!1}})),E=!0),e},this.unsynched=function(e){x.synclist[e]&&(x.synclist[e]=!1)},this.css=function(e,t){for(var n in t)x.saved.css.push([e,n,e.css(n)]),e.css(n,t[n])},this.scrollTop=function(e){return void 0===e?x.getScrollTop():x.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?x.getScrollLeft():x.setScrollLeft(e)};var D=function(e,t,n,i,o,a,r){this.st=e,this.ed=t,this.spd=n,this.p1=i||0,this.p2=o||1,this.p3=a||0,this.p4=r||1,this.ts=p(),this.df=this.ed-this.st};if(D.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=1-(p()-this.ts)/this.spd,t=this.B2(e)+this.B3(e)+this.B4(e);return e<0?this.ed:this.st+Math.round(this.df*t)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=p(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},T.hastranslate3d&&T.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var t=m();if(t)return 16==t.length?-t[13]:-t[5];if(x.timerscroll&&x.timerscroll.bz)return x.timerscroll.bz.getNow()}return x.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=m();if(t)return 16==t.length?-t[12]:-t[4];if(x.timerscroll&&x.timerscroll.bh)return x.timerscroll.bh.getNow()}return x.doc.translate.x},this.notifyScrollEvent=function(e){var t=s.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),t.niceevent=!0,e.dispatchEvent(t)};var I=this.isrtlmode?1:-1;T.hastranslate3d&&x.opt.enabletranslate3d?(this.setScrollTop=function(e,t){x.doc.translate.y=e,x.doc.translate.ty=-1*e+"px",x.doc.css(T.trstyle,"translate3d("+x.doc.translate.tx+","+x.doc.translate.ty+",0)"),t||x.notifyScrollEvent(x.win[0])},this.setScrollLeft=function(e,t){x.doc.translate.x=e,x.doc.translate.tx=e*I+"px",x.doc.css(T.trstyle,"translate3d("+x.doc.translate.tx+","+x.doc.translate.ty+",0)"),t||x.notifyScrollEvent(x.win[0])}):(this.setScrollTop=function(e,t){x.doc.translate.y=e,x.doc.translate.ty=-1*e+"px",x.doc.css(T.trstyle,"translate("+x.doc.translate.tx+","+x.doc.translate.ty+")"),t||x.notifyScrollEvent(x.win[0])},this.setScrollLeft=function(e,t){x.doc.translate.x=e,x.doc.translate.tx=e*I+"px",x.doc.css(T.trstyle,"translate("+x.doc.translate.tx+","+x.doc.translate.ty+")"),t||x.notifyScrollEvent(x.win[0])})}else this.getScrollTop=function(){return x.docscroll.scrollTop()},this.setScrollTop=function(e){return setTimeout((function(){x&&x.docscroll.scrollTop(e)}),1)},this.getScrollLeft=function(){return x.hasreversehr?x.detected.ismozilla?x.page.maxw-Math.abs(x.docscroll.scrollLeft()):x.page.maxw-x.docscroll.scrollLeft():x.docscroll.scrollLeft()},this.setScrollLeft=function(e){return setTimeout((function(){if(x)return x.hasreversehr&&(e=x.detected.ismozilla?-(x.page.maxw-e):x.page.maxw-e),x.docscroll.scrollLeft(e)}),1)};this.getTarget=function(e){return!!e&&(e.target?e.target:!!e.srcElement&&e.srcElement)},this.hasParent=function(e,t){if(!e)return!1;for(var n=e.target||e.srcElement||e||!1;n&&n.id!=t;)n=n.parentNode||!1;return!1!==n};var N={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:window.pageYOffset||s.documentElement.scrollTop,left:window.pageXOffset||s.documentElement.scrollLeft}},this.getOffset=function(){if(x.isfixed){var e=x.win.offset(),t=x.getDocumentScrollOffset();return e.top-=t.top,e.left-=t.left,e}var n=x.win.offset();if(!x.viewport)return n;var i=x.viewport.offset();return{top:n.top-i.top,left:n.left-i.left}},this.updateScrollBar=function(e){var t,n;if(x.ishwscroll)x.rail.css({height:x.win.innerHeight()-(x.opt.railpadding.top+x.opt.railpadding.bottom)}),x.railh&&x.railh.css({width:x.win.innerWidth()-(x.opt.railpadding.left+x.opt.railpadding.right)});else{var i=x.getOffset();if((t={top:i.top,left:i.left-(x.opt.railpadding.left+x.opt.railpadding.right)}).top+=v(x.win,"border-top-width",!0),t.left+=x.rail.align?x.win.outerWidth()-v(x.win,"border-right-width")-x.rail.width:v(x.win,"border-left-width"),(n=x.opt.railoffset)&&(n.top&&(t.top+=n.top),n.left&&(t.left+=n.left)),x.railslocked||x.rail.css({top:t.top,left:t.left,height:(e?e.h:x.win.innerHeight())-(x.opt.railpadding.top+x.opt.railpadding.bottom)}),x.zoom&&x.zoom.css({top:t.top+1,left:1==x.rail.align?t.left-20:t.left+x.rail.width+4}),x.railh&&!x.railslocked){t={top:i.top,left:i.left},(n=x.opt.railhoffset)&&(n.top&&(t.top+=n.top),n.left&&(t.left+=n.left));var o=x.railh.align?t.top+v(x.win,"border-top-width",!0)+x.win.innerHeight()-x.railh.height:t.top+v(x.win,"border-top-width",!0),a=t.left+v(x.win,"border-left-width");x.railh.css({top:o-(x.opt.railpadding.top+x.opt.railpadding.bottom),left:a,width:x.railh.width})}}},this.doRailClick=function(e,t,n){var i,o,a,r;x.railslocked||(x.cancelEvent(e),"pageY"in e||(e.pageX=e.clientX+s.documentElement.scrollLeft,e.pageY=e.clientY+s.documentElement.scrollTop),t?(i=n?x.doScrollLeft:x.doScrollTop)(a=n?(e.pageX-x.railh.offset().left-x.cursorwidth/2)*x.scrollratio.x:(e.pageY-x.rail.offset().top-x.cursorheight/2)*x.scrollratio.y):(i=n?x.doScrollLeftBy:x.doScrollBy,a=n?x.scroll.x:x.scroll.y,r=n?e.pageX-x.railh.offset().left:e.pageY-x.rail.offset().top,o=n?x.view.w:x.view.h,i(a>=r?o:-o)))},x.hasanimationframe="requestAnimationFrame"in window,x.hascancelanimationframe="cancelAnimationFrame"in window,this.init=function(){if(x.saved.css=[],T.isoperamini)return!0;if(T.isandroid&&!("hidden"in s))return!0;x.opt.emulatetouch=x.opt.emulatetouch||x.opt.touchbehavior;var e={"overflow-y":"hidden"};if((T.isie11||T.isie10)&&(e["-ms-overflow-style"]="none"),x.zindex="auto",x.ispage||"auto"!=x.opt.zindex?x.zindex=x.opt.zindex:x.zindex=function(){var e=x.win;if("zIndex"in e)return e.zIndex();for(;e.length>0;){if(9==e[0].nodeType)return!1;var t=e.css("zIndex");if(!isNaN(t)&&0!=t)return parseInt(t);e=e.parent()}return!1}()||"auto",!x.ispage&&"auto"!=x.zindex&&x.zindex>a&&(a=x.zindex),x.isie&&0==x.zindex&&"auto"==x.opt.zindex&&(x.zindex="auto"),!x.ispage||!T.cantouch&&!T.isieold){var o=x.docscroll;x.ispage&&(o=x.haswrapper?x.win:x.doc),x.css(o,e),x.ispage&&(T.isie11||T.isie)&&x.css(r("html"),e),!T.isios||x.ispage||x.haswrapper||x.css(C,{"-webkit-overflow-scrolling":"touch"});var c=r(s.createElement("div"));c.css({position:"relative",top:0,float:"right",width:x.opt.cursorwidth,height:0,"background-color":x.opt.cursorcolor,border:x.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":x.opt.cursorborderradius,"-moz-border-radius":x.opt.cursorborderradius,"border-radius":x.opt.cursorborderradius}),c.addClass("nicescroll-cursors"),x.cursor=c;var d=r(s.createElement("div"));d.attr("id",x.id),d.addClass("nicescroll-rails nicescroll-rails-vr");var u,p,f=["left","right","top","bottom"];for(var m in f)p=f[m],(u=x.opt.railpadding[p])?d.css("padding-"+p,u+"px"):x.opt.railpadding[p]=0;d.append(c),d.width=Math.max(parseFloat(x.opt.cursorwidth),c.outerWidth()),d.css({width:d.width+"px",zIndex:x.zindex,background:x.opt.background,cursor:"default"}),d.visibility=!0,d.scrollable=!0,d.align="left"==x.opt.railalign?0:1,x.rail=d,x.rail.drag=!1;var g,v=!1;if(!x.opt.boxzoom||x.ispage||T.isieold||(v=s.createElement("div"),x.bind(v,"click",x.doZoom),x.bind(v,"mouseenter",(function(){x.zoom.css("opacity",x.opt.cursoropacitymax)})),x.bind(v,"mouseleave",(function(){x.zoom.css("opacity",x.opt.cursoropacitymin)})),x.zoom=r(v),x.zoom.css({cursor:"pointer",zIndex:x.zindex,backgroundImage:"url("+x.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0 0"}),x.opt.dblclickzoom&&x.bind(x.win,"dblclick",x.doZoom),T.cantouch&&x.opt.gesturezoom&&(x.ongesturezoom=function(e){return e.scale>1.5&&x.doZoomIn(e),e.scale<.8&&x.doZoomOut(e),x.cancelEvent(e)},x.bind(x.win,"gestureend",x.ongesturezoom))),x.railh=!1,x.opt.horizrailenabled&&(x.css(o,{overflowX:"hidden"}),(c=r(s.createElement("div"))).css({position:"absolute",top:0,height:x.opt.cursorwidth,width:0,backgroundColor:x.opt.cursorcolor,border:x.opt.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":x.opt.cursorborderradius,"-moz-border-radius":x.opt.cursorborderradius,"border-radius":x.opt.cursorborderradius}),T.isieold&&c.css("overflow","hidden"),c.addClass("nicescroll-cursors"),x.cursorh=c,(g=r(s.createElement("div"))).attr("id",x.id+"-hr"),g.addClass("nicescroll-rails nicescroll-rails-hr"),g.height=Math.max(parseFloat(x.opt.cursorwidth),c.outerHeight()),g.css({height:g.height+"px",zIndex:x.zindex,background:x.opt.background}),g.append(c),g.visibility=!0,g.scrollable=!0,g.align="top"==x.opt.railvalign?0:1,x.railh=g,x.railh.drag=!1),x.ispage)d.css({position:"fixed",top:0,height:"100%"}),d.align?d.css({right:0}):d.css({left:0}),x.body.append(d),x.railh&&(g.css({position:"fixed",left:0,width:"100%"}),g.align?g.css({bottom:0}):g.css({top:0}),x.body.append(g));else{if(x.ishwscroll){"static"==x.win.css("position")&&x.css(x.win,{position:"relative"});var y="HTML"==x.win[0].nodeName?x.body:x.win;r(y).scrollTop(0).scrollLeft(0),x.zoom&&(x.zoom.css({position:"absolute",top:1,right:0,"margin-right":d.width+4}),y.append(x.zoom)),d.css({position:"absolute",top:0}),d.align?d.css({right:0}):d.css({left:0}),y.append(d),g&&(g.css({position:"absolute",left:0,bottom:0}),g.align?g.css({bottom:0}):g.css({top:0}),y.append(g))}else{x.isfixed="fixed"==x.win.css("position");var w=x.isfixed?"fixed":"absolute";x.isfixed||(x.viewport=x.getViewport(x.win[0])),x.viewport&&(x.body=x.viewport,0==/fixed|absolute/.test(x.viewport.css("position"))&&x.css(x.viewport,{position:"relative"})),d.css({position:w}),x.zoom&&x.zoom.css({position:w}),x.updateScrollBar(),x.body.append(d),x.zoom&&x.body.append(x.zoom),x.railh&&(g.css({position:w}),x.body.append(g))}T.isios&&x.css(x.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),T.isie&&x.opt.disableoutline&&x.win.attr("hideFocus","true"),T.iswebkit&&x.opt.disableoutline&&x.win.css("outline","none")}if(!1===x.opt.autohidemode?(x.autohidedom=!1,x.rail.css({opacity:x.opt.cursoropacitymax}),x.railh&&x.railh.css({opacity:x.opt.cursoropacitymax})):!0===x.opt.autohidemode||"leave"===x.opt.autohidemode?(x.autohidedom=r().add(x.rail),T.isie8&&(x.autohidedom=x.autohidedom.add(x.cursor)),x.railh&&(x.autohidedom=x.autohidedom.add(x.railh)),x.railh&&T.isie8&&(x.autohidedom=x.autohidedom.add(x.cursorh))):"scroll"==x.opt.autohidemode?(x.autohidedom=r().add(x.rail),x.railh&&(x.autohidedom=x.autohidedom.add(x.railh))):"cursor"==x.opt.autohidemode?(x.autohidedom=r().add(x.cursor),x.railh&&(x.autohidedom=x.autohidedom.add(x.cursorh))):"hidden"==x.opt.autohidemode&&(x.autohidedom=!1,x.hide(),x.railslocked=!1),T.cantouch||x.istouchcapable||x.opt.emulatetouch||T.hasmstouch){x.scrollmom=new b(x),x.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(x.hasmoving=!1,!x.railslocked){var t;if(T.hasmstouch)for(t=!!e.target&&e.target;t;){var n=r(t).getNiceScroll();if(n.length>0&&n[0].me==x.me)break;if(n.length>0)return!1;if("DIV"==t.nodeName&&t.id==x.id)break;t=!!t.parentNode&&t.parentNode}if(e.stopPropagation(),x.cancelScroll(),(t=x.getTarget(e))&&/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return x.stopPropagation(e);if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),x.forcescreen){var i=e;(e={original:e.original?e.original:e}).clientX=i.screenX,e.clientY=i.screenY}if(x.rail.drag={x:e.clientX,y:e.clientY,sx:x.scroll.x,sy:x.scroll.y,st:x.getScrollTop(),sl:x.getScrollLeft(),pt:2,dl:!1,tg:t},x.ispage||!x.opt.directionlockdeadzone)x.rail.drag.dl="f";else{var o={w:l.width(),h:l.height()},a={w:Math.max(s.body.scrollWidth,s.documentElement.scrollWidth),h:Math.max(s.body.scrollHeight,s.documentElement.scrollHeight)},c=Math.max(0,a.h-o.h),d=Math.max(0,a.w-o.w);!x.rail.scrollable&&x.railh.scrollable?x.rail.drag.ck=c>0&&"v":x.rail.scrollable&&!x.railh.scrollable?x.rail.drag.ck=d>0&&"h":x.rail.drag.ck=!1,x.rail.drag.ck||(x.rail.drag.dl="f")}if(x.opt.emulatetouch&&x.isiframe&&T.isie){var u=x.win.position();x.rail.drag.x+=u.left,x.rail.drag.y+=u.top}if(x.hasmoving=!1,x.lastmouseup=!1,x.scrollmom.reset(e.clientX,e.clientY),!T.cantouch&&!this.istouchcapable&&!e.pointerType){if(!t||!/INPUT|SELECT|BUTTON|TEXTAREA/i.test(t.nodeName))return!x.ispage&&T.hasmousecapture&&t.setCapture(),x.opt.emulatetouch?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.onclick=function(e){if(x.hasmoving)return!1;t._onclick.call(this,e)}),x.cancelEvent(e)):x.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(r(t).attr("type"))&&(x.preventclick={tg:t,click:!1})}}},x.ontouchend=function(e){if(!x.rail.drag)return!0;if(2==x.rail.drag.pt){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(x.rail.drag=!1,x.hasmoving&&(x.scrollmom.doMomentum(),x.lastmouseup=!0,x.hideCursor(),T.hasmousecapture&&s.releaseCapture(),!T.cantouch))return x.cancelEvent(e)}else if(1==x.rail.drag.pt)return x.onmouseup(e)};var S=x.opt.emulatetouch&&x.isiframe&&!T.hasmousecapture;x.ontouchmove=function(e,t){if(!x.rail.drag)return!1;if(e.targetTouches&&x.opt.preventmultitouchscrolling&&e.targetTouches.length>1)return!1;if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(2==x.rail.drag.pt){if("changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),x.rail.drag.y===e.clientY&&x.rail.drag.x===e.clientX)return!1;var n,i;if(x.hasmoving||x.onscrollstart&&x.triggerScrollStart(e.clientX,e.clientY,0,0,0),x.hasmoving=!0,x.preventclick&&!x.preventclick.click&&(x.preventclick.click=x.preventclick.tg.onclick||!1,x.preventclick.tg.onclick=x.onpreventclick),i=n=0,S&&!t){var o=x.win.position();i=-o.left,n=-o.top}var a,r=e.clientY+n,l=r-x.rail.drag.y,c=e.clientX+i,d=c-x.rail.drag.x,u=x.rail.drag.st-l;x.ishwscroll&&x.opt.bouncescroll?u<0?u=Math.round(u/2):u>x.page.maxh&&(u=x.page.maxh+Math.round((u-x.page.maxh)/2)):(u<0&&(u=0,r=0),u>x.page.maxh&&(u=x.page.maxh,r=0)),x.railh&&x.railh.scrollable&&(a=x.isrtlmode?d-x.rail.drag.sl:x.rail.drag.sl-d,x.ishwscroll&&x.opt.bouncescroll?a<0?a=Math.round(a/2):a>x.page.maxw&&(a=x.page.maxw+Math.round((a-x.page.maxw)/2)):(a<0&&(a=0,c=0),a>x.page.maxw&&(a=x.page.maxw,c=0)));var h=!1;if(x.rail.drag.dl)h=!0,"v"==x.rail.drag.dl?a=x.rail.drag.sl:"h"==x.rail.drag.dl&&(u=x.rail.drag.st);else{var p=Math.abs(l),f=Math.abs(d),m=x.opt.directionlockdeadzone;if("v"==x.rail.drag.ck){if(p>m&&f<=.3*p)return x.rail.drag=!1,!0;f>m&&(x.rail.drag.dl="f",C.scrollTop(C.scrollTop()))}else if("h"==x.rail.drag.ck){if(f>m&&p<=.3*f)return x.rail.drag=!1,!0;p>m&&(x.rail.drag.dl="f",C.scrollLeft(C.scrollLeft()))}}if(x.synched("touchmove",(function(){x.rail.drag&&2==x.rail.drag.pt&&(x.prepareTransition&&x.prepareTransition(0),x.rail.scrollable&&x.setScrollTop(u),x.scrollmom.update(c,r),x.railh&&x.railh.scrollable?(x.setScrollLeft(a),x.showCursor(u,a)):x.showCursor(u),T.isie10&&s.selection.clear())})),T.ischrome&&x.istouchcapable&&(h=!1),h)return x.cancelEvent(e)}else if(1==x.rail.drag.pt)return x.onmousemove(e)},x.ontouchstartCursor=function(e,t){if(!x.rail.drag||3==x.rail.drag.pt){if(x.locked)return x.cancelEvent(e);x.cancelScroll(),x.rail.drag={x:e.touches[0].clientX,y:e.touches[0].clientY,sx:x.scroll.x,sy:x.scroll.y,pt:3,hr:!!t};var n=x.getTarget(e);return!x.ispage&&T.hasmousecapture&&n.setCapture(),x.isiframe&&!T.hasmousecapture&&(x.saved.csspointerevents=x.doc.css("pointer-events"),x.css(x.doc,{"pointer-events":"none"})),x.cancelEvent(e)}},x.ontouchendCursor=function(e){if(x.rail.drag){if(T.hasmousecapture&&s.releaseCapture(),x.isiframe&&!T.hasmousecapture&&x.doc.css("pointer-events",x.saved.csspointerevents),3!=x.rail.drag.pt)return;return x.rail.drag=!1,x.cancelEvent(e)}},x.ontouchmoveCursor=function(e){if(x.rail.drag){if(3!=x.rail.drag.pt)return;if(x.cursorfreezed=!0,x.rail.drag.hr){x.scroll.x=x.rail.drag.sx+(e.touches[0].clientX-x.rail.drag.x),x.scroll.x<0&&(x.scroll.x=0);var t=x.scrollvaluemaxw;x.scroll.x>t&&(x.scroll.x=t)}else{x.scroll.y=x.rail.drag.sy+(e.touches[0].clientY-x.rail.drag.y),x.scroll.y<0&&(x.scroll.y=0);var n=x.scrollvaluemax;x.scroll.y>n&&(x.scroll.y=n)}return x.synched("touchmove",(function(){x.rail.drag&&3==x.rail.drag.pt&&(x.showCursor(),x.rail.drag.hr?x.doScrollLeft(Math.round(x.scroll.x*x.scrollratio.x),x.opt.cursordragspeed):x.doScrollTop(Math.round(x.scroll.y*x.scrollratio.y),x.opt.cursordragspeed))})),x.cancelEvent(e)}}}if(x.onmousedown=function(e,t){if(!x.rail.drag||1==x.rail.drag.pt){if(x.railslocked)return x.cancelEvent(e);x.cancelScroll(),x.rail.drag={x:e.clientX,y:e.clientY,sx:x.scroll.x,sy:x.scroll.y,pt:1,hr:t||!1};var n=x.getTarget(e);return!x.ispage&&T.hasmousecapture&&n.setCapture(),x.isiframe&&!T.hasmousecapture&&(x.saved.csspointerevents=x.doc.css("pointer-events"),x.css(x.doc,{"pointer-events":"none"})),x.hasmoving=!1,x.cancelEvent(e)}},x.onmouseup=function(e){if(x.rail.drag)return 1!=x.rail.drag.pt||(T.hasmousecapture&&s.releaseCapture(),x.isiframe&&!T.hasmousecapture&&x.doc.css("pointer-events",x.saved.csspointerevents),x.rail.drag=!1,x.hasmoving&&x.triggerScrollEnd(),x.cancelEvent(e))},x.onmousemove=function(e){if(x.rail.drag){if(1!==x.rail.drag.pt)return;if(T.ischrome&&0===e.which)return x.onmouseup(e);if(x.cursorfreezed=!0,x.hasmoving=!0,x.rail.drag.hr){x.scroll.x=x.rail.drag.sx+(e.clientX-x.rail.drag.x),x.scroll.x<0&&(x.scroll.x=0);var t=x.scrollvaluemaxw;x.scroll.x>t&&(x.scroll.x=t)}else{x.scroll.y=x.rail.drag.sy+(e.clientY-x.rail.drag.y),x.scroll.y<0&&(x.scroll.y=0);var n=x.scrollvaluemax;x.scroll.y>n&&(x.scroll.y=n)}return x.synched("mousemove",(function(){x.rail.drag&&1==x.rail.drag.pt&&(x.showCursor(),x.rail.drag.hr?x.hasreversehr?x.doScrollLeft(x.scrollvaluemaxw-Math.round(x.scroll.x*x.scrollratio.x),x.opt.cursordragspeed):x.doScrollLeft(Math.round(x.scroll.x*x.scrollratio.x),x.opt.cursordragspeed):x.doScrollTop(Math.round(x.scroll.y*x.scrollratio.y),x.opt.cursordragspeed))})),x.cancelEvent(e)}x.checkarea=0},T.cantouch||x.opt.emulatetouch)x.onpreventclick=function(e){if(x.preventclick)return x.preventclick.tg.onclick=x.preventclick.click,x.preventclick=!1,x.cancelEvent(e)},x.onclick=!T.isios&&function(e){return!x.lastmouseup||(x.lastmouseup=!1,x.cancelEvent(e))},x.opt.grabcursorenabled&&T.cursorgrabvalue&&(x.css(x.ispage?x.doc:x.win,{cursor:T.cursorgrabvalue}),x.css(x.rail,{cursor:T.cursorgrabvalue}));else{var _=function(e){if(x.selectiondrag){if(e){var t=x.win.outerHeight(),n=e.pageY-x.selectiondrag.top;n>0&&n<t&&(n=0),n>=t&&(n-=t),x.selectiondrag.df=n}if(0!=x.selectiondrag.df){var i=2*-Math.floor(x.selectiondrag.df/6);x.doScrollBy(i),x.debounced("doselectionscroll",(function(){_()}),50)}}};x.hasTextSelected="getSelection"in s?function(){return s.getSelection().rangeCount>0}:"selection"in s?function(){return"None"!=s.selection.type}:function(){return!1},x.onselectionstart=function(e){x.ispage||(x.selectiondrag=x.win.offset())},x.onselectionend=function(e){x.selectiondrag=!1},x.onselectiondrag=function(e){x.selectiondrag&&x.hasTextSelected()&&x.debounced("selectionscroll",(function(){_(e)}),250)}}if(T.hasw3ctouch?(x.css(x.ispage?r("html"):x.win,{"touch-action":"none"}),x.css(x.rail,{"touch-action":"none"}),x.css(x.cursor,{"touch-action":"none"}),x.bind(x.win,"pointerdown",x.ontouchstart),x.bind(s,"pointerup",x.ontouchend),x.bind(s,"pointermove",x.ontouchmove)):T.hasmstouch?(x.css(x.ispage?r("html"):x.win,{"-ms-touch-action":"none"}),x.css(x.rail,{"-ms-touch-action":"none"}),x.css(x.cursor,{"-ms-touch-action":"none"}),x.bind(x.win,"MSPointerDown",x.ontouchstart),x.bind(s,"MSPointerUp",x.ontouchend),x.bind(s,"MSPointerMove",x.ontouchmove),x.bind(x.cursor,"MSGestureHold",(function(e){e.preventDefault()})),x.bind(x.cursor,"contextmenu",(function(e){e.preventDefault()}))):T.cantouch&&(x.bind(x.win,"touchstart",x.ontouchstart,!1,!0),x.bind(s,"touchend",x.ontouchend,!1,!0),x.bind(s,"touchcancel",x.ontouchend,!1,!0),x.bind(s,"touchmove",x.ontouchmove,!1,!0)),x.opt.emulatetouch&&(x.bind(x.win,"mousedown",x.ontouchstart,!1,!0),x.bind(s,"mouseup",x.ontouchend,!1,!0),x.bind(s,"mousemove",x.ontouchmove,!1,!0)),(x.opt.cursordragontouch||!T.cantouch&&!x.opt.emulatetouch)&&(x.rail.css({cursor:"default"}),x.railh&&x.railh.css({cursor:"default"}),x.jqbind(x.rail,"mouseenter",(function(){if(!x.ispage&&!x.win.is(":visible"))return!1;x.canshowonmouseevent&&x.showCursor(),x.rail.active=!0})),x.jqbind(x.rail,"mouseleave",(function(){x.rail.active=!1,x.rail.drag||x.hideCursor()})),x.opt.sensitiverail&&(x.bind(x.rail,"click",(function(e){x.doRailClick(e,!1,!1)})),x.bind(x.rail,"dblclick",(function(e){x.doRailClick(e,!0,!1)})),x.bind(x.cursor,"click",(function(e){x.cancelEvent(e)})),x.bind(x.cursor,"dblclick",(function(e){x.cancelEvent(e)}))),x.railh&&(x.jqbind(x.railh,"mouseenter",(function(){if(!x.ispage&&!x.win.is(":visible"))return!1;x.canshowonmouseevent&&x.showCursor(),x.rail.active=!0})),x.jqbind(x.railh,"mouseleave",(function(){x.rail.active=!1,x.rail.drag||x.hideCursor()})),x.opt.sensitiverail&&(x.bind(x.railh,"click",(function(e){x.doRailClick(e,!1,!0)})),x.bind(x.railh,"dblclick",(function(e){x.doRailClick(e,!0,!0)})),x.bind(x.cursorh,"click",(function(e){x.cancelEvent(e)})),x.bind(x.cursorh,"dblclick",(function(e){x.cancelEvent(e)}))))),x.opt.cursordragontouch&&(this.istouchcapable||T.cantouch)&&(x.bind(x.cursor,"touchstart",x.ontouchstartCursor),x.bind(x.cursor,"touchmove",x.ontouchmoveCursor),x.bind(x.cursor,"touchend",x.ontouchendCursor),x.cursorh&&x.bind(x.cursorh,"touchstart",(function(e){x.ontouchstartCursor(e,!0)})),x.cursorh&&x.bind(x.cursorh,"touchmove",x.ontouchmoveCursor),x.cursorh&&x.bind(x.cursorh,"touchend",x.ontouchendCursor)),T.cantouch||x.opt.emulatetouch?(x.bind(T.hasmousecapture?x.win:s,"mouseup",x.ontouchend),x.onclick&&x.bind(s,"click",x.onclick),x.opt.cursordragontouch?(x.bind(x.cursor,"mousedown",x.onmousedown),x.bind(x.cursor,"mouseup",x.onmouseup),x.cursorh&&x.bind(x.cursorh,"mousedown",(function(e){x.onmousedown(e,!0)})),x.cursorh&&x.bind(x.cursorh,"mouseup",x.onmouseup)):(x.bind(x.rail,"mousedown",(function(e){e.preventDefault()})),x.railh&&x.bind(x.railh,"mousedown",(function(e){e.preventDefault()})))):(x.bind(T.hasmousecapture?x.win:s,"mouseup",x.onmouseup),x.bind(s,"mousemove",x.onmousemove),x.onclick&&x.bind(s,"click",x.onclick),x.bind(x.cursor,"mousedown",x.onmousedown),x.bind(x.cursor,"mouseup",x.onmouseup),x.railh&&(x.bind(x.cursorh,"mousedown",(function(e){x.onmousedown(e,!0)})),x.bind(x.cursorh,"mouseup",x.onmouseup)),!x.ispage&&x.opt.enablescrollonselection&&(x.bind(x.win[0],"mousedown",x.onselectionstart),x.bind(s,"mouseup",x.onselectionend),x.bind(x.cursor,"mouseup",x.onselectionend),x.cursorh&&x.bind(x.cursorh,"mouseup",x.onselectionend),x.bind(s,"mousemove",x.onselectiondrag)),x.zoom&&(x.jqbind(x.zoom,"mouseenter",(function(){x.canshowonmouseevent&&x.showCursor(),x.rail.active=!0})),x.jqbind(x.zoom,"mouseleave",(function(){x.rail.active=!1,x.rail.drag||x.hideCursor()})))),x.opt.enablemousewheel&&(x.isiframe||x.mousewheel(T.isie&&x.ispage?s:x.win,x.onmousewheel),x.mousewheel(x.rail,x.onmousewheel),x.railh&&x.mousewheel(x.railh,x.onmousewheelhr)),x.ispage||T.cantouch||/HTML|^BODY/.test(x.win[0].nodeName)||(x.win.attr("tabindex")||x.win.attr({tabindex:++i}),x.bind(x.win,"focus",(function(e){t=x.getTarget(e).id||!0,x.hasfocus=!0,x.canshowonmouseevent&&x.noticeCursor()})),x.bind(x.win,"blur",(function(e){t=!1,x.hasfocus=!1})),x.bind(x.win,"mouseenter",(function(e){n=x.getTarget(e).id||!0,x.hasmousefocus=!0,x.canshowonmouseevent&&x.noticeCursor()})),x.bind(x.win,"mouseleave",(function(e){n=!1,x.hasmousefocus=!1,x.rail.drag||x.hideCursor()}))),x.onkeypress=function(e){if(x.railslocked&&0==x.page.maxh)return!0;e=e||window.e;var i=x.getTarget(e);if(i&&/INPUT|TEXTAREA|SELECT|OPTION/.test(i.nodeName)&&(!i.getAttribute("type")&&!i.type||!/submit|button|cancel/i.tp))return!0;if(r(i).attr("contenteditable"))return!0;if(x.hasfocus||x.hasmousefocus&&!t||x.ispage&&!t&&!n){var o=e.keyCode;if(x.railslocked&&27!=o)return x.cancelEvent(e);var a=e.ctrlKey||!1,s=e.shiftKey||!1,l=!1;switch(o){case 38:case 63233:x.doScrollBy(72),l=!0;break;case 40:case 63235:x.doScrollBy(-72),l=!0;break;case 37:case 63232:x.railh&&(a?x.doScrollLeft(0):x.doScrollLeftBy(72),l=!0);break;case 39:case 63234:x.railh&&(a?x.doScrollLeft(x.page.maxw):x.doScrollLeftBy(-72),l=!0);break;case 33:case 63276:x.doScrollBy(x.view.h),l=!0;break;case 34:case 63277:x.doScrollBy(-x.view.h),l=!0;break;case 36:case 63273:x.railh&&a?x.doScrollPos(0,0):x.doScrollTo(0),l=!0;break;case 35:case 63275:x.railh&&a?x.doScrollPos(x.page.maxw,x.page.maxh):x.doScrollTo(x.page.maxh),l=!0;break;case 32:x.opt.spacebarenabled&&(s?x.doScrollBy(x.view.h):x.doScrollBy(-x.view.h),l=!0);break;case 27:x.zoomactive&&(x.doZoom(),l=!0)}if(l)return x.cancelEvent(e)}},x.opt.enablekeyboard&&x.bind(s,T.isopera&&!T.isopera12?"keypress":"keydown",x.onkeypress),x.bind(s,"keydown",(function(e){e.ctrlKey&&(x.wheelprevented=!0)})),x.bind(s,"keyup",(function(e){e.ctrlKey||(x.wheelprevented=!1)})),x.bind(window,"blur",(function(e){x.wheelprevented=!1})),x.bind(window,"resize",x.lazyResize),x.bind(window,"orientationchange",x.lazyResize),x.bind(window,"load",x.lazyResize),T.ischrome&&!x.ispage&&!x.haswrapper){var k=x.win.attr("style"),E=parseFloat(x.win.css("width"))+1;x.win.css("width",E),x.synched("chromefix",(function(){x.win.attr("style",k)}))}x.onAttributeChange=function(e){x.lazyResize(x.isieold?250:30)},x.opt.enableobserver&&(x.isie11||!1===h||(x.observerbody=new h((function(e){if(e.forEach((function(e){if("attributes"==e.type)return C.hasClass("modal-open")&&C.hasClass("modal-dialog")&&!r.contains(r(".modal-dialog")[0],x.doc[0])?x.hide():x.show()})),x.me.clientWidth!=x.page.width||x.me.clientHeight!=x.page.height)return x.lazyResize(30)})),x.observerbody.observe(s.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),x.ispage||x.haswrapper||(!1!==h?(x.observer=new h((function(e){e.forEach(x.onAttributeChange)})),x.observer.observe(x.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),x.observerremover=new h((function(e){e.forEach((function(e){if(e.removedNodes.length>0)for(var t in e.removedNodes)if(x&&e.removedNodes[t]==x.win[0])return x.remove()}))})),x.observerremover.observe(x.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(x.bind(x.win,T.isie&&!T.isie9?"propertychange":"DOMAttrModified",x.onAttributeChange),T.isie9&&x.win[0].attachEvent("onpropertychange",x.onAttributeChange),x.bind(x.win,"DOMNodeRemoved",(function(e){e.target==x.win[0]&&x.remove()}))))),!x.ispage&&x.opt.boxzoom&&x.bind(window,"resize",x.resizeZoom),x.istextarea&&(x.bind(x.win,"keydown",x.lazyResize),x.bind(x.win,"mouseup",x.lazyResize)),x.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var D=function(){var t;x.iframexd=!1;try{(t="contentDocument"in this?this.contentDocument:this.contentWindow._doc).domain}catch(e){x.iframexd=!0,t=!1}if(x.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(x.forcescreen=!0,x.isiframe&&(x.iframe={doc:r(t),html:x.doc.contents().find("html")[0],body:x.doc.contents().find("body")[0]},x.getContentSize=function(){return{w:Math.max(x.iframe.html.scrollWidth,x.iframe.body.scrollWidth),h:Math.max(x.iframe.html.scrollHeight,x.iframe.body.scrollHeight)}},x.docscroll=r(x.iframe.body)),!T.isios&&x.opt.iframeautoresize&&!x.isiframe){x.win.scrollTop(0),x.doc.height("");var n=Math.max(t.getElementsByTagName("html")[0].scrollHeight,t.body.scrollHeight);x.doc.height(n)}x.lazyResize(30),x.css(r(x.iframe.body),e),T.isios&&x.haswrapper&&x.css(r(t.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?x.bind(this.contentWindow,"scroll",x.onscroll):x.bind(t,"scroll",x.onscroll),x.opt.enablemousewheel&&x.mousewheel(t,x.onmousewheel),x.opt.enablekeyboard&&x.bind(t,T.isopera?"keypress":"keydown",x.onkeypress),T.cantouch?(x.bind(t,"touchstart",x.ontouchstart),x.bind(t,"touchmove",x.ontouchmove)):x.opt.emulatetouch&&(x.bind(t,"mousedown",x.ontouchstart),x.bind(t,"mousemove",(function(e){return x.ontouchmove(e,!0)})),x.opt.grabcursorenabled&&T.cursorgrabvalue&&x.css(r(t.body),{cursor:T.cursorgrabvalue})),x.bind(t,"mouseup",x.ontouchend),x.zoom&&(x.opt.dblclickzoom&&x.bind(t,"dblclick",x.doZoom),x.ongesturezoom&&x.bind(t,"gestureend",x.ongesturezoom))};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout((function(){D.call(x.doc[0],!1)}),500),x.bind(this.doc,"load",D)}},this.showCursor=function(e,t){if(x.cursortimeout&&(clearTimeout(x.cursortimeout),x.cursortimeout=0),x.rail){if(x.autohidedom&&(x.autohidedom.stop().css({opacity:x.opt.cursoropacitymax}),x.cursoractive=!0),x.rail.drag&&1==x.rail.drag.pt||(void 0!==e&&!1!==e&&(x.scroll.y=Math.round(1*e/x.scrollratio.y)),void 0!==t&&(x.scroll.x=Math.round(1*t/x.scrollratio.x))),x.cursor.css({height:x.cursorheight,top:x.scroll.y}),x.cursorh){var n=x.hasreversehr?x.scrollvaluemaxw-x.scroll.x:x.scroll.x;!x.rail.align&&x.rail.visibility?x.cursorh.css({width:x.cursorwidth,left:n+x.rail.width}):x.cursorh.css({width:x.cursorwidth,left:n}),x.cursoractive=!0}x.zoom&&x.zoom.stop().css({opacity:x.opt.cursoropacitymax})}},this.hideCursor=function(e){x.cursortimeout||x.rail&&x.autohidedom&&(x.hasmousefocus&&"leave"==x.opt.autohidemode||(x.cursortimeout=setTimeout((function(){x.rail.active&&x.showonmouseevent||(x.autohidedom.stop().animate({opacity:x.opt.cursoropacitymin}),x.zoom&&x.zoom.stop().animate({opacity:x.opt.cursoropacitymin}),x.cursoractive=!1),x.cursortimeout=0}),e||x.opt.hidecursordelay)))},this.noticeCursor=function(e,t,n){x.showCursor(t,n),x.rail.active||x.hideCursor(e)},this.getContentSize=x.ispage?function(){return{w:Math.max(s.body.scrollWidth,s.documentElement.scrollWidth),h:Math.max(s.body.scrollHeight,s.documentElement.scrollHeight)}}:x.haswrapper?function(){return{w:x.doc[0].offsetWidth,h:x.doc[0].offsetHeight}}:function(){return{w:x.docscroll[0].scrollWidth,h:x.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!x||!x.win)return!1;if(!x.haswrapper&&!x.ispage){if("none"==x.win.css("display"))return x.visibility&&x.hideRail().hideRailHr(),!1;x.hidden||x.visibility||x.showRail().showRailHr()}var n=x.page.maxh,i=x.page.maxw,o=x.view.h,a=x.view.w;if(x.view={w:x.ispage?x.win.width():x.win[0].clientWidth,h:x.ispage?x.win.height():x.win[0].clientHeight},x.page=t||x.getContentSize(),x.page.maxh=Math.max(0,x.page.h-x.view.h),x.page.maxw=Math.max(0,x.page.w-x.view.w),x.page.maxh==n&&x.page.maxw==i&&x.view.w==a&&x.view.h==o){if(x.ispage)return x;var r=x.win.offset();if(x.lastposition){var s=x.lastposition;if(s.top==r.top&&s.left==r.left)return x}x.lastposition=r}return 0===x.page.maxh?(x.hideRail(),x.scrollvaluemax=0,x.scroll.y=0,x.scrollratio.y=0,x.cursorheight=0,x.setScrollTop(0),x.rail&&(x.rail.scrollable=!1)):(x.page.maxh-=x.opt.railpadding.top+x.opt.railpadding.bottom,x.rail.scrollable=!0),0===x.page.maxw?(x.hideRailHr(),x.scrollvaluemaxw=0,x.scroll.x=0,x.scrollratio.x=0,x.cursorwidth=0,x.setScrollLeft(0),x.railh&&(x.railh.scrollable=!1)):(x.page.maxw-=x.opt.railpadding.left+x.opt.railpadding.right,x.railh&&(x.railh.scrollable=x.opt.horizrailenabled)),x.railslocked=x.locked||0===x.page.maxh&&0===x.page.maxw,x.railslocked?(x.ispage||x.updateScrollBar(x.view),!1):(x.hidden||x.visibility?!x.railh||x.hidden||x.railh.visibility||x.showRailHr():x.showRail().showRailHr(),x.istextarea&&x.win.css("resize")&&"none"!=x.win.css("resize")&&(x.view.h-=20),x.cursorheight=Math.min(x.view.h,Math.round(x.view.h*(x.view.h/x.page.h))),x.cursorheight=x.opt.cursorfixedheight?x.opt.cursorfixedheight:Math.max(x.opt.cursorminheight,x.cursorheight),x.cursorwidth=Math.min(x.view.w,Math.round(x.view.w*(x.view.w/x.page.w))),x.cursorwidth=x.opt.cursorfixedheight?x.opt.cursorfixedheight:Math.max(x.opt.cursorminheight,x.cursorwidth),x.scrollvaluemax=x.view.h-x.cursorheight-(x.opt.railpadding.top+x.opt.railpadding.bottom),x.railh&&(x.railh.width=x.page.maxh>0?x.view.w-x.rail.width:x.view.w,x.scrollvaluemaxw=x.railh.width-x.cursorwidth-(x.opt.railpadding.left+x.opt.railpadding.right)),x.ispage||x.updateScrollBar(x.view),x.scrollratio={x:x.page.maxw/x.scrollvaluemaxw,y:x.page.maxh/x.scrollvaluemax},x.getScrollTop()>x.page.maxh?x.doScrollTop(x.page.maxh):(x.scroll.y=Math.round(x.getScrollTop()*(1/x.scrollratio.y)),x.scroll.x=Math.round(x.getScrollLeft()*(1/x.scrollratio.x)),x.cursoractive&&x.noticeCursor()),x.scroll.y&&0==x.getScrollTop()&&x.doScrollTo(Math.floor(x.scroll.y*x.scrollratio.y)),x)},this.resize=x.onResize,this.hlazyresize=0,this.lazyResize=function(e){return x.haswrapper||x.hide(),x.hlazyresize&&clearTimeout(x.hlazyresize),x.hlazyresize=setTimeout((function(){x&&(x.resize(),x.show())}),240),x},this.jqbind=function(e,t,n){x.events.push({e:e,n:t,f:n,q:!0}),r(e).bind(t,n)},this.mousewheel=function(e,t,n){var i="jquery"in e?e[0]:e;if("onwheel"in s.createElement("div"))x._bind(i,"wheel",t,n||!1);else{var o=void 0!==s.onmousewheel?"mousewheel":"DOMMouseScroll";y(i,o,t,n||!1),"DOMMouseScroll"==o&&y(i,"MozMousePixelScroll",t,n||!1)}};var A=!1;if(T.haseventlistener){try{var P=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("test",null,P)}catch(e){}this.cancelEvent=function(e){return!!e&&((e=e.original?e.original:e).cancelable&&e.preventDefault(),e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),!1)},this.stopPropagation=function(e){return!!e&&((e=e.original?e.original:e).stopPropagation(),!1)}}else Event.prototype.preventDefault=function(){this.returnValue=!1},Event.prototype.stopPropagation=function(){this.cancelBubble=!0},window.constructor.prototype.addEventListener=s.constructor.prototype.addEventListener=Element.prototype.addEventListener=function(e,t,n){this.attachEvent("on"+e,t)},window.constructor.prototype.removeEventListener=s.constructor.prototype.removeEventListener=Element.prototype.removeEventListener=function(e,t,n){this.detachEvent("on"+e,t)},this.cancelEvent=function(e){return!!(e=window.event||!1)&&(e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1)},this.stopPropagation=function(e){return!!(e=window.event||!1)&&(e.cancelBubble=!0,!1)};this.bind=function(e,t,n,i,o){var a="jquery"in e?e[0]:e;x._bind(a,t,n,i||!1,o||!1)},this._bind=function(e,t,n,i,o){x.events.push({e:e,n:t,f:n,b:i,q:!1}),A&&o?e.addEventListener(t,n,{passive:!1,capture:i}):e.addEventListener(t,n,i||!1)},this._unbind=function(e,t,n,i){e.removeEventListener(t,n,i)},this.unbindAll=function(){for(var e=0;e<x.events.length;e++){var t=x.events[e];t.q?t.e.unbind(t.n,t.f):x._unbind(t.e,t.n,t.f,t.b)}},this.showRail=function(){return 0==x.page.maxh||!x.ispage&&"none"==x.win.css("display")||(x.visibility=!0,x.rail.visibility=!0,x.rail.css("display","block")),x},this.showRailHr=function(){return x.railh?(0==x.page.maxw||!x.ispage&&"none"==x.win.css("display")||(x.railh.visibility=!0,x.railh.css("display","block")),x):x},this.hideRail=function(){return x.visibility=!1,x.rail.visibility=!1,x.rail.css("display","none"),x},this.hideRailHr=function(){return x.railh?(x.railh.visibility=!1,x.railh.css("display","none"),x):x},this.show=function(){return x.hidden=!1,x.railslocked=!1,x.showRail().showRailHr()},this.hide=function(){return x.hidden=!0,x.railslocked=!0,x.hideRail().hideRailHr()},this.toggle=function(){return x.hidden?x.show():x.hide()},this.remove=function(){for(var e in x.stop(),x.cursortimeout&&clearTimeout(x.cursortimeout),x.delaylist)x.delaylist[e]&&d(x.delaylist[e].h);x.doZoomOut(),x.unbindAll(),T.isie9&&x.win[0].detachEvent("onpropertychange",x.onAttributeChange),!1!==x.observer&&x.observer.disconnect(),!1!==x.observerremover&&x.observerremover.disconnect(),!1!==x.observerbody&&x.observerbody.disconnect(),x.events=null,x.cursor&&x.cursor.remove(),x.cursorh&&x.cursorh.remove(),x.rail&&x.rail.remove(),x.railh&&x.railh.remove(),x.zoom&&x.zoom.remove();for(var t=0;t<x.saved.css.length;t++){var n=x.saved.css[t];n[0].css(n[1],void 0===n[2]?"":n[2])}x.saved=!1,x.me.data("__nicescroll","");var i=r.nicescroll;for(var o in i.each((function(e){if(this&&this.id===x.id){delete i[e];for(var t=++e;t<i.length;t++,e++)i[e]=i[t];--i.length&&delete i[i.length]}})),x)x[o]=null,delete x[o];x=null},this.scrollstart=function(e){return this.onscrollstart=e,x},this.scrollend=function(e){return this.onscrollend=e,x},this.scrollcancel=function(e){return this.onscrollcancel=e,x},this.zoomin=function(e){return this.onzoomin=e,x},this.zoomout=function(e){return this.onzoomout=e,x},this.isScrollable=function(e){var t=e.target?e.target:e;if("OPTION"==t.nodeName)return!0;for(;t&&1==t.nodeType&&t!==this.me[0]&&!/^BODY|HTML/.test(t.nodeName);){var n=r(t),i=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(i))return t.clientHeight!=t.scrollHeight;t=!!t.parentNode&&t.parentNode}return!1},this.getViewport=function(e){for(var t=!(!e||!e.parentNode)&&e.parentNode;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var n=r(t);if(/fixed|absolute/.test(n.css("position")))return n;var i=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(i)&&t.clientHeight!=t.scrollHeight)return n;if(n.getNiceScroll().length>0)return n;t=!!t.parentNode&&t.parentNode}return!1},this.triggerScrollStart=function(e,t,n,i,o){var a={type:"scrollstart",current:{x:e,y:t},request:{x:n,y:i},end:{x:x.newscrollx,y:x.newscrolly},speed:o};x.onscrollstart.call(x,a)},this.triggerScrollEnd=function(){if(x.onscrollend){var e=x.getScrollLeft(),t=x.getScrollTop(),n={type:"scrollend",current:{x:e,y:t},end:{x:e,y:t}};x.onscrollend.call(x,n)}},this.onmousewheel=function(e){if(!x.wheelprevented){if(x.railslocked)return x.debounced("checkunlock",x.resize,250),!0;if(x.rail.drag)return x.cancelEvent(e);if("auto"===x.opt.oneaxismousemode&&0!==e.deltaX&&(x.opt.oneaxismousemode=!1),x.opt.oneaxismousemode&&0===e.deltaX&&!x.rail.scrollable)return!x.railh||!x.railh.scrollable||x.onmousewheelhr(e);var t=p(),n=!1;if(x.opt.preservenativescrolling&&x.checkarea+600<t&&(x.nativescrollingarea=x.isScrollable(e),n=!0),x.checkarea=t,x.nativescrollingarea)return!0;var i=w(e,!1,n);return i&&(x.checkarea=0),i}},this.onmousewheelhr=function(e){if(!x.wheelprevented){if(x.railslocked||!x.railh.scrollable)return!0;if(x.rail.drag)return x.cancelEvent(e);var t=p(),n=!1;return x.opt.preservenativescrolling&&x.checkarea+600<t&&(x.nativescrollingarea=x.isScrollable(e),n=!0),x.checkarea=t,!!x.nativescrollingarea||(x.railslocked?x.cancelEvent(e):w(e,!0,n))}},this.stop=function(){return x.cancelScroll(),x.scrollmon&&x.scrollmon.stop(),x.cursorfreezed=!1,x.scroll.y=Math.round(x.getScrollTop()*(1/x.scrollratio.y)),x.noticeCursor(),x},this.getTransitionSpeed=function(e){var t=Math.round(10*x.opt.scrollspeed),n=Math.min(t,Math.round(e/20*x.opt.scrollspeed));return n>20?n:0},x.opt.smoothscroll?x.ishwscroll&&T.hastransition&&x.opt.usetransition&&x.opt.smoothscroll?(this.prepareTransition=function(e,t){var n=t?e>20?e:0:x.getTransitionSpeed(e),i=n?T.prefixstyle+"transform "+n+"ms ease-out":"";return x.lasttransitionstyle&&x.lasttransitionstyle==i||(x.lasttransitionstyle=i,x.doc.css(T.transitionstyle,i)),n},this.doScrollLeft=function(e,t){var n=x.scrollrunning?x.newscrolly:x.getScrollTop();x.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=x.scrollrunning?x.newscrollx:x.getScrollLeft();x.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){var i=x.getScrollTop(),o=x.getScrollLeft();return((x.newscrolly-i)*(t-i)<0||(x.newscrollx-o)*(e-o)<0)&&x.cancelScroll(),0==x.opt.bouncescroll&&(t<0?t=0:t>x.page.maxh&&(t=x.page.maxh),e<0?e=0:e>x.page.maxw&&(e=x.page.maxw)),(!x.scrollrunning||e!=x.newscrollx||t!=x.newscrolly)&&(x.newscrolly=t,x.newscrollx=e,x.newscrollspeed=n||!1,!x.timer&&void(x.timer=setTimeout((function(){var n=x.getScrollTop(),i=x.getScrollLeft(),o={};o.x=e-i,o.y=t-n,o.px=i,o.py=n;var a=Math.round(Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))),r=x.newscrollspeed&&x.newscrollspeed>1?x.newscrollspeed:x.getTransitionSpeed(a);if(x.newscrollspeed&&x.newscrollspeed<=1&&(r*=x.newscrollspeed),x.prepareTransition(r,!0),x.timerscroll&&x.timerscroll.tm&&clearInterval(x.timerscroll.tm),r>0){!x.scrollrunning&&x.onscrollstart&&x.triggerScrollStart(i,n,e,t,r),T.transitionend?x.scrollendtrapped||(x.scrollendtrapped=!0,x.bind(x.doc,T.transitionend,x.onScrollTransitionEnd,!1)):(x.scrollendtrapped&&clearTimeout(x.scrollendtrapped),x.scrollendtrapped=setTimeout(x.onScrollTransitionEnd,r));var s=n,l=i;x.timerscroll={bz:new D(s,x.newscrolly,r,0,0,.58,1),bh:new D(l,x.newscrollx,r,0,0,.58,1)},x.cursorfreezed||(x.timerscroll.tm=setInterval((function(){x.showCursor(x.getScrollTop(),x.getScrollLeft())}),60))}x.synched("doScroll-set",(function(){x.timer=0,x.scrollendtrapped&&(x.scrollrunning=!0),x.setScrollTop(x.newscrolly),x.setScrollLeft(x.newscrollx),x.scrollendtrapped||x.onScrollTransitionEnd()}))}),50)))},this.cancelScroll=function(){if(!x.scrollendtrapped)return!0;var e=x.getScrollTop(),t=x.getScrollLeft();return x.scrollrunning=!1,T.transitionend||clearTimeout(T.transitionend),x.scrollendtrapped=!1,x._unbind(x.doc[0],T.transitionend,x.onScrollTransitionEnd),x.prepareTransition(0),x.setScrollTop(e),x.railh&&x.setScrollLeft(t),x.timerscroll&&x.timerscroll.tm&&clearInterval(x.timerscroll.tm),x.timerscroll=!1,x.cursorfreezed=!1,x.showCursor(e,t),x},this.onScrollTransitionEnd=function(){x.scrollendtrapped&&x._unbind(x.doc[0],T.transitionend,x.onScrollTransitionEnd),x.scrollendtrapped=!1,x.prepareTransition(0),x.timerscroll&&x.timerscroll.tm&&clearInterval(x.timerscroll.tm),x.timerscroll=!1;var e=x.getScrollTop(),t=x.getScrollLeft();if(x.setScrollTop(e),x.railh&&x.setScrollLeft(t),x.noticeCursor(!1,e,t),x.cursorfreezed=!1,e<0?e=0:e>x.page.maxh&&(e=x.page.maxh),t<0?t=0:t>x.page.maxw&&(t=x.page.maxw),e!=x.newscrolly||t!=x.newscrollx)return x.doScrollPos(t,e,x.opt.snapbackspeed);x.onscrollend&&x.scrollrunning&&x.triggerScrollEnd(),x.scrollrunning=!1}):(this.doScrollLeft=function(e,t){var n=x.scrollrunning?x.newscrolly:x.getScrollTop();x.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=x.scrollrunning?x.newscrollx:x.getScrollLeft();x.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){t=void 0===t||!1===t?x.getScrollTop(!0):t;if(x.timer&&x.newscrolly==t&&x.newscrollx==e)return!0;x.timer&&d(x.timer),x.timer=0;var i=x.getScrollTop(),o=x.getScrollLeft();((x.newscrolly-i)*(t-i)<0||(x.newscrollx-o)*(e-o)<0)&&x.cancelScroll(),x.newscrolly=t,x.newscrollx=e,x.bouncescroll&&x.rail.visibility||(x.newscrolly<0?x.newscrolly=0:x.newscrolly>x.page.maxh&&(x.newscrolly=x.page.maxh)),x.bouncescroll&&x.railh.visibility||(x.newscrollx<0?x.newscrollx=0:x.newscrollx>x.page.maxw&&(x.newscrollx=x.page.maxw)),x.dst={},x.dst.x=e-o,x.dst.y=t-i,x.dst.px=o,x.dst.py=i;var a=Math.round(Math.sqrt(Math.pow(x.dst.x,2)+Math.pow(x.dst.y,2)));x.dst.ax=x.dst.x/a,x.dst.ay=x.dst.y/a;var r=0,s=a;0==x.dst.x?(r=i,s=t,x.dst.ay=1,x.dst.py=0):0==x.dst.y&&(r=o,s=e,x.dst.ax=1,x.dst.px=0);var l=x.getTransitionSpeed(a);if(n&&n<=1&&(l*=n),x.bzscroll=l>0&&(x.bzscroll?x.bzscroll.update(s,l):new D(r,s,l,0,1,0,1)),!x.timer){(i==x.page.maxh&&t>=x.page.maxh||o==x.page.maxw&&e>=x.page.maxw)&&x.checkContentSize();var u=1;x.cancelAnimationFrame=!1,x.timer=1,x.onscrollstart&&!x.scrollrunning&&x.triggerScrollStart(o,i,e,t,l),function e(){if(x.cancelAnimationFrame)return!0;if(x.scrollrunning=!0,u=1-u)return x.timer=c(e)||1;var t,n,i=0,o=n=x.getScrollTop();x.dst.ay?(((r=(o=x.bzscroll?x.dst.py+x.bzscroll.getNow()*x.dst.ay:x.newscrolly)-n)<0&&o<x.newscrolly||r>0&&o>x.newscrolly)&&(o=x.newscrolly),x.setScrollTop(o),o==x.newscrolly&&(i=1)):i=1;var a=t=x.getScrollLeft();if(x.dst.ax){var r=(a=x.bzscroll?x.dst.px+x.bzscroll.getNow()*x.dst.ax:x.newscrollx)-t;(r<0&&a<x.newscrollx||r>0&&a>x.newscrollx)&&(a=x.newscrollx),x.setScrollLeft(a),a==x.newscrollx&&(i+=1)}else i+=1;2==i?(x.timer=0,x.cursorfreezed=!1,x.bzscroll=!1,x.scrollrunning=!1,o<0?o=0:o>x.page.maxh&&(o=Math.max(0,x.page.maxh)),a<0?a=0:a>x.page.maxw&&(a=x.page.maxw),a!=x.newscrollx||o!=x.newscrolly?x.doScrollPos(a,o):x.onscrollend&&x.triggerScrollEnd()):x.timer=c(e)||1}(),(i==x.page.maxh&&t>=i||o==x.page.maxw&&e>=o)&&x.checkContentSize(),x.noticeCursor()}},this.cancelScroll=function(){return x.timer&&d(x.timer),x.timer=0,x.bzscroll=!1,x.scrollrunning=!1,x}):(this.doScrollLeft=function(e,t){var n=x.getScrollTop();x.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=x.getScrollLeft();x.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){var i=e>x.page.maxw?x.page.maxw:e;i<0&&(i=0);var o=t>x.page.maxh?x.page.maxh:t;o<0&&(o=0),x.synched("scroll",(function(){x.setScrollTop(o),x.setScrollLeft(i)}))},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var n=0;if(n=t?Math.floor((x.scroll.y-e)*x.scrollratio.y):(x.timer?x.newscrolly:x.getScrollTop(!0))-e,x.bouncescroll){var i=Math.round(x.view.h/2);n<-i?n=-i:n>x.page.maxh+i&&(n=x.page.maxh+i)}x.cursorfreezed=!1;var o=x.getScrollTop(!0);return n<0&&o<=0?x.noticeCursor():n>x.page.maxh&&o>=x.page.maxh?(x.checkContentSize(),x.noticeCursor()):void x.doScrollTop(n)},this.doScrollLeftBy=function(e,t){var n=0;if(n=t?Math.floor((x.scroll.x-e)*x.scrollratio.x):(x.timer?x.newscrollx:x.getScrollLeft(!0))-e,x.bouncescroll){var i=Math.round(x.view.w/2);n<-i?n=-i:n>x.page.maxw+i&&(n=x.page.maxw+i)}x.cursorfreezed=!1;var o=x.getScrollLeft(!0);return n<0&&o<=0||n>x.page.maxw&&o>=x.page.maxw?x.noticeCursor():void x.doScrollLeft(n)},this.doScrollTo=function(e,t){var n=t?Math.round(e*x.scrollratio.y):e;n<0?n=0:n>x.page.maxh&&(n=x.page.maxh),x.cursorfreezed=!1,x.doScrollTop(e)},this.checkContentSize=function(){var e=x.getContentSize();e.h==x.page.h&&e.w==x.page.w||x.resize(!1,e)},x.onscroll=function(e){x.rail.drag||x.cursorfreezed||x.synched("scroll",(function(){x.scroll.y=Math.round(x.getScrollTop()*(1/x.scrollratio.y)),x.railh&&(x.scroll.x=Math.round(x.getScrollLeft()*(1/x.scrollratio.x))),x.noticeCursor()}))},x.bind(x.docscroll,"scroll",x.onscroll),this.doZoomIn=function(e){if(!x.zoomactive){x.zoomactive=!0,x.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],n=x.win[0].style;for(var i in t){var o=t[i];x.zoomrestore.style[o]=void 0!==n[o]?n[o]:""}x.zoomrestore.style.width=x.win.css("width"),x.zoomrestore.style.height=x.win.css("height"),x.zoomrestore.padding={w:x.win.outerWidth()-x.win.width(),h:x.win.outerHeight()-x.win.height()},T.isios4&&(x.zoomrestore.scrollTop=l.scrollTop(),l.scrollTop(0)),x.win.css({position:T.isios4?"absolute":"fixed",top:0,left:0,zIndex:a+100,margin:0});var r=x.win.css("backgroundColor");return(""==r||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(r))&&x.win.css("backgroundColor","#fff"),x.rail.css({zIndex:a+101}),x.zoom.css({zIndex:a+102}),x.zoom.css("backgroundPosition","0 -18px"),x.resizeZoom(),x.onzoomin&&x.onzoomin.call(x),x.cancelEvent(e)}},this.doZoomOut=function(e){if(x.zoomactive)return x.zoomactive=!1,x.win.css("margin",""),x.win.css(x.zoomrestore.style),T.isios4&&l.scrollTop(x.zoomrestore.scrollTop),x.rail.css({"z-index":x.zindex}),x.zoom.css({"z-index":x.zindex}),x.zoomrestore=!1,x.zoom.css("backgroundPosition","0 0"),x.onResize(),x.onzoomout&&x.onzoomout.call(x),x.cancelEvent(e)},this.doZoom=function(e){return x.zoomactive?x.doZoomOut(e):x.doZoomIn(e)},this.resizeZoom=function(){if(x.zoomactive){var e=x.getScrollTop();x.win.css({width:l.width()-x.zoomrestore.padding.w+"px",height:l.height()-x.zoomrestore.padding.h+"px"}),x.onResize(),x.setScrollTop(Math.min(x.page.maxh,e))}},this.init(),r.nicescroll.push(this)},b=function(e){var t=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.reset=function(e,n){t.stop(),t.steptime=0,t.lasttime=p(),t.speedx=0,t.speedy=0,t.lastx=e,t.lasty=n,t.lastscrollx=-1,t.lastscrolly=-1},this.update=function(e,n){var i=p();t.steptime=i-t.lasttime,t.lasttime=i;var o=n-t.lasty,a=e-t.lastx,r=t.nc.getScrollTop()+o,s=t.nc.getScrollLeft()+a;t.snapx=s<0||s>t.nc.page.maxw,t.snapy=r<0||r>t.nc.page.maxh,t.speedx=a,t.speedy=o,t.lastx=e,t.lasty=n},this.stop=function(){t.nc.unsynched("domomentum2d"),t.timer&&clearTimeout(t.timer),t.timer=0,t.lastscrollx=-1,t.lastscrolly=-1},this.doSnapy=function(e,n){var i=!1;n<0?(n=0,i=!0):n>t.nc.page.maxh&&(n=t.nc.page.maxh,i=!0),e<0?(e=0,i=!0):e>t.nc.page.maxw&&(e=t.nc.page.maxw,i=!0),i?t.nc.doScrollPos(e,n,t.nc.opt.snapbackspeed):t.nc.triggerScrollEnd()},this.doMomentum=function(e){var n=p(),i=e?n+e:t.lasttime,o=t.nc.getScrollLeft(),a=t.nc.getScrollTop(),r=t.nc.page.maxh,s=t.nc.page.maxw;t.speedx=s>0?Math.min(60,t.speedx):0,t.speedy=r>0?Math.min(60,t.speedy):0;var l=i&&n-i<=60;(a<0||a>r||o<0||o>s)&&(l=!1);var c=!(!t.speedy||!l)&&t.speedy,d=!(!t.speedx||!l)&&t.speedx;if(c||d){var u=Math.max(16,t.steptime);if(u>50){var h=u/50;t.speedx*=h,t.speedy*=h,u=50}t.demulxy=0,t.lastscrollx=t.nc.getScrollLeft(),t.chkx=t.lastscrollx,t.lastscrolly=t.nc.getScrollTop(),t.chky=t.lastscrolly;var f=t.lastscrollx,m=t.lastscrolly,g=function(){var e=p()-n>600?.04:.02;t.speedx&&(f=Math.floor(t.lastscrollx-t.speedx*(1-t.demulxy)),t.lastscrollx=f,(f<0||f>s)&&(e=.1)),t.speedy&&(m=Math.floor(t.lastscrolly-t.speedy*(1-t.demulxy)),t.lastscrolly=m,(m<0||m>r)&&(e=.1)),t.demulxy=Math.min(1,t.demulxy+e),t.nc.synched("domomentum2d",(function(){t.speedx&&(t.nc.getScrollLeft(),t.chkx=f,t.nc.setScrollLeft(f)),t.speedy&&(t.nc.getScrollTop(),t.chky=m,t.nc.setScrollTop(m)),t.timer||(t.nc.hideCursor(),t.doSnapy(f,m))})),t.demulxy<1?t.timer=setTimeout(g,u):(t.stop(),t.nc.hideCursor(),t.doSnapy(f,m))};g()}else t.doSnapy(t.nc.getScrollLeft(),t.nc.getScrollTop())}},y=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e,t,n){var i=r.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.getScrollTop():y.call(e)},set:function(e,t){var n=r.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollTop(parseInt(t)):y.call(e,t),this}},e.fn.scrollTop=function(e){if(void 0===e){var t=!!this[0]&&(r.data(this[0],"__nicescroll")||!1);return t&&t.ishwscroll?t.getScrollTop():y.call(this)}return this.each((function(){var t=r.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):y.call(r(this),e)}))};var w=e.fn.scrollLeft;r.cssHooks.pageXOffset={get:function(e,t,n){var i=r.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.getScrollLeft():w.call(e)},set:function(e,t){var n=r.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollLeft(parseInt(t)):w.call(e,t),this}},e.fn.scrollLeft=function(e){if(void 0===e){var t=!!this[0]&&(r.data(this[0],"__nicescroll")||!1);return t&&t.ishwscroll?t.getScrollLeft():w.call(this)}return this.each((function(){var t=r.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):w.call(r(this),e)}))};var x=function(e){var t=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){return r.each(t,e),t},this.push=function(e){t[t.length]=e,t.length++},this.eq=function(e){return t[e]},e)for(var n=0;n<e.length;n++){var i=r.data(e[n],"__nicescroll")||!1;i&&(this[this.length]=i,this.length++)}return this};!function(e,t,n){for(var i=0,o=t.length;i<o;i++)n(e,t[i])}(x.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],(function(e,t){e[t]=function(){var e=arguments;return this.each((function(){this[t].apply(this,e)}))}})),e.fn.getNiceScroll=function(e){return void 0===e?new x(this):this[e]&&r.data(this[e],"__nicescroll")||!1},e.expr[":"].nicescroll=function(e){return void 0!==r.data(e,"__nicescroll")},r.fn.niceScroll=function(e,t){void 0!==t||"object"!=typeof e||"jquery"in e||(t=e,e=!1);var n=new x;return this.each((function(){var i=r(this),o=r.extend({},t);if(e){var a=r(e);o.doc=a.length>1?r(e,i):a,o.win=i}!("doc"in o)||"win"in o||(o.win=i);var s=i.data("__nicescroll")||!1;s||(o.doc=o.doc||i,s=new v(o,i),i.data("__nicescroll",s)),n.push(s)})),1===n.length?n[0]:n},window.NiceScroll={getjQuery:function(){return e}},r.nicescroll||(r.nicescroll=new x,r.nicescroll.options=f)})),function(e){e.color={},e.color.make=function(t,n,i,o){var a={};return a.r=t||0,a.g=n||0,a.b=i||0,a.a=null!=o?o:1,a.add=function(e,t){for(var n=0;n<e.length;++n)a[e.charAt(n)]+=t;return a.normalize()},a.scale=function(e,t){for(var n=0;n<e.length;++n)a[e.charAt(n)]*=t;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function e(e,t,n){return e>t?e:t>n?n:t}return a.r=e(0,parseInt(a.r),255),a.g=e(0,parseInt(a.g),255),a.b=e(0,parseInt(a.b),255),a.a=e(0,a.a,1),a},a.clone=function(){return e.color.make(a.r,a.b,a.g,a.a)},a.normalize()},e.color.extract=function(t,n){var i;do{if(""!=(i=t.css(n).toLowerCase())&&"transparent"!=i)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==i&&(i="transparent"),e.color.parse(i)},e.color.parse=function(n){var i,o=e.color.make;if(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return o(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10));if(i=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return o(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]));if(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return o(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]));if(i=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return o(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]),parseFloat(i[4]));if(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return o(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16));if(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return o(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16));var a=e.trim(n).toLowerCase();return"transparent"==a?o(255,255,255,0):o((i=t[a]||[0,0,0])[0],i[1],i[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){function t(t,n){var i=n.children("."+t)[0];if(null==i&&((i=document.createElement("canvas")).className=t,e(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(n),!i.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");i=window.G_vmlCanvasManager.initElement(i)}this.element=i;var o=this.context=i.getContext("2d"),a=window.devicePixelRatio||1,r=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1;this.pixelRatio=a/r,this.resize(n.width(),n.height()),this.textContainer=null,this.text={},this._textCache={}}function n(n,i,o,a){function r(e,t){t=[J].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function s(e){z=l(e),p(),f()}function l(t){for(var n=[],i=0;i<t.length;++i){var o=e.extend(!0,{},H.series);null!=t[i].data?(o.data=t[i].data,delete t[i].data,e.extend(!0,o,t[i]),t[i].data=o.data):o.data=t[i],n.push(o)}return n}function c(e,t){var n=e[t+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function d(){return e.grep(q.concat(G),(function(e){return e}))}function u(e){var t,n,i={};for(t=0;t<q.length;++t)(n=q[t])&&n.used&&(i["x"+n.n]=n.c2p(e.left));for(t=0;t<G.length;++t)(n=G[t])&&n.used&&(i["y"+n.n]=n.c2p(e.top));return void 0!==i.x1&&(i.x=i.x1),void 0!==i.y1&&(i.y=i.y1),i}function h(t,n){return t[n-1]||(t[n-1]={n:n,direction:t==q?"x":"y",options:e.extend(!0,{},t==q?H.xaxis:H.yaxis)}),t[n-1]}function p(){var t,n=z.length,i=-1;for(t=0;t<z.length;++t){var o=z[t].color;null!=o&&(n--,"number"==typeof o&&o>i&&(i=o))}i>=n&&(n=i+1);var a,r=[],s=H.colors,l=s.length,d=0;for(t=0;n>t;t++)a=e.color.parse(s[t%l]||"#666"),t%l==0&&t&&(d=d>=0?.5>d?-d-.2:0:-d),r[t]=a.scale("rgb",1+d);var u,p=0;for(t=0;t<z.length;++t){if(null==(u=z[t]).color?(u.color=r[p].toString(),++p):"number"==typeof u.color&&(u.color=r[u.color].toString()),null==u.lines.show){var f,m=!0;for(f in u)if(u[f]&&u[f].show){m=!1;break}m&&(u.lines.show=!0)}null==u.lines.zero&&(u.lines.zero=!!u.lines.fill),u.xaxis=h(q,c(u,"x")),u.yaxis=h(G,c(u,"y"))}}function f(){function t(e,t,n){t<e.datamin&&t!=-b&&(e.datamin=t),n>e.datamax&&n!=b&&(e.datamax=n)}var n,i,o,a,s,l,c,u,h,p,f,m,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,b=Number.MAX_VALUE;for(e.each(d(),(function(e,t){t.datamin=g,t.datamax=v,t.used=!1})),n=0;n<z.length;++n)(s=z[n]).datapoints={points:[]},r(K.processRawData,[s,s.data,s.datapoints]);for(n=0;n<z.length;++n){if(f=(s=z[n]).data,!(m=s.datapoints.format)){if((m=[]).push({x:!0,number:!0,required:!0}),m.push({y:!0,number:!0,required:!0}),s.bars.show||s.lines.show&&s.lines.fill){var y=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);m.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:y}),s.bars.horizontal&&(delete m[m.length-1].y,m[m.length-1].x=!0)}s.datapoints.format=m}if(null==s.datapoints.pointsize){s.datapoints.pointsize=m.length,c=s.datapoints.pointsize,l=s.datapoints.points;var w=s.lines.show&&s.lines.steps;for(s.xaxis.used=s.yaxis.used=!0,i=o=0;i<f.length;++i,o+=c){var x=null==(p=f[i]);if(!x)for(a=0;c>a;++a)u=p[a],(h=m[a])&&(h.number&&null!=u&&(u=+u,isNaN(u)?u=null:1/0==u?u=b:u==-1/0&&(u=-b)),null==u&&(h.required&&(x=!0),null!=h.defaultValue&&(u=h.defaultValue))),l[o+a]=u;if(x)for(a=0;c>a;++a)null!=(u=l[o+a])&&(!1!==(h=m[a]).autoscale&&(h.x&&t(s.xaxis,u,u),h.y&&t(s.yaxis,u,u))),l[o+a]=null;else if(w&&o>0&&null!=l[o-c]&&l[o-c]!=l[o]&&l[o-c+1]!=l[o+1]){for(a=0;c>a;++a)l[o+c+a]=l[o+a];l[o+1]=l[o-c+1],o+=c}}}}for(n=0;n<z.length;++n)s=z[n],r(K.processDatapoints,[s,s.datapoints]);for(n=0;n<z.length;++n){l=(s=z[n]).datapoints.points,c=s.datapoints.pointsize,m=s.datapoints.format;var C=g,S=g,_=v,k=v;for(i=0;i<l.length;i+=c)if(null!=l[i])for(a=0;c>a;++a)u=l[i+a],(h=m[a])&&!1!==h.autoscale&&u!=b&&u!=-b&&(h.x&&(C>u&&(C=u),u>_&&(_=u)),h.y&&(S>u&&(S=u),u>k&&(k=u)));if(s.bars.show){var T;switch(s.bars.align){case"left":T=0;break;case"right":T=-s.bars.barWidth;break;default:T=-s.bars.barWidth/2}s.bars.horizontal?(S+=T,k+=T+s.bars.barWidth):(C+=T,_+=T+s.bars.barWidth)}t(s.xaxis,C,_),t(s.yaxis,S,k)}e.each(d(),(function(e,t){t.datamin==g&&(t.datamin=null),t.datamax==v&&(t.datamax=null)}))}function m(){ee&&clearTimeout(ee),W.unbind("mousemove",E),W.unbind("mouseleave",D),W.unbind("click",I),r(K.shutdown,[W])}function g(t){var n=t.labelWidth,i=t.labelHeight,o=t.options.position,a="x"===t.direction,r=t.options.tickLength,s=H.grid.axisMargin,l=H.grid.labelMargin,c=!0,d=!0,u=!0,h=!1;e.each(a?q:G,(function(e,n){n&&(n.show||n.reserveSpace)&&(n===t?h=!0:n.options.position===o&&(h?d=!1:c=!1),h||(u=!1))})),d&&(s=0),null==r&&(r=u?"full":5),isNaN(+r)||(l+=+r),a?(i+=l,"bottom"==o?(Y.bottom+=i+s,t.box={top:j.height-Y.bottom,height:i}):(t.box={top:Y.top+s,height:i},Y.top+=i+s)):(n+=l,"left"==o?(t.box={left:Y.left+s,width:n},Y.left+=n+s):(Y.right+=n+s,t.box={left:j.width-Y.right,width:n})),t.position=o,t.tickLength=r,t.box.padding=l,t.innermost=c}function v(){var t,n=d(),i=H.grid.show;for(var o in Y){var a=H.grid.margin||0;Y[o]="number"==typeof a?a:a[o]||0}for(var o in r(K.processOffset,[Y]),Y)Y[o]+="object"==typeof H.grid.borderWidth?i?H.grid.borderWidth[o]:0:i?H.grid.borderWidth:0;if(e.each(n,(function(e,t){var n=t.options;t.show=null==n.show?t.used:n.show,t.reserveSpace=null==n.reserveSpace?t.show:n.reserveSpace,function(e){var t=e.options,n=+(null!=t.min?t.min:e.datamin),i=+(null!=t.max?t.max:e.datamax),o=i-n;if(0==o){var a=0==i?1:.01;null==t.min&&(n-=a),(null==t.max||null!=t.min)&&(i+=a)}else{var r=t.autoscaleMargin;null!=r&&(null==t.min&&(0>(n-=o*r)&&null!=e.datamin&&e.datamin>=0&&(n=0)),null==t.max&&((i+=o*r)>0&&null!=e.datamax&&e.datamax<=0&&(i=0)))}e.min=n,e.max=i}(t)})),i){var s=e.grep(n,(function(e){return e.show||e.reserveSpace}));for(e.each(s,(function(e,t){b(t),y(t),function(e,t){e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v)))}(t,t.ticks),function(e){for(var t=e.options,n=e.ticks||[],i=t.labelWidth||0,o=t.labelHeight||0,a=i||("x"==e.direction?Math.floor(j.width/(n.length||1)):null),r=e.direction+"Axis "+e.direction+e.n+"Axis",s="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+r,l=t.font||"flot-tick-label tickLabel",c=0;c<n.length;++c){var d=n[c];if(d.label){var u=j.getTextInfo(s,d.label,l,null,a);i=Math.max(i,u.width),o=Math.max(o,u.height)}}e.labelWidth=t.labelWidth||i,e.labelHeight=t.labelHeight||o}(t)})),t=s.length-1;t>=0;--t)g(s[t]);(function(){var t,n=H.grid.minBorderMargin;if(null==n)for(n=0,t=0;t<z.length;++t)n=Math.max(n,2*(z[t].points.radius+z[t].points.lineWidth/2));var i={left:n,right:n,top:n,bottom:n};e.each(d(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(i.left=Math.max(i.left,t.labelWidth/2),i.right=Math.max(i.right,t.labelWidth/2)):(i.bottom=Math.max(i.bottom,t.labelHeight/2),i.top=Math.max(i.top,t.labelHeight/2)))})),Y.left=Math.ceil(Math.max(i.left,Y.left)),Y.right=Math.ceil(Math.max(i.right,Y.right)),Y.top=Math.ceil(Math.max(i.top,Y.top)),Y.bottom=Math.ceil(Math.max(i.bottom,Y.bottom))})(),e.each(s,(function(e,t){!function(e){"x"==e.direction?(e.box.left=Y.left-e.labelWidth/2,e.box.width=j.width-Y.left-Y.right+e.labelWidth):(e.box.top=Y.top-e.labelHeight/2,e.box.height=j.height-Y.bottom-Y.top+e.labelHeight)}(t)}))}X=j.width-Y.left-Y.right,Q=j.height-Y.bottom-Y.top,e.each(n,(function(e,t){!function(e){function t(e){return e}var n,i,o=e.options.transform||t,a=e.options.inverseTransform;"x"==e.direction?(n=e.scale=X/Math.abs(o(e.max)-o(e.min)),i=Math.min(o(e.max),o(e.min))):(n=-(n=e.scale=Q/Math.abs(o(e.max)-o(e.min))),i=Math.max(o(e.max),o(e.min))),e.p2c=o==t?function(e){return(e-i)*n}:function(e){return(o(e)-i)*n},e.c2p=a?function(e){return a(i+e/n)}:function(e){return i+e/n}}(t)})),i&&e.each(d(),(function(e,t){var n,i,o,a,r,s=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",c="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,d=t.options.font||"flot-tick-label tickLabel";if(j.removeText(c),t.show&&0!=t.ticks.length)for(var u=0;u<t.ticks.length;++u)!(n=t.ticks[u]).label||n.v<t.min||n.v>t.max||("x"==t.direction?(a="center",i=Y.left+t.p2c(n.v),"bottom"==t.position?o=s.top+s.padding:(o=s.top+s.height-s.padding,r="bottom")):(r="middle",o=Y.top+t.p2c(n.v),"left"==t.position?(i=s.left+s.width-s.padding,a="right"):i=s.left+s.padding),j.addText(c,i,o,n.label,d,null,null,a,r))})),T()}function b(t){var n,i=t.options;n="number"==typeof i.ticks&&i.ticks>0?i.ticks:.3*Math.sqrt("x"==t.direction?j.width:j.height);var o=(t.max-t.min)/n,a=-Math.floor(Math.log(o)/Math.LN10),r=i.tickDecimals;null!=r&&a>r&&(a=r);var s,l=Math.pow(10,-a),c=o/l;if(1.5>c?s=1:3>c?(s=2,c>2.25&&(null==r||r>=a+1)&&(s=2.5,++a)):s=7.5>c?5:10,s*=l,null!=i.minTickSize&&s<i.minTickSize&&(s=i.minTickSize),t.delta=o,t.tickDecimals=Math.max(0,null!=r?r:a),t.tickSize=i.tickSize||s,"time"==i.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,n=[],i=function(e,t){return t*Math.floor(e/t)}(e.min,e.tickSize),o=0,a=Number.NaN;do{t=a,a=i+o*e.tickSize,n.push(a),++o}while(a<e.max&&a!=t);return n},t.tickFormatter=function(e,t){var n=t.tickDecimals?Math.pow(10,t.tickDecimals):1,i=""+Math.round(e*n)/n;if(null!=t.tickDecimals){var o=i.indexOf("."),a=-1==o?0:i.length-o-1;if(a<t.tickDecimals)return(a?i:i+".")+(""+n).substr(1,t.tickDecimals-a)}return i}),e.isFunction(i.tickFormatter)&&(t.tickFormatter=function(e,t){return""+i.tickFormatter(e,t)}),null!=i.alignTicksWithAxis){var d=("x"==t.direction?q:G)[i.alignTicksWithAxis-1];if(d&&d.used&&d!=t){var u=t.tickGenerator(t);if(u.length>0&&(null==i.min&&(t.min=Math.min(t.min,u[0])),null==i.max&&u.length>1&&(t.max=Math.max(t.max,u[u.length-1]))),t.tickGenerator=function(e){var t,n,i=[];for(n=0;n<d.ticks.length;++n)t=(d.ticks[n].v-d.min)/(d.max-d.min),t=e.min+t*(e.max-e.min),i.push(t);return i},!t.mode&&null==i.tickDecimals){var h=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),p=t.tickGenerator(t);p.length>1&&/\..*0$/.test((p[1]-p[0]).toFixed(h))||(t.tickDecimals=h)}}}}function y(t){var n,i,o=t.options.ticks,a=[];for(null==o||"number"==typeof o&&o>0?a=t.tickGenerator(t):o&&(a=e.isFunction(o)?o(t):o),t.ticks=[],n=0;n<a.length;++n){var r=null,s=a[n];"object"==typeof s?(i=+s[0],s.length>1&&(r=s[1])):i=+s,null==r&&(r=t.tickFormatter(i,t)),isNaN(i)||t.ticks.push({v:i,label:r})}}function w(){j.clear(),r(K.drawBackground,[U]);var e=H.grid;e.show&&e.backgroundColor&&(U.save(),U.translate(Y.left,Y.top),U.fillStyle=B(H.grid.backgroundColor,Q,0,"rgba(255, 255, 255, 0)"),U.fillRect(0,0,X,Q),U.restore()),e.show&&!e.aboveData&&C();for(var t=0;t<z.length;++t)r(K.drawSeries,[U,z[t]]),S(z[t]);r(K.draw,[U]),e.show&&e.aboveData&&C(),j.render(),A()}function x(e,t){for(var n,i,o,a,r=d(),s=0;s<r.length;++s)if((n=r[s]).direction==t&&(e[a=t+n.n+"axis"]||1!=n.n||(a=t+"axis"),e[a])){i=e[a].from,o=e[a].to;break}if(e[a]||(n="x"==t?q[0]:G[0],i=e[t+"1"],o=e[t+"2"]),null!=i&&null!=o&&i>o){var l=i;i=o,o=l}return{from:i,to:o,axis:n}}function C(){var t,n,i,o;U.save(),U.translate(Y.left,Y.top);var a=H.grid.markings;if(a)for(e.isFunction(a)&&((n=J.getAxes()).xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,a=a(n)),t=0;t<a.length;++t){var r=a[t],s=x(r,"x"),l=x(r,"y");if(null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(s.to<s.axis.min||s.from>s.axis.max||l.to<l.axis.min||l.from>l.axis.max)){s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var c=s.from===s.to,u=l.from===l.to;if(!c||!u)if(s.from=Math.floor(s.axis.p2c(s.from)),s.to=Math.floor(s.axis.p2c(s.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),c||u){var h=r.lineWidth||H.grid.markingsLineWidth,p=h%2?.5:0;U.beginPath(),U.strokeStyle=r.color||H.grid.markingsColor,U.lineWidth=h,c?(U.moveTo(s.to+p,l.from),U.lineTo(s.to+p,l.to)):(U.moveTo(s.from,l.to+p),U.lineTo(s.to,l.to+p)),U.stroke()}else U.fillStyle=r.color||H.grid.markingsColor,U.fillRect(s.from,l.to,s.to-s.from,l.from-l.to)}}n=d(),i=H.grid.borderWidth;for(var f=0;f<n.length;++f){var m,g,v,b,y=n[f],w=y.box,C=y.tickLength;if(y.show&&0!=y.ticks.length){for(U.lineWidth=1,"x"==y.direction?(m=0,g="full"==C?"top"==y.position?0:Q:w.top-Y.top+("top"==y.position?w.height:0)):(g=0,m="full"==C?"left"==y.position?0:X:w.left-Y.left+("left"==y.position?w.width:0)),y.innermost||(U.strokeStyle=y.options.color,U.beginPath(),v=b=0,"x"==y.direction?v=X+1:b=Q+1,1==U.lineWidth&&("x"==y.direction?g=Math.floor(g)+.5:m=Math.floor(m)+.5),U.moveTo(m,g),U.lineTo(m+v,g+b),U.stroke()),U.strokeStyle=y.options.tickColor,U.beginPath(),t=0;t<y.ticks.length;++t){var S=y.ticks[t].v;v=b=0,isNaN(S)||S<y.min||S>y.max||"full"==C&&("object"==typeof i&&i[y.position]>0||i>0)&&(S==y.min||S==y.max)||("x"==y.direction?(m=y.p2c(S),b="full"==C?-Q:C,"top"==y.position&&(b=-b)):(g=y.p2c(S),v="full"==C?-X:C,"left"==y.position&&(v=-v)),1==U.lineWidth&&("x"==y.direction?m=Math.floor(m)+.5:g=Math.floor(g)+.5),U.moveTo(m,g),U.lineTo(m+v,g+b))}U.stroke()}}i&&(o=H.grid.borderColor,"object"==typeof i||"object"==typeof o?("object"!=typeof i&&(i={top:i,right:i,bottom:i,left:i}),"object"!=typeof o&&(o={top:o,right:o,bottom:o,left:o}),i.top>0&&(U.strokeStyle=o.top,U.lineWidth=i.top,U.beginPath(),U.moveTo(0-i.left,0-i.top/2),U.lineTo(X,0-i.top/2),U.stroke()),i.right>0&&(U.strokeStyle=o.right,U.lineWidth=i.right,U.beginPath(),U.moveTo(X+i.right/2,0-i.top),U.lineTo(X+i.right/2,Q),U.stroke()),i.bottom>0&&(U.strokeStyle=o.bottom,U.lineWidth=i.bottom,U.beginPath(),U.moveTo(X+i.right,Q+i.bottom/2),U.lineTo(0,Q+i.bottom/2),U.stroke()),i.left>0&&(U.strokeStyle=o.left,U.lineWidth=i.left,U.beginPath(),U.moveTo(0-i.left/2,Q+i.bottom),U.lineTo(0-i.left/2,0),U.stroke())):(U.lineWidth=i,U.strokeStyle=H.grid.borderColor,U.strokeRect(-i/2,-i/2,X+i,Q+i))),U.restore()}function S(e){e.lines.show&&function(e){function t(e,t,n,i,o){var a=e.points,r=e.pointsize,s=null,l=null;U.beginPath();for(var c=r;c<a.length;c+=r){var d=a[c-r],u=a[c-r+1],h=a[c],p=a[c+1];if(null!=d&&null!=h){if(p>=u&&u<o.min){if(p<o.min)continue;d=(o.min-u)/(p-u)*(h-d)+d,u=o.min}else if(u>=p&&p<o.min){if(u<o.min)continue;h=(o.min-u)/(p-u)*(h-d)+d,p=o.min}if(u>=p&&u>o.max){if(p>o.max)continue;d=(o.max-u)/(p-u)*(h-d)+d,u=o.max}else if(p>=u&&p>o.max){if(u>o.max)continue;h=(o.max-u)/(p-u)*(h-d)+d,p=o.max}if(h>=d&&d<i.min){if(h<i.min)continue;u=(i.min-d)/(h-d)*(p-u)+u,d=i.min}else if(d>=h&&h<i.min){if(d<i.min)continue;p=(i.min-d)/(h-d)*(p-u)+u,h=i.min}if(d>=h&&d>i.max){if(h>i.max)continue;u=(i.max-d)/(h-d)*(p-u)+u,d=i.max}else if(h>=d&&h>i.max){if(d>i.max)continue;p=(i.max-d)/(h-d)*(p-u)+u,h=i.max}(d!=s||u!=l)&&U.moveTo(i.p2c(d)+t,o.p2c(u)+n),s=h,l=p,U.lineTo(i.p2c(h)+t,o.p2c(p)+n)}}U.stroke()}function n(e,t,n){for(var i=e.points,o=e.pointsize,a=Math.min(Math.max(0,n.min),n.max),r=0,s=!1,l=1,c=0,d=0;!(o>0&&r>i.length+o);){var u=i[(r+=o)-o],h=i[r-o+l],p=i[r],f=i[r+l];if(s){if(o>0&&null!=u&&null==p){d=r,o=-o,l=2;continue}if(0>o&&r==c+o){U.fill(),s=!1,l=1,r=c=d+(o=-o);continue}}if(null!=u&&null!=p){if(p>=u&&u<t.min){if(p<t.min)continue;h=(t.min-u)/(p-u)*(f-h)+h,u=t.min}else if(u>=p&&p<t.min){if(u<t.min)continue;f=(t.min-u)/(p-u)*(f-h)+h,p=t.min}if(u>=p&&u>t.max){if(p>t.max)continue;h=(t.max-u)/(p-u)*(f-h)+h,u=t.max}else if(p>=u&&p>t.max){if(u>t.max)continue;f=(t.max-u)/(p-u)*(f-h)+h,p=t.max}if(s||(U.beginPath(),U.moveTo(t.p2c(u),n.p2c(a)),s=!0),h>=n.max&&f>=n.max)U.lineTo(t.p2c(u),n.p2c(n.max)),U.lineTo(t.p2c(p),n.p2c(n.max));else if(h<=n.min&&f<=n.min)U.lineTo(t.p2c(u),n.p2c(n.min)),U.lineTo(t.p2c(p),n.p2c(n.min));else{var m=u,g=p;f>=h&&h<n.min&&f>=n.min?(u=(n.min-h)/(f-h)*(p-u)+u,h=n.min):h>=f&&f<n.min&&h>=n.min&&(p=(n.min-h)/(f-h)*(p-u)+u,f=n.min),h>=f&&h>n.max&&f<=n.max?(u=(n.max-h)/(f-h)*(p-u)+u,h=n.max):f>=h&&f>n.max&&h<=n.max&&(p=(n.max-h)/(f-h)*(p-u)+u,f=n.max),u!=m&&U.lineTo(t.p2c(m),n.p2c(h)),U.lineTo(t.p2c(u),n.p2c(h)),U.lineTo(t.p2c(p),n.p2c(f)),p!=g&&(U.lineTo(t.p2c(p),n.p2c(f)),U.lineTo(t.p2c(g),n.p2c(f)))}}}}U.save(),U.translate(Y.left,Y.top),U.lineJoin="round";var i=e.lines.lineWidth,o=e.shadowSize;if(i>0&&o>0){U.lineWidth=o,U.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;t(e.datapoints,Math.sin(a)*(i/2+o/2),Math.cos(a)*(i/2+o/2),e.xaxis,e.yaxis),U.lineWidth=o/2,t(e.datapoints,Math.sin(a)*(i/2+o/4),Math.cos(a)*(i/2+o/4),e.xaxis,e.yaxis)}U.lineWidth=i,U.strokeStyle=e.color;var r=k(e.lines,e.color,0,Q);r&&(U.fillStyle=r,n(e.datapoints,e.xaxis,e.yaxis)),i>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis),U.restore()}(e),e.bars.show&&function(e){function t(t,n,i,o,a,r){for(var s=t.points,l=t.pointsize,c=0;c<s.length;c+=l)null!=s[c]&&_(s[c],s[c+1],s[c+2],n,i,o,a,r,U,e.bars.horizontal,e.bars.lineWidth)}var n;switch(U.save(),U.translate(Y.left,Y.top),U.lineWidth=e.bars.lineWidth,U.strokeStyle=e.color,e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;default:n=-e.bars.barWidth/2}var i=e.bars.fill?function(t,n){return k(e.bars,e.color,t,n)}:null;t(e.datapoints,n,n+e.bars.barWidth,i,e.xaxis,e.yaxis),U.restore()}(e),e.points.show&&function(e){function t(e,t,n,i,o,a,r,s){for(var l=e.points,c=e.pointsize,d=0;d<l.length;d+=c){var u=l[d],h=l[d+1];null==u||u<a.min||u>a.max||h<r.min||h>r.max||(U.beginPath(),u=a.p2c(u),h=r.p2c(h)+i,"circle"==s?U.arc(u,h,t,0,o?Math.PI:2*Math.PI,!1):s(U,u,h,t,o),U.closePath(),n&&(U.fillStyle=n,U.fill()),U.stroke())}}U.save(),U.translate(Y.left,Y.top);var n=e.points.lineWidth,i=e.shadowSize,o=e.points.radius,a=e.points.symbol;if(0==n&&(n=1e-4),n>0&&i>0){var r=i/2;U.lineWidth=r,U.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,o,null,r+r/2,!0,e.xaxis,e.yaxis,a),U.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,o,null,r/2,!0,e.xaxis,e.yaxis,a)}U.lineWidth=n,U.strokeStyle=e.color,t(e.datapoints,o,k(e.points,e.color),0,!1,e.xaxis,e.yaxis,a),U.restore()}(e)}function _(e,t,n,i,o,a,r,s,l,c,d){var u,h,p,f,m,g,v,b,y;c?(b=g=v=!0,m=!1,f=t+i,p=t+o,(u=n)>(h=e)&&(y=h,h=u,u=y,m=!0,g=!1)):(m=g=v=!0,b=!1,u=e+i,h=e+o,(p=n)>(f=t)&&(y=f,f=p,p=y,b=!0,v=!1)),h<r.min||u>r.max||f<s.min||p>s.max||(u<r.min&&(u=r.min,m=!1),h>r.max&&(h=r.max,g=!1),p<s.min&&(p=s.min,b=!1),f>s.max&&(f=s.max,v=!1),u=r.p2c(u),p=s.p2c(p),h=r.p2c(h),f=s.p2c(f),a&&(l.fillStyle=a(p,f),l.fillRect(u,f,h-u,p-f)),d>0&&(m||g||v||b)&&(l.beginPath(),l.moveTo(u,p),m?l.lineTo(u,f):l.moveTo(u,f),v?l.lineTo(h,f):l.moveTo(h,f),g?l.lineTo(h,p):l.moveTo(h,p),b?l.lineTo(u,p):l.moveTo(u,p),l.stroke()))}function k(t,n,i,o){var a=t.fill;if(!a)return null;if(t.fillColor)return B(t.fillColor,i,o,n);var r=e.color.parse(n);return r.a="number"==typeof a?a:.4,r.normalize(),r.toString()}function T(){if(null!=H.legend.container?e(H.legend.container).html(""):n.find(".legend").remove(),H.legend.show){for(var t,i,o=[],a=[],r=!1,s=H.legend.labelFormatter,l=0;l<z.length;++l)(t=z[l]).label&&((i=s?s(t.label,t):t.label)&&a.push({label:i,color:t.color}));if(H.legend.sorted)if(e.isFunction(H.legend.sorted))a.sort(H.legend.sorted);else if("reverse"==H.legend.sorted)a.reverse();else{var c="descending"!=H.legend.sorted;a.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=c?1:-1}))}for(l=0;l<a.length;++l){var d=a[l];l%H.legend.noColumns==0&&(r&&o.push("</tr>"),o.push("<tr>"),r=!0),o.push('<td class="legendColorBox"><div style="border:1px solid '+H.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+d.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+d.label+"</td>")}if(r&&o.push("</tr>"),0!=o.length){var u='<table style="font-size:smaller;color:'+H.grid.color+'">'+o.join("")+"</table>";if(null!=H.legend.container)e(H.legend.container).html(u);else{var h="",p=H.legend.position,f=H.legend.margin;null==f[0]&&(f=[f,f]),"n"==p.charAt(0)?h+="top:"+(f[1]+Y.top)+"px;":"s"==p.charAt(0)&&(h+="bottom:"+(f[1]+Y.bottom)+"px;"),"e"==p.charAt(1)?h+="right:"+(f[0]+Y.right)+"px;":"w"==p.charAt(1)&&(h+="left:"+(f[0]+Y.left)+"px;");var m=e('<div class="legend">'+u.replace('style="','style="position:absolute;'+h+";")+"</div>").appendTo(n);if(0!=H.legend.backgroundOpacity){var g=H.legend.backgroundColor;null==g&&((g=(g=H.grid.backgroundColor)&&"string"==typeof g?e.color.parse(g):e.color.extract(m,"background-color")).a=1,g=g.toString());var v=m.children();e('<div style="position:absolute;width:'+v.width()+"px;height:"+v.height()+"px;"+h+"background-color:"+g+';"> </div>').prependTo(m).css("opacity",H.legend.backgroundOpacity)}}}}}function E(e){H.grid.hoverable&&N("plothover",e,(function(e){return 0!=e.hoverable}))}function D(e){H.grid.hoverable&&N("plothover",e,(function(){return!1}))}function I(e){N("plotclick",e,(function(e){return 0!=e.clickable}))}function N(e,t,i){var o=W.offset(),a=t.pageX-o.left-Y.left,r=t.pageY-o.top-Y.top,s=u({left:a,top:r});s.pageX=t.pageX,s.pageY=t.pageY;var l=function(e,t,n){var i,o,a,r=H.grid.mouseActiveRadius,s=r*r+1,l=null;for(i=z.length-1;i>=0;--i)if(n(z[i])){var c=z[i],d=c.xaxis,u=c.yaxis,h=c.datapoints.points,p=d.c2p(e),f=u.c2p(t),m=r/d.scale,g=r/u.scale;if(a=c.datapoints.pointsize,d.options.inverseTransform&&(m=Number.MAX_VALUE),u.options.inverseTransform&&(g=Number.MAX_VALUE),c.lines.show||c.points.show)for(o=0;o<h.length;o+=a){var v=h[o],b=h[o+1];if(null!=v&&!(v-p>m||-m>v-p||b-f>g||-g>b-f)){var y=Math.abs(d.p2c(v)-e),w=Math.abs(u.p2c(b)-t),x=y*y+w*w;s>x&&(s=x,l=[i,o/a])}}if(c.bars.show&&!l){var C,S;switch(c.bars.align){case"left":C=0;break;case"right":C=-c.bars.barWidth;break;default:C=-c.bars.barWidth/2}for(S=C+c.bars.barWidth,o=0;o<h.length;o+=a){v=h[o],b=h[o+1];var _=h[o+2];null!=v&&(z[i].bars.horizontal?p<=Math.max(_,v)&&p>=Math.min(_,v)&&f>=b+C&&b+S>=f:p>=v+C&&v+S>=p&&f>=Math.min(_,b)&&f<=Math.max(_,b))&&(l=[i,o/a])}}}return l?(i=l[0],o=l[1],a=z[i].datapoints.pointsize,{datapoint:z[i].datapoints.points.slice(o*a,(o+1)*a),dataIndex:o,series:z[i],seriesIndex:i}):null}(a,r,i);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+o.left+Y.left,10),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+o.top+Y.top,10)),H.grid.autoHighlight){for(var c=0;c<Z.length;++c){var d=Z[c];d.auto!=e||l&&d.series==l.series&&d.point[0]==l.datapoint[0]&&d.point[1]==l.datapoint[1]||O(d.series,d.point)}l&&R(l.series,l.datapoint,e)}n.trigger(e,[s,l])}function A(){var e=H.interaction.redrawOverlayInterval;return-1==e?void P():void(ee||(ee=setTimeout(P,e)))}function P(){var e,t;for(ee=null,V.save(),$.clear(),V.translate(Y.left,Y.top),e=0;e<Z.length;++e)(t=Z[e]).series.bars.show?L(t.series,t.point):M(t.series,t.point);V.restore(),r(K.drawOverlay,[V])}function R(e,t,n){if("number"==typeof e&&(e=z[e]),"number"==typeof t){var i=e.datapoints.pointsize;t=e.datapoints.points.slice(i*t,i*(t+1))}var o=F(e,t);-1==o?(Z.push({series:e,point:t,auto:n}),A()):n||(Z[o].auto=!1)}function O(e,t){if(null==e&&null==t)return Z=[],void A();if("number"==typeof e&&(e=z[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var i=F(e,t);-1!=i&&(Z.splice(i,1),A())}function F(e,t){for(var n=0;n<Z.length;++n){var i=Z[n];if(i.series==e&&i.point[0]==t[0]&&i.point[1]==t[1])return n}return-1}function M(t,n){var i=n[0],o=n[1],a=t.xaxis,r=t.yaxis,s="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(i<a.min||i>a.max||o<r.min||o>r.max)){var l=t.points.radius+t.points.lineWidth/2;V.lineWidth=l,V.strokeStyle=s;var c=1.5*l;i=a.p2c(i),o=r.p2c(o),V.beginPath(),"circle"==t.points.symbol?V.arc(i,o,c,0,2*Math.PI,!1):t.points.symbol(V,i,o,c,!1),V.closePath(),V.stroke()}}function L(t,n){var i,o="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),a=o;switch(t.bars.align){case"left":i=0;break;case"right":i=-t.bars.barWidth;break;default:i=-t.bars.barWidth/2}V.lineWidth=t.bars.lineWidth,V.strokeStyle=o,_(n[0],n[1],n[2]||0,i,i+t.bars.barWidth,(function(){return a}),t.xaxis,t.yaxis,V,t.bars.horizontal,t.bars.lineWidth)}function B(t,n,i,o){if("string"==typeof t)return t;for(var a=U.createLinearGradient(0,i,0,n),r=0,s=t.colors.length;s>r;++r){var l=t.colors[r];if("string"!=typeof l){var c=e.color.parse(o);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}a.addColorStop(r/(s-1),l)}return a}var z=[],H={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},j=null,$=null,W=null,U=null,V=null,q=[],G=[],Y={left:0,right:0,top:0,bottom:0},X=0,Q=0,K={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},J=this;J.setData=s,J.setupGrid=v,J.draw=w,J.getPlaceholder=function(){return n},J.getCanvas=function(){return j.element},J.getPlotOffset=function(){return Y},J.width=function(){return X},J.height=function(){return Q},J.offset=function(){var e=W.offset();return e.left+=Y.left,e.top+=Y.top,e},J.getData=function(){return z},J.getAxes=function(){var t={};return e.each(q.concat(G),(function(e,n){n&&(t[n.direction+(1!=n.n?n.n:"")+"axis"]=n)})),t},J.getXAxes=function(){return q},J.getYAxes=function(){return G},J.c2p=u,J.p2c=function(e){var t,n,i,o={};for(t=0;t<q.length;++t)if((n=q[t])&&n.used&&(null==e[i="x"+n.n]&&1==n.n&&(i="x"),null!=e[i])){o.left=n.p2c(e[i]);break}for(t=0;t<G.length;++t)if((n=G[t])&&n.used&&(null==e[i="y"+n.n]&&1==n.n&&(i="y"),null!=e[i])){o.top=n.p2c(e[i]);break}return o},J.getOptions=function(){return H},J.highlight=R,J.unhighlight=O,J.triggerRedrawOverlay=A,J.pointOffset=function(e){return{left:parseInt(q[c(e,"x")-1].p2c(+e.x)+Y.left,10),top:parseInt(G[c(e,"y")-1].p2c(+e.y)+Y.top,10)}},J.shutdown=m,J.destroy=function(){m(),n.removeData("plot").empty(),z=[],H=null,j=null,$=null,W=null,U=null,V=null,q=[],G=[],K=null,Z=[],J=null},J.resize=function(){var e=n.width(),t=n.height();j.resize(e,t),$.resize(e,t)},J.hooks=K,function(){for(var n={Canvas:t},i=0;i<a.length;++i){var o=a[i];o.init(J,n),o.options&&e.extend(!0,H,o.options)}}(),function(t){e.extend(!0,H,t),t&&t.colors&&(H.colors=t.colors),null==H.xaxis.color&&(H.xaxis.color=e.color.parse(H.grid.color).scale("a",.22).toString()),null==H.yaxis.color&&(H.yaxis.color=e.color.parse(H.grid.color).scale("a",.22).toString()),null==H.xaxis.tickColor&&(H.xaxis.tickColor=H.grid.tickColor||H.xaxis.color),null==H.yaxis.tickColor&&(H.yaxis.tickColor=H.grid.tickColor||H.yaxis.color),null==H.grid.borderColor&&(H.grid.borderColor=H.grid.color),null==H.grid.tickColor&&(H.grid.tickColor=e.color.parse(H.grid.color).scale("a",.22).toString());var i,o,a,s=n.css("font-size"),l=s?+s.replace("px",""):13,c={style:n.css("font-style"),size:Math.round(.8*l),variant:n.css("font-variant"),weight:n.css("font-weight"),family:n.css("font-family")};for(a=H.xaxes.length||1,i=0;a>i;++i)(o=H.xaxes[i])&&!o.tickColor&&(o.tickColor=o.color),o=e.extend(!0,{},H.xaxis,o),H.xaxes[i]=o,o.font&&(o.font=e.extend({},c,o.font),o.font.color||(o.font.color=o.color),o.font.lineHeight||(o.font.lineHeight=Math.round(1.15*o.font.size)));for(a=H.yaxes.length||1,i=0;a>i;++i)(o=H.yaxes[i])&&!o.tickColor&&(o.tickColor=o.color),o=e.extend(!0,{},H.yaxis,o),H.yaxes[i]=o,o.font&&(o.font=e.extend({},c,o.font),o.font.color||(o.font.color=o.color),o.font.lineHeight||(o.font.lineHeight=Math.round(1.15*o.font.size)));for(H.xaxis.noTicks&&null==H.xaxis.ticks&&(H.xaxis.ticks=H.xaxis.noTicks),H.yaxis.noTicks&&null==H.yaxis.ticks&&(H.yaxis.ticks=H.yaxis.noTicks),H.x2axis&&(H.xaxes[1]=e.extend(!0,{},H.xaxis,H.x2axis),H.xaxes[1].position="top",null==H.x2axis.min&&(H.xaxes[1].min=null),null==H.x2axis.max&&(H.xaxes[1].max=null)),H.y2axis&&(H.yaxes[1]=e.extend(!0,{},H.yaxis,H.y2axis),H.yaxes[1].position="right",null==H.y2axis.min&&(H.yaxes[1].min=null),null==H.y2axis.max&&(H.yaxes[1].max=null)),H.grid.coloredAreas&&(H.grid.markings=H.grid.coloredAreas),H.grid.coloredAreasColor&&(H.grid.markingsColor=H.grid.coloredAreasColor),H.lines&&e.extend(!0,H.series.lines,H.lines),H.points&&e.extend(!0,H.series.points,H.points),H.bars&&e.extend(!0,H.series.bars,H.bars),null!=H.shadowSize&&(H.series.shadowSize=H.shadowSize),null!=H.highlightColor&&(H.series.highlightColor=H.highlightColor),i=0;i<H.xaxes.length;++i)h(q,i+1).options=H.xaxes[i];for(i=0;i<H.yaxes.length;++i)h(G,i+1).options=H.yaxes[i];for(var d in K)H.hooks[d]&&H.hooks[d].length&&(K[d]=K[d].concat(H.hooks[d]));r(K.processOptions,[H])}(o),function(){n.css("padding",0).children().filter((function(){return!e(this).hasClass("flot-overlay")&&!e(this).hasClass("flot-base")})).remove(),"static"==n.css("position")&&n.css("position","relative"),j=new t("flot-base",n),$=new t("flot-overlay",n),U=j.context,V=$.context,W=e($.element).unbind();var i=n.data("plot");i&&(i.shutdown(),$.clear()),n.data("plot",J)}(),s(i),v(),w(),H.grid.hoverable&&(W.mousemove(E),W.bind("mouseleave",D)),H.grid.clickable&&W.click(I),r(K.bindEvents,[W]);var Z=[],ee=null}var i=Object.prototype.hasOwnProperty;e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),t.prototype.resize=function(e,t){if(0>=e||0>=t)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var n=this.element,i=this.context,o=this.pixelRatio;this.width!=e&&(n.width=e*o,n.style.width=e+"px",this.width=e),this.height!=t&&(n.height=t*o,n.style.height=t+"px",this.height=t),i.restore(),i.save(),i.scale(o,o)},t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.render=function(){var e=this._textCache;for(var t in e)if(i.call(e,t)){var n=this.getTextLayer(t),o=e[t];for(var a in n.hide(),o)if(i.call(o,a)){var r=o[a];for(var s in r)if(i.call(r,s)){for(var l,c=r[s].positions,d=0;l=c[d];d++)l.active?l.rendered||(n.append(l.element),l.rendered=!0):(c.splice(d--,1),l.rendered&&l.element.detach());0==c.length&&delete r[s]}}n.show()}},t.prototype.getTextLayer=function(t){var n=this.text[t];return null==n&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),n=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),n},t.prototype.getTextInfo=function(t,n,i,o,a){var r,s,l,c;if(n=""+n,r="object"==typeof i?i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:i,null==(s=this._textCache[t])&&(s=this._textCache[t]={}),null==(l=s[r])&&(l=s[r]={}),null==(c=l[n])){var d=e("<div></div>").html(n).css({position:"absolute","max-width":a,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof i?d.css({font:r,color:i.color}):"string"==typeof i&&d.addClass(i),c=l[n]={width:d.outerWidth(!0),height:d.outerHeight(!0),element:d,positions:[]},d.detach()}return c},t.prototype.addText=function(e,t,n,i,o,a,r,s,l){var c=this.getTextInfo(e,i,o,a,r),d=c.positions;"center"==s?t-=c.width/2:"right"==s&&(t-=c.width),"middle"==l?n-=c.height/2:"bottom"==l&&(n-=c.height);for(var u,h=0;u=d[h];h++)if(u.x==t&&u.y==n)return void(u.active=!0);u={active:!0,rendered:!1,element:d.length?c.element.clone():c.element,x:t,y:n},d.push(u),u.element.css({top:Math.round(n),left:Math.round(t),"text-align":s})},t.prototype.removeText=function(e,t,n,o,a,r){if(null==o){var s=this._textCache[e];if(null!=s)for(var l in s)if(i.call(s,l)){var c=s[l];for(var d in c)if(i.call(c,d))for(var u=c[d].positions,h=0;p=u[h];h++)p.active=!1}}else{var p;for(u=this.getTextInfo(e,o,a,r).positions,h=0;p=u[h];h++)p.x==t&&p.y==n&&(p.active=!1)}},e.plot=function(t,i,o){return new n(e(t),i,o,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,n){return this.each((function(){e.plot(this,t,n)}))}}(jQuery),function(e){function t(e,t){return t*Math.floor(e/t)}function n(e,t,n,i){if("function"==typeof e.strftime)return e.strftime(t);var o,a=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},r=[],s=!1,l=e.getHours(),c=l<12;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==i&&(i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),o=l>12?l-12:0==l?12:l;for(var d=0;d<t.length;++d){var u=t.charAt(d);if(s){switch(u){case"a":u=""+i[e.getDay()];break;case"b":u=""+n[e.getMonth()];break;case"d":u=a(e.getDate());break;case"e":u=a(e.getDate()," ");break;case"h":case"H":u=a(l);break;case"I":u=a(o);break;case"l":u=a(o," ");break;case"m":u=a(e.getMonth()+1);break;case"M":u=a(e.getMinutes());break;case"q":u=""+(Math.floor(e.getMonth()/3)+1);break;case"S":u=a(e.getSeconds());break;case"y":u=a(e.getFullYear()%100);break;case"Y":u=""+e.getFullYear();break;case"p":u=c?"am":"pm";break;case"P":u=c?"AM":"PM";break;case"w":u=""+e.getDay()}r.push(u),s=!1}else"%"==u?s=!0:r.push(u)}return r.join("")}function i(e){function t(e,t,n,i){e[t]=function(){return n[i].apply(n,arguments)}}var n={date:e};null!=e.strftime&&t(n,"strftime",e,"strftime"),t(n,"getTime",e,"getTime"),t(n,"setTime",e,"setTime");for(var i=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],o=0;o<i.length;o++)t(n,"get"+i[o],e,"getUTC"+i[o]),t(n,"set"+i[o],e,"setUTC"+i[o]);return n}function o(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var n=new timezoneJS.Date;return n.setTimezone(t.timezone),n.setTime(e),n}return i(new Date(e))}return i(new Date(e))}var a={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],s=r.concat([[3,"month"],[6,"month"],[1,"year"]]),l=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(i){i.hooks.processOptions.push((function(i,r){e.each(i.getAxes(),(function(e,i){var r=i.options;"time"==r.mode&&(i.tickGenerator=function(e){var n=[],i=o(e.min,r),c=0,d=r.tickSize&&"quarter"===r.tickSize[1]||r.minTickSize&&"quarter"===r.minTickSize[1]?l:s;null!=r.minTickSize&&(c="number"==typeof r.tickSize?r.tickSize:r.minTickSize[0]*a[r.minTickSize[1]]);for(var u=0;u<d.length-1&&!(e.delta<(d[u][0]*a[d[u][1]]+d[u+1][0]*a[d[u+1][1]])/2&&d[u][0]*a[d[u][1]]>=c);++u);var h=d[u][0],p=d[u][1];if("year"==p){if(null!=r.minTickSize&&"year"==r.minTickSize[1])h=Math.floor(r.minTickSize[0]);else{var f=Math.pow(10,Math.floor(Math.log(e.delta/a.year)/Math.LN10)),m=e.delta/a.year/f;h=m<1.5?1:m<3?2:m<7.5?5:10,h*=f}h<1&&(h=1)}e.tickSize=r.tickSize||[h,p];var g=e.tickSize[0];p=e.tickSize[1];var v=g*a[p];"second"==p?i.setSeconds(t(i.getSeconds(),g)):"minute"==p?i.setMinutes(t(i.getMinutes(),g)):"hour"==p?i.setHours(t(i.getHours(),g)):"month"==p?i.setMonth(t(i.getMonth(),g)):"quarter"==p?i.setMonth(3*t(i.getMonth()/3,g)):"year"==p&&i.setFullYear(t(i.getFullYear(),g)),i.setMilliseconds(0),v>=a.minute&&i.setSeconds(0),v>=a.hour&&i.setMinutes(0),v>=a.day&&i.setHours(0),v>=4*a.day&&i.setDate(1),v>=2*a.month&&i.setMonth(t(i.getMonth(),3)),v>=2*a.quarter&&i.setMonth(t(i.getMonth(),6)),v>=a.year&&i.setMonth(0);var b,y=0,w=Number.NaN;do{if(b=w,w=i.getTime(),n.push(w),"month"==p||"quarter"==p)if(g<1){i.setDate(1);var x=i.getTime();i.setMonth(i.getMonth()+("quarter"==p?3:1));var C=i.getTime();i.setTime(w+y*a.hour+(C-x)*g),y=i.getHours(),i.setHours(0)}else i.setMonth(i.getMonth()+g*("quarter"==p?3:1));else"year"==p?i.setFullYear(i.getFullYear()+g):i.setTime(w+v)}while(w<e.max&&w!=b);return n},i.tickFormatter=function(e,t){var i=o(e,t.options);if(null!=r.timeformat)return n(i,r.timeformat,r.monthNames,r.dayNames);var s=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*a[t.tickSize[1]],c=t.max-t.min,d=r.twelveHourClock?" %p":"",u=r.twelveHourClock?"%I":"%H";return n(i,l<a.minute?u+":%M:%S"+d:l<a.day?c<2*a.day?u+":%M"+d:"%b %d "+u+":%M"+d:l<a.month?"%b %d":s&&l<a.quarter||!s&&l<a.year?c<a.year?"%b":"%b %Y":s&&l<a.year?c<a.year?"Q%q":"Q%q %Y":"%Y",r.monthNames,r.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=n,e.plot.dateGenerator=o}(jQuery),function(e){"use strict";var t,n,i=0,o=1,a=2,r={none:function(e,t,n,o){if(o===i)for(var a=0,r=e.data.length;a<r;a++)e.data[a][n.valueIndex]=e.dataOrg[a][n.valueIndex]},linear:function(e,t,n){var i=Math.min(t/e.grow.duration,1),o=e.yaxis;e.bars&&e.bars.show&&e.bars.horizontal&&(o=e.xaxis);for(var a=0,r=e.data.length;a<r;a++){var s=e.dataOrg[a][n.valueIndex];null!==s?"up"===n.stepDirection?e.data[a][n.valueIndex]=s*i:"down"===n.stepDirection&&(e.data[a][n.valueIndex]=s+(o.max-s)*(1-i)):e.data[a][n.valueIndex]=null}},maximum:function(e,t,n){var i=Math.min(t/e.grow.duration,1),o=e.yaxis;e.bars&&e.bars.show&&e.bars.horizontal&&(o=e.xaxis);for(var a=o.max*i,r=o.min*i,s=o.max*(1-i),l=o.min*(1-i),c=0,d=e.data.length;c<d;c++){var u=e.dataOrg[c][n.valueIndex];null!==u?"up"===n.stepDirection?e.data[c][n.valueIndex]=u>=0?Math.min(u,a):Math.max(u,r):"down"===n.stepDirection&&(e.data[c][n.valueIndex]=u>=0?Math.max(u,s):Math.min(u,l)):e.data[c][n.valueIndex]=null}},delay:function(e,t,n){if(t>=e.grow.duration)for(var i=0,o=e.data.length;i<o;i++)e.data[i][n.valueIndex]=e.dataOrg[i][n.valueIndex]},reanimate:function(e,t,n){for(var i=Math.min(t/e.grow.duration,1),o=0,a=e.data.length;o<a;o++){var r=e.dataOrg[o][n.valueIndex];if(null===r)e.data[o][n.valueIndex]=null;else if(e.dataOld){var s=e.dataOld[o][n.valueIndex];e.data[o][n.valueIndex]=s+(r-s)*i}}}};!function(){for(var e=window.requestAnimationFrame,i=window.cancelAnimationFrame,o=+new Date,a=["ms","moz","webkit","o"],r=0;r<a.length&&!e;++r)e=window[a[r]+"RequestAnimationFrame"],i=window[a[r]+"CancelAnimationFrame"]||window[a[r]+"CancelRequestAnimationFrame"];e||(e=function(e){var t=+new Date,n=Math.max(0,16-(t-o)),i=window.setTimeout((function(){e(t+n)}),n);return o=t+n,i});i||(i=function(e){clearTimeout(e)});t=e,n=i}(),e.plot.plugins.push({init:function(s){var l,c=!1,d=!0,u=0,h=0,p=i,f=[],m=s,g=null,v=null;function b(){h=+new Date-u|0,null==g&&(g=[]);for(var e=0,n=g.length;e<n;e++)for(var s=g[e],c=s.dataOld&&s.dataOld.length>0,d=0,f=s.grow.growings.length;d<f;d++){var y,w=s.grow.growings[d];c&&"reinit"!==w.reanimate?("function"==typeof w.reanimate&&(y=w.reanimate),y="continue"===w.reanimate?r.reanimate:r.none):y="function"==typeof w.stepMode?w.stepMode:r[w.stepMode]||r.none,y(s,h,w,p)}m.setData(g),m.draw(),p===i&&(p=o),h<v.series.grow.duration?l=t(b):(p=a,l=null,m.getPlaceholder().trigger("growFinished"))}function y(){if(l){for(var t=0;t<g.length;t++){var n=g[t];n.data=e.extend(!0,[],n.dataOrg)}s.setData(g),s.setupGrid()}}s.hooks.drawSeries.push((function(t){v=t.getOptions();var n=v.series.grow.valueIndex;if(!0===v.series.grow.active){var o=!1,r=0;if(v.series.grow.reanimate&&p===a){c=!1,p=i,u=0,g=t.getData();var s=Math.min(g.length,f.length);for(r=0;r<s;r++)g[r].dataOld=f[r];o=!0,d=!0}if(!c){for(o||(g=t.getData()),p=i,u=0|+new Date,f=[],r=0;r<g.length;r++){var l=g[r];if(l.dataOrg=e.extend(!0,[],l.data),f.push(l.dataOrg),!o){n=l.grow.valueIndex;for(var h=0;h<l.data.length;h++)l.data[h][n]=null===l.dataOrg[h][n]?null:0}}t.setData(g),c=!0}}})),s.hooks.draw.push((function(e){!0===d&&function(e){v=e.getOptions(),!0===v.series.grow.active&&(!function(e,t){for(var n=t.series.grow.duration,i=0,o=e.length;i<o;i++){var a=e[i].grow.duration;n<a&&(n=a)}t.series.grow.duration=n}(e.getData(),v),u=0|+new Date,l=t(b));d=!1}(e)})),s.hooks.bindEvents.push((function(t){(function(t){for(var n=e.plot.plugins,i=0,o=n.length;i<o;i++){if(n[i].name===t)return!0}return!1})("resize")&&t.getPlaceholder().resize(y)})),s.hooks.shutdown.push((function(e){e.getPlaceholder().unbind("resize",y),l&&(n(l),l=null)}))},options:{series:{grow:{active:!1,duration:1e3,valueIndex:1,reanimate:!0,growings:[{valueIndex:1,stepMode:"linear",stepDirection:"up",reanimate:"continue"}]}}},name:"growraf",version:"0.5.0"})}(jQuery),function(e){var t={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(e,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+e+"<br/>"+Math.round(t.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};e.plot.plugins.push({init:function(t){var n=null,i=null,o=null,a=null,r=null,s=null,l=!1,c=null,d=[];function u(t,a,r){l||(l=!0,n=t.getCanvas(),i=e(n).parent(),o=t.getOptions(),t.setData(function(t){for(var n=0,i=0,a=0,r=o.series.pie.combine.color,s=[],l=0;l<t.length;++l){var c=t[l].data;e.isArray(c)&&1==c.length&&(c=c[0]),e.isArray(c)?!isNaN(parseFloat(c[1]))&&isFinite(c[1])?c[1]=+c[1]:c[1]=0:c=!isNaN(parseFloat(c))&&isFinite(c)?[1,+c]:[1,0],t[l].data=[c]}for(l=0;l<t.length;++l)n+=t[l].data[0][1];for(l=0;l<t.length;++l){(c=t[l].data[0][1])/n<=o.series.pie.combine.threshold&&(i+=c,a++,r||(r=t[l].color))}for(l=0;l<t.length;++l){c=t[l].data[0][1];(a<2||c/n>o.series.pie.combine.threshold)&&s.push(e.extend(t[l],{data:[[1,c]],color:t[l].color,label:t[l].label,angle:c*Math.PI*2/n,percent:c/(n/100)}))}a>1&&s.push({data:[[1,i]],color:r,label:o.series.pie.combine.label,angle:i*Math.PI*2/n,percent:i/(n/100)});return s}(t.getData())))}function h(t,n){if(i){var d=t.getPlaceholder().width(),u=t.getPlaceholder().height(),h=i.children().filter(".legend").children().width()||0;c=n,l=!1,a=Math.min(d,u/o.series.pie.tilt)/2,s=u/2+o.series.pie.offset.top,r=d/2,"auto"==o.series.pie.offset.left?(o.legend.position.match("w")?r+=h/2:r-=h/2,r<a?r=a:r>d-a&&(r=d-a)):r+=o.series.pie.offset.left;var f=t.getData(),m=0;do{m>0&&(a*=.95),m+=1,g(),o.series.pie.tilt<=.8&&v()}while(!b()&&m<10);m>=10&&(g(),i.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),t.setSeries&&t.insertLegend&&(t.setSeries(f),t.insertLegend())}function g(){c.clearRect(0,0,d,u),i.children().filter(".pieLabel, .pieLabelBackground").remove()}function v(){var e=o.series.pie.shadow.left,t=o.series.pie.shadow.top,n=o.series.pie.shadow.alpha,i=o.series.pie.radius>1?o.series.pie.radius:a*o.series.pie.radius;if(!(i>=d/2-e||i*o.series.pie.tilt>=u/2-t||i<=10)){c.save(),c.translate(e,t),c.globalAlpha=n,c.fillStyle="#000",c.translate(r,s),c.scale(1,o.series.pie.tilt);for(var l=1;l<=10;l++)c.beginPath(),c.arc(0,0,i,0,2*Math.PI,!1),c.fill(),i-=l;c.restore()}}function b(){var t=Math.PI*o.series.pie.startAngle,n=o.series.pie.radius>1?o.series.pie.radius:a*o.series.pie.radius;c.save(),c.translate(r,s),c.scale(1,o.series.pie.tilt),c.save();for(var l=t,h=0;h<f.length;++h)f[h].startAngle=l,m(f[h].angle,f[h].color,!0);if(c.restore(),o.series.pie.stroke.width>0){c.save(),c.lineWidth=o.series.pie.stroke.width,l=t;for(h=0;h<f.length;++h)m(f[h].angle,o.series.pie.stroke.color,!1);c.restore()}return p(c),c.restore(),!o.series.pie.label.show||function(){for(var n=t,l=o.series.pie.label.radius>1?o.series.pie.label.radius:a*o.series.pie.label.radius,c=0;c<f.length;++c){if(f[c].percent>=100*o.series.pie.label.threshold&&!h(f[c],n,c))return!1;n+=f[c].angle}return!0;function h(t,n,a){if(0==t.data[0][1])return!0;var c,h=o.legend.labelFormatter,p=o.series.pie.label.formatter;c=h?h(t.label,t):t.label,p&&(c=p(c,t));var f=(n+t.angle+n)/2,m=r+Math.round(Math.cos(f)*l),g=s+Math.round(Math.sin(f)*l)*o.series.pie.tilt,v="<span class='pieLabel' id='pieLabel"+a+"' style='position:absolute;top:"+g+"px;left:"+m+"px;'>"+c+"</span>";i.append(v);var b=i.children("#pieLabel"+a),y=g-b.height()/2,w=m-b.width()/2;if(b.css("top",y),b.css("left",w),0-y>0||0-w>0||u-(y+b.height())<0||d-(w+b.width())<0)return!1;if(0!=o.series.pie.label.background.opacity){var x=o.series.pie.label.background.color;null==x&&(x=t.color);var C="top:"+y+"px;left:"+w+"px;";e("<div class='pieLabelBackground' style='position:absolute;width:"+b.width()+"px;height:"+b.height()+"px;"+C+"background-color:"+x+";'></div>").css("opacity",o.series.pie.label.background.opacity).insertBefore(b)}return!0}}();function m(e,t,i){e<=0||isNaN(e)||(i?c.fillStyle=t:(c.strokeStyle=t,c.lineJoin="round"),c.beginPath(),Math.abs(e-2*Math.PI)>1e-9&&c.moveTo(0,0),c.arc(0,0,n,l,l+e/2,!1),c.arc(0,0,n,l+e/2,l+e,!1),c.closePath(),l+=e,i?c.fill():c.stroke())}}}function p(e){if(o.series.pie.innerRadius>0){e.save();var t=o.series.pie.innerRadius>1?o.series.pie.innerRadius:a*o.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=o.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=o.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore()}}function f(e,t){for(var n=!1,i=-1,o=e.length,a=o-1;++i<o;a=i)(e[i][1]<=t[1]&&t[1]<e[a][1]||e[a][1]<=t[1]&&t[1]<e[i][1])&&t[0]<(e[a][0]-e[i][0])*(t[1]-e[i][1])/(e[a][1]-e[i][1])+e[i][0]&&(n=!n);return n}function m(e){v("plothover",e)}function g(e){v("plotclick",e)}function v(e,n){var l=t.offset(),u=function(e,n){for(var i,o,l=t.getData(),d=t.getOptions(),u=d.series.pie.radius>1?d.series.pie.radius:a*d.series.pie.radius,h=0;h<l.length;++h){var p=l[h];if(p.pie.show){if(c.save(),c.beginPath(),c.moveTo(0,0),c.arc(0,0,u,p.startAngle,p.startAngle+p.angle/2,!1),c.arc(0,0,u,p.startAngle+p.angle/2,p.startAngle+p.angle,!1),c.closePath(),i=e-r,o=n-s,c.isPointInPath){if(c.isPointInPath(e-r,n-s))return c.restore(),{datapoint:[p.percent,p.data],dataIndex:0,series:p,seriesIndex:h}}else if(f([[0,0],[u*Math.cos(p.startAngle),u*Math.sin(p.startAngle)],[u*Math.cos(p.startAngle+p.angle/4),u*Math.sin(p.startAngle+p.angle/4)],[u*Math.cos(p.startAngle+p.angle/2),u*Math.sin(p.startAngle+p.angle/2)],[u*Math.cos(p.startAngle+p.angle/1.5),u*Math.sin(p.startAngle+p.angle/1.5)],[u*Math.cos(p.startAngle+p.angle),u*Math.sin(p.startAngle+p.angle)]],[i,o]))return c.restore(),{datapoint:[p.percent,p.data],dataIndex:0,series:p,seriesIndex:h};c.restore()}}return null}(parseInt(n.pageX-l.left),parseInt(n.pageY-l.top));if(o.grid.autoHighlight)for(var h=0;h<d.length;++h){var p=d[h];p.auto!=e||u&&p.series==u.series||b(p.series)}u&&function(e,n){var i=y(e);-1==i?(d.push({series:e,auto:n}),t.triggerRedrawOverlay()):n||(d[i].auto=!1)}(u.series,e);var m={pageX:n.pageX,pageY:n.pageY};i.trigger(e,[m,u])}function b(e){null==e&&(d=[],t.triggerRedrawOverlay());var n=y(e);-1!=n&&(d.splice(n,1),t.triggerRedrawOverlay())}function y(e){for(var t=0;t<d.length;++t){if(d[t].series==e)return t}return-1}t.hooks.processOptions.push((function(e,t){t.series.pie.show&&(t.grid.show=!1,"auto"==t.series.pie.label.show&&(t.legend.show?t.series.pie.label.show=!1:t.series.pie.label.show=!0),"auto"==t.series.pie.radius&&(t.series.pie.label.show?t.series.pie.radius=3/4:t.series.pie.radius=1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))})),t.hooks.bindEvents.push((function(e,t){var n=e.getOptions();n.series.pie.show&&(n.grid.hoverable&&t.unbind("mousemove").mousemove(m),n.grid.clickable&&t.unbind("click").click(g))})),t.hooks.processDatapoints.push((function(e,t,n,i){e.getOptions().series.pie.show&&u(e,t,n)})),t.hooks.drawOverlay.push((function(e,t){e.getOptions().series.pie.show&&function(e,t){var n=e.getOptions(),i=n.series.pie.radius>1?n.series.pie.radius:a*n.series.pie.radius;t.save(),t.translate(r,s),t.scale(1,n.series.pie.tilt);for(var o=0;o<d.length;++o)l(d[o].series);function l(e){e.angle<=0||isNaN(e.angle)||(t.fillStyle="rgba(255, 255, 255, "+n.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(e.angle-2*Math.PI)>1e-9&&t.moveTo(0,0),t.arc(0,0,i,e.startAngle,e.startAngle+e.angle/2,!1),t.arc(0,0,i,e.startAngle+e.angle/2,e.startAngle+e.angle,!1),t.closePath(),t.fill())}p(t),t.restore()}(e,t)})),t.hooks.draw.push((function(e,t){e.getOptions().series.pie.show&&h(e,t)}))},options:t,name:"pie",version:"1.1"})}(jQuery),function(e,t){function n(){var e=this;e.id=null,e.busy=!1,e.start=function(t,n){e.busy||(e.stop(),e.id=setTimeout((function(){t(),e.id=null,e.busy=!1}),n),e.busy=!0)},e.stop=function(){null!==e.id&&(clearTimeout(e.id),e.id=null,e.busy=!1)}}function i(i,o,a){var r=this;r.id=a,r.table=i,r.options=o,r.breakpoints=[],r.breakpointNames="",r.columns={},r.plugins=t.footable.plugins.load(r);var s=r.options,l=s.classes,c=s.events,d=s.triggers,u=0;return r.timers={resize:new n,register:function(e){return r.timers[e]=new n,r.timers[e]}},r.init=function(){var n=e(t),i=e(r.table);if(t.footable.plugins.init(r),i.hasClass(l.loaded))r.raise(c.alreadyInitialized);else{for(var o in r.raise(c.initializing),i.addClass(l.loading),i.find(s.columnDataSelector).each((function(){var e=r.getColumnData(this);r.columns[e.index]=e})),s.breakpoints)r.breakpoints.push({name:o,width:s.breakpoints[o]}),r.breakpointNames+=o+" ";r.breakpoints.sort((function(e,t){return e.width-t.width})),i.bind(d.initialize,(function(){i.removeData("footable_info"),i.data("breakpoint",""),i.trigger(d.resize),i.removeClass(l.loading),i.addClass(l.loaded).addClass(l.main),r.raise(c.initialized)})).bind(d.redraw,(function(){r.redraw()})).bind(d.resize,(function(){r.resize()})).bind(d.expandFirstRow,(function(){i.find(s.toggleSelector).first().not("."+l.detailShow).trigger(d.toggleRow)})),i.trigger(d.initialize),n.bind("resize.footable",(function(){r.timers.resize.stop(),r.timers.resize.start((function(){r.raise(d.resize)}),s.delay)}))}},r.addRowToggle=function(){if(s.addRowToggle){var t=e(r.table),n=!1;for(var i in t.find("span."+l.toggle).remove(),r.columns){var o=r.columns[i];if(o.toggle){n=!0;var a="> tbody > tr:not(."+l.detail+",."+l.disabled+") > td:nth-child("+(parseInt(o.index,10)+1)+")";return void t.find(a).not("."+l.detailCell).prepend(e("<span />").addClass(l.toggle))}}n||t.find("> tbody > tr:not(."+l.detail+",."+l.disabled+") > td:first-child").not("."+l.detailCell).prepend(e("<span />").addClass(l.toggle))}},r.setColumnClasses=function(){for(var t in $table=e(r.table),r.columns){var n=r.columns[t];if(null!==n.className){var i="",o=!0;e.each(n.matches,(function(e,t){o||(i+=", "),i+="> tbody > tr:not(."+l.detail+") > td:nth-child("+(parseInt(t,10)+1)+")",o=!1})),$table.find(i).not("."+l.detailCell).addClass(n.className)}}},r.bindToggleSelectors=function(){var t=e(r.table);r.hasAnyBreakpointColumn()&&(t.find(s.toggleSelector).unbind(d.toggleRow).bind(d.toggleRow,(function(){var t=e(this).is("tr")?e(this):e(this).parents("tr:first");r.toggleDetail(t.get(0))})),t.find(s.toggleSelector).unbind("click.footable").bind("click.footable",(function(n){t.is(".breakpoint")&&e(n.target).is("td,."+l.toggle)&&e(this).trigger(d.toggleRow)})))},r.parse=function(e,t){return(s.parsers[t.type]||s.parsers.alpha)(e)},r.getColumnData=function(t){var n=e(t),i=n.data("hide"),o=n.index();i=i||"",i=jQuery.map(i.split(","),(function(e){return jQuery.trim(e)}));var a={index:o,hide:{},type:n.data("type")||"alpha",name:n.data("name")||e.trim(n.text()),ignore:n.data("ignore")||!1,toggle:n.data("toggle")||!1,className:n.data("class")||null,matches:[],names:{},group:n.data("group")||null,groupName:null};if(null!==a.group){var l=e(r.table).find('> thead > tr.footable-group-row > th[data-group="'+a.group+'"], > thead > tr.footable-group-row > td[data-group="'+a.group+'"]').first();a.groupName=r.parse(l,{type:"alpha"})}var d=parseInt(n.prev().attr("colspan")||0,10);u+=d>1?d-1:0;var h=parseInt(n.attr("colspan")||0,10),p=a.index+u;if(h>1){var f=n.data("names");f=(f=f||"").split(",");for(var m=0;h>m;m++)a.matches.push(m+p),f.length>m&&(a.names[m+p]=f[m])}else a.matches.push(p);a.hide.default="all"===n.data("hide")||e.inArray("default",i)>=0;var g=!1;for(var v in s.breakpoints)a.hide[v]="all"===n.data("hide")||e.inArray(v,i)>=0,g=g||a.hide[v];return a.hasBreakpoint=g,r.raise(c.columnData,{column:{data:a,th:t}}).column.data},r.getViewportWidth=function(){return window.innerWidth||(document.body?document.body.offsetWidth:0)},r.calculateWidth=function(e,t){return jQuery.isFunction(s.calculateWidthOverride)?s.calculateWidthOverride(e,t):(t.viewportWidth<t.width&&(t.width=t.viewportWidth),t.parentWidth<t.width&&(t.width=t.parentWidth),t)},r.hasBreakpointColumn=function(e){for(var t in r.columns)if(r.columns[t].hide[e]){if(r.columns[t].ignore)continue;return!0}return!1},r.hasAnyBreakpointColumn=function(){for(var e in r.columns)if(r.columns[e].hasBreakpoint)return!0;return!1},r.resize=function(){var t=e(r.table);if(t.is(":visible")&&r.hasAnyBreakpointColumn()){var n={width:t.width(),viewportWidth:r.getViewportWidth(),parentWidth:t.parent().width()};n=r.calculateWidth(t,n);var i=t.data("footable_info");if(t.data("footable_info",n),r.raise(c.resizing,{old:i,info:n}),!i||i&&i.width&&i.width!==n.width){for(var o,a=null,s=0;r.breakpoints.length>s;s++)if((o=r.breakpoints[s])&&o.width&&n.width<=o.width){a=o;break}var l=null===a?"default":a.name,u=r.hasBreakpointColumn(l),h=t.data("breakpoint");t.data("breakpoint",l).removeClass("default breakpoint").removeClass(r.breakpointNames).addClass(l+(u?" breakpoint":"")),l!==h&&(t.trigger(d.redraw),r.raise(c.breakpoint,{breakpoint:l,info:n}))}r.raise(c.resized,{old:i,info:n})}},r.redraw=function(){r.addRowToggle(),r.bindToggleSelectors(),r.setColumnClasses();var t=e(r.table),n=t.data("breakpoint"),i=r.hasBreakpointColumn(n);t.find("> tbody > tr:not(."+l.detail+")").data("detail_created",!1).end().find("> thead > tr:last-child > th").each((function(){var i=r.columns[e(this).index()],o="",a=!0;e.each(i.matches,(function(e,t){a||(o+=", ");var n=t+1;o+="> tbody > tr:not(."+l.detail+") > td:nth-child("+n+")",o+=", > tfoot > tr:not(."+l.detail+") > td:nth-child("+n+")",o+=", > colgroup > col:nth-child("+n+")",a=!1})),o+=', > thead > tr[data-group-row="true"] > th[data-group="'+i.group+'"]';var s=t.find(o).add(this);if(!1===i.hide[n]?s.show():s.hide(),1===t.find("> thead > tr.footable-group-row").length){var c=t.find('> thead > tr:last-child > th[data-group="'+i.group+'"]:visible, > thead > tr:last-child > th[data-group="'+i.group+'"]:visible'),d=t.find('> thead > tr.footable-group-row > th[data-group="'+i.group+'"], > thead > tr.footable-group-row > td[data-group="'+i.group+'"]'),u=0;e.each(c,(function(){u+=parseInt(e(this).attr("colspan")||1,10)})),u>0?d.attr("colspan",u).show():d.hide()}})).end().find("> tbody > tr."+l.detailShow).each((function(){r.createOrUpdateDetailRow(this)})),t.find("> tbody > tr."+l.detailShow+":visible").each((function(){var t=e(this).next();t.hasClass(l.detail)&&(i?t.show():t.hide())})),t.find("> thead > tr > th.footable-last-column, > tbody > tr > td.footable-last-column").removeClass("footable-last-column"),t.find("> thead > tr > th.footable-first-column, > tbody > tr > td.footable-first-column").removeClass("footable-first-column"),t.find("> thead > tr, > tbody > tr").find("> th:visible:last, > td:visible:last").addClass("footable-last-column").end().find("> th:visible:first, > td:visible:first").addClass("footable-first-column"),r.raise(c.redrawn)},r.toggleDetail=function(t){var n=t.jquery?t:e(t),i=n.next();n.hasClass(l.detailShow)?(n.removeClass(l.detailShow),i.hasClass(l.detail)&&i.hide(),r.raise(c.rowCollapsed,{row:n[0]})):(r.createOrUpdateDetailRow(n[0]),n.addClass(l.detailShow),n.next().show(),r.raise(c.rowExpanded,{row:n[0]}))},r.removeRow=function(t){var n=t.jquery?t:e(t);n.hasClass(l.detail)&&(n=n.prev());var i=n.next();!0===n.data("detail_created")&&i.remove(),n.remove(),r.raise(c.rowRemoved)},r.appendRow=function(t){var n=t.jquery?t:e(t);e(r.table).find("tbody").append(n),r.redraw()},r.getColumnFromTdIndex=function(t){var n=null;for(var i in r.columns)if(e.inArray(t,r.columns[i].matches)>=0){n=r.columns[i];break}return n},r.createOrUpdateDetailRow=function(t){var n,i=e(t),o=i.next(),a=[];if(!0===i.data("detail_created"))return!0;if(i.is(":hidden"))return!1;if(r.raise(c.rowDetailUpdating,{row:i,detail:o}),i.find("> td:hidden").each((function(){var t=e(this).index(),n=r.getColumnFromTdIndex(t),i=n.name;return!0===n.ignore||(t in n.names&&(i=n.names[t]),a.push({name:i,value:r.parse(this,n),display:e.trim(e(this).html()),group:n.group,groupName:n.groupName})),!0})),0===a.length)return!1;var d=i.find("> td:visible").length,u=o.hasClass(l.detail);return u||(o=e('<tr class="'+l.detail+'"><td class="'+l.detailCell+'"><div class="'+l.detailInner+'"></div></td></tr>'),i.after(o)),o.find("> td:first").attr("colspan",d),n=o.find("."+l.detailInner).empty(),s.createDetail(n,a,s.createGroupedDetail,s.detailSeparator,l),i.data("detail_created",!0),r.raise(c.rowDetailUpdated,{row:i,detail:o}),!u},r.raise=function(t,n){!0===r.options.debug&&e.isFunction(r.options.log)&&r.options.log(t,"event"),n=n||{};var i={ft:r};e.extend(!0,i,n);var o=e.Event(t,i);return o.ft||e.extend(!0,o,i),e(r.table).trigger(o),o},r.init(),r}t.footable={options:{delay:100,breakpoints:{phone:480,tablet:1024},parsers:{alpha:function(t){return e(t).data("value")||e.trim(e(t).text())},numeric:function(t){var n=e(t).data("value")||e(t).text().replace(/[^0-9.\-]/g,"");return n=parseFloat(n),isNaN(n)&&(n=0),n}},addRowToggle:!0,calculateWidthOverride:null,toggleSelector:" > tbody > tr:not(.footable-row-detail)",columnDataSelector:"> thead > tr:last-child > th, > thead > tr:last-child > td",detailSeparator:":",createGroupedDetail:function(e){for(var t={_none:{name:null,data:[]}},n=0;e.length>n;n++){var i=e[n].group;null!==i?(i in t||(t[i]={name:e[n].groupName||e[n].group,data:[]}),t[i].data.push(e[n])):t._none.data.push(e[n])}return t},createDetail:function(e,t,n,i,o){var a=n(t);for(var r in a)if(0!==a[r].data.length){"_none"!==r&&e.append('<div class="'+o.detailInnerGroup+'">'+a[r].name+"</div>");for(var s=0;a[r].data.length>s;s++){var l=a[r].data[s].name?i:"";e.append('<div class="'+o.detailInnerRow+'"><div class="'+o.detailInnerName+'">'+a[r].data[s].name+l+'</div><div class="'+o.detailInnerValue+'">'+a[r].data[s].display+"</div></div>")}}},classes:{main:"footable",loading:"footable-loading",loaded:"footable-loaded",toggle:"footable-toggle",disabled:"footable-disabled",detail:"footable-row-detail",detailCell:"footable-row-detail-cell",detailInner:"footable-row-detail-inner",detailInnerRow:"footable-row-detail-row",detailInnerGroup:"footable-row-detail-group",detailInnerName:"footable-row-detail-name",detailInnerValue:"footable-row-detail-value",detailShow:"footable-detail-show"},triggers:{initialize:"footable_initialize",resize:"footable_resize",redraw:"footable_redraw",toggleRow:"footable_toggle_row",expandFirstRow:"footable_expand_first_row"},events:{alreadyInitialized:"footable_already_initialized",initializing:"footable_initializing",initialized:"footable_initialized",resizing:"footable_resizing",resized:"footable_resized",redrawn:"footable_redrawn",breakpoint:"footable_breakpoint",columnData:"footable_column_data",rowDetailUpdating:"footable_row_detail_updating",rowDetailUpdated:"footable_row_detail_updated",rowCollapsed:"footable_row_collapsed",rowExpanded:"footable_row_expanded",rowRemoved:"footable_row_removed"},debug:!1,log:null},version:{major:0,minor:5,toString:function(){return t.footable.version.major+"."+t.footable.version.minor},parse:function(e){return version=/(\d+)\.?(\d+)?\.?(\d+)?/.exec(e),{major:parseInt(version[1],10)||0,minor:parseInt(version[2],10)||0,patch:parseInt(version[3],10)||0}}},plugins:{_validate:function(n){if(!e.isFunction(n))return!0===t.footable.options.debug&&console.error('Validation failed, expected type "function", received type "{0}".',typeof n),!1;var i=new n;return"string"!=typeof i.name?(!0===t.footable.options.debug&&console.error('Validation failed, plugin does not implement a string property called "name".',i),!1):e.isFunction(i.init)?(!0===t.footable.options.debug&&console.log('Validation succeeded for plugin "'+i.name+'".',i),!0):(!0===t.footable.options.debug&&console.error('Validation failed, plugin "'+i.name+'" does not implement a function called "init".',i),!1)},registered:[],register:function(n,i){t.footable.plugins._validate(n)&&(t.footable.plugins.registered.push(n),"object"==typeof i&&e.extend(!0,t.footable.options,i))},load:function(e){var n,i,o=[];for(i=0;t.footable.plugins.registered.length>i;i++)try{n=t.footable.plugins.registered[i],o.push(new n(e))}catch(e){!0===t.footable.options.debug&&console.error(e)}return o},init:function(e){for(var n=0;e.plugins.length>n;n++)try{e.plugins[n].init(e)}catch(e){!0===t.footable.options.debug&&console.error(e)}}}};var o=0;e.fn.footable=function(n){n=n||{};var a=e.extend(!0,{},t.footable.options,n);return this.each((function(){o++;var t=new i(this,a,o);e(this).data("footable",t)}))}}(jQuery,window);var igms=!1;function initScripts(){if(!igms){componentsPath="";var e=[componentsPath+"/MelisCore/assets/components/modules/admin/maps/google/assets/lib/jquery-ui-map/ui/jquery.ui.map.js",componentsPath+"/MelisCore/assets/components/modules/admin/maps/google/assets/lib/jquery-ui-map/ui/jquery.ui.map.extensions.js",componentsPath+"/MelisCore/assets/components/modules/admin/maps/google/assets/lib/jquery-ui-map/ui/jquery.ui.map.services.js",componentsPath+"/MelisCore/assets/components/modules/admin/maps/google/assets/lib/jquery-ui-map/ui/jquery.ui.map.microformat.js",componentsPath+"/MelisCore/assets/components/modules/admin/maps/google/assets/lib/jquery-ui-map/addons/markerclustererplus/markerclusterer.min.js"];$.each(e,(function(e,t){if($('[src="'+t+'"]').length)return!0;var n=document.createElement("script");n.src=t,$("head").prepend($(n))})),$.extend($.ui.gmap.prototype,{pagination:function(e){var t=$("<div id='pagination' class='btn-group btn-group-lg' style='width: 100%'><a href='#' class='col-md-2 back-btn btn btn-inverse'>&lsaquo;</a><a class='col-md-8 display btn btn-inverse'></a><a href='#' class='col-md-2 fwd-btn btn btn-inverse'>&rsaquo;</a></div>"),n=this,i=0;e=e||"title";n.set("pagination",(function(o,a){o&&(i+=a,t.find(".display").text(n.get("markers")[i][e]),n.get("map").panTo(n.get("markers")[i].getPosition()))})),n.get("pagination")(!0,0),t.find(".back-btn").click((function(e){e.preventDefault(),n.get("pagination")(i>0,-1,this)})),t.find(".fwd-btn").click((function(e){e.preventDefault(),n.get("pagination")(i<n.get("markers").length-1,1,this)})),n.addControl(t,google.maps.ControlPosition.TOP_LEFT)}}),igms=!0}}function checkAPIMaps(){if("object"==typeof google&&"object"==typeof google.maps&&initGoogleMaps(),$("#google-map-clustering").length||$("#google-map-extend-pagination").length||$("#google-map-filters").length||$("#google-map-geocoding").length||$("#google-map-json").length||$("#google-map-streetview").length||$("#google-fs").length||$("#google-fs-realestate").length){var e=document.createElement("script");e.type="text/javascript",e.async="async",e.async="defeer",e.src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyBrxUTzqWroARkIZ24zYukk7E43b9F38E4&callback=initGoogleMaps",!$('script[src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyBrxUTzqWroARkIZ24zYukk7E43b9F38E4&callback=initGoogleMaps"]').length>0&&document.body.appendChild(e)}}function initGoogleMaps(){if(initScripts(),$("#google-map-clustering").length&&$("#google-map-clustering").gmap({zoom:2,disableDefaultUI:!0}).bind("init",(function(e,t){for(var n=t.getBounds(),i=n.getSouthWest(),o=n.getNorthEast(),a=o.lng()-i.lng(),r=o.lat()-i.lat(),s=0;s<1e3;s++){var l=i.lat()+r*Math.random(),c=i.lng()+a*Math.random();$("#google-map-clustering").gmap("addMarker",{position:new google.maps.LatLng(l,c)}).click((function(){$("#google-map-clustering").gmap("openInfoWindow",{content:"Hello world!"},this)}))}mcOptions={imagePath:"https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m"},$("#google-map-clustering").gmap("set","MarkerClusterer",new MarkerClusterer(t,$(this).gmap("get","markers"),mcOptions))})),$("#google-map-extend-pagination").length){var e=[{position:"59.32893000000001,18.064910000000054",title:"Stockholm, Sweden"},{position:"35.6894875,139.69170639999993",title:"Tokyo, Japan"},{position:"13.7234186, 100.47623190000002",title:"Bangkok, Thailand"},{position:"51.508129,-0.12800500000003012",title:"London, Great Britain"},{position:"40.7143528,-74.0059731",title:"New York, USA"},{position:"48.856614,2.3522219000000177",title:"Paris, France"},{position:"34.0522342,-118.2436849",title:"Los Angeles, USA"},{position:"55.75,37.616666699999996",title:"Moskva, Ryssia"}];$("#google-map-extend-pagination").gmap({zoom:5,disableDefaultUI:!0,callback:function(){var t=this;$.each(e,(function(e,n){t.addMarker(n).click((function(){t.openInfoWindow({content:this.title},this)}))}))}}).gmap("pagination","title")}if($("#google-map-filters").length&&(String.prototype.format=function(){for(k in a=this,arguments)a=a.replace("{"+k+"}",arguments[k]);return a},$("#google-map-filters").gmap({disableDefaultUI:!0}).bind("init",(function(e,t){$("#google-map-filters").gmap("addControl","radios",google.maps.ControlPosition.TOP_LEFT);var n=t.getBounds().getSouthWest(),o=t.getBounds().getNorthEast(),a=o.lng()-n.lng(),r=o.lat()-n.lat(),s=[],l=["jQuery","Google maps","Plugin","SEO","Java","PHP","C#","Ruby","JavaScript","HTML"];for($.each(l,(function(e,t){$("#radios").append('<label style="margin-right:5px;display:block;"><input type="checkbox" style="margin-right:3px" value="{0}"/>{1}</label>'.format(t,t))})),i=0;i<100;i++){var c=[];for(j=0;j<5*Math.random();j++)c.push(l[Math.floor(10*Math.random())]);$("#google-map-filters").gmap("addMarker",{icon:s[Math.floor(7*Math.random())],tags:c,bound:!0,position:new google.maps.LatLng(n.lat()+r*Math.random(),n.lng()+a*Math.random())}).click((function(){var e=$("#google-map-filters").gmap("inViewport",$(this)[0])?"I'm visible in the viewport.":"I'm sad and hidden.";$("#google-map-filters").gmap("openInfoWindow",{content:$(this)[0].tags+"<br/>"+e},this)}))}$("input:checkbox").click((function(){$("#google-map-filters").gmap("closeInfoWindow"),$("#google-map-filters").gmap("set","bounds",null);var e=[];$("input:checkbox:checked").each((function(t,n){e.push($(n).val())})),e.length>0?$("#google-map-filters").gmap("find","markers",{property:"tags",value:e,operator:"OR"},(function(e,t){t&&$("#google-map-filters").gmap("addBounds",e.position),e.setVisible(t)})):$.each($("#google-map-filters").gmap("get","markers"),(function(e,t){$("#google-map-filters").gmap("addBounds",t.position),t.setVisible(!0)}))}))}))),$("#google-map-geocoding").length){function t(e,t){$("#google-map-geocoding").gmap("search",{location:e},(function(e,i){"OK"===i&&($.each(e[0].address_components,(function(e,n){"administrative_area_level_1"==n.types[0]||"administrative_area_level_2"==n.types[0]?$("#dialog"+t.__gm_id+' [name="state"]').attr("value",n.long_name):"country"==n.types[0]&&$("#dialog"+t.__gm_id+' [name="country"]').attr("value",n.long_name)})),t.setTitle(e[0].formatted_address),$("#dialog"+t.__gm_id+' [name="address"]').attr("value",e[0].formatted_address),n(t))}))}function n(e){bootbox.dialog({message:$("#dialog"+e.__gm_id).html(),title:"Edit location",buttons:{success:{label:"Save",className:"btn-success",callback:function(){}},danger:{label:"Remove",className:"btn-danger",callback:function(){e.setMap(null)}}}})}$("#google-map-geocoding").gmap({zoomControl:!0,zoomControlOpt:{style:"SMALL",position:"TOP_LEFT"},panControl:!1,streetViewControl:!1,mapTypeControl:!1,overviewMapControl:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP}).bind("init",(function(e,i){var o=new google.maps.LatLng(53.29463136870075,-6.15019965916872);$("#google-map-geocoding").gmap("addMarker",{position:o,draggable:!0,bounds:!1},(function(e,t){$("#modals").append('<div id="dialog'+t.__gm_id+'" class="hide"><label for="country">Country</label><input id="country'+t.__gm_id+'" type="text" class="form-control" name="country" value=""/><div class="separator bottom"></div><label for="state">State</label><input id="state'+t.__gm_id+'" type="text" class="form-control" name="state" value=""/><div class="separator bottom"></div><label for="address">Address</label><input id="address'+t.__gm_id+'" type="text" class="form-control" name="address" value=""/><div class="separator bottom"></div><label for="comment">Comment</label><textarea id="comment" name="comment" class="form-control" rows="5"></textarea></div>')})).dragend((function(e){t(e.latLng,this)})).click((function(e){t(e.latLng,this)})),$("#google-map-geocoding").gmap("option","center",o),$("#google-map-geocoding").gmap("option","zoom",16),$(i).click((function(e){$("#google-map-geocoding").gmap("addMarker",{position:e.latLng,draggable:!0,bounds:!1},(function(e,n){$("#modals").append('<div id="dialog'+n.__gm_id+'" class="hide"><label for="country">Country</label><input id="country'+n.__gm_id+'" type="text" class="form-control" name="country" value=""/><div class="separator bottom"></div><label for="state">State</label><input id="state'+n.__gm_id+'" type="text" class="form-control" name="state" value=""/><div class="separator bottom"></div><label for="address">Address</label><input id="address'+n.__gm_id+'" type="text" class="form-control" name="address" value=""/><div class="separator bottom"></div><label for="comment">Comment</label><textarea id="comment" name="comment" class="form-control" rows="5"></textarea></div>'),t(n.getPosition(),n)})).dragend((function(e){t(e.latLng,this)})).click((function(){n(this)}))}))}))}$("#google-map-json").length&&$("#google-map-json").gmap({zoomControl:!0,zoomControlOpt:{style:"SMALL",position:"TOP_LEFT"},panControl:!1,streetViewControl:!1,mapTypeControl:!1,overviewMapControl:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP}).bind("init",(function(){$.getJSON(componentsPath+"/MelisCore/assets/components/modules/admin/maps/google/assets/lib/jquery-ui-map/data/demo.json",(function(e){$.each(e.markers,(function(e,t){$("#google-map-json").gmap("addMarker",{position:new google.maps.LatLng(t.latitude,t.longitude)}).click((function(){$("#google-map-json").gmap("openInfoWindow",{content:t.content},this)}))})),$("#google-map-json").gmap("option","center",new google.maps.LatLng(e.markers[1].latitude,e.markers[1].longitude)),$("#google-map-json").gmap("option","zoom",16)}))})),$("#google-map-streetview").length&&$("#google-map-streetview").gmap({disableDefaultUI:!0,callback:function(){var e=this;e.microformat(".vevent",(function(t,n,i){var o=$(n).clone().addClass("ui-dialog-vevent").append('<div id="streetview{0}" class="streetview"></div>'.replace("{0}",i));o.find("p").remove();var a=new google.maps.LatLng(t.location[0].geo[0].latitude["value-title"],t.location[0].geo[0].longitude["value-title"]);e.addMarker({bounds:!0,position:a,title:t.summary},(function(t,i){$(n).find(".summary").click((function(){return $(i).triggerEvent("click"),!1})),$(n).mouseover((function(){e.get("map").panTo(i.getPosition())}))})).click((function(){e.get("map").panTo($(this)[0].getPosition()),bootbox.alert($(o).html()),e.displayStreetView("streetview{0}".replace("{0}",i),{position:$(this)[0].getPosition()})}))}))}}),$("#google-fs").length&&($("#google-fs").height($(window).height()-$("#footer").height()-$(".navbar.main").height()-$("#menu-top").height()),$("#google-fs").gmap({zoomControl:!0,zoomControlOpt:{style:"SMALL",position:"TOP_LEFT"},panControl:!1,streetViewControl:!1,mapTypeControl:!1,overviewMapControl:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP}).bind("init",(function(){$.getJSON(componentsPath+"/MelisCore/assets/components/modules/admin/maps/google/assets/lib/jquery-ui-map/data/demo.json",(function(e){$.each(e.markers,(function(e,t){$("#google-fs").gmap("addMarker",{position:new google.maps.LatLng(t.latitude,t.longitude),bounds:!0,animation:google.maps.Animation.DROP}).click((function(){$("#google-fs").gmap("openInfoWindow",{content:t.content},this)}))})),$("#google-fs").gmap("option","center",new google.maps.LatLng(e.markers[1].latitude,e.markers[1].longitude)),$("#google-fs").gmap("option","zoom",16),setTimeout((function(){$("#google-fs").gmap("openInfoWindow",{content:e.markers[1].content},$("#google-fs").gmap("get","markers")[1])}),1e3)}))})));var o=$("#google-fs-realestate");if(o.length){var r=$(window).height()-$("#footer").height()-$(".navbar.main").height()-$("#menu-top").height(),s=o.data("module")||"admin",l=rootPath+s+"/ajax/maps_google_realestate.json",c="auto";switch(s){default:case"admin":c=240;break;case"realestate":c=330}function d(e){var t=$("<div/>");return t.addClass("innerAll inner-2x").html("<div></div>"),"admin"==s&&t.prepend("<h4></h4>").find(":header").text(e.title),t.find("> div").addClass("msfr_info_content").html(e.content),t.html()}"admin"==s&&o.height(r),o.gmap({zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT},panControl:!1,streetViewControl:!1,mapTypeControl:!1,overviewMapControl:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:16}).bind("init",(function(){$.getJSON(l,(function(e){$.each(e.markers,(function(e,t){setTimeout((function(){o.gmap("addMarker",{position:new google.maps.LatLng(t.latitude,t.longitude),draggable:!0,animation:google.maps.Animation.DROP}).click((function(){o.gmap("openInfoWindow",{content:d(t),maxWidth:c},this)})),1==e&&(o.gmap("openInfoWindow",{content:d(t),maxWidth:c},o.gmap("get","markers")[e]),o.gmap("option","center",new google.maps.LatLng(t.latitude,t.longitude)))}),300*e)}))}))}))}}function mapsVectorInit(){$('#maps_vector_tabs a[data-toggle="tab"]').on("shown.bs.tab",(function(e){var t,n,i,o,a,r,s=$(this),l=s.attr("href");if(!s.attr("data-init"))switch(s.attr("data-init",1),l){case"#tab1":initWorldMapGDP();break;case"#tab2":$("#world-map-markers").vectorMap({map:"world_mill",scaleColors:["#C8EEFF","#0071A4"],normalizeFunction:"polynomial",hoverOpacity:.7,hoverColor:!1,markerStyle:{initial:{fill:primaryColor,stroke:"#383f47"}},backgroundColor:"#383f47",markers:[{latLng:[41.9,12.45],name:"Vatican City"},{latLng:[43.73,7.41],name:"Monaco"},{latLng:[-.52,166.93],name:"Nauru"},{latLng:[-8.51,179.21],name:"Tuvalu"},{latLng:[43.93,12.46],name:"San Marino"},{latLng:[47.14,9.52],name:"Liechtenstein"},{latLng:[7.11,171.06],name:"Marshall Islands"},{latLng:[17.3,-62.73],name:"Saint Kitts and Nevis"},{latLng:[3.2,73.22],name:"Maldives"},{latLng:[35.88,14.5],name:"Malta"},{latLng:[12.05,-61.75],name:"Grenada"},{latLng:[13.16,-61.23],name:"Saint Vincent and the Grenadines"},{latLng:[13.16,-59.55],name:"Barbados"},{latLng:[17.11,-61.85],name:"Antigua and Barbuda"},{latLng:[-4.61,55.45],name:"Seychelles"},{latLng:[7.35,134.46],name:"Palau"},{latLng:[42.5,1.51],name:"Andorra"},{latLng:[14.01,-60.98],name:"Saint Lucia"},{latLng:[6.91,158.18],name:"Federated States of Micronesia"},{latLng:[1.3,103.8],name:"Singapore"},{latLng:[1.46,173.03],name:"Kiribati"},{latLng:[-21.13,-175.2],name:"Tonga"},{latLng:[15.3,-61.38],name:"Dominica"},{latLng:[-20.2,57.5],name:"Mauritius"},{latLng:[26.02,50.55],name:"Bahrain"},{latLng:[.33,6.73],name:"S�o Tom� and Pr�ncipe"}]});break;case"#tab3":!function(){var e="";$.getJSON(e+"/MelisCore/assets/components/modules/admin/maps/vector/assets/lib/data/us-unemployment.json",(function(e){var t=2009;statesValues=jvm.values.apply({},jvm.values(e.states)),metroPopValues=Array.prototype.concat.apply([],jvm.values(e.metro.population)),metroUnemplValues=Array.prototype.concat.apply([],jvm.values(e.metro.unemployment)),$("#usa-unemployment").vectorMap({map:"us_aea",markers:e.metro.coords,series:{markers:[{attribute:"fill",scale:["#FEE5D9","#A50F15"],values:e.metro.unemployment[t],min:jvm.min(metroUnemplValues),max:jvm.max(metroUnemplValues)},{attribute:"r",scale:[5,20],values:e.metro.population[t],min:jvm.min(metroPopValues),max:jvm.max(metroPopValues)}],regions:[{scale:["#DEEBF7","#08519C"],attribute:"fill",values:e.states[t],min:jvm.min(statesValues),max:jvm.max(statesValues)}]},onMarkerLabelShow:function(n,i,o){i.html("<b>"+e.metro.names[o]+"</b><br/><b>Population: </b>"+e.metro.population[t][o]+"</br><b>Unemployment rate: </b>"+e.metro.unemployment[t][o]+"%")},onRegionLabelShow:function(n,i,o){i.html("<b>"+i.html()+"</b></br><b>Unemployment rate: </b>"+e.states[t][o]+"%")}});var n=$("#usa-unemployment").vectorMap("get","mapObject");$("#usa-unemployment-slider").slider({value:t,min:2005,max:2009,step:1,slide:function(i,o){t=o.value,n.series.regions[0].setValues(e.states[o.value]),n.series.markers[0].setValues(e.metro.unemployment[o.value]),n.series.markers[1].setValues(e.metro.population[o.value])}})}))}();break;case"#tab4":map=new jvm.Map({container:$("#regions-selection"),map:"de_merc",regionsSelectable:!0,markersSelectable:!0,markers:[{latLng:[52.5,13.39],name:"Berlin"},{latLng:[53.56,10],name:"Hamburg"},{latLng:[48.13,11.56],name:"Munich"},{latLng:[50.95,6.96],name:"Cologne"},{latLng:[50.11,8.68],name:"Frankfurt am Main"},{latLng:[48.77,9.17],name:"Stuttgart"},{latLng:[51.23,6.78],name:"Dusseldorf"},{latLng:[51.51,7.46],name:"Dortmund"},{latLng:[51.45,7.01],name:"Essen"},{latLng:[53.07,8.8],name:"Bremen"}],markerStyle:{initial:{fill:"#4DAC26"},selected:{fill:"#CA0020"}},regionStyle:{initial:{fill:"#B8E186"},selected:{fill:"#F4A582"}},series:{markers:[{attribute:"r",scale:[5,15],values:[887.7,755.16,310.69,405.17,248.31,207.35,217.22,280.71,210.32,325.42]}]},onRegionSelected:function(){window.localStorage&&window.localStorage.setItem("jvectormap-selected-regions",JSON.stringify(map.getSelectedRegions()))},onMarkerSelected:function(){window.localStorage&&window.localStorage.setItem("jvectormap-selected-markers",JSON.stringify(map.getSelectedMarkers()))}}),map.setSelectedRegions(JSON.parse(window.localStorage.getItem("jvectormap-selected-regions")||"[]")),map.setSelectedMarkers(JSON.parse(window.localStorage.getItem("jvectormap-selected-markers")||"[]"));break;case"#tab5":$.getJSON("/MelisDesign/ajax/france-elections.json",(function(e){new jvm.Map({map:"fr_merc_en",container:$("#france-2007"),series:{regions:[{scale:{1:"#4169E1",2:"#FF69B4"},attribute:"fill",values:e.year2007.results}]}}),new jvm.Map({map:"fr_merc_en",container:$("#france-2012"),series:{regions:[{scale:{1:"#FF69B4",2:"#4169E1"},attribute:"fill",values:e.year2012.results}]}})}));break;case"#tab6":a=["#66C2A5","#FC8D62","#8DA0CB","#E78AC3","#A6D854"],r=function(){var e,t={};for(e in o.regions)t[e]=a[Math.floor(Math.random()*a.length)];return t},(o=new jvm.Map({map:"es_merc",container:$("#random-colors-map"),series:{regions:[{attribute:"fill"}]}})).series.regions[0].setValues(r()),$("#update-colors-button").on("click",(function(e){e.preventDefault(),o.series.regions[0].setValues(r())}));break;case"#tab7":$("#mall-map").vectorMap({map:"mall",backgroundColor:"transparent",markers:[{coords:[60,110],name:"Escalator 1",style:{fill:"yellow"}},{coords:[260,95],name:"Escalator 2",style:{fill:"yellow"}},{coords:[434,95],name:"Escalator 3",style:{fill:"yellow"}},{coords:[634,110],name:"Escalator 4",style:{fill:"yellow"}}],series:{regions:[{values:{F102:"SPORTS & OUTDOOR",F103:"HOME DECOR",F105:"FASHION",F106:"OTHER",F108:"BEAUTY & SPA",F109:"FASHION",F110:"BEAUTY & SPA",F111:"URBAN FAVORITES",F114:"SERVICES",F166:"DINING",F167:"FASHION",F169:"DINING",F170:"ENTERTAINMENT",F172:"DINING",F174:"DINING",F115:"KIDS STUFF",F117:"LIFESTYLE",F118:"URBAN FAVORITES",F119:"FASHION",F120:"FASHION",F122:"KIDS STUFF",F124:"KIDS STUFF",F125:"KIDS STUFF",F126:"KIDS STUFF",F128:"KIDS STUFF",F129:"LIFESTYLE",F130:"HOME DECOR",F132:"DINING",F133:"SPORTS & OUTDOOR",F134:"KIDS STUFF",F135:"LIFESTYLE",F136:"LIFESTYLE",F139:"KIDS STUFF",F153:"DINING",F155:"FASHION",F156:"URBAN FAVORITES",F157:"URBAN FAVORITES",F158:"LINGERIE & UNDERWEAR",F159:"FASHION",F160:"FASHION",F162:"FASHION",F164:"FASHION",F165:"FASHION",FR01:"REST ROOMS",FR02:"REST ROOMS",FR03:"REST ROOMS",FR04:"REST ROOMS",FFC:"DINING"},scale:{FASHION:"#2761ad","LINGERIE & UNDERWEAR":"#d58aa3","BEAUTY & SPA":"#ee549f","URBAN FAVORITES":"#15bbba","SPORTS & OUTDOOR":"#8864ab","KIDS STUFF":"#ef4e36",ENTERTAINMENT:"#e47325","HOME DECOR":"#a2614f",LIFESTYLE:"#8a8934",DINING:"#73bb43","REST ROOMS":"#6c260f",SERVICES:"#504d7c",OTHER:"#c7b789"}}]},onRegionLabelShow:function(e,t,n){""===t.html()&&e.preventDefault()}});break;case"#tab8":n=0,i={},(t=new jvm.Map({map:"us_lcc",markerStyle:{initial:{fill:"red"}},container:$("#projection-map"),onMarkerLabelShow:function(e,n,o){t.label.text(i[o].lat.toFixed(2)+", "+i[o].lng.toFixed(2))},onMarkerClick:function(e,n){t.removeMarkers([n]),t.label.hide()}})).container.click((function(e){var o=t.pointToLatLng(e.offsetX,e.offsetY),a=$(e.target).attr("class");o&&(!a||a&&-1===$(e.target).attr("class").indexOf("jvectormap-marker"))&&(i[n]=o,t.addMarker(n,{latLng:[o.lat,o.lng]}),n+=1)}));break;default:console.log("Invalid input")}}))}function colVis(){!function(e,t,n){var i=function(e,n){"use strict";var i=function(t,n){this.CLASS&&"ColVis"==this.CLASS||alert("Warning: ColVis must be initialised with the keyword 'new'"),void 0===n&&(n={});var o=e.fn.dataTable.camelToHungarian;return o&&(o(i.defaults,i.defaults,!0),o(i.defaults,n)),this.s={dt:null,oInit:n,hidden:!0,abOriginal:[]},this.dom={wrapper:null,button:null,collection:null,background:null,catcher:null,buttons:[],groupButtons:[],restore:null},i.aInstances.push(this),this.s.dt=e.fn.dataTable.Api?new e.fn.dataTable.Api(t).settings()[0]:t,this._fnConstruct(n),this};return i.prototype={button:function(){return this.dom.wrapper},fnRebuild:function(){this.rebuild()},rebuild:function(){for(var e=this.dom.buttons.length-1;e>=0;e--)this.dom.collection.removeChild(this.dom.buttons[e]);this.dom.buttons.splice(0,this.dom.buttons.length),this.dom.groupButtons.splice(0,this.dom.groupButtons.length),this.dom.restore&&this.dom.restore.parentNode(this.dom.restore),this._fnAddGroups(),this._fnAddButtons(),this._fnDrawCallback()},_fnConstruct:function(n){this._fnApplyCustomisation(n);var i,o,a=this;for(this.dom.wrapper=t.createElement("div"),this.dom.wrapper.className="ColVis",this.dom.button=e("<button />",{class:this.s.dt.bJUI?"ColVis_Button ColVis_MasterButton ui-button ui-state-default":"ColVis_Button ColVis_MasterButton"}).append("<span>"+this.s.buttonText+"</span>").bind("mouseover"==this.s.activate?"mouseover":"click",(function(e){e.preventDefault(),a._fnCollectionShow()})).appendTo(this.dom.wrapper)[0],this.dom.catcher=this._fnDomCatcher(),this.dom.collection=this._fnDomCollection(),this.dom.background=this._fnDomBackground(),this._fnAddGroups(),this._fnAddButtons(),i=0,o=this.s.dt.aoColumns.length;i<o;i++)this.s.abOriginal.push(this.s.dt.aoColumns[i].bVisible);this.s.dt.aoDrawCallback.push({fn:function(){a._fnDrawCallback.call(a)},sName:"ColVis"}),e(this.s.dt.oInstance).bind("column-reorder.dt",(function(e,t,n){for(i=0,o=a.s.aiExclude.length;i<o;i++)a.s.aiExclude[i]=n.aiInvertMapping[a.s.aiExclude[i]];var r=a.s.abOriginal.splice(n.iFrom,1)[0];a.s.abOriginal.splice(n.iTo,0,r),a.fnRebuild()})),e(this.s.dt.oInstance).bind("destroy.dt",(function(){e(a.dom.wrapper).remove()})),this._fnDrawCallback()},_fnApplyCustomisation:function(t){e.extend(!0,this.s,i.defaults,t),!this.s.showAll&&this.s.bShowAll&&(this.s.showAll=this.s.sShowAll),!this.s.restore&&this.s.bRestore&&(this.s.restore=this.s.sRestore);var n=this.s.groups,o=this.s.aoGroups;if(n)for(var a=0,r=n.length;a<r;a++)n[a].title&&(o[a].sTitle=n[a].title),n[a].columns&&(o[a].aiColumns=n[a].columns)},_fnDrawCallback:function(){for(var t,n=this.s.dt.aoColumns,i=this.dom.buttons,o=this.s.aoGroups,a=0,r=i.length;a<r;a++)undefined!==(t=i[a]).__columnIdx&&e("input",t).prop("checked",n[t.__columnIdx].bVisible);for(var s=function(e){for(var t=0,i=e.length;t<i;t++)if(!1===n[e[t]].bVisible)return!1;return!0},l=function(e){for(var t=0,i=e.length;t<i;t++)if(!0===n[e[t]].bVisible)return!1;return!0},c=0,d=o.length;c<d;c++)s(o[c].aiColumns)?(e("input",this.dom.groupButtons[c]).prop("checked",!0),e("input",this.dom.groupButtons[c]).prop("indeterminate",!1)):l(o[c].aiColumns)?(e("input",this.dom.groupButtons[c]).prop("checked",!1),e("input",this.dom.groupButtons[c]).prop("indeterminate",!1)):e("input",this.dom.groupButtons[c]).prop("indeterminate",!0)},_fnAddGroups:function(){var e;if(void 0!==this.s.aoGroups)for(var t=0,n=this.s.aoGroups.length;t<n;t++)e=this._fnDomGroupButton(t),this.dom.groupButtons.push(e),this.dom.buttons.push(e),this.dom.collection.appendChild(e)},_fnAddButtons:function(){var t,n=this.s.dt.aoColumns;if(-1===e.inArray("all",this.s.aiExclude))for(var i=0,o=n.length;i<o;i++)-1===e.inArray(i,this.s.aiExclude)&&((t=this._fnDomColumnButton(i)).__columnIdx=i,this.dom.buttons.push(t));"alpha"===this.s.order&&this.dom.buttons.sort((function(e,t){var i=n[e.__columnIdx].sTitle,o=n[t.__columnIdx].sTitle;return i===o?0:i<o?-1:1})),this.s.restore&&((t=this._fnDomRestoreButton()).className+=" ColVis_Restore",this.dom.buttons.push(t)),this.s.showAll&&((t=this._fnDomShowXButton(this.s.showAll,!0)).className+=" ColVis_ShowAll",this.dom.buttons.push(t)),this.s.showNone&&((t=this._fnDomShowXButton(this.s.showNone,!1)).className+=" ColVis_ShowNone",this.dom.buttons.push(t)),e(this.dom.collection).append(this.dom.buttons)},_fnDomRestoreButton:function(){var t=this,n=this.s.dt;return e('<li class="ColVis_Special '+(n.bJUI?"ui-button ui-state-default":"")+'">'+this.s.restore+"</li>").click((function(e){for(var n=0,i=t.s.abOriginal.length;n<i;n++)t.s.dt.oInstance.fnSetColumnVis(n,t.s.abOriginal[n],!1);t._fnAdjustOpenRows(),t.s.dt.oInstance.fnAdjustColumnSizing(!1),t.s.dt.oInstance.fnDraw(!1)}))[0]},_fnDomShowXButton:function(t,n){var i=this,o=this.s.dt;return e('<li class="ColVis_Special '+(o.bJUI?"ui-button ui-state-default":"")+'">'+t+"</li>").click((function(e){for(var t=0,o=i.s.abOriginal.length;t<o;t++)-1===i.s.aiExclude.indexOf(t)&&i.s.dt.oInstance.fnSetColumnVis(t,n,!1);i._fnAdjustOpenRows(),i.s.dt.oInstance.fnAdjustColumnSizing(!1),i.s.dt.oInstance.fnDraw(!1)}))[0]},_fnDomGroupButton:function(t){var n=this,i=this.s.dt,o=this.s.aoGroups[t];return e('<li class="ColVis_Special '+(i.bJUI?"ui-button ui-state-default":"")+'"><label><input type="checkbox" /><span>'+o.sTitle+"</span></label></li>").click((function(t){var i=!e("input",this).is(":checked");"li"!==t.target.nodeName.toLowerCase()&&(i=!i);for(var a=0;a<o.aiColumns.length;a++)n.s.dt.oInstance.fnSetColumnVis(o.aiColumns[a],i)}))[0]},_fnDomColumnButton:function(t){var n=this,i=this.s.dt.aoColumns[t],o=this.s.dt,a=null===this.s.fnLabel?i.sTitle:this.s.fnLabel(t,i.sTitle,i.nTh);return e("<li "+(o.bJUI?'class="ui-button ui-state-default"':"")+'><label><input type="checkbox" /><span>'+a+"</span></label></li>").click((function(i){var a=!e("input",this).is(":checked");"li"!==i.target.nodeName.toLowerCase()&&("input"!=i.target.nodeName.toLowerCase()&&null!==n.s.fnStateChange||(a=!a));var r=e.fn.dataTableExt.iApiIndex;e.fn.dataTableExt.iApiIndex=n._fnDataTablesApiIndex.call(n),o.oFeatures.bServerSide?(n.s.dt.oInstance.fnSetColumnVis(t,a,!1),n.s.dt.oInstance.fnAdjustColumnSizing(!1),""===o.oScroll.sX&&""===o.oScroll.sY||n.s.dt.oInstance.oApi._fnScrollDraw(n.s.dt),n._fnDrawCallback()):n.s.dt.oInstance.fnSetColumnVis(t,a),e.fn.dataTableExt.iApiIndex=r,null!==n.s.fnStateChange&&("span"==i.target.nodeName.toLowerCase()&&i.preventDefault(),n.s.fnStateChange.call(n,t,a))}))[0]},_fnDataTablesApiIndex:function(){for(var e=0,t=this.s.dt.oInstance.length;e<t;e++)if(this.s.dt.oInstance[e]==this.s.dt.nTable)return e;return 0},_fnDomCollection:function(){return e("<ul />",{class:this.s.dt.bJUI?"ColVis_collection ui-buttonset ui-buttonset-multi":"ColVis_collection"}).css({display:"none",opacity:0,position:this.s.bCssPosition?"":"absolute"})[0]},_fnDomCatcher:function(){var n=this,i=t.createElement("div");return i.className="ColVis_catcher",e(i).click((function(){n._fnCollectionHide.call(n,null,null)})),i},_fnDomBackground:function(){var t=this,n=e("<div></div>").addClass("ColVis_collectionBackground").css("opacity",0).click((function(){t._fnCollectionHide.call(t,null,null)}));return"mouseover"==this.s.activate&&n.mouseover((function(){t.s.overcollection=!1,t._fnCollectionHide.call(t,null,null)})),n[0]},_fnCollectionShow:function(){var n,i=this,o=e(this.dom.button).offset(),a=this.dom.collection,r=this.dom.background,s=parseInt(o.left,10),l=parseInt(o.top+e(this.dom.button).outerHeight(),10);this.s.bCssPosition||(a.style.top=l+"px",a.style.left=s+"px"),e(a).css({display:"block",opacity:0}),r.style.bottom="0px",r.style.right="0px";var c=this.dom.catcher.style;if(c.height=e(this.dom.button).outerHeight()+"px",c.width=e(this.dom.button).outerWidth()+"px",c.top=o.top+"px",c.left=s+"px",t.body.appendChild(r),t.body.appendChild(a),t.body.appendChild(this.dom.catcher),e(a).animate({opacity:1},i.s.iOverlayFade),e(r).animate({opacity:.1},i.s.iOverlayFade,"linear",(function(){e.browser&&e.browser.msie&&"6.0"==e.browser.version&&i._fnDrawCallback()})),!this.s.bCssPosition){n="left"==this.s.sAlign?s:s-e(a).outerWidth()+e(this.dom.button).outerWidth(),a.style.left=n+"px";var d=e(a).outerWidth(),u=(e(a).outerHeight(),e(t).width());n+d>u&&(a.style.left=u-d+"px")}this.s.hidden=!1},_fnCollectionHide:function(){var n=this;this.s.hidden||null===this.dom.collection||(this.s.hidden=!0,e(this.dom.collection).animate({opacity:0},n.s.iOverlayFade,(function(e){this.style.display="none"})),e(this.dom.background).animate({opacity:0},n.s.iOverlayFade,(function(e){t.body.removeChild(n.dom.background),t.body.removeChild(n.dom.catcher)})))},_fnAdjustOpenRows:function(){for(var e=this.s.dt.aoOpenRows,t=this.s.dt.oApi._fnVisbleColumns(this.s.dt),n=0,i=e.length;n<i;n++)e[n].nTr.getElementsByTagName("td")[0].colSpan=t}},i.fnRebuild=function(t){var n=null;void 0!==t&&(n=e.fn.dataTable.Api?new e.fn.dataTable.Api(t).table().node():t.fnSettings().nTable);for(var o=0,a=i.aInstances.length;o<a;o++)void 0!==t&&n!=i.aInstances[o].s.dt.nTable||i.aInstances[o].fnRebuild()},i.defaults={active:"click",buttonText:"Show / hide columns",aiExclude:[],bRestore:!1,sRestore:"Restore original",bShowAll:!1,sShowAll:"Show All",sAlign:"left",fnStateChange:null,iOverlayFade:500,fnLabel:null,bCssPosition:!1,aoGroups:[],order:"column"},i.aInstances=[],i.prototype.CLASS="ColVis",i.VERSION="1.1.2",i.prototype.VERSION=i.VERSION,"function"==typeof e.fn.dataTable&&"function"==typeof e.fn.dataTableExt.fnVersionCheck&&e.fn.dataTableExt.fnVersionCheck("1.7.0")?e.fn.dataTableExt.aoFeatures.push({fnInit:function(e){var t=e.oInit;return new i(e,t.colVis||t.oColVis||{}).button()},cFeature:"C",sFeature:"ColVis"}):alert("Warning: ColVis requires DataTables 1.7 or greater - www.datatables.net/download"),e.fn.dataTable.ColVis=i,e.fn.DataTable.ColVis=i,i};"function"==typeof define&&define.amd?define(["jquery","datatables"],i):"object"==typeof exports?i(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.ColVis&&i(jQuery,jQuery.fn.dataTable)}(window,document)}function dtBootstrap(){$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper"}),$.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:Math.ceil(e._iDisplayStart/e._iDisplayLength),iTotalPages:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}},$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(e,t,n){var i=e.oLanguage.oPaginate,o=function(t){t.preventDefault(),e.oApi._fnPageChange(e,t.data.action)&&n(e)};$(t).append('<ul class="pagination"><li class="page-item prev disabled"><a class="page-link" href="#">&larr; '+i.sFirst+'</a></li><li class="page-item prev disabled"><a class="page-link" href="#">&larr; '+i.sPrevious+'</a></li><li class="page-item next disabled"><a class="page-link" href="#">'+i.sNext+' &rarr; </a></li><li class="page-item next disabled"><a class="page-link" href="#">'+i.sLast+" &rarr; </a></li></ul>");var a=$("a",t);$(a[0]).bind("click.DT",{action:"first"},o),$(a[1]).bind("click.DT",{action:"previous"},o),$(a[2]).bind("click.DT",{action:"next"},o),$(a[3]).bind("click.DT",{action:"last"},o)},fnUpdate:function(e,t){var n,i,o,a,r,s=e.oInstance.fnPagingInfo(),l=e.aanFeatures.p,c=Math.floor(2.5);for(s.iTotalPages<5?(a=1,r=s.iTotalPages):s.iPage<=c?(a=1,r=5):s.iPage>=s.iTotalPages-c?(a=s.iTotalPages-5+1,r=s.iTotalPages):r=(a=s.iPage-c+1)+5-1,n=0,iLen=l.length;n<iLen;n++){for($("li:gt(1)",l[n]).filter(":not(.next)").remove(),i=a;i<=r;i++)o=i==s.iPage+1?'class="page-item active"':"",$("<li "+o+'><a class="page-link" href="#">'+i+"</a></li>").insertBefore($("li.next:first",l[n])[0]).bind("click",(function(n){n.preventDefault(),e._iDisplayStart=(parseInt($("a",this).text(),10)-1)*s.iLength,t(e)}));0===s.iPage?$("li.prev",l[n]).addClass("disabled"):$("li.prev",l[n]).removeClass("disabled"),s.iPage===s.iTotalPages-1||0===s.iTotalPages?$("li.next",l[n]).addClass("disabled"):$("li.next",l[n]).removeClass("disabled")}}}}),$.fn.DataTable.TableTools&&($.extend(!0,$.fn.DataTable.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-primary",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info modal"},select:{row:"active"}}),$.extend(!0,$.fn.DataTable.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))}function dataTablesInit(){!function(e,t){function n(t){var n=t.parents(".dataTables_wrapper").first();n.find(".row").find("label").each((function(t,n){var i=e("<div>").addClass("col-md-8").appendTo(e(n).parent());e(n).parent().addClass("form-group margin-none").parent().addClass("form-horizontal"),e(n).find("input, select").addClass("form-control").removeAttr("size").appendTo(i),e(n).addClass("col-md-4 control-label")})),n.find("select").addClass("selectpicker").selectpicker();var i=t.parents(".dataTables_wrapper").attr("id");e("#"+i).find(".bootstrap-select .dropdown-toggle").append("<span class='caret'></span>")}componentsPath="",e(".design-table").length>0&&e(".design-table").each((function(){if(e(this).is(".tableTools")){var t=e(this).dataTable({sPaginationType:"bootstrap",sDom:"<'row d-flex flex-row justify-content-between separator bottom table-tools'<'col-md-5'T><'col-md-3'l><'col-md-4'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",oLanguage:{sLengthMenu:"_MENU_ Show"},oTableTools:{sSwfPath:"//cdn.datatables.net/tabletools/2.2.2/swf/copy_csv_xls_pdf.swf"},aoColumnDefs:[{bSortable:!1,aTargets:[0]}],sScrollX:"100%",sScrollXInner:"100%",bScrollCollapse:!0,stateSave:!0,fnInitComplete:function(){n(this)}}),i=e("body"),o=t.fnGetNodes();i.on("click",".sorting_disabled .checkbox-custom .fa",(function(){var t=e(this);t.hasClass("allChecked")?e("input[type='checkbox']",o).prop("checked",!1):e("input[type='checkbox']",o).prop("checked",!0),t.toggleClass("allChecked")})),i.on("click",".tableTools thead tr th:not('.sorting_disabled')",(function(t){e(this);var n=e(".tableTools thead tr th.sorting_disabled").find(".checkbox .checkbox-custom .fa"),i=e(".tableTools tbody tr"),o=i.find("td .checkbox .checkbox-custom");i.addClass("selectable"),n.hasClass("allChecked")&&(o.addClass("checked"),o.find(".fa").addClass("checked"),i.addClass("selected"))}))}else e(this).is(".colVis")?e(this).dataTable({sPaginationType:"bootstrap",sDom:"<'row separator bottom d-flex flex-row'<'col-md-3'f><'col-md-3'l><'col-md-6'C>r>t<'row'<'col-md-6'i><'col-md-6'p>>",oLanguage:{sLengthMenu:"_MENU_ per page"},oColVis:{buttonText:"Show / Hide Columns",sAlign:"right"},sScrollX:"100%",sScrollXInner:"100%",bScrollCollapse:!0,fnInitComplete:function(){n(this)}}):e(this).is(".scrollVertical")?e(this).dataTable({bPaginate:!1,sScrollY:"200px",sScrollX:"100%",sScrollXInner:"100%",bScrollCollapse:!0,sDom:"<'row separator bottom d-flex flex-row'<'col-md-12'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",fnInitComplete:function(){n(this)}}):e(this).is(".ajax")?e(this).dataTable({sPaginationType:"bootstrap",bProcessing:!0,sAjaxSource:rootPath+"admin/ajax/DataTables.json",sDom:"<'row separator bottom d-flex flex-row'<'col-md-12'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",sScrollX:"100%",sScrollXInner:"100%",bScrollCollapse:!0,fnInitComplete:function(){n(this)}}):e(this).is(".fixedHeaderColReorder")?e(this).dataTable({sPaginationType:"bootstrap",sDom:"R<'clear'><'row separator bottom d-flex flex-row'<'col-md-12'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",sScrollX:"100%",sScrollXInner:"100%",bScrollCollapse:!0,fnInitComplete:function(){n(this);var e=this;setTimeout((function(){new FixedHeader(e)}),1e3)}}):e(this).dataTable({sPaginationType:"bootstrap",sDom:"<'row separator bottom d-flex flex-row'<'col-md-5'T><'col-md-3'l><'col-md-4'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",sScrollX:"100%",sScrollXInner:"100%",bScrollCollapse:!0,oLanguage:{sLengthMenu:"_MENU_ per page"},fnInitComplete:function(){n(this)}})}))}(jQuery,window)}function mixItUpInit(){$((function(){$(".mixitup").length>0&&mixitup(".mixitup",{load:{sort:"order:asc"},animation:{effects:"fade",duration:700},classNames:{block:"button-filters",elementFilter:"filter"},selectors:{target:".mix-target"}})}))}function fueluxCheckBoxInit(){!function(e){var t=e.fn.checkbox,n=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.checkbox.defaults,n),this.$label=this.$element.parent(),this.$icon=this.$label.find("i"),this.$chk=this.$label.find("input[type=checkbox]"),this.setState(this.$chk),this.$chk.on("change",e.proxy(this.itemchecked,this))};n.prototype={constructor:n,setState:function(e){var t=(e=e||this.$chk).is(":checked"),n=!!e.prop("disabled");this.$icon.removeClass("checked disabled"),!0===t&&this.$icon.addClass("checked"),!0===n&&this.$icon.addClass("disabled")},enable:function(){this.$chk.attr("disabled",!1),this.$icon.removeClass("disabled")},disable:function(){this.$chk.attr("disabled",!0),this.$icon.addClass("disabled")},toggle:function(){this.$chk.click()},itemchecked:function(t){var n=e(t.target);this.setState(n)},check:function(){this.$chk.prop("checked",!0),this.setState(this.$chk)},uncheck:function(){this.$chk.prop("checked",!1),this.setState(this.$chk)},isChecked:function(){return this.$chk.is(":checked")}},e.fn.checkbox=function(t){var i,o=Array.prototype.slice.call(arguments,1),a=this.each((function(){var a=e(this),r=a.data("checkbox"),s="object"==typeof t&&t;r||a.data("checkbox",r=new n(this,s)),"string"==typeof t&&(i=r[t].apply(r,o))}));return void 0===i?a:i},e.fn.checkbox.defaults={},e.fn.checkbox.Constructor=n,e.fn.checkbox.noConflict=function(){return e.fn.checkbox=t,this},e((function(){e(".checkbox-custom > input[type=checkbox]").each((function(){var t=e(this);t.data("checkbox")||t.checkbox(t.data())}))}))}(jQuery)}function eventsCarouselInit(){if($(".events-tns").length>0)tns({container:".events-tns",items:1,mouseDrag:!0,slideBy:"page",swipeAngle:!1,speed:500,nav:!0,navPosition:"bottom",navAsThumbnails:!1});if($(".speakers-tns").length>0)tns({container:".speakers-tns",items:1,mouseDrag:!0,slideBy:"page",swipeAngle:!1,speed:500,nav:!0,navPosition:"bottom",navAsThumbnails:!1})}function gridaliciousInit(){!function(e){e('[data-toggle="gridalicious"]').each((function(){var t=e(this);t.removeClass("hide2"),t.gridalicious({gutter:13,width:200,animate:!0,selector:".widget"})}))}(jQuery)}function prettyPhotoInit(){!function(e){e("body").on("click","a[rel^='prettyPhoto']",(function(t){t.preventDefault(),e("a[rel^='prettyPhoto']").prettyPhoto()}))}(jQuery)}function jqueryBootpagInit(){$(".jquery-bootpag-pagination").bootpag({total:23,page:2,maxVisible:10}).on("page",(function(e,t){$(".jquery-bootpag-content").html("Page "+t)}))}function bootstrapSelectInit(){$(".selectpicker").length&&$(".selectpicker").selectpicker()}function tablesClassicInit(){!function(e){e(".checkboxs thead :checkbox").change((function(){e(this).is(":checked")?(e(".checkboxs tbody :checkbox").prop("checked",!0).trigger("change").parent().addClass("checked"),e(".checkboxs tbody :checkbox").prop("checked",!0).closest(".checkbox-custom.checked").find(".fa").addClass("checked"),e(".checkboxs tbody tr.selectable").addClass("selected"),e(".checkboxs_actions").removeClass("hide").show()):(e(".checkboxs tbody :checkbox").prop("checked",!1).trigger("change").parent().removeClass("checked"),e(".checkboxs tbody :checkbox").prop("checked",!1).closest(".checkbox-custom:not(.checked)").find(".fa").removeClass("checked"),e(".checkboxs tbody tr.selectable").removeClass("selected"),e(".checkboxs_actions").hide())})),e(".checkboxs tbody tr").addClass("selectable"),e(".checkboxs tbody :checked").each((function(){e(this).parent("tr").addClass("selected")})),e(".checkboxs tbody").on("click","tr.selectable",(function(t){var n=e(this),i=(n.find(".checkbox-custom"),n.find(":checkbox"));e(t.srcElement);if("INPUT"===n.nodeName)i.is(":checked")?e(this).addClass("selected"):e(this).removeClass("selected");else{if("TD"!=n.nodeName&&"TR"!=n.nodeName&&"DIV"!=n.nodeName)return!0;i.is(":checked")?(i.prop("checked",!1).trigger("change").parent().removeClass("checked"),e(this).removeClass("selected")):(i.prop("checked",!0).trigger("change").parent().addClass("checked"),e(this).addClass("selected"))}e(".checkboxs tr.selectable :checked").length==e(".checkboxs tr.selectable :checkbox").length?e(".checkboxs thead :checkbox").prop("checked",!0).parent().addClass("checked"):e(".checkboxs thead :checkbox").prop("checked",!1).parent().removeClass("checked"),e(".checkboxs tr.selectable :checked").length>=1?e(".checkboxs_actions").removeClass("hide").show():e(".checkboxs_actions").hide()})),e(".checkboxs tbody :checked").length==e(".checkboxs tbody :checkbox").length&&e(".checkboxs tbody :checked").length&&e(".checkboxs thead :checkbox").prop("checked",!0).parent().addClass("checked"),e(".checkboxs tbody :checked").length&&e(".checkboxs_actions").removeClass("hide").show(),e(".radioboxs tbody tr.selectable").click((function(t){var n=e(this).find(":radio");if("INPUT"==t.srcElement.nodeName)n.is(":checked")?e(this).addClass("selected"):e(this).removeClass("selected");else{if("TD"!=t.srcElement.nodeName&&"TR"!=t.srcElement.nodeName)return!0;n.is(":checked")?(n.attr("checked",!1),e(this).removeClass("selected")):(n.attr("checked",!0),e(".radioboxs tbody tr.selectable").removeClass("selected"),e(this).addClass("selected"))}})),e(".js-table-sortable").length&&e(".js-table-sortable").sortable({placeholder:"ui-state-highlight",items:"tbody tr",handle:".js-sortable-handle",forcePlaceholderSize:!0,helper:function(t,n){return n.children().each((function(){e(this).width(e(this).width())})),n},start:function(t,n){n.placeholder.html('<td colspan="'+e(this).find("tbody tr:first td").length+'">&nbsp;</td>')}})}(jQuery)}function uiInit(){$('[data-toggle="popover"]').popover()}function notyfyInit(){$('[data-toggle="notyfy"]').click((function(){var t=$(this);return"inline"==t.data("layout")?($(t.data("custom")).notyfy({text:text[t.data("type")],type:t.data("type"),dismissQueue:!0,buttons:"confirm"==t.data("type")&&[{addClass:"btn btn-success btn-small glyphicons btn-icon ok_2",text:"<i></i> Ok",onClick:function(e){e.close(),$(t.data("custom")).notyfy({force:!0,text:'You clicked "<strong>Ok</strong>" button.',type:"success"})}},{addClass:"btn btn-danger btn-small glyphicons btn-icon remove_2",text:"Cancel",onClick:function(e){e.close(),$(t.data("custom")).notyfy({force:!0,text:'You clicked "Cancel" button',type:"error"})}}]}),!1):(notyfy({text:e[t.data("type")],type:t.data("type"),dismissQueue:!0,layout:t.data("layout"),buttons:"confirm"==t.data("type")&&[{addClass:"btn btn-success btn-small btn-icon glyphicons ok_2",text:"<i></i> Ok",onClick:function(e){e.close(),notyfy({force:!0,text:'You clicked "<strong>Ok</strong>" button',type:"success",layout:t.data("layout")})}},{addClass:"btn btn-danger btn-small btn-icon glyphicons remove_2",text:"<i></i> Cancel",onClick:function(e){e.close(),notyfy({force:!0,text:'<strong>You clicked "Cancel" button<strong>',type:"error",layout:t.data("layout")})}}]}),!1)}));var e=[];e.alert="Best check yo self, you'<strong>re not looking too good</strong>.",e.primary="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.",e.error="<strong>Change a few things up and try submitting again.</strong> This Error message.",e.success="You <strong>successfully</strong> read this important alert message.",e.information="This alert needs your attention, but it's not super <strong>important</strong>.",e.warning="<strong>Warning!</strong> Best check yo self, you're not looking too good.",e.confirm="Do you want to continue?"}function gritterInit(){$(".gritter-add-sticky").click((function(){$.gritter.add({title:"This is a sticky notice!",text:'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#">magnis dis parturient</a> montes, nascetur ridiculus mus.',sticky:!0,time:"",class_name:"my-sticky-class"});return!1})),$(".gritter-add-regular").click((function(){return $.gritter.add({title:"This is a regular notice!",text:'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#">magnis dis parturient</a> montes, nascetur ridiculus mus.',sticky:!1,time:""}),!1})),$(".gritter-add-primary").click((function(){return $.gritter.add({title:"This is a primary notice!",text:'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#">magnis dis parturient</a> montes, nascetur ridiculus mus.',sticky:!1,time:"",class_name:"gritter-primary"}),!1})),$(".gritter-add-max").click((function(){return $.gritter.add({title:"This is a notice with a max of 3 on screen at one time!",text:'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#">magnis dis parturient</a> montes, nascetur ridiculus mus.',sticky:!1,before_open:function(){if(3==$(".gritter-item-wrapper").length)return!1}}),!1})),$(".gritter-add-without-image").click((function(){return $.gritter.add({title:"This is a notice without an image!",text:'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#">magnis dis parturient</a> montes, nascetur ridiculus mus.'}),!1})),$(".gritter-add-white").click((function(){return $.gritter.add({title:"This is a light notification",text:'Just add a "gritter-light" class_name to your $.gritter.add or globally to $.gritter.options.class_name',class_name:"gritter-light"}),!1}))}function modalsBootBoxInit(){$("#modals-bootbox-alert").click((function(){bootbox.alert("Hello World!",(function(e){$.gritter.add({title:"Callback!",text:"I'm just a BootBox Alert callback!"})}))})),$("#modals-bootbox-confirm").click((function(){bootbox.confirm("Are you sure?",(function(e){$.gritter.add({title:"Callback!",text:"BootBox Confirm Callback with result: "+e})}))})),$("#modals-bootbox-prompt").click((function(){bootbox.prompt("What is your name?",(function(e){null===e?$.gritter.add({title:"Callback!",text:"BootBox Prompt Dismissed!"}):$.gritter.add({title:"Hi "+e,text:"BootBox Prompt Callback with result: "+e})}))})),$("#modals-bootbox-custom").click((function(){bootbox.dialog({message:"I am a custom dialog",title:"Custom title",buttons:{success:{label:"Success!",className:"btn-success",callback:function(){$.gritter.add({title:"Callback!",text:"Great success"})}},danger:{label:"Danger!",className:"btn-danger",callback:function(){$.gritter.add({title:"Callback!",text:"Uh oh, look out!"})}},main:{label:"Click ME!",className:"btn-primary",callback:function(){$.gritter.add({title:"Callback!",text:"Primary button!"})}}}})}))}function wysiHTML5(){var e;(e=jQuery("textarea.wysihtml5")).length>0&&e.wysihtml5(),e.css("display","block")}function formWizardsInit(){$((function(){var e="";$(".wizard.wizard-design").each((function(){e=$(this).is("#rootwizard")?"bwizard-steps":"";var t=$(this);$(this).bootstrapWizard({onNext:function(e,n,i){if(1==i&&!t.find("#inputTitle").val())return alert("You must enter the product title"),t.find("#inputTitle").focus(),!1},onLast:function(e,n,i){if(!t.find("#inputTitle").val())return alert("You must enter the product title"),t.find("#inputTitle").focus(),!1},onTabClick:function(e,n,i){if(!t.find("#inputTitle").val())return alert("You must enter the product title"),t.find("#inputTitle").focus(),!1},onTabShow:function(e,n,i){var o=n.find("li:not(.status)").length,a=i+1,r=a/o*100;t.find(".progress-bar").length&&(t.find(".progress-bar").css({width:r+"%"}),t.find(".progress-bar").find(".step-current").html(a).parent().find(".steps-total").html(o).parent().find(".steps-percent").html(Math.round(r)+"%")),t.find(".step-current").length&&t.find(".step-current").html(a),t.find(".steps-total").length&&t.find(".steps-total").html(o),t.find(".steps-complete").length&&t.find(".steps-complete").html(a-1),n.find("li:not(.status)").removeClass("primary"),n.find("li:not(.status):lt("+(a-1)+")").addClass("primary"),a>=o?(t.find(".pagination .next").hide(),t.find(".pagination .finish").show(),t.find(".pagination .finish").removeClass("disabled")):(t.find(".pagination .next").show(),t.find(".pagination .finish").hide())},tabClass:e,nextSelector:".next",previousSelector:".previous",firstSelector:".first",lastSelector:".last"}),t.find(".finish").click((function(){alert("Finished!, Starting over!"),t.find("a[data-toggle*='tab']:first").trigger("click")}))}))}))}function widgetCollapsibleInit(){!function(e){e('.widget[data-toggle="collapse-widget"] .widget-body').on("show.bs.collapse",(function(){e(this).parents(".widget:first").attr("data-collapse-closed","false")})).on("shown.bs.collapse",(function(){setTimeout((function(){e(window).resize()}),500)})).on("hidden.bs.collapse",(function(){e(this).parents(".widget:first").attr("data-collapse-closed","true")})),e('.widget[data-toggle="collapse-widget"]').each((function(){e(this).find(".widget-head > .collapse-toggle").length||e('<span class="collapse-toggle"></span>').appendTo(e(this).find(".widget-head")),e(this).find(".widget-body").not(".collapse").addClass("collapse"),"true"!==e(this).attr("data-collapse-closed")&&e(this).find(".widget-body").addClass("in"),e(this).find(".collapse-toggle").on("click",(function(){e(this).parents(".widget:first").find(".widget-body").collapse("toggle")}))}))}(jQuery)}function widgetProgressInit(){!function(e){e("#widget-progress-bar .progress-bar").width("50%"),setInterval((function(){var t=mt_rand(30,100);e("#widget-progress-bar .steps-percent").html(t+"%"),e("#widget-progress-bar .progress-bar").width(t+"%")}),2e3)}(jQuery)}function rangeSlidersInit(){$((function(){$("#rangeSlider").rangeSlider(),$("#rangeSliderEdit").editRangeSlider(),$("#rangeSliderDate").dateRangeSlider(),$("#rangeSliderWArrows").rangeSlider({arrows:!1}),$("#rangeSliderFormatter").rangeSlider({formatter:function(e){var t=Math.round(5*e)/5;return"$"+(0==t-Math.round(e)?t.toString()+".0":t.toString())}}),$("#rangeSlider").rangeSlider(),$("#rangeSliderEdit").editRangeSlider(),$("#rangeSliderDate").dateRangeSlider(),$("#rangeSliderWArrows").rangeSlider({arrows:!1}),$("#rangeSliderFormatter").rangeSlider({formatter:function(e){var t=Math.round(5*e)/5;return"$"+(0==t-Math.round(e)?t.toString()+".0":t.toString())}}),$("#rangeSliderRuler").rangeSlider({scales:[{first:function(e){return e},next:function(e){return e+10},stop:function(e){return!1},label:function(e){return e},format:function(e,t,n){e.addClass("myCustomClass")}},{first:function(e){return e},next:function(e){return e%10==9?e+2:e+1},stop:function(e){return!1},label:function(){return null}}]});var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];$("#rangeSliderRulerDate").dateRangeSlider({bounds:{min:new Date(2012,0,1),max:new Date(2012,11,31,12,59,59)},defaultValues:{min:new Date(2012,1,10),max:new Date(2012,4,22)},scales:[{first:function(e){return e},end:function(e){return e},next:function(e){var t=new Date(e);return new Date(t.setMonth(e.getMonth()+1))},label:function(t){return e[t.getMonth()]},format:function(e,t,n){e.addClass("myCustomClass")}}]}),$("#rangeSliderStep").rangeSlider({step:10}),$("#rangeSliderWheelZoom").rangeSlider({wheelMode:"zoom"}),$("#rangeSliderWheelScroll").rangeSlider({wheelMode:"scroll",wheelSpeed:30})}))}function jqueryUiSlidersInit(){function e(){$(this).removeClass("ui-corner-all ui-widget-content").wrap('<span class="ui-slider-wrap"></span>').find(".ui-slider-handle").removeClass("ui-corner-all ui-state-default")}$((function(){$(".slider-single").length>0&&$(".slider-single").slider({create:e,value:10,animate:!0,start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}}),$(".sliders-vertical > span").each((function(){var t=parseInt($(this).text(),10);$(this).empty().slider({create:e,value:t,range:"min",animate:!0,orientation:"vertical",start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}})})),$(".range-slider").length>0&&$(".range-slider .slider").each((function(){var e=$(this);e.parent().find("input");e.slider({range:!0,min:0,max:500,values:[75,300],slide:function(e,t){$("#amount").val("$"+t.values[0]+" - $"+t.values[1])}}),$("#amount").val("$"+e.slider("values",0)+" - $"+e.slider("values",1))})),$(".increments-slider").length>0&&($(".increments-slider .slider").slider({create:e,value:100,min:0,max:500,step:50,slide:function(e,t){$(".increments-slider .amount").val("$"+t.value)},start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}}),$(".increments-slider .amount").val("$"+$(".increments-slider .slider").slider("value"))),$(".vertical-range-slider").length>0&&($(".vertical-range-slider .slider").slider({create:e,orientation:"vertical",range:!0,min:0,max:500,values:[100,400],slide:function(e,t){$(".vertical-range-slider .amount").val("$"+t.values[0]+" - $"+t.values[1])},start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}}),$(".vertical-range-slider .amount").val("$"+$(".vertical-range-slider .slider").slider("values",0)+" - $"+$(".vertical-range-slider .slider").slider("values",1))),$(".slider-range-min").length>0&&($(".slider-range-min .slider").slider({create:e,range:"min",value:150,min:1,max:700,slide:function(e,t){$(".slider-range-min .amount").val("$"+t.value)},start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}}),$(".slider-range-min .amount").val("$"+$(".slider-range-min .slider").slider("value"))),$(".slider-range-max").length>0&&($(".slider-range-max .slider").slider({create:e,range:"max",min:1,max:700,value:150,slide:function(e,t){$(".slider-range-max .amount").val("$"+t.value)},start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}}),$(".slider-range-max .amount").val("$"+$(".slider-range-max .slider").slider("value")))}))}function flotchartSimpleInit(){$((function(){if($("#chart_simple_001").length){if("undefined"==typeof charts)return;charts.chart_simple_001={data:{d1:[],d2:[]},plot:null,options:{grid:{color:"#dedede",borderWidth:1,borderColor:"transparent",clickable:!0,hoverable:!0},series:{lines:{show:!0,fill:!1,lineWidth:2,steps:!1},points:{show:!0,radius:5,lineWidth:3,fill:!0,fillColor:"#000"}},xaxis:{tickColor:"transparent",tickDecimals:2,tickSize:2},yaxis:{tickSize:1e3},legend:{position:"nw",noColumns:2,backgroundColor:null,backgroundOpacity:0},shadowSize:0,tooltip:!0,tooltipOpts:{content:"%s : %y.3",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_simple_001",init:function(){this.options.colors=[successColor,primaryColor],this.options.grid.backgroundColor={colors:["#fff","#fff"]};null==this.plot&&(this.data.d1=[[6,1300],[7,1600],[8,1900],[9,2100],[10,2500],[11,2200],[12,2e3],[13,1950],[14,1900],[15,2e3]],this.data.d2=[[6,500],[7,600],[8,550],[9,600],[10,800],[11,900],[12,800],[13,850],[14,830],[15,1e3]]),this.plot=$.plot($(this.placeholder),[{label:"Data 1",data:this.data.d1,lines:{fill:.05},points:{fillColor:"#fff"}},{label:"Data 2",data:this.data.d2,lines:{fill:.1},points:{fillColor:this.options.colors[1]}}],this.options)}},charts.chart_simple_001.init()}$('a[href="#chart-simple-lines-001"]').on("shown.bs.tab",(function(){null==charts.chart_simple_001.plot&&charts.chart_simple_001.init()})),$("body").on("click",'.btn-group a[href="#chart-simple-lines-001"]',(function(){$(this).parent().find("[data-toggle]").removeClass("active"),$(this).addClass("active")}))}))}function flotchartSimpleBarsInit(){!function(e){if(e("#chart_simple_bars_001").length){if("undefined"==typeof charts)return;charts.chart_simple_bars_001={data:{d1:[],d2:[]},plot:null,options:{grid:{color:"#dedede",borderWidth:1,borderColor:"transparent",clickable:!0,hoverable:!0},series:{bars:{show:!0,barWidth:.65,fill:1,align:"center"},shadowSize:0},xaxis:{tickColor:"transparent",tickDecimals:2,tickSize:2},yaxis:{tickSize:1e3},legend:{position:"nw",noColumns:2,backgroundColor:null,backgroundOpacity:0},shadowSize:0,tooltip:!0,tooltipOpts:{content:"%s : %y.3",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_simple_bars_001",init:function(){this.options.colors=[successColor,primaryColor],this.options.grid.backgroundColor={colors:["#fff","#fff"]},null==this.plot&&(this.data.d1=[[6,1300],[7,1600],[8,1900],[9,2100],[10,2500],[11,2200],[12,2e3],[13,1950],[14,1900],[15,2e3]],this.data.d2=[[6,500],[7,600],[8,550],[9,600],[10,800],[11,900],[12,800],[13,850],[14,830],[15,1e3]]),this.plot=e.plot(e(this.placeholder),[{label:"Data 1",data:this.data.d1},{label:"Data 2",data:this.data.d2}],this.options)}},charts.chart_simple_bars.init(),e('a[href="#chart-simple-bars-001"]').on("shown.bs.tab",(function(){null==charts.chart_simple_bars_001.plot&&charts.chart_simple_bars_001.init()})),e("body").on("click",'.btn-group a[href="#chart-simple-bars-001"]',(function(){e(this).parent().find("[data-toggle]").removeClass("active"),e(this).addClass("active")}))}}(jQuery)}function flotchartSimple02Init(){!function(e){if(e("#chart_simple_02").length){if("undefined"==typeof charts)return;charts.chart_simple={data:{d1:[],d2:[]},plot:null,options:{grid:{color:"#dedede",borderWidth:1,borderColor:"transparent",clickable:!0,hoverable:!0},series:{lines:{show:!0,fill:!1,lineWidth:2,steps:!1},points:{show:!0,radius:5,lineWidth:3,fill:!0,fillColor:"#000"}},xaxis:{tickColor:"transparent",tickDecimals:2,tickSize:2},yaxis:{tickSize:1e3},legend:{position:"nw",noColumns:2,backgroundColor:null,backgroundOpacity:0},shadowSize:0,tooltip:!0,tooltipOpts:{content:"%s : %y.3",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_simple_02",init:function(){this.options.colors=[successColor,primaryColor],this.options.grid.backgroundColor={colors:["#fff","#fff"]};null==this.plot&&(this.data.d1=[[6,1300],[7,1600],[8,1900],[9,2100],[10,2500],[11,2200],[12,2e3],[13,1950],[14,1900],[15,2e3]],this.data.d2=[[6,500],[7,600],[8,550],[9,600],[10,800],[11,900],[12,800],[13,850],[14,830],[15,1e3]]),this.plot=e.plot(e(this.placeholder),[{label:"Data 1",data:this.data.d1,lines:{fill:.05},points:{fillColor:"#fff"}},{label:"Data 2",data:this.data.d2,lines:{fill:.1},points:{fillColor:this.options.colors[1]}}],this.options)}},charts.chart_simple.init()}}(jQuery)}function flotChartLineInit(){!function(e){if(e("#chart_lines_fill_nopoints").length){if("undefined"==typeof charts)return;charts.chart_lines_fill_nopoints={data:{d1:[],d2:[]},plot:null,options:{grid:{color:"#dedede",borderWidth:1,borderColor:"transparent",clickable:!0,hoverable:!0},series:{grow:{active:!1},lines:{show:!0,fill:!0,lineWidth:2,steps:!1},points:{show:!1}},legend:{position:"nw",backgroundColor:null,backgroundOpacity:0,noColumns:2},yaxis:{tickSize:25},xaxis:{tickColor:"transparent",tickSize:5,tickDecimals:0},colors:[],shadowSize:1,tooltip:!0,tooltipOpts:{content:"%s : %y.0",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_lines_fill_nopoints",init:function(){charts.utility.applyStyle(this),this.data.d1=[[1,3+charts.utility.randNum()],[2,6+charts.utility.randNum()],[3,9+charts.utility.randNum()],[4,12+charts.utility.randNum()],[5,15+charts.utility.randNum()],[6,18+charts.utility.randNum()],[7,21+charts.utility.randNum()],[8,15+charts.utility.randNum()],[9,18+charts.utility.randNum()],[10,21+charts.utility.randNum()],[11,24+charts.utility.randNum()],[12,27+charts.utility.randNum()],[13,30+charts.utility.randNum()],[14,33+charts.utility.randNum()],[15,24+charts.utility.randNum()],[16,27+charts.utility.randNum()],[17,30+charts.utility.randNum()],[18,33+charts.utility.randNum()],[19,36+charts.utility.randNum()],[20,39+charts.utility.randNum()],[21,42+charts.utility.randNum()],[22,45+charts.utility.randNum()],[23,36+charts.utility.randNum()],[24,39+charts.utility.randNum()],[25,42+charts.utility.randNum()],[26,45+charts.utility.randNum()],[27,38+charts.utility.randNum()],[28,51+charts.utility.randNum()],[29,55+charts.utility.randNum()],[30,60+charts.utility.randNum()]],this.data.d2=[[1,charts.utility.randNum()-5],[2,charts.utility.randNum()-4],[3,charts.utility.randNum()-4],[4,charts.utility.randNum()],[5,4+charts.utility.randNum()],[6,4+charts.utility.randNum()],[7,5+charts.utility.randNum()],[8,5+charts.utility.randNum()],[9,6+charts.utility.randNum()],[10,6+charts.utility.randNum()],[11,6+charts.utility.randNum()],[12,2+charts.utility.randNum()],[13,3+charts.utility.randNum()],[14,4+charts.utility.randNum()],[15,4+charts.utility.randNum()],[16,4+charts.utility.randNum()],[17,5+charts.utility.randNum()],[18,5+charts.utility.randNum()],[19,2+charts.utility.randNum()],[20,2+charts.utility.randNum()],[21,3+charts.utility.randNum()],[22,3+charts.utility.randNum()],[23,3+charts.utility.randNum()],[24,2+charts.utility.randNum()],[25,4+charts.utility.randNum()],[26,4+charts.utility.randNum()],[27,5+charts.utility.randNum()],[28,2+charts.utility.randNum()],[29,2+charts.utility.randNum()],[30,3+charts.utility.randNum()]],this.plot=e.plot(this.placeholder,[{label:"Visits",data:this.data.d1,lines:{fillColor:"rgba(0,0,0,0.01)"},points:{fillColor:"#88bbc8"}},{label:"Unique Visits",data:this.data.d2,lines:{fill:.05},points:{fillColor:"#ed7a53"}}],this.options)}},charts.chart_lines_fill_nopoints.init()}}(jQuery)}function flotchartBarsOrderedInit(){!function(e){if(e("#chart_ordered_bars").length){if("undefined"==typeof charts)return;charts.chart_ordered_bars={data:null,plot:null,options:{bars:{show:!0,barWidth:.2,fill:1},grid:{color:"#dedede",borderWidth:1,borderColor:"transparent",clickable:!0,hoverable:!0},series:{grow:{active:!1}},yaxis:{tickSize:10},legend:{position:"ne",backgroundColor:null,backgroundOpacity:0,noColumns:3},colors:[],tooltip:!0,tooltipOpts:{content:"%s : %y.0",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_ordered_bars",init:function(){this.options.colors=["#cc6666","#cca366","#b7cc66"],this.options.grid.backgroundColor={colors:["#fff","#fff"]};for(var t=[],n=0;n<=10;n+=1)t.push([n,parseInt(30*Math.random())]);var i=[];for(n=0;n<=10;n+=1)i.push([n,parseInt(30*Math.random())]);var o=[];for(n=0;n<=10;n+=1)o.push([n,parseInt(30*Math.random())]);var a=new Array;a.push({label:"Data One",data:t,bars:{order:1}}),a.push({label:"Data Two",data:i,bars:{order:2}}),a.push({label:"Data Three",data:o,bars:{order:3}}),this.data=a,this.plot=e.plot(e(this.placeholder),this.data,this.options)}},charts.chart_ordered_bars.init()}}(jQuery)}function flotchartBarsStackedInit(){!function(e){if(e("#chart_stacked_bars").length){if("undefined"==typeof charts)return;charts.chart_stacked_bars={data:null,plot:null,options:{grid:{color:"#dedede",borderWidth:1,borderColor:"transparent",clickable:!0,hoverable:!0},series:{grow:{active:!1},stack:0,lines:{show:!1,fill:!0,steps:!1},bars:{show:!0,barWidth:.5,fill:1}},yaxis:{tickSize:10},xaxis:{tickColor:"transparent",tickSize:2},legend:{position:"ne",backgroundColor:null,backgroundOpacity:0,noColumns:3},colors:[],shadowSize:1,tooltip:!0,tooltipOpts:{content:"%s : %y.0",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_stacked_bars",init:function(){this.options.colors=["#7acc66","#66cccc","#77b7c5"],this.options.grid.backgroundColor={colors:["#fff","#fff"]};for(var t=[],n=0;n<=10;n+=1)t.push([n,parseInt(30*Math.random())]);var i=[];for(n=0;n<=10;n+=1)i.push([n,parseInt(20*Math.random())]);var o=[];for(n=0;n<=10;n+=1)o.push([n,parseInt(20*Math.random())]);this.data=new Array,this.data.push({label:"Data One",data:t}),this.data.push({label:"Data Two",data:i}),this.data.push({label:"Data Tree",data:o}),this.plot=e.plot(e(this.placeholder),this.data,this.options)}},charts.chart_stacked_bars.init()}}(jQuery)}function flotchartPieInit(){!function(e){if(e("#chart_pie").length){if("undefined"==typeof charts)return;charts.chart_pie={data:[{label:"USA",data:38},{label:"Brazil",data:23},{label:"India",data:15},{label:"Turkey",data:9},{label:"France",data:7},{label:"China",data:5},{label:"Germany",data:3}],plot:null,options:{series:{pie:{show:!0,highlight:{opacity:.1},radius:1,stroke:{color:"#fff",width:2},startAngle:2,combine:{color:"#353535",threshold:.05},label:{show:!0,radius:1,formatter:function(e,t){return'<div class="label label-inverse">'+e+"&nbsp;"+Math.round(t.percent)+"%</div>"}}},grow:{active:!1}},colors:[],legend:{show:!1},grid:{hoverable:!0,clickable:!0,backgroundColor:{}},tooltip:!0,tooltipOpts:{content:"%s : %y.1%",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_pie",init:function(){charts.utility.applyStyle(this),this.plot=e.plot(e(this.placeholder),this.data,this.options)}},charts.chart_pie.init()}}(jQuery)}function flotchartDonutInit(){!function(e){if(e("#chart_donut").length){if("undefined"==typeof charts)return;charts.chart_donut={data:[{label:"USA",data:38},{label:"Brazil",data:23},{label:"India",data:15},{label:"Turkey",data:9},{label:"France",data:7},{label:"China",data:5},{label:"Germany",data:3}],plot:null,options:{series:{pie:{show:!0,innerRadius:.4,highlight:{opacity:.1},radius:1,stroke:{color:"#fff",width:8},startAngle:2,combine:{color:"#EEE",threshold:.05},label:{show:!0,radius:1,formatter:function(e,t){return'<div class="label label-inverse">'+e+"&nbsp;"+Math.round(t.percent)+"%</div>"}}},grow:{active:!1}},legend:{show:!1},grid:{hoverable:!0,clickable:!0,backgroundColor:{}},colors:[],tooltip:!0,tooltipOpts:{content:"%s : %y.1%",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_donut",init:function(){charts.utility.applyStyle(this),this.plot=e.plot(e(this.placeholder),this.data,this.options)}},charts.chart_donut.init()}}(jQuery)}function flotchartBarsHorizontalInit(){!function(e){if(e("#chart_horizontal_bars").length){if("undefined"==typeof charts)return;charts.chart_horizontal_bars={data:null,plot:null,options:{grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:0,borderColor:null,minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20,backgroundColor:{}},series:{grow:{active:!1},bars:{show:!0,horizontal:!0,barWidth:.2,fill:1}},legend:{position:"ne",backgroundColor:null,backgroundOpacity:0},colors:[],tooltip:!0,tooltipOpts:{content:"%s : %y.0",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_horizontal_bars",init:function(){charts.utility.applyStyle(this);for(var t=[],n=0;n<=5;n+=1)t.push([parseInt(30*Math.random()),n]);var i=[];for(n=0;n<=5;n+=1)i.push([parseInt(30*Math.random()),n]);var o=[];for(n=0;n<=5;n+=1)o.push([parseInt(30*Math.random()),n]);this.data=new Array,this.data.push({data:t,bars:{horizontal:!0,show:!0,barWidth:.2,order:1}}),this.data.push({data:i,bars:{horizontal:!0,show:!0,barWidth:.2,order:2}}),this.data.push({data:o,bars:{horizontal:!0,show:!0,barWidth:.2,order:3}}),this.plot=e.plot(e(this.placeholder),this.data,this.options)}},charts.chart_horizontal_bars.init()}}(jQuery)}function flotchartAutoUpdatingInit(){!function(e){if(e("#chart_live").length){if("undefined"==typeof charts)return;charts.chart_live={data:[],totalPoints:300,updateInterval:200,getRandomData:function(){for(this.data.length>0&&(this.data=this.data.slice(1));this.data.length<this.totalPoints;){var e=(this.data.length>0?this.data[this.data.length-1]:50)+10*Math.random()-5;e<0&&(e=0),e>100&&(e=100),this.data.push(e)}for(var t=[],n=0;n<this.data.length;++n)t.push([n,this.data[n]]);return t},plot:null,options:{series:{grow:{active:!1},shadowSize:0,lines:{show:!0,fill:!0,lineWidth:2,steps:!1}},grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:0,borderColor:null,minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20,backgroundColor:{}},colors:[],tooltip:!0,tooltipOpts:{content:"Value is : %y.0",shifts:{x:-30,y:-50},defaultTheme:!1},yaxis:{min:0,max:100},xaxis:{show:!0}},placeholder:"#chart_live",init:function(){charts.utility.applyStyle(this),this.plot=e.plot(e(this.placeholder),[this.getRandomData()],this.options),setTimeout(this.update,charts.chart_live.updateInterval)},update:function(){charts.chart_live.plot.setData([charts.chart_live.getRandomData()]),charts.chart_live.plot.draw(),setTimeout(charts.chart_live.update,charts.chart_live.updateInterval)}},charts.chart_live.init()}}(jQuery)}function flotchartFinancesSimpleInit(){!function(e){if(e("#chart_finances_simple").length){if("undefined"==typeof charts)return;charts.chart_simple={data:{d1:[],d2:[]},plot:null,options:{grid:{color:"#dedede",borderWidth:1,borderColor:"transparent",clickable:!0,hoverable:!0},series:{lines:{show:!0,fill:!1,lineWidth:2,steps:!1},points:{show:!0,radius:5,lineWidth:3,fill:!0,fillColor:"#000"}},xaxis:{tickColor:"transparent",tickDecimals:2,tickSize:2},yaxis:{tickSize:1e3},legend:{position:"nw",noColumns:2,backgroundColor:null,backgroundOpacity:0},shadowSize:0,tooltip:!0,tooltipOpts:{content:"%s : %y.3",shifts:{x:-30,y:-50},defaultTheme:!1}},placeholder:"#chart_finances_simple",init:function(){this.options.colors=[successColor,primaryColor],this.options.grid.backgroundColor={colors:["#fff","#fff"]};null==this.plot&&(this.data.d1=[[6,1300],[7,1600],[8,1900],[9,2100],[10,2500],[11,2200],[12,2e3],[13,1950],[14,1900],[15,2e3]],this.data.d2=[[6,500],[7,600],[8,550],[9,600],[10,800],[11,900],[12,800],[13,850],[14,830],[15,1e3]]),this.plot=e.plot(e(this.placeholder),[{label:"Data 1",data:this.data.d1,lines:{fill:.05},points:{fillColor:"#fff"}},{label:"Data 2",data:this.data.d2,lines:{fill:.1},points:{fillColor:this.options.colors[1]}}],this.options)}},charts.chart_simple.init()}}(jQuery)}function uniformInit(){!function(e){e(".uniformjs").length&&e(".uniformjs").find(":checkbox, :radio").uniform()}(jQuery)}function calendarInit(){$((function(){$("#external-events ul li").each((function(){var e={title:$.trim($(this).text())};$(this).data("eventObject",e),$(this).draggable({zIndex:999,revert:!0,revertDuration:0,start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}})})),$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},editable:!0,droppable:!0,events:"/html/admin/ajax/calendarEvents.json",drop:function(e,t){var n=$(this).data("eventObject"),i=$.extend({},n);i.start=e,i.allDay=t,$("#calendar").fullCalendar("renderEvent",i,!0),$("#drop-remove").is(":checked")&&$(this).remove()}})}))}function switchBootstrap(){!function(e){"use strict";e.fn.bootstrapSwitch=function(t){var n='input[type!="hidden"]',i={init:function(){return this.each((function(){var t,i,o,a,r,s,l=e(this),c=l.closest("form"),d="",u=l.attr("class"),h="ON",p="OFF",f=!1,m=!1;e.each(["switch-mini","switch-small","switch-large"],(function(e,t){u.indexOf(t)>=0&&(d=t)})),l.addClass("has-switch"),void 0!==l.data("on")&&(r="switch-"+l.data("on")),void 0!==l.data("on-label")&&(h=l.data("on-label")),void 0!==l.data("off-label")&&(p=l.data("off-label")),void 0!==l.data("label-icon")&&(f=l.data("label-icon")),void 0!==l.data("text-label")&&(m=l.data("text-label")),i=e("<span>").addClass("switch-left").addClass(d).addClass(r).html(h),r="",void 0!==l.data("off")&&(r="switch-"+l.data("off")),o=e("<span>").addClass("switch-right").addClass(d).addClass(r).html(p),a=e("<label>").html("&nbsp;").addClass(d).attr("for",l.find(n).attr("id")),f&&a.html('<i class="icon '+f+'"></i>'),m&&a.html(""+m),t=l.find(n).wrap(e("<div>")).parent().data("animated",!1),!1!==l.data("animated")&&t.addClass("switch-animate").data("animated",!0),t.append(i).append(a).append(o),l.find(">div").addClass(l.find(n).is(":checked")?"switch-on":"switch-off"),l.find(n).is(":disabled")&&e(this).addClass("deactivate");var g=function(e){l.parent("label").is(".label-change-switch")||e.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};l.on("keydown",(function(t){32===t.keyCode&&(t.stopImmediatePropagation(),t.preventDefault(),g(e(t.target).find("span:first")))})),i.on("click",(function(t){g(e(this))})),o.on("click",(function(t){g(e(this))})),l.find(n).on("change",(function(t,n){var i=e(this),o=i.parent(),a=i.is(":checked"),r=o.is(".switch-off");if(t.preventDefault(),o.css("left",""),r===a){if(a?o.removeClass("switch-off").addClass("switch-on"):o.removeClass("switch-on").addClass("switch-off"),!1!==o.data("animated")&&o.addClass("switch-animate"),"boolean"==typeof n&&n)return;o.parent().trigger("switch-change",{el:i,value:a})}})),l.find("label").on("mousedown touchstart",(function(t){var n=e(this);s=!1,t.preventDefault(),t.stopImmediatePropagation(),n.closest("div").removeClass("switch-animate"),n.closest(".has-switch").is(".deactivate")||n.closest(".switch-on").parent().is(".radio-no-uncheck")?n.unbind("click"):(n.on("mousemove touchmove",(function(t){var n=e(this).closest(".make-switch"),i=((t.pageX||t.originalEvent.targetTouches[0].pageX)-n.offset().left)/n.width()*100;s=!0,i<25?i=25:i>75&&(i=75),n.find(">div").css("left",i-75+"%")})),n.on("click touchend",(function(t){var n=e(this),i=e(t.target).siblings("input");t.stopImmediatePropagation(),t.preventDefault(),n.unbind("mouseleave"),s?i.prop("checked",!(parseInt(n.parent().css("left"))<-25)):i.prop("checked",!i.is(":checked")),s=!1,i.trigger("change")})),n.on("mouseleave",(function(t){var n=e(this),i=n.siblings("input");t.preventDefault(),t.stopImmediatePropagation(),n.unbind("mouseleave"),n.trigger("mouseup"),i.prop("checked",!(parseInt(n.parent().css("left"))<-25)).trigger("change")})),n.on("mouseup",(function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).unbind("mousemove")})))})),"injected"!==c.data("bootstrapSwitch")&&(c.bind("reset",(function(){setTimeout((function(){c.find(".make-switch").each((function(){var t=e(this).find(n);t.prop("checked",t.is(":checked")).trigger("change")}))}),1)})),c.data("bootstrapSwitch","injected"))}))},toggleActivation:function(){var t=e(this);t.toggleClass("deactivate"),t.find(n).prop("disabled",t.is(".deactivate"))},isActive:function(){return!e(this).hasClass("deactivate")},setActive:function(t){var i=e(this);t?(i.removeClass("deactivate"),i.find(n).removeAttr("disabled")):(i.addClass("deactivate"),i.find(n).attr("disabled","disabled"))},toggleState:function(t){var n=e(this).find(":checkbox");n.prop("checked",!n.is(":checked")).trigger("change",t)},toggleRadioState:function(t){var n=e(this).find(":radio");n.not(":checked").prop("checked",!n.is(":checked")).trigger("change",t)},toggleRadioStateAllowUncheck:function(t,n){var i=e(this).find(":radio");t?i.not(":checked").trigger("change",n):i.not(":checked").prop("checked",!i.is(":checked")).trigger("change",n)},setState:function(t,i){e(this).find(n).prop("checked",t).trigger("change",i)},setOnLabel:function(t){e(this).find(".switch-left").html(t)},setOffLabel:function(t){e(this).find(".switch-right").html(t)},setOnClass:function(t){var n=e(this).find(".switch-left"),i="";void 0!==t&&(void 0!==e(this).attr("data-on")&&(i="switch-"+e(this).attr("data-on")),n.removeClass(i),i="switch-"+t,n.addClass(i))},setOffClass:function(t){var n=e(this).find(".switch-right"),i="";void 0!==t&&(void 0!==e(this).attr("data-off")&&(i="switch-"+e(this).attr("data-off")),n.removeClass(i),i="switch-"+t,n.addClass(i))},setAnimated:function(t){var i=e(this).find(n).parent();void 0===t&&(t=!1),i.data("animated",t),i.attr("data-animated",t),!1!==i.data("animated")?i.addClass("switch-animate"):i.removeClass("switch-animate")},setSizeClass:function(t){var n=e(this),i=n.find(".switch-left"),o=n.find(".switch-right"),a=n.find("label");e.each(["switch-mini","switch-small","switch-large"],(function(e,n){n!==t?(i.removeClass(n),o.removeClass(n),a.removeClass(n)):(i.addClass(n),o.addClass(n),a.addClass(n))}))},status:function(){return e(this).find(n).is(":checked")},destroy:function(){var t,n=e(this),i=n.find("div"),o=n.closest("form");return i.find(":not(input)").remove(),(t=i.children()).unwrap().unwrap(),t.unbind("change"),o&&(o.unbind("reset"),o.removeData("bootstrapSwitch")),t}};return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist!"):i.init.apply(this,arguments)}}(jQuery)}function bootstrapSwitchInit(){!function(e){void 0!==e.fn.bootstrapSwitch&&e(".make-switch").length&&e(".make-switch:not(.has-switch)").bootstrapSwitch()}(jQuery)}function formValidatorInit(){$.validator.setDefaults({submitHandler:function(){alert("submitted!")},showErrors:function(e,t){this.currentElements.parents("label:first, div:first").find(".has-error").remove(),this.currentElements.parents(".form-group:first").removeClass("has-error"),$.each(t,(function(e,t){var n=$(t.element),i=n.parents("label:first").length?n.parents("label:first"):n.parents("div:first");n.parents(".form-group:first").addClass("has-error"),i.find(".has-error").remove(),i.append('<p class="has-error help-block">'+t.message+"</p>")}))}}),$((function(){$("#validateSubmitForm").validate({rules:{firstname:"required",lastname:"required",username:{required:!0,minlength:2},password:{required:!0,minlength:5},confirm_password:{required:!0,minlength:5,equalTo:"#password"},email:{required:!0,email:!0},topic:{required:"#newsletter:checked",minlength:2},agree:"required"},messages:{firstname:"Please enter your firstname",lastname:"Please enter your lastname",username:{required:"Please enter a username",minlength:"Your username must consist of at least 2 characters"},password:{required:"Please provide a password",minlength:"Your password must be at least 5 characters long"},confirm_password:{required:"Please provide a password",minlength:"Your password must be at least 5 characters long",equalTo:"Please enter the same password as above"},email:"Please enter a valid email address",agree:"Please accept our policy"}}),$("#username").focus((function(){var e=$("#firstname").val(),t=$("#lastname").val();e&&t&&!this.value&&(this.value=e+"."+t)}));var e=$("#newsletter"),t=e.is(":checked"),n=$("#newsletter_topics")[t?"removeClass":"addClass"]("gray"),i=n.find("input").attr("disabled",!t);e.click((function(){n[this.checked?"removeClass":"addClass"]("gray"),i.attr("disabled",!this.checked)}))}))}function dropzoneInit(){!function(e){"undefined"!=typeof Dropzone&&(Dropzone.autoDiscover=!1),"undefined"!=e.fn.dropzone&&e(".dropzone").dropzone()}(jQuery)}function plUploadInit(){$((function(){$("#pluploadUploader").pluploadQueue({runtimes:"gears,browserplus,html5",url:"upload.php",max_file_size:"10mb",chunk_size:"1mb",unique_names:!0,resize:{width:320,height:240,quality:90},filters:[{title:"Image files",extensions:"jpg,gif,png"},{title:"Zip files",extensions:"zip"}],flash_swf_url:"plupload.flash.swf",silverlight_xap_url:"plupload.silverlight.xap"}),$("#pluploadForm").submit((function(e){var t=$("#pluploadUploader").pluploadQueue();return t.files.length>0?(t.bind("StateChanged",(function(){t.files.length===t.total.uploaded+t.total.failed&&$("#pluploadForm").submit()})),t.start()):alert("You must queue at least one file."),!1}))}))}function coreInit(){window.location!=window.parent.location&&(top.location.href=document.location.href),function(e,t){t.onunload=function(){},e.expr[":"].scrollable=function(t){var n=!1,i=/^(?:auto|scroll)$/i;t=e(t);return e.each(["","-x","-y"],(function(e,o){return!(n=n||i.test(t.css("overflow"+o)))})),n},!Modernizr.touch&&e('[href="#template-options"][data-auto-open]').length&&e("#template-options").collapse("show"),t.beautify=function(e){var t={preserve_newlines:!1};return html_beautify(e,t)},t.mt_rand=function(e,t){var n=arguments.length;if(0===n)e=0,t=2147483647;else{if(1===n)throw new Error("Warning: mt_rand() expects exactly 2 parameters, 1 given");e=parseInt(e,10),t=parseInt(t,10)}return Math.floor(Math.random()*(t-e+1))+e},t.resizeNiceScroll=function(){setTimeout((function(){e(".hasNiceScroll, #menu_kis, #menu").getNiceScroll().show().resize()}),100)},e(".render-my-account [data-toggle='tooltip'], .render-buttons-icons [data-toggle='tooltip']").tooltip(),e('[data-toggle="popover"]').popover(),e('[data-toggle="print"]').click((function(e){e.preventDefault(),t.print()})),e(".carousel").each((function(){e(this).carousel()})),e(".prettyprint").length&&"undefined"!=typeof prettyPrint&&prettyPrint(),e('[data-toggle="hide"]').click((function(){var t;e(this).is(".bootboxTarget")?bootbox.alert(e(e(this).attr("data-target")).html()):(e(e(this).attr("data-target")).toggleClass("hide"),e(this).is(".scrollTarget")&&!e(e(this).attr("data-target")).is(".hide")&&(t=e(this).attr("data-target"),e(t).length&&e("html,body").animate({scrollTop:e(t).offset().top},"slow")))})),e("ul.collapse").on("show.bs.collapse",(function(t){t.stopPropagation(),e(this).closest("li").addClass("active")})).on("hidden.bs.collapse",(function(t){t.stopPropagation(),e(this).closest("li").removeClass("active")})),e('[data-toggle="navbar-color"]').on("click",(function(t){t.preventDefault(),e(this).is(".active")||(e(".navbar.main").toggleClass("navbar-inverse"),e(this).parent().find('[data-toggle="navbar-color"].active').removeClass("active"),e(this).addClass("active"))})),t.enableContentNiceScroll=function(t){if(!e("html").is(".ie")&&!Modernizr.touch&&void 0!==e.fn.niceScroll){if(void 0===t)t=!0;e("#content .col-app, .col-separator").filter(":scrollable").not(".col-unscrollable").filter((function(){return!e(this).find("> .col-table").length})).addClass("hasNiceScroll").each((function(){e(this).niceScroll({horizrailenabled:!1,zindex:2,cursorborder:"none",cursorborderradius:"0",cursorcolor:primaryColor}),1==t?e(this).getNiceScroll().hide():e(this).getNiceScroll().resize().show()}))}},t.disableContentNiceScroll=function(){e("#content .hasNiceScroll").getNiceScroll().remove()},enableContentNiceScroll(),e("html").is(".ie")&&e("html").removeClass("app"),e("body").on("mouseenter",'[data-toggle="dropdown"].dropdown-hover',(function(){e(this).parent(".dropdown").is(".open")||e(this).click()})),e(".navbar.main").add("#menu-top").on("mouseleave",(function(){e(this).find(".dropdown.open").find('> [data-toggle="dropdown"]').click()})),e("[data-height]").each((function(){e(this).height(e(this).data("height"))})),e('.app [data-toggle="tab"]').on("shown.bs.tab",(function(t){e(".hasNiceScroll").getNiceScroll().resize()})),t.enableNavbarMenusHover=function(){e('.navbar.main [data-toggle="dropdown"]').add('#menu-top [data-toggle="dropdown"]').addClass("dropdown-hover")},t.disableNavbarMenusHover=function(){e('.navbar.main [data-toggle="dropdown"]').add('#menu-top [data-toggle="dropdown"]').removeClass("dropdown-hover")},t.enableResponsiveNavbarSubmenus=function(){e(".navbar .dropdown-submenu > a").on("click",(function(t){t.preventDefault(),t.stopPropagation(),e(this).parent().toggleClass("open")}))},t.disableResponsiveNavbarSubmenus=function(){e(".navbar .dropdown-submenu > a").off("click").parent().removeClass("open")},void 0!==e.fn.setBreakpoints&&(e(t).setBreakpoints({distinct:!1,breakpoints:[768,992]}),e(t).bind("exitBreakpoint768",(function(){e(".container-fluid").addClass("menu-hidden"),disableNavbarMenusHover(),enableResponsiveNavbarSubmenus()})),e(t).bind("enterBreakpoint768",(function(){e(".container-fluid").removeClass("menu-hidden"),enableNavbarMenusHover(),disableResponsiveNavbarSubmenus()})),e(t).bind("exitBreakpoint992",(function(){disableContentNiceScroll()})),e(t).bind("enterBreakpoint992",(function(){enableContentNiceScroll(!1)}))),e(t).on("load",(function(){e(t).width()<992&&e(".hasNiceScroll").getNiceScroll().stop(),e(t).width()<768?enableResponsiveNavbarSubmenus():enableNavbarMenusHover(),"undefined"==typeof animations&&void 0!==e.fn.niceScroll&&e(".hasNiceScroll, #menu_kis, #menu").getNiceScroll().show().resize(),"undefined"!=typeof Holder&&(Holder.add_theme("dark",{background:"#424242",foreground:"#aaa",size:9}).run(),Holder.add_theme("white",{background:"#fff",foreground:"#c9c9c9",size:9}).run())}))}(jQuery,window)}function medicalInit(){!function(e){"undefined"!=typeof charts&&(charts.metricsDrawHook=function(t,n){var i=e("#metrics table");i.length&&(i.length&&i.is(".metricsDrawHook")||(i.addClass("metricsDrawHook"),i.find("tr").append('<td class="legendSelect"><input type="checkbox" checked="checked"></td>')))},charts.chart_gender={data:null,plot:null,options:{bars:{show:!0,barWidth:.3,fill:1},grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:0,borderColor:null,minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20,backgroundColor:{}},legend:{show:!1,position:"ne",backgroundColor:null,backgroundOpacity:0},colors:[]},placeholder:"#chart_gender",init:function(){if(e(this.placeholder).length){this.options.colors=["#D67FB0","#4193d0"],this.options.grid.backgroundColor={colors:["transparent","transparent"]},this.options.grid.borderColor=primaryColor,this.options.grid.color=primaryColor;for(var t=[],n=0;n<=10;n+=1)t.push([n,parseInt(30*Math.random())]);var i=[];for(n=0;n<=10;n+=1)i.push([n,parseInt(30*Math.random())]);var o=new Array;o.push({label:"Data One",data:t,bars:{order:1}}),o.push({label:"Data Two",data:i,bars:{order:2}}),this.data=o,this.plot=e.plot(e(this.placeholder),this.data,this.options)}}},charts.chart_metrics={data:{d:[]},plot:null,options:{grid:{show:!0,aboveData:!0,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:0,borderColor:null,minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!0,mouseActiveRadius:20,backgroundColor:{}},series:{grow:{active:!0,duration:200},lines:{show:!0,fill:.07,lineWidth:2},points:{show:!1}},legend:{backgroundColor:null,backgroundOpacity:0,container:e("#metrics"),labelFormatter:function(e,t){return'<a href="#" data-toggle="charts-metrics-toggle" data-series-idx="'+t.idx+'">'+e+"</a>"}},yaxis:{min:0},xaxis:{ticks:11,tickDecimals:0},colors:[],shadowSize:1,tooltip:!0,tooltipOpts:{content:"%s : %y.0",shifts:{x:-30,y:-50},defaultTheme:!1},hooks:{draw:[charts.metricsDrawHook]}},placeholder:"#chart_metrics",toggle:function(e){var t=this.plot.getData();if("down"==t[e].grow.growings[0].stepDirection)t[e].grow.growings[0].stepDirection="up",t[e].data=this.data.d[e];else{var n=t[e].data.length;t[e].data=[];for(var i=1;i<=n;i++)t[e].data.push([i,0]);t[e].grow.growings[0].stepDirection="down"}this.plot.setData(t),this.plot.draw()},changeData:function(){var t=this.plot.getData(),n=this;this.data.d=[];for(var i=0;i<=5;i++){this.data.d.push([]);for(var o=1;o<=30;o++)this.data.d[i].push([o,10*(6-i)+charts.utility.randNum()])}e.each(t,(function(i,o){var a=e('[data-series-idx="'+i+'"]').closest("tr").find(":checked").length;t[i].data=a?n.data.d[i]:[]})),this.plot.setData(t),this.plot.draw()},init:function(){if(e(this.placeholder).length){e("body").on("click",'[data-toggle="charts-metrics-toggle"]',(function(t){t.preventDefault(),charts.chart_metrics.toggle(e(this).attr("data-series-idx"))})).on("change",".legendSelect :checkbox",(function(){var t=e(this).closest("tr").find('[data-toggle="charts-metrics-toggle"]').attr("data-series-idx");charts.chart_metrics.toggle(t)})).on("click","#metrics table tr",(function(t){if(!e(t.target).is("a")&&!e(t.target).is(":checkbox")){var n=e(this).find(":checkbox");n.prop("checked",!n.prop("checked")).trigger("change")}})).on("click",'[data-toggle="charts-metrics-changedata"] .btn',(function(){e(this).is(".active")||(e('[data-toggle="charts-metrics-changedata"] .btn.active').removeClass("active"),e(this).addClass("active"),charts.chart_metrics.changeData())})),this.options.colors=[primaryColor,"#cc6666","#cca366","#b7cc66","#7acc66","#66cccc"],this.options.grid.backgroundColor={colors:["transparent","transparent"]},this.options.grid.borderColor=primaryColor,this.options.grid.color=primaryColor;for(var t=0;t<=5;t++){this.data.d.push([]);for(var n=1;n<=30;n++)this.data.d[t].push([n,10*(6-t)+charts.utility.randNum()])}this.plot=e.plot(this.placeholder,[{label:"Hypertension",data:this.data.d[0],idx:0,grow:{growings:[{stepMode:"linear"}]}},{label:"Blood Pressure",data:this.data.d[1],idx:1},{label:"Blood Sugar",data:this.data.d[2],idx:2},{label:"Alergy",data:this.data.d[3],idx:3},{label:"Macrobacterium",data:this.data.d[4],idx:4},{label:"Quadrigeminy",data:this.data.d[5],idx:5}],this.options)}}},charts.chart_gender.init(),charts.chart_metrics.init())}(jQuery)}function tablesResponsiveFootableInit(){$((function(){$(".footable").length&&$(".footable").footable()}))}function initDashboard(){animationsInit(),easyPieInit(),widgetScrollableInit(),bootstrapDatepickerInit(),flotchartSimpleInit(),flotchartSimpleBarsInit()}function initPortfolio(){prettyPhotoInit(),mixItUpInit()}function initSupportTickets(){bootstrapDatepickerInit(),fueluxCheckBoxInit()}function initSupportQuestions(){fueluxCheckBoxInit()}function initSupportAnswers(){fueluxCheckBoxInit()}function initEvents(){eventsCarouselInit()}function initPhotoGallery(){gridaliciousInit()}function initGalleryVideo(){gridaliciousInit(),prettyPhotoInit()}function initCarousel(){gridaliciousInit()}function initButtons(){jqueryBootpagInit(),uiInit()}function tablesInit(){jQueryDataTables(),colVis(),dtBootstrap(),dataTablesInit(),fueluxCheckBoxInit(),bootstrapSelectInit(),tablesClassicInit()}function tablesResponsiveInit(){footableJQuery(),tablesResponsiveFootableInit()}function initNotifications(){notyfyInit(),gritterInit()}function initModals(){fueluxCheckBoxInit(),modalsBootBoxInit(),gritterInit(),wysiHTML5(),formWizardsInit()}function initWidgets(){holderInit(),easyPieInit(),widgetCollapsibleInit(),widgetProgressInit(),widgetScrollableInit()}function initCalendar(){uniformInit(),calendarInit(),bootstrapDatepickerInit()}function initSliders(){jQueryRangeSliders(),jqueryUiSlidersInit(),rangeSlidersInit()}function initFormWizards(){wysiHTML5(),formWizardsInit()}function colorPickerInit(){var e=$("#colorpickerColor");e.colorpicker(),e.on("colorpickerChange",(function(t){e.css("background-color",t.color.toString())}))}function inputMaskInit(){$("#inputmask-date").inputmask("99/99/9999"),$("#inputmask-date-1").inputmask("99/99/9999"),$("#inputmask-date-2").inputmask("dd/mm/yyyy"),$("#inputmask-currency").inputmask("€ 999.999.999,99"),$("#inputmask-phone").inputmask("(999) 999-9999"),$("#inputmask-tax").inputmask("99-9999999"),$("#inputmask-decimal").inputmask("999.99"),$("#inputmask-ssn").inputmask("999-99-9999")}function initFormElements(){switchBootstrap(),bootstrapSwitchInit(),fueluxCheckBoxInit(),formWizardsInit(),bootstrapDatepickerInit(),bootstrapTimePickerInit(),colorPickerInit(),inputMaskInit()}function initFormValidator(){formValidatorInit()}function initFileManger(){plUploadInit(),dropzoneInit()}function initInbox(){coreInit()}function initFinances(){flotchartFinancesSimpleInit()}function initInvoice(){coreInit()}function initBookings(){tablesClassicInit(),bootstrapSelectInit()}function initMedicalOverview(){easyPieInit(),medicalInit()}function initMedicalAppointments(){bootstrapDatepickerInit()}function initMedicalMetrics(){medicalInit()}function initSocial(){holderInit()}function initShopEditProductsInit(){wysiHTML5()}function initShopProductsInit(){holderInit(),bootstrapSelectInit(),uniformInit(),tablesClassicInit()}function initMyAccountInit(){holderInit(),wysiHTML5()}function initRatings(){holderInit(),tablesResponsiveFootableInit()}function removeStyleAttr(){var e=$("body");setTimeout((function(){e.removeAttr("style")}),1e3)}function initCharts(){flotchartSimple02Init(),flotChartLineInit(),flotchartBarsOrderedInit(),flotchartBarsStackedInit(),flotchartDonutInit(),flotchartPieInit(),flotchartBarsHorizontalInit(),flotchartAutoUpdatingInit()}$((function(){var e=$("body"),t=$("document");initRatings(),initMyAccountInit(),initShopProductsInit(),initShopEditProductsInit(),initSocial(),initMedicalMetrics(),initMedicalAppointments(),initMedicalOverview(),initBookings(),initInvoice(),initInbox(),initFileManger(),initFormValidator(),initFormElements(),initFormWizards(),initSliders(),initCalendar(),initWidgets(),initModals(),initNotifications(),tablesResponsiveInit(),tablesInit(),initButtons(),initCarousel(),initGalleryVideo(),initPhotoGallery(),initEvents(),initSupportAnswers(),initSupportQuestions(),initSupportTickets(),initPortfolio(),mapsVectorInit(),$(".dataTables_wrapper").find(".separator").addClass("d-flex flex-row"),e.on("click","#blueimp-gallery .close.no-ajaxify",(function(){removeStyleAttr()})),t.on("keyup",(function(e){"Escape"===e.key&&removeStyleAttr()})),e.on("click",".spinner-border-btn",(function(){var e=$(this);0===$(".spinner-border").length&&e.prepend('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>')}))}));var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=_self.Prism={manual:_self.Prism&&_self.Prism.manual,util:{encode:function(e){return e instanceof i?new i(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){switch(n.util.type(e)){case"Object":var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=n.util.clone(e[i]));return t;case"Array":return e.map&&e.map((function(e){return n.util.clone(e)}))}return e}},languages:{extend:function(e,t){var i=n.util.clone(n.languages[e]);for(var o in t)i[o]=t[o];return i},insertBefore:function(e,t,i,o){var a=(o=o||n.languages)[e];if(2==arguments.length){for(var r in i=arguments[1])i.hasOwnProperty(r)&&(a[r]=i[r]);return a}var s={};for(var l in a)if(a.hasOwnProperty(l)){if(l==t)for(var r in i)i.hasOwnProperty(r)&&(s[r]=i[r]);s[l]=a[l]}return n.languages.DFS(n.languages,(function(t,n){n===o[e]&&t!=e&&(this[t]=s)})),o[e]=s},DFS:function(e,t,i,o){for(var a in o=o||{},e)e.hasOwnProperty(a)&&(t.call(e,a,e[a],i||a),"Object"!==n.util.type(e[a])||o[n.util.objId(e[a])]?"Array"!==n.util.type(e[a])||o[n.util.objId(e[a])]||(o[n.util.objId(e[a])]=!0,n.languages.DFS(e[a],t,a,o)):(o[n.util.objId(e[a])]=!0,n.languages.DFS(e[a],t,null,o)))}},plugins:{},highlightAll:function(e,t){var i={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",i);for(var o,a=i.elements||document.querySelectorAll(i.selector),r=0;o=a[r++];)n.highlightElement(o,!0===e,i.callback)},highlightElement:function(t,i,o){for(var a,r,s=t;s&&!e.test(s.className);)s=s.parentNode;s&&(a=(s.className.match(e)||[,""])[1].toLowerCase(),r=n.languages[a]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+a,s=t.parentNode,/pre/i.test(s.nodeName)&&(s.className=s.className.replace(e,"").replace(/\s+/g," ")+" language-"+a);var l={element:t,language:a,grammar:r,code:t.textContent};if(n.hooks.run("before-sanity-check",l),!l.code||!l.grammar)return l.code&&(n.hooks.run("before-highlight",l),l.element.textContent=l.code,n.hooks.run("after-highlight",l)),void n.hooks.run("complete",l);if(n.hooks.run("before-highlight",l),i&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(e){l.highlightedCode=e.data,n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,o&&o.call(l.element),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},c.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else l.highlightedCode=n.highlight(l.code,l.grammar,l.language),n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,o&&o.call(t),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},highlight:function(e,t,o){var a=n.tokenize(e,t);return i.stringify(n.util.encode(a),o)},matchGrammar:function(e,t,i,o,a,r,s){var l=n.Token;for(var c in i)if(i.hasOwnProperty(c)&&i[c]){if(c==s)return;var d=i[c];d="Array"===n.util.type(d)?d:[d];for(var u=0;u<d.length;++u){var h=d[u],p=h.inside,f=!!h.lookbehind,m=!!h.greedy,g=0,v=h.alias;if(m&&!h.pattern.global){var b=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,b+"g")}h=h.pattern||h;for(var y=o,w=a;y<t.length;w+=t[y].length,++y){var x=t[y];if(t.length>e.length)return;if(!(x instanceof l)){h.lastIndex=0;var C=1;if(!(D=h.exec(x))&&m&&y!=t.length-1){if(h.lastIndex=w,!(D=h.exec(e)))break;for(var S=D.index+(f?D[1].length:0),_=D.index+D[0].length,k=y,T=w,E=t.length;E>k&&(_>T||!t[k].type&&!t[k-1].greedy);++k)S>=(T+=t[k].length)&&(++y,w=T);if(t[y]instanceof l||t[k-1].greedy)continue;C=k-y,x=e.slice(w,T),D.index-=w}if(D){f&&(g=D[1].length);_=(S=D.index+g)+(D=D[0].slice(g)).length;var D,I=x.slice(0,S),N=x.slice(_),A=[y,C];I&&(++y,w+=I.length,A.push(I));var P=new l(c,p?n.tokenize(D,p):D,v,D,m);if(A.push(P),N&&A.push(N),Array.prototype.splice.apply(t,A),1!=C&&n.matchGrammar(e,t,i,y,w,!0,c),r)break}else if(r)break}}}}},tokenize:function(e,t){var i=[e],o=t.rest;if(o){for(var a in o)t[a]=o[a];delete t.rest}return n.matchGrammar(e,i,t,0,0,!1),i},hooks:{all:{},add:function(e,t){var i=n.hooks.all;i[e]=i[e]||[],i[e].push(t)},run:function(e,t){var i=n.hooks.all[e];if(i&&i.length)for(var o,a=0;o=i[a++];)o(t)}}},i=n.Token=function(e,t,n,i,o){this.type=e,this.content=t,this.alias=n,this.length=0|(i||"").length,this.greedy=!!o};if(i.stringify=function(e,t,o){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map((function(n){return i.stringify(n,t,e)})).join("");var a={type:e.type,content:i.stringify(e.content,t,o),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:o};if("comment"==a.type&&(a.attributes.spellcheck="true"),e.alias){var r="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(a.classes,r)}n.hooks.run("wrap",a);var s=Object.keys(a.attributes).map((function(e){return e+'="'+(a.attributes[e]||"").replace(/"/g,"&quot;")+'"'})).join(" ");return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+(s?" "+s:"")+">"+a.content+"</"+a.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",(function(e){var t=JSON.parse(e.data),i=t.language,o=t.code,a=t.immediateClose;_self.postMessage(n.highlight(o,n.languages[i],i)),a&&_self.close()}),!1),_self.Prism):_self.Prism;var o=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return o&&(n.filename=o.src,!document.addEventListener||n.manual||o.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener("DOMContentLoaded",n.highlightAll))),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[[^\]\r\n]+]|\\.|[^\/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript;var melisDesignTinySlider=function(e){var t=$("body"),n=$("<input>");$btn_copy_clipboard=$(".tiny-slider .btn-clipboard"),t.on("click",".btn-clipboard",(function(){var e,i=$(this);e=i.closest(".tab-pane.active").find("pre"),t.append(n),n.val($(e).text()).trigger("select"),document.execCommand("copy"),n.remove()}))}(window);
